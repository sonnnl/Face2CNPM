{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kasiz\\\\Documents\\\\Studying\\\\FaceReg\\\\frontend\\\\src\\\\pages\\\\teacher\\\\ClassDetailPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\nimport { useSnackbar } from \"notistack\";\nimport axios from \"axios\";\nimport { Box, Typography, Card, CardContent, Grid, Paper, Button, Tabs, Tab, CircularProgress, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, Chip, IconButton, Dialog, DialogTitle, DialogContent, DialogActions, TextField, FormControl, InputLabel, Select, MenuItem, List, ListItem, ListItemText, ListItemSecondaryAction, Divider, Alert, Tooltip, Checkbox, FormHelperText, AlertTitle, ListItemIcon } from \"@mui/material\";\nimport { PersonAdd, Delete, Add, Edit, PlayArrow, Stop, CheckCircle, Warning, Info, CalendarToday, AccessTime, Download, School, Settings, Event, Person, Room, Assignment as AssignmentIcon } from \"@mui/icons-material\";\nimport { getTeachingClassById, updateTeachingClass, checkScheduleConflicts } from \"../../services/api\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst API_URL = process.env.REACT_APP_API_URL || \"http://localhost:5000/api\";\n\n// --- Định nghĩa thời gian tiết học --- (Thêm vào đây)\nconst periodTimings = {\n  1: {\n    start: \"07:00\",\n    end: \"07:45\"\n  },\n  2: {\n    start: \"07:50\",\n    end: \"08:35\"\n  },\n  3: {\n    start: \"08:40\",\n    end: \"09:25\"\n  },\n  4: {\n    start: \"09:35\",\n    end: \"10:20\"\n  },\n  5: {\n    start: \"10:25\",\n    end: \"11:10\"\n  },\n  6: {\n    start: \"11:15\",\n    end: \"12:00\"\n  },\n  7: {\n    start: \"13:00\",\n    end: \"13:45\"\n  },\n  8: {\n    start: \"13:50\",\n    end: \"14:35\"\n  },\n  9: {\n    start: \"14:40\",\n    end: \"15:25\"\n  },\n  10: {\n    start: \"15:35\",\n    end: \"16:20\"\n  },\n  11: {\n    start: \"16:25\",\n    end: \"17:10\"\n  },\n  12: {\n    start: \"17:15\",\n    end: \"18:00\"\n  },\n  13: {\n    start: \"18:05\",\n    end: \"18:50\"\n  },\n  14: {\n    start: \"18:55\",\n    end: \"19:40\"\n  },\n  15: {\n    start: \"19:45\",\n    end: \"20:30\"\n  }\n};\n// --- Kết thúc định nghĩa ---\n\nfunction a11yProps(index) {\n  return {\n    id: `class-tab-${index}`,\n    \"aria-controls\": `class-tabpanel-${index}`\n  };\n}\nfunction TabPanel(props) {\n  const {\n    children,\n    value,\n    index,\n    ...other\n  } = props;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    role: \"tabpanel\",\n    hidden: value !== index,\n    id: `class-tabpanel-${index}`,\n    \"aria-labelledby\": `class-tab-${index}`,\n    ...other,\n    children: value === index && /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        p: 3\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 27\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 5\n  }, this);\n}\n_c = TabPanel;\nconst TeacherClassDetailPage = () => {\n  _s();\n  var _classInfo$subject_id2, _classInfo$semester_i2, _classInfo$main_class2, _classInfo$teacher_id2, _classInfo$semester_i3, _classInfo$semester_i4;\n  const {\n    classId\n  } = useParams();\n  const id = classId; // Đảm bảo sử dụng đúng tên param\n  const navigate = useNavigate();\n  const {\n    enqueueSnackbar\n  } = useSnackbar();\n  const {\n    token\n  } = useSelector(state => state.auth);\n\n  // State cho dữ liệu\n  const [classInfo, setClassInfo] = useState(null);\n  const [students, setStudents] = useState([]);\n  const [attendanceSessions, setAttendanceSessions] = useState([]);\n  const [attendanceStats, setAttendanceStats] = useState({\n    total: 0,\n    pending: 0,\n    completed: 0\n  });\n  const [isLoading, setIsLoading] = useState(true);\n  const [isUpdating, setIsUpdating] = useState(false);\n\n  // State cho UI\n  const [tabValue, setTabValue] = useState(0);\n  const [openSessionDialog, setOpenSessionDialog] = useState(false);\n  const [sessionFormData, setSessionFormData] = useState({\n    title: \"\",\n    date: new Date().toISOString().split(\"T\")[0],\n    start_time: \"07:00\",\n    end_time: \"08:40\",\n    room: \"\",\n    session_number: attendanceSessions.length + 1,\n    start_period: 1,\n    end_period: 2,\n    notes: \"\"\n  });\n\n  // State cho thêm sinh viên\n  const [openAddStudentDialog, setOpenAddStudentDialog] = useState(false);\n  const [availableStudents, setAvailableStudents] = useState([]);\n  const [selectedStudents, setSelectedStudents] = useState([]);\n  const [searchStudent, setSearchStudent] = useState(\"\");\n  const [mainClasses, setMainClasses] = useState([]);\n  const [selectedMainClass, setSelectedMainClass] = useState(\"\");\n  const [isLoadingStudents, setIsLoadingStudents] = useState(false);\n\n  // State cho chỉnh sửa thông tin lớp học\n  const [openEditClassDialog, setOpenEditClassDialog] = useState(false);\n  const [editClassData, setEditClassData] = useState(null);\n  const [isSubmittingEdit, setIsSubmittingEdit] = useState(false);\n  const [subjects, setSubjects] = useState([]);\n  const [semesters, setSemesters] = useState([]);\n\n  // Thêm state để lưu danh sách phòng học\n  const [rooms, setRooms] = useState([]);\n  const [campuses, setCampuses] = useState([]);\n  const [buildings, setBuildings] = useState([]);\n  const [selectedCampus, setSelectedCampus] = useState(\"\");\n  const [selectedBuilding, setSelectedBuilding] = useState(\"\");\n\n  // Thêm state để quản lý lịch học\n  const [scheduleDays, setScheduleDays] = useState([]);\n\n  // Thêm state để lưu cảnh báo xung đột lịch\n  const [conflictWarnings, setConflictWarnings] = useState([]);\n  const [checkingConflicts, setCheckingConflicts] = useState(false);\n\n  // State cho dialog ghi chú\n  const [openNotesDialog, setOpenNotesDialog] = useState(false);\n  const [currentSessionForNotes, setCurrentSessionForNotes] = useState(null);\n  const [notesText, setNotesText] = useState(\"\");\n  const [isSavingNotes, setIsSavingNotes] = useState(false);\n\n  // State kiểm tra lớp học đã bắt đầu chưa - SẼ ĐƯỢC THAY THẾ\n  // const [isCourseStarted, setIsCourseStarted] = useState(false);\n  const [derivedClassStatus, setDerivedClassStatus] = useState(\"LOADING\"); // Trạng thái mới, tiếng Anh\n\n  // Thêm hàm fetch danh sách phòng học\n  const fetchRooms = async buildingId => {\n    try {\n      let url = `${API_URL}/facilities/rooms`;\n\n      // Nếu có buildingId, tải phòng theo tòa nhà\n      if (buildingId) {\n        url = `${API_URL}/facilities/rooms/building/${buildingId}`;\n      } else {\n        // Nếu không có buildingId, tải tất cả phòng\n        url = `${API_URL}/facilities/rooms?limit=1000`;\n      }\n      const response = await axios.get(url, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n\n      // console.log(\"Dữ liệu phòng học từ API:\", response.data);\n\n      if (response.data.success && Array.isArray(response.data.data)) {\n        // Lưu trữ dữ liệu phòng học và ghi log để kiểm tra\n        setRooms(response.data.data);\n        // console.log(\"Đã cập nhật state rooms:\", response.data.data);\n      } else {\n        setRooms([]);\n        console.error(\"API không trả về dữ liệu phòng học hợp lệ:\", response.data);\n        enqueueSnackbar(\"Không thể tải danh sách phòng học (dữ liệu không hợp lệ)\", {\n          variant: \"warning\"\n        });\n      }\n    } catch (error) {\n      console.error(\"Lỗi khi tải danh sách phòng học:\", error);\n      enqueueSnackbar(\"Không thể tải danh sách phòng học\", {\n        variant: \"error\"\n      });\n      setRooms([]);\n    }\n  };\n\n  // Load dữ liệu ban đầu\n  const fetchClassData = useCallback(async () => {\n    try {\n      setIsLoading(true);\n\n      // Kiểm tra id có tồn tại không\n      if (!id) {\n        enqueueSnackbar(\"ID lớp học không hợp lệ\", {\n          variant: \"error\"\n        });\n        navigate(\"/teacher/classes\");\n        return;\n      }\n\n      // Lấy thông tin lớp học\n      const classResponse = await axios.get(`${API_URL}/classes/teaching/${id}`, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          Accept: \"application/json\"\n        }\n      });\n\n      // Log dữ liệu để xem cấu trúc\n      // console.log(\"Dữ liệu lớp học nhận về:\", classResponse.data);\n\n      // Kiểm tra nếu không có dữ liệu trả về\n      if (!classResponse.data.success || !classResponse.data.data) {\n        enqueueSnackbar(\"Không tìm thấy thông tin lớp học\", {\n          variant: \"error\"\n        });\n        navigate(\"/teacher/classes\");\n        return;\n      }\n      const fetchedClassInfo = classResponse.data.data;\n      setClassInfo(fetchedClassInfo);\n\n      // Kiểm tra xem khóa học đã bắt đầu chưa - LOGIC CŨ SẼ BỊ XÓA\n      // if (fetchedClassInfo.course_start_date) { ... }\n\n      // Fetch rooms right after setting class info to ensure it's done before rendering\n      await fetchRooms();\n\n      // Lấy danh sách phiên điểm danh\n      const sessionsResponse = await axios.get(`${API_URL}/attendance/teaching-class/${id}/sessions`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      const fetchedSessions = sessionsResponse.data.data || [];\n      setAttendanceSessions(fetchedSessions);\n\n      // Tính toán trạng thái lớp học\n      setDerivedClassStatus(calculateDerivedClassStatus(fetchedClassInfo, fetchedSessions));\n\n      // Tính toán thống kê điểm danh\n      const stats = {\n        total: fetchedSessions.length,\n        pending: 0,\n        completed: 0\n      };\n      fetchedSessions.forEach(session => {\n        if (session.status === \"completed\") {\n          stats.completed++;\n        } else {\n          stats.pending++;\n        }\n      });\n      setAttendanceStats(stats);\n\n      // Vì API getClassStudents không trả về đầy đủ thông tin, chúng ta sẽ lấy chi tiết từng sinh viên\n      if (classResponse.data.data.students && classResponse.data.data.students.length > 0) {\n        try {\n          // Lấy danh sách sinh viên cơ bản\n          const studentsResponse = await axios.get(`${API_URL}/classes/teaching/${id}/students`, {\n            headers: {\n              Authorization: `Bearer ${token}`,\n              Accept: \"application/json\"\n            }\n          });\n\n          // console.log(\"Dữ liệu sinh viên cơ bản:\", studentsResponse.data);\n\n          // Lưu danh sách sinh viên cơ bản trước\n          let studentsWithBasicInfo = [];\n          if (studentsResponse.data.success && studentsResponse.data.data) {\n            studentsWithBasicInfo = studentsResponse.data.data;\n          } else {\n            studentsWithBasicInfo = classResponse.data.data.students || [];\n          }\n\n          // Lấy chi tiết cho từng sinh viên (bao gồm faceFeatures)\n          const detailedStudents = await Promise.all(studentsWithBasicInfo.map(async student => {\n            try {\n              // Gọi API để lấy thông tin chi tiết của sinh viên\n              const studentDetailResponse = await axios.get(`${API_URL}/users/${student._id}`, {\n                headers: {\n                  Authorization: `Bearer ${token}`,\n                  Accept: \"application/json\"\n                }\n              });\n\n              // console.log(\n              //   `Thông tin chi tiết của sinh viên ${student.full_name}:`,\n              //   studentDetailResponse.data\n              // );\n\n              if (studentDetailResponse.data.success && studentDetailResponse.data.data) {\n                // Kết hợp dữ liệu từ API chi tiết sinh viên với dữ liệu cơ bản\n                const detailedInfo = studentDetailResponse.data.data;\n\n                // Kiểm tra dữ liệu khuôn mặt\n                const hasFaceData = !!(detailedInfo.faceFeatures && detailedInfo.faceFeatures.descriptors && detailedInfo.faceFeatures.descriptors.length > 0);\n\n                // console.log(\n                //   `Sinh viên ${detailedInfo.full_name} có dữ liệu khuôn mặt: ${hasFaceData}`\n                // );\n\n                return {\n                  ...student,\n                  ...detailedInfo,\n                  has_face_data: hasFaceData\n                };\n              } else {\n                // Nếu không lấy được chi tiết, sử dụng thông tin cơ bản\n                return {\n                  ...student,\n                  has_face_data: false\n                };\n              }\n            } catch (error) {\n              console.error(`Lỗi khi lấy thông tin chi tiết của sinh viên ${student._id}:`, error);\n              return {\n                ...student,\n                has_face_data: false\n              };\n            }\n          }));\n          setStudents(detailedStudents);\n        } catch (error) {\n          console.error(\"Lỗi khi lấy danh sách sinh viên:\", error);\n          // Sử dụng danh sách cơ bản nếu có lỗi\n          setStudents(classResponse.data.data.students || []);\n        }\n      } else {\n        setStudents([]);\n      }\n    } catch (error) {\n      console.error(\"Lỗi khi tải dữ liệu lớp học:\", error);\n      // Xử lý các loại lỗi từ API\n      if (error.response) {\n        // Nếu máy chủ phản hồi với mã lỗi\n        if (error.response.status === 404) {\n          enqueueSnackbar(\"Không tìm thấy lớp học với ID đã cho\", {\n            variant: \"error\"\n          });\n        } else if (error.response.status === 400) {\n          enqueueSnackbar(\"ID lớp học không hợp lệ\", {\n            variant: \"error\"\n          });\n        } else {\n          var _error$response$data;\n          enqueueSnackbar(((_error$response$data = error.response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || \"Lỗi khi tải dữ liệu lớp học\", {\n            variant: \"error\"\n          });\n        }\n      } else {\n        enqueueSnackbar(\"Không thể kết nối đến máy chủ\", {\n          variant: \"error\"\n        });\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  }, [id, token, enqueueSnackbar, navigate]);\n  useEffect(() => {\n    fetchClassData();\n  }, [fetchClassData]);\n\n  // Thay đổi tab\n  const handleChangeTab = (event, newValue) => {\n    setTabValue(newValue);\n  };\n\n  // Mở dialog tạo phiên điểm danh\n  const handleOpenSessionDialog = () => {\n    // Tải danh sách phòng học\n    fetchRooms();\n    setSessionFormData({\n      title: `Buổi học ${attendanceSessions.length + 1}`,\n      date: new Date().toISOString().split(\"T\")[0],\n      start_time: \"07:00\",\n      end_time: \"08:40\",\n      room: \"\",\n      session_number: attendanceSessions.length + 1,\n      start_period: 1,\n      end_period: 2,\n      notes: \"\"\n    });\n    setOpenSessionDialog(true);\n  };\n\n  // Đóng dialog tạo phiên điểm danh\n  const handleCloseSessionDialog = () => {\n    setOpenSessionDialog(false);\n  };\n\n  // Cập nhật form dữ liệu phiên điểm danh\n  const handleSessionFormChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setSessionFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  // Tạo phiên điểm danh mới\n  const handleCreateSession = async () => {\n    try {\n      const {\n        title,\n        date,\n        start_time,\n        end_time,\n        room,\n        session_number,\n        start_period,\n        end_period,\n        notes\n      } = sessionFormData;\n\n      // Kiểm tra dữ liệu\n      if (!date || !start_time || !end_time || !session_number) {\n        enqueueSnackbar(\"Vui lòng điền đầy đủ thông tin\", {\n          variant: \"error\"\n        });\n        return;\n      }\n\n      // Tạo đối tượng để gửi lên API\n      const sessionData = {\n        title,\n        date,\n        start_time,\n        end_time,\n        teaching_class_id: id,\n        session_number: parseInt(session_number, 10),\n        start_period: parseInt(start_period, 10) || 1,\n        end_period: parseInt(end_period, 10) || 2,\n        notes\n      };\n\n      // Thêm room nếu có\n      if (room) {\n        sessionData.room = room;\n      }\n      const response = await axios.post(`${API_URL}/attendance/sessions`, sessionData, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      enqueueSnackbar(\"Tạo phiên điểm danh thành công\", {\n        variant: \"success\"\n      });\n      setOpenSessionDialog(false);\n\n      // Cập nhật danh sách phiên\n      setAttendanceSessions(prev => [...prev, response.data.data]);\n      setAttendanceStats(prev => ({\n        ...prev,\n        total: prev.total + 1,\n        pending: prev.pending + 1\n      }));\n    } catch (error) {\n      var _error$response, _error$response$data2;\n      console.error(\"Lỗi khi tạo phiên điểm danh:\", error);\n      enqueueSnackbar(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data2 = _error$response.data) === null || _error$response$data2 === void 0 ? void 0 : _error$response$data2.message) || \"Lỗi khi tạo phiên điểm danh\", {\n        variant: \"error\"\n      });\n    }\n  };\n\n  // Cập nhật phiên điểm danh\n  const handleUpdateSession = async () => {\n    try {\n      const {\n        _id,\n        title,\n        date,\n        start_time,\n        end_time,\n        room,\n        session_number,\n        start_period,\n        end_period,\n        notes\n      } = sessionFormData;\n\n      // Kiểm tra dữ liệu\n      if (!date || !start_time || !end_time || !session_number) {\n        enqueueSnackbar(\"Vui lòng điền đầy đủ thông tin\", {\n          variant: \"error\"\n        });\n        return;\n      }\n\n      // Tạo đối tượng để gửi lên API\n      const sessionData = {\n        title,\n        date,\n        start_time,\n        end_time,\n        session_number: parseInt(session_number, 10),\n        start_period: parseInt(start_period, 10) || 1,\n        end_period: parseInt(end_period, 10) || 2,\n        notes\n      };\n\n      // Thêm room nếu có\n      if (room) {\n        sessionData.room = room;\n      }\n\n      // Gọi API cập nhật\n      const response = await axios.put(`${API_URL}/attendance/sessions/${_id}`, sessionData, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      enqueueSnackbar(\"Cập nhật phiên điểm danh thành công\", {\n        variant: \"success\"\n      });\n      setOpenSessionDialog(false);\n\n      // Cập nhật danh sách phiên\n      setAttendanceSessions(prev => prev.map(session => session._id === _id ? response.data.data : session));\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      console.error(\"Lỗi khi cập nhật phiên điểm danh:\", error);\n      enqueueSnackbar(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || \"Lỗi khi cập nhật phiên điểm danh\", {\n        variant: \"error\"\n      });\n    }\n  };\n\n  // Bắt đầu phiên điểm danh\n  const handleStartSession = async sessionId => {\n    try {\n      // Kiểm tra tính hợp lệ của session\n      if (!sessionId) {\n        enqueueSnackbar(\"ID phiên điểm danh không hợp lệ\", {\n          variant: \"error\"\n        });\n        return;\n      }\n\n      // Kiểm tra trạng thái phiên điểm danh\n      const session = attendanceSessions.find(s => s._id === sessionId);\n      if (!session) {\n        enqueueSnackbar(\"Không tìm thấy thông tin phiên điểm danh\", {\n          variant: \"error\"\n        });\n        return;\n      }\n\n      // Nếu phiên chưa bắt đầu hoặc đang ở trạng thái pending, cập nhật trạng thái thành active\n      if (session.status === \"pending\") {\n        try {\n          await axios.put(`${API_URL}/attendance/sessions/${sessionId}/status`, {\n            status: \"active\"\n          }, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n\n          // Cập nhật lại trạng thái trong state\n          setAttendanceSessions(prev => prev.map(s => s._id === sessionId ? {\n            ...s,\n            status: \"active\"\n          } : s));\n        } catch (error) {\n          console.error(\"Lỗi khi cập nhật trạng thái phiên:\", error);\n          // Vẫn tiếp tục điều hướng dù có lỗi\n        }\n      }\n      enqueueSnackbar(`Đang chuyển đến trang điểm danh`, {\n        variant: \"info\"\n      });\n      navigate(`/teacher/attendance/${id}/${sessionId}`);\n    } catch (error) {\n      console.error(\"Lỗi khi bắt đầu phiên điểm danh:\", error);\n      enqueueSnackbar(\"Có lỗi xảy ra khi bắt đầu phiên điểm danh\", {\n        variant: \"error\"\n      });\n    }\n  };\n\n  // Mở dialog thêm sinh viên\n  const handleOpenAddStudentDialog = async () => {\n    try {\n      var _mainClassResponse$da;\n      setIsLoadingStudents(true);\n      // Lấy danh sách lớp chính\n      const mainClassResponse = await axios.get(`${API_URL}/classes/main?all=true`, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          Accept: \"application/json\"\n        }\n      });\n\n      // console.log(\"Danh sách lớp chính:\", mainClassResponse.data);\n\n      if (!((_mainClassResponse$da = mainClassResponse.data) !== null && _mainClassResponse$da !== void 0 && _mainClassResponse$da.data)) {\n        enqueueSnackbar(\"Không thể tải danh sách lớp chính\", {\n          variant: \"error\"\n        });\n        return;\n      }\n      setMainClasses(mainClassResponse.data.data || []);\n      setAvailableStudents([]);\n      setSelectedStudents([]);\n      setSelectedMainClass(\"\");\n      setOpenAddStudentDialog(true);\n    } catch (error) {\n      console.error(\"Lỗi khi tải danh sách lớp chính:\", error);\n      enqueueSnackbar(\"Không thể tải danh sách lớp chính. Vui lòng thử lại sau.\", {\n        variant: \"error\"\n      });\n    } finally {\n      setIsLoadingStudents(false);\n    }\n  };\n\n  // Lấy danh sách sinh viên từ lớp chính\n  const handleMainClassChange = async e => {\n    const mainClassId = e.target.value;\n    setSelectedMainClass(mainClassId);\n    if (!mainClassId) {\n      setAvailableStudents([]);\n      return;\n    }\n    try {\n      var _studentsResponse$dat;\n      setIsLoadingStudents(true);\n      const studentsResponse = await axios.get(`${API_URL}/classes/main/${mainClassId}/approved-students`, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          Accept: \"application/json\"\n        }\n      });\n\n      // console.log(\"Danh sách sinh viên lớp chính:\", studentsResponse.data);\n\n      if (!((_studentsResponse$dat = studentsResponse.data) !== null && _studentsResponse$dat !== void 0 && _studentsResponse$dat.data)) {\n        enqueueSnackbar(\"Không thể tải danh sách sinh viên từ lớp chính\", {\n          variant: \"error\"\n        });\n        return;\n      }\n\n      // Lọc sinh viên chưa có trong lớp\n      const currentStudentIds = students.map(s => s._id);\n      const filteredStudents = studentsResponse.data.data.students.filter(s => !currentStudentIds.includes(s._id));\n      setAvailableStudents(filteredStudents);\n    } catch (error) {\n      console.error(\"Lỗi khi tải danh sách sinh viên từ lớp chính:\", error);\n      enqueueSnackbar(\"Không thể tải danh sách sinh viên từ lớp chính\", {\n        variant: \"error\"\n      });\n      setAvailableStudents([]);\n    } finally {\n      setIsLoadingStudents(false);\n    }\n  };\n\n  // Đóng dialog thêm sinh viên\n  const handleCloseAddStudentDialog = () => {\n    setOpenAddStudentDialog(false);\n  };\n\n  // Xử lý chọn sinh viên để thêm\n  const handleSelectStudent = studentId => {\n    if (selectedStudents.includes(studentId)) {\n      setSelectedStudents(selectedStudents.filter(id => id !== studentId));\n    } else {\n      setSelectedStudents([...selectedStudents, studentId]);\n    }\n  };\n\n  // Thêm sinh viên vào lớp\n  const handleAddStudents = async () => {\n    try {\n      if (selectedStudents.length === 0) {\n        enqueueSnackbar(\"Vui lòng chọn ít nhất một sinh viên\", {\n          variant: \"warning\"\n        });\n        return;\n      }\n\n      // Gọi API thêm sinh viên\n      await axios.post(`${API_URL}/classes/teaching/${id}/students/batch`, {\n        student_ids: selectedStudents\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      enqueueSnackbar(`Đã thêm ${selectedStudents.length} sinh viên vào lớp`, {\n        variant: \"success\"\n      });\n      setOpenAddStudentDialog(false);\n\n      // Cập nhật lại danh sách sinh viên\n      fetchClassData();\n    } catch (error) {\n      console.error(\"Lỗi khi thêm sinh viên:\", error);\n      if (error.response) {\n        var _error$response$data3;\n        enqueueSnackbar(`Lỗi: ${error.response.status} - ${((_error$response$data3 = error.response.data) === null || _error$response$data3 === void 0 ? void 0 : _error$response$data3.message) || \"Không thể thêm sinh viên\"}`, {\n          variant: \"error\"\n        });\n      } else {\n        enqueueSnackbar(\"Lỗi kết nối khi thêm sinh viên vào lớp\", {\n          variant: \"error\"\n        });\n      }\n    }\n  };\n\n  // Xóa sinh viên khỏi lớp\n  const handleRemoveStudent = async studentId => {\n    if (!window.confirm(\"Bạn có chắc chắn muốn xóa sinh viên này khỏi lớp không?\")) {\n      return;\n    }\n    try {\n      await axios.delete(`${API_URL}/classes/teaching/${id}/students/${studentId}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      enqueueSnackbar(\"Đã xóa sinh viên khỏi lớp\", {\n        variant: \"success\"\n      });\n\n      // Cập nhật lại danh sách sinh viên\n      setStudents(students.filter(s => s._id !== studentId));\n    } catch (error) {\n      console.error(\"Lỗi khi xóa sinh viên:\", error);\n      enqueueSnackbar(\"Lỗi khi xóa sinh viên khỏi lớp\", {\n        variant: \"error\"\n      });\n    }\n  };\n\n  // Xuất danh sách sinh viên\n  const handleExportStudentList = () => {\n    try {\n      const studentsData = students.map((student, index) => {\n        var _student$school_info;\n        // Kiểm tra có face data từ cả hai nguồn có thể\n        const hasFaceData = student.has_face_data || !!(student.faceFeatures && student.faceFeatures.descriptors && student.faceFeatures.descriptors.length > 0);\n        return {\n          STT: index + 1,\n          \"Mã SV\": ((_student$school_info = student.school_info) === null || _student$school_info === void 0 ? void 0 : _student$school_info.student_id) || \"N/A\",\n          \"Họ và tên\": student.full_name || student.name,\n          Email: student.email,\n          \"Đăng ký khuôn mặt\": hasFaceData ? \"Đã đăng ký\" : \"Chưa đăng ký\"\n        };\n      });\n      const header = [\"STT\", \"Mã SV\", \"Họ và tên\", \"Email\", \"Đăng ký khuôn mặt\"];\n      const csvContent = \"data:text/csv;charset=utf-8,\" + [header.join(\",\"), ...studentsData.map(row => [row.STT, row[\"Mã SV\"], row[\"Họ và tên\"], row.Email, row[\"Đăng ký khuôn mặt\"]].join(\",\"))].join(\"\\n\");\n      const encodedUri = encodeURI(csvContent);\n      const link = document.createElement(\"a\");\n      link.setAttribute(\"href\", encodedUri);\n      link.setAttribute(\"download\", `danh_sach_sinh_vien_${classInfo === null || classInfo === void 0 ? void 0 : classInfo.class_name}.csv`);\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      enqueueSnackbar(\"Xuất danh sách sinh viên thành công\", {\n        variant: \"success\"\n      });\n    } catch (error) {\n      console.error(\"Lỗi khi xuất danh sách:\", error);\n      enqueueSnackbar(\"Lỗi khi xuất danh sách sinh viên\", {\n        variant: \"error\"\n      });\n    }\n  };\n\n  // Lọc sinh viên theo từ khóa tìm kiếm\n  const filteredAvailableStudents = availableStudents.filter(student => {\n    var _student$school_info2, _student$school_info3;\n    return student.full_name.toLowerCase().includes(searchStudent.toLowerCase()) || ((_student$school_info2 = student.school_info) === null || _student$school_info2 === void 0 ? void 0 : (_student$school_info3 = _student$school_info2.student_id) === null || _student$school_info3 === void 0 ? void 0 : _student$school_info3.toLowerCase().includes(searchStudent.toLowerCase())) || student.email.toLowerCase().includes(searchStudent.toLowerCase());\n  });\n\n  // Tải dữ liệu tham chiếu cho form chỉnh sửa\n  const fetchReferenceDataForEdit = async () => {\n    try {\n      const [subjectsRes, semestersRes, mainClassesRes, campusesRes] = await Promise.all([axios.get(`${API_URL}/subjects`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }), axios.get(`${API_URL}/semesters`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }), axios.get(`${API_URL}/classes/main?all=true`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }), axios.get(`${API_URL}/facilities/campuses`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      })]);\n      setSubjects(subjectsRes.data.data || []);\n      setSemesters(semestersRes.data.data || []);\n      setMainClasses(mainClassesRes.data.data || []);\n      setCampuses(campusesRes.data.data || []);\n\n      // Nếu lớp học có thông tin campus và building, tải danh sách building và room tương ứng\n      if (classInfo && classInfo.room) {\n        try {\n          const roomDetails = await axios.get(`${API_URL}/facilities/rooms/${classInfo.room}`, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n          if (roomDetails.data.success && roomDetails.data.data) {\n            const room = roomDetails.data.data;\n            if (room.building_id) {\n              var _room$building_id$cam, _room$building_id$cam2;\n              setSelectedCampus(((_room$building_id$cam = room.building_id.campus_id) === null || _room$building_id$cam === void 0 ? void 0 : _room$building_id$cam._id) || \"\");\n\n              // Tải danh sách buildings của campus\n              const buildingsRes = await axios.get(`${API_URL}/facilities/buildings/campuses/${(_room$building_id$cam2 = room.building_id.campus_id) === null || _room$building_id$cam2 === void 0 ? void 0 : _room$building_id$cam2._id}`, {\n                headers: {\n                  Authorization: `Bearer ${token}`\n                }\n              });\n              setBuildings(buildingsRes.data.data || []);\n              setSelectedBuilding(room.building_id._id || \"\");\n\n              // Tải danh sách rooms của building\n              const roomsRes = await axios.get(`${API_URL}/facilities/rooms/building/${room.building_id._id}`, {\n                headers: {\n                  Authorization: `Bearer ${token}`\n                }\n              });\n              setRooms(roomsRes.data.data || []);\n            }\n          }\n        } catch (error) {\n          console.error(\"Lỗi khi tải thông tin phòng học:\", error);\n        }\n      }\n    } catch (error) {\n      console.error(\"Lỗi khi tải dữ liệu tham chiếu:\", error);\n      enqueueSnackbar(\"Lỗi khi tải dữ liệu tham chiếu\", {\n        variant: \"error\"\n      });\n    }\n  };\n\n  // Tải danh sách tòa nhà khi chọn campus\n  const fetchBuildings = async campusId => {\n    if (!campusId) {\n      setBuildings([]);\n      setSelectedBuilding(\"\");\n      return;\n    }\n    try {\n      const response = await axios.get(`${API_URL}/facilities/buildings/campuses/${campusId}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setBuildings(response.data.data || []);\n    } catch (error) {\n      console.error(\"Lỗi khi tải danh sách tòa nhà:\", error);\n      enqueueSnackbar(\"Lỗi khi tải danh sách tòa nhà\", {\n        variant: \"error\"\n      });\n    }\n  };\n\n  // Mở dialog chỉnh sửa lớp học\n  const handleOpenEditClassDialog = async () => {\n    var _classInfo$subject_id, _classInfo$main_class, _classInfo$semester_i;\n    setIsLoading(true); // Bắt đầu loading\n    // Chuẩn bị dữ liệu ban đầu cho form\n    const initialEditData = {\n      class_name: classInfo.class_name || \"\",\n      class_code: classInfo.class_code || \"\",\n      subject_id: ((_classInfo$subject_id = classInfo.subject_id) === null || _classInfo$subject_id === void 0 ? void 0 : _classInfo$subject_id._id) || \"\",\n      main_class_id: ((_classInfo$main_class = classInfo.main_class_id) === null || _classInfo$main_class === void 0 ? void 0 : _classInfo$main_class._id) || \"\",\n      semester_id: ((_classInfo$semester_i = classInfo.semester_id) === null || _classInfo$semester_i === void 0 ? void 0 : _classInfo$semester_i._id) || \"\",\n      total_sessions: classInfo.total_sessions || 15,\n      // room_id: classInfo.room?._id || \"\", // Sẽ được quản lý trong từng schedule day\n      course_start_date: classInfo.course_start_date ? classInfo.course_start_date.split(\"T\")[0] : \"\",\n      course_end_date: classInfo.course_end_date ? classInfo.course_end_date.split(\"T\")[0] : \"\",\n      auto_generate_sessions: classInfo.auto_generate_sessions !== false\n      // schedule: classInfo.schedule || [], // Sẽ được xử lý riêng\n    };\n    setEditClassData(initialEditData);\n\n    // Tải dữ liệu tham chiếu chung (subjects, semesters, mainClasses, campuses)\n    await fetchReferenceDataForEdit(); // Đảm bảo campuses được tải\n\n    // Xử lý scheduleDays (quan trọng)\n    if (classInfo.schedule && classInfo.schedule.length > 0) {\n      const processedScheduleDays = await Promise.all(classInfo.schedule.map(async item => {\n        let campusId = \"\";\n        let buildingId = \"\";\n        let availableBuildings = [];\n        let availableRooms = [];\n        if (item.room_id) {\n          try {\n            const roomDetailRes = await axios.get(`${API_URL}/facilities/rooms/${item.room_id}?populate=building_id.campus_id`, {\n              headers: {\n                Authorization: `Bearer ${token}`\n              }\n            });\n            if (roomDetailRes.data.success && roomDetailRes.data.data) {\n              const roomData = roomDetailRes.data.data;\n              if (roomData.building_id) {\n                buildingId = roomData.building_id._id;\n                if (roomData.building_id.campus_id) {\n                  campusId = roomData.building_id.campus_id._id;\n                  // Fetch buildings for this campus\n                  const buildingsRes = await axios.get(`${API_URL}/facilities/buildings/campuses/${campusId}`, {\n                    headers: {\n                      Authorization: `Bearer ${token}`\n                    }\n                  });\n                  availableBuildings = buildingsRes.data.data || [];\n                }\n                // Fetch rooms for this building\n                const roomsRes = await axios.get(`${API_URL}/facilities/rooms/building/${buildingId}`, {\n                  headers: {\n                    Authorization: `Bearer ${token}`\n                  }\n                });\n                availableRooms = roomsRes.data.data || [];\n              }\n            }\n          } catch (error) {\n            console.error(`Error fetching details for room ${item.room_id}:`, error);\n          }\n        }\n        return {\n          ...item,\n          day_of_week: item.day_of_week !== undefined ? item.day_of_week : 1,\n          start_period: item.start_period || 1,\n          end_period: item.end_period || 2,\n          start_time: item.start_time || \"07:00\",\n          end_time: item.end_time || \"08:40\",\n          room_id: item.room_id || \"\",\n          is_recurring: item.is_recurring !== undefined ? item.is_recurring : true,\n          specific_dates: item.specific_dates || [],\n          excluded_dates: item.excluded_dates || [],\n          campusId: campusId,\n          buildingId: buildingId,\n          availableBuildings: availableBuildings,\n          availableRooms: availableRooms\n        };\n      }));\n      setScheduleDays(processedScheduleDays);\n    } else {\n      const dayOfWeek = initialEditData.course_start_date ? getDayOfWeekFromDate(initialEditData.course_start_date) : 1;\n      setScheduleDays([{\n        day_of_week: dayOfWeek,\n        start_period: 1,\n        end_period: 2,\n        start_time: \"07:00\",\n        end_time: \"08:40\",\n        room_id: \"\",\n        is_recurring: true,\n        specific_dates: [],\n        excluded_dates: [],\n        campusId: \"\",\n        buildingId: \"\",\n        availableBuildings: [],\n        availableRooms: []\n      }]);\n    }\n    setIsLoading(false); // Kết thúc loading\n    setOpenEditClassDialog(true);\n  };\n\n  // Đóng dialog chỉnh sửa lớp học\n  const handleCloseEditClassDialog = () => {\n    setOpenEditClassDialog(false);\n    setEditClassData(null);\n  };\n\n  // Xử lý thay đổi các trường trong form chỉnh sửa\n  const handleEditClassChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setEditClassData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  // Xử lý thay đổi campus\n  const handleCampusChange = e => {\n    const campusId = e.target.value;\n    setSelectedCampus(campusId);\n    fetchBuildings(campusId);\n    setSelectedBuilding(\"\");\n    setEditClassData(prev => ({\n      ...prev,\n      room_id: \"\"\n    }));\n  };\n\n  // Xử lý thay đổi building\n  const handleBuildingChange = e => {\n    const buildingId = e.target.value;\n    setSelectedBuilding(buildingId);\n    fetchRooms(buildingId);\n    setEditClassData(prev => ({\n      ...prev,\n      room_id: \"\"\n    }));\n  };\n\n  // Thêm function để kiểm tra xung đột lịch\n  const checkConflicts = async (scheduleToCheck = scheduleDays) => {\n    // Xóa cảnh báo xung đột cũ\n    setConflictWarnings([]);\n    try {\n      var _classInfo$teacher_id;\n      setCheckingConflicts(true);\n\n      // Kiểm tra xem có thông tin đủ để check không\n      if (!(classInfo !== null && classInfo !== void 0 && (_classInfo$teacher_id = classInfo.teacher_id) !== null && _classInfo$teacher_id !== void 0 && _classInfo$teacher_id._id) || !scheduleToCheck || scheduleToCheck.length === 0 || scheduleToCheck.some(day => !day.room_id)) {\n        return;\n      }\n      const response = await checkScheduleConflicts({\n        teacher_id: classInfo.teacher_id._id,\n        schedule: scheduleToCheck,\n        class_id: id // Loại trừ chính lớp này khi kiểm tra\n      });\n      if (response.data.has_conflicts) {\n        setConflictWarnings(response.data.conflicts);\n      }\n    } catch (error) {\n      console.error(\"Lỗi khi kiểm tra xung đột lịch học:\", error);\n      enqueueSnackbar(\"Lỗi khi kiểm tra xung đột lịch học\", {\n        variant: \"error\"\n      });\n    } finally {\n      setCheckingConflicts(false);\n    }\n  };\n\n  // Cập nhật hàm handleScheduleChange để check xung đột\n  const handleScheduleChange = async (index, field, value) => {\n    const updatedSchedule = [...scheduleDays];\n    const currentScheduleItem = {\n      ...updatedSchedule[index]\n    };\n    currentScheduleItem[field] = value;\n    if (field === \"campusId\") {\n      currentScheduleItem.buildingId = \"\";\n      currentScheduleItem.room_id = \"\";\n      currentScheduleItem.availableBuildings = [];\n      currentScheduleItem.availableRooms = [];\n      if (value) {\n        try {\n          const response = await axios.get(`${API_URL}/facilities/buildings/campuses/${value}`, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n          currentScheduleItem.availableBuildings = response.data.data || [];\n        } catch (error) {\n          console.error(\"Lỗi khi tải tòa nhà cho lịch học:\", error);\n          enqueueSnackbar(\"Lỗi khi tải tòa nhà\", {\n            variant: \"error\"\n          });\n        }\n      }\n    } else if (field === \"buildingId\") {\n      currentScheduleItem.room_id = \"\";\n      currentScheduleItem.availableRooms = [];\n      if (value) {\n        try {\n          const response = await axios.get(`${API_URL}/facilities/rooms/building/${value}`, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n          currentScheduleItem.availableRooms = response.data.data || [];\n        } catch (error) {\n          console.error(\"Lỗi khi tải phòng học cho lịch học:\", error);\n          enqueueSnackbar(\"Lỗi khi tải phòng học\", {\n            variant: \"error\"\n          });\n        }\n      }\n    } else if (field === \"start_period\" || field === \"end_period\") {\n      const intValue = parseInt(value, 10);\n      if (isNaN(intValue)) return; // Bỏ qua nếu không phải là số\n\n      if (field === \"start_period\") {\n        var _periodTimings$intVal;\n        currentScheduleItem.start_period = intValue;\n        currentScheduleItem.start_time = ((_periodTimings$intVal = periodTimings[intValue]) === null || _periodTimings$intVal === void 0 ? void 0 : _periodTimings$intVal.start) || \"\";\n        // Tự động điều chỉnh tiết kết thúc nếu tiết bắt đầu > tiết kết thúc\n        if (currentScheduleItem.end_period && intValue > currentScheduleItem.end_period) {\n          var _periodTimings$curren;\n          currentScheduleItem.end_period = intValue; // Hoặc intValue + 1 tùy theo logic mong muốn\n          currentScheduleItem.end_time = ((_periodTimings$curren = periodTimings[currentScheduleItem.end_period]) === null || _periodTimings$curren === void 0 ? void 0 : _periodTimings$curren.end) || \"\";\n        }\n      } else if (field === \"end_period\") {\n        var _periodTimings$curren2;\n        // Đảm bảo tiết kết thúc không nhỏ hơn tiết bắt đầu\n        if (currentScheduleItem.start_period && intValue < currentScheduleItem.start_period) {\n          currentScheduleItem.end_period = currentScheduleItem.start_period;\n        } else {\n          currentScheduleItem.end_period = intValue;\n        }\n        currentScheduleItem.end_time = ((_periodTimings$curren2 = periodTimings[currentScheduleItem.end_period]) === null || _periodTimings$curren2 === void 0 ? void 0 : _periodTimings$curren2.end) || \"\";\n      }\n    }\n    updatedSchedule[index] = currentScheduleItem;\n    setScheduleDays(updatedSchedule);\n\n    // Tính lại ngày kết thúc khi lịch học thay đổi\n    setEditClassData(prev => ({\n      ...prev,\n      course_end_date: calculateEndDate(prev.course_start_date, updatedSchedule, prev.total_sessions)\n    }));\n\n    // Kiểm tra xung đột nếu thay đổi phòng học hoặc thời gian\n    if (field === \"room_id\" || field === \"day_of_week\" || field === \"start_period\" || field === \"end_period\" || field === \"start_time\" || field === \"end_time\") {\n      setTimeout(() => {\n        if (updatedSchedule[index].room_id && updatedSchedule[index].day_of_week !== undefined) {\n          checkConflicts(updatedSchedule);\n        }\n      }, 500);\n    }\n  };\n\n  // Cập nhật hàm handleUpdateClass\n  const handleUpdateClass = async () => {\n    if (!editClassData.class_name || !editClassData.class_code) {\n      enqueueSnackbar(\"Vui lòng điền đầy đủ thông tin bắt buộc\", {\n        variant: \"warning\"\n      });\n      return;\n    }\n\n    // Kiểm tra room_id trong từng schedule item\n    for (const day of scheduleDays) {\n      if (!day.room_id) {\n        enqueueSnackbar(`Vui lòng chọn phòng học cho buổi học vào ${getDayOfWeekName(day.day_of_week)}`, {\n          variant: \"warning\"\n        });\n        return;\n      }\n    }\n\n    // Kiểm tra xung đột lịch cuối cùng trước khi cập nhật lớp\n    try {\n      setCheckingConflicts(true);\n      const response = await checkScheduleConflicts({\n        teacher_id: classInfo.teacher_id._id,\n        schedule: scheduleDays,\n        class_id: id\n      });\n      if (response.data.has_conflicts) {\n        setConflictWarnings(response.data.conflicts);\n\n        // Hiển thị thông báo xác nhận nếu có xung đột\n        if (window.confirm(\"Phát hiện xung đột lịch học. Bạn vẫn muốn cập nhật lịch học này không?\\n\\n\" + response.data.conflicts.map(c => c.message).join(\"\\n\"))) {\n          // Tiếp tục cập nhật lớp nếu người dùng xác nhận\n          await updateClassData();\n        }\n      } else {\n        // Không có xung đột, cập nhật lớp\n        await updateClassData();\n      }\n    } catch (error) {\n      console.error(\"Lỗi khi kiểm tra xung đột lịch học:\", error);\n      // Vẫn cập nhật lớp ngay cả khi không thể kiểm tra xung đột\n      await updateClassData();\n    } finally {\n      setCheckingConflicts(false);\n    }\n  };\n\n  // Tách logic cập nhật lớp thành hàm riêng\n  const updateClassData = async () => {\n    setIsUpdating(true);\n    try {\n      // Tạo đối tượng dữ liệu để cập nhật\n      const updateData = {\n        ...editClassData,\n        schedule: scheduleDays\n      };\n\n      // Xóa các trường không cần thiết\n      delete updateData.teacher_id;\n      delete updateData.createdAt;\n      delete updateData.updatedAt;\n      await updateTeachingClass(id, updateData);\n      enqueueSnackbar(\"Cập nhật lớp học thành công\", {\n        variant: \"success\"\n      });\n      setEditClassData(null); // Xóa state này vì không cần lưu trữ dữ liệu lớp học khi đã cập nhật\n      fetchClassData(); // Tải lại dữ liệu lớp học\n      setConflictWarnings([]); // Xóa cảnh báo xung đột\n    } catch (error) {\n      var _error$response3, _error$response3$data;\n      console.error(\"Lỗi khi cập nhật lớp học:\", error);\n      enqueueSnackbar(((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.message) || \"Lỗi khi cập nhật lớp học\", {\n        variant: \"error\"\n      });\n    } finally {\n      setIsUpdating(false);\n    }\n  };\n\n  // Lấy thứ trong tuần từ ngày\n  const getDayOfWeekFromDate = dateString => {\n    if (!dateString) return 1; // Mặc định là thứ 2 nếu không có ngày\n\n    const date = new Date(dateString);\n    // getDay() trả về 0 cho Chủ Nhật, 1-6 cho Thứ 2 đến Thứ 7\n    const day = date.getDay(); // Chủ nhật - 0, Thứ hai - 1, ... , Thứ bảy - 6\n\n    // Không cần chuyển đổi nữa nếu backend/logic khác cũng dùng 0-6\n    return day;\n  };\n\n  // Lấy tên của thứ trong tuần\n  const getDayOfWeekName = dayOfWeek => {\n    const days = [\"Chủ Nhật\", \"Thứ Hai\", \"Thứ Ba\", \"Thứ Tư\", \"Thứ Năm\", \"Thứ Sáu\", \"Thứ Bảy\"];\n    return days[dayOfWeek];\n  };\n\n  // Thêm lịch học\n  const addScheduleDay = () => {\n    const startDate = editClassData.course_start_date;\n    // ... (logic tìm nextDay có thể giữ nguyên hoặc cải thiện)\n    const lastScheduleItem = scheduleDays[scheduleDays.length - 1] || {};\n    const updatedSchedule = [...scheduleDays, {\n      day_of_week: lastScheduleItem.day_of_week !== undefined ? lastScheduleItem.day_of_week : startDate ? getDayOfWeekFromDate(startDate) : 1,\n      start_period: 1,\n      end_period: 2,\n      start_time: \"07:00\",\n      // Cần có periodTimings để lấy chính xác\n      end_time: \"08:40\",\n      // Cần có periodTimings để lấy chính xác\n      room_id: \"\",\n      // Để trống ban đầu\n      is_recurring: true,\n      specific_dates: [],\n      excluded_dates: [],\n      campusId: lastScheduleItem.campusId || \"\",\n      // Kế thừa từ buổi cuối hoặc để trống\n      buildingId: lastScheduleItem.buildingId || \"\",\n      availableBuildings: lastScheduleItem.availableBuildings || [],\n      availableRooms: lastScheduleItem.availableRooms || []\n    }];\n    setScheduleDays(updatedSchedule);\n\n    // Tính lại ngày kết thúc sau khi thêm buổi học\n    setEditClassData(prev => ({\n      ...prev,\n      course_end_date: calculateEndDate(prev.course_start_date, updatedSchedule, prev.total_sessions)\n    }));\n  };\n\n  // Xóa lịch học\n  const removeScheduleDay = index => {\n    if (scheduleDays.length > 1) {\n      const updatedSchedule = scheduleDays.filter((_, i) => i !== index);\n      setScheduleDays(updatedSchedule);\n\n      // Tính lại ngày kết thúc sau khi xóa buổi học\n      setEditClassData(prev => ({\n        ...prev,\n        course_end_date: calculateEndDate(prev.course_start_date, updatedSchedule, prev.total_sessions)\n      }));\n    }\n  };\n\n  // Tính ngày kết thúc dựa trên ngày bắt đầu và lịch học\n  const calculateEndDate = (startDate, schedule, totalSessions) => {\n    if (!startDate || !schedule || schedule.length === 0 || !totalSessions) {\n      return \"\";\n    }\n    try {\n      // Chuyển ngày bắt đầu thành đối tượng Date\n      const start = new Date(startDate);\n      if (isNaN(start.getTime())) {\n        return \"\";\n      }\n\n      // Tổng số tuần cần thiết = tổng số buổi học / số buổi học mỗi tuần\n      const sessionsPerWeek = schedule.length;\n      const weeksNeeded = Math.ceil(totalSessions / sessionsPerWeek);\n\n      // Tạo mảng chứa các ngày trong tuần từ lịch học (0-6, với 0 là Chủ Nhật)\n      const daysOfWeek = schedule.map(day => day.day_of_week);\n\n      // Sắp xếp các ngày trong tuần\n      daysOfWeek.sort((a, b) => a - b);\n\n      // Tìm ngày đầu tiên trong lịch học sau ngày bắt đầu\n      let currentDate = new Date(start);\n\n      // Đếm số buổi học đã xếp lịch\n      let sessionCount = 0;\n\n      // Lặp qua từng tuần\n      for (let week = 0; week < weeksNeeded * 2; week++) {\n        // Nhân 2 để đảm bảo đủ số buổi\n        // Lặp qua các ngày trong tuần từ lịch học\n        for (let dayIndex = 0; dayIndex < daysOfWeek.length; dayIndex++) {\n          const targetDayOfWeek = daysOfWeek[dayIndex];\n\n          // Tìm ngày tiếp theo có thứ phù hợp\n          while (currentDate.getDay() !== targetDayOfWeek) {\n            currentDate.setDate(currentDate.getDate() + 1);\n          }\n          sessionCount++;\n\n          // Nếu đã đủ số buổi học, trả về ngày hiện tại\n          if (sessionCount >= totalSessions) {\n            return currentDate.toISOString().split(\"T\")[0];\n          }\n\n          // Di chuyển đến ngày tiếp theo\n          currentDate.setDate(currentDate.getDate() + 1);\n        }\n      }\n\n      // Nếu không tính được, trả về chuỗi rỗng\n      return \"\";\n    } catch (error) {\n      console.error(\"Lỗi khi tính ngày kết thúc:\", error);\n      return \"\";\n    }\n  };\n\n  // Xử lý thay đổi ngày bắt đầu\n  const handleStartDateChange = e => {\n    const startDate = e.target.value;\n\n    // Lấy thứ từ ngày bắt đầu\n    const dayOfWeek = getDayOfWeekFromDate(startDate);\n\n    // Cập nhật lịch học với thứ mới\n    const updatedSchedule = [{\n      day_of_week: dayOfWeek,\n      start_period: 1,\n      end_period: 2,\n      start_time: \"07:00\",\n      end_time: \"08:40\",\n      room_id: editClassData.room_id,\n      is_recurring: true,\n      specific_dates: [],\n      excluded_dates: []\n    }];\n\n    // Cập nhật lịch học\n    setScheduleDays(updatedSchedule);\n\n    // Cập nhật ngày bắt đầu và tính ngày kết thúc\n    setEditClassData(prev => ({\n      ...prev,\n      course_start_date: startDate,\n      course_end_date: calculateEndDate(startDate, updatedSchedule, prev.total_sessions)\n    }));\n  };\n\n  // Xử lý thay đổi số buổi học\n  const handleTotalSessionsChange = e => {\n    const totalSessions = e.target.value;\n    setEditClassData(prev => ({\n      ...prev,\n      total_sessions: totalSessions,\n      // Tính lại ngày kết thúc khi thay đổi số buổi học\n      course_end_date: calculateEndDate(prev.course_start_date, scheduleDays, totalSessions)\n    }));\n  };\n\n  // Thêm phần render cảnh báo xung đột lịch\n  const renderConflictWarnings = () => {\n    if (conflictWarnings.length === 0) {\n      return null;\n    }\n    return /*#__PURE__*/_jsxDEV(Alert, {\n      severity: \"warning\",\n      sx: {\n        mt: 2,\n        mb: 2\n      },\n      children: [/*#__PURE__*/_jsxDEV(AlertTitle, {\n        children: \"Ph\\xE1t hi\\u1EC7n xung \\u0111\\u1ED9t l\\u1ECBch h\\u1ECDc\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1593,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(List, {\n        dense: true,\n        children: conflictWarnings.map((conflict, index) => /*#__PURE__*/_jsxDEV(ListItem, {\n          children: [/*#__PURE__*/_jsxDEV(ListItemIcon, {\n            children: conflict.type === \"teacher\" ? /*#__PURE__*/_jsxDEV(Person, {\n              color: \"error\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1599,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(Room, {\n              color: \"error\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1601,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1597,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n            primary: conflict.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1604,\n            columnNumber: 15\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1596,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1594,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1592,\n      columnNumber: 7\n    }, this);\n  };\n\n  // Hàm mở dialog ghi chú\n  const handleOpenNotesDialog = session => {\n    setCurrentSessionForNotes(session);\n    setNotesText(session.notes || \"\");\n    setOpenNotesDialog(true);\n  };\n\n  // Hàm đóng dialog ghi chú\n  const handleCloseNotesDialog = () => {\n    setOpenNotesDialog(false);\n    setCurrentSessionForNotes(null);\n    setNotesText(\"\");\n  };\n\n  // Hàm lưu ghi chú\n  const handleSaveNotes = async () => {\n    if (!currentSessionForNotes) return;\n    setIsSavingNotes(true);\n    try {\n      // Giả sử API cho phép cập nhật một phần hoặc toàn bộ session\n      // Nếu chỉ cập nhật notes, body request có thể chỉ cần { notes: notesText }\n      // Endpoint này cần được backend hỗ trợ đúng cách\n      await axios.put(`${API_URL}/attendance/sessions/${currentSessionForNotes._id}`, {\n        ...currentSessionForNotes,\n        notes: notesText\n      },\n      // Gửi lại session với notes đã cập nhật\n      // Hoặc chỉ: { notes: notesText } nếu API hỗ trợ partial update tốt\n      {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      enqueueSnackbar(\"Cập nhật ghi chú thành công\", {\n        variant: \"success\"\n      });\n      setAttendanceSessions(prevSessions => prevSessions.map(s => s._id === currentSessionForNotes._id ? {\n        ...s,\n        notes: notesText\n      } : s));\n      handleCloseNotesDialog();\n    } catch (error) {\n      var _error$response4, _error$response4$data;\n      console.error(\"Lỗi khi cập nhật ghi chú:\", error);\n      enqueueSnackbar(((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : (_error$response4$data = _error$response4.data) === null || _error$response4$data === void 0 ? void 0 : _error$response4$data.message) || \"Lỗi khi cập nhật ghi chú\", {\n        variant: \"error\"\n      });\n    } finally {\n      setIsSavingNotes(false);\n    }\n  };\n\n  // Helper function để lấy thông tin chi tiết phòng học\n  const getRoomDetailsString = roomId => {\n    var _roomDetail$building_, _roomDetail$building_2, _roomDetail$building_3;\n    if (!roomId) return \"Chưa xác định\";\n    // Đảm bảo rooms là một mảng trước khi sử dụng find\n    if (!Array.isArray(rooms)) return \"Đang tải phòng...\";\n    const roomDetail = rooms.find(r => r._id === roomId);\n    if (!roomDetail) return \"Không tìm thấy phòng\";\n    const buildingName = ((_roomDetail$building_ = roomDetail.building_id) === null || _roomDetail$building_ === void 0 ? void 0 : _roomDetail$building_.name) || \"N/A\";\n    const campusName = ((_roomDetail$building_2 = roomDetail.building_id) === null || _roomDetail$building_2 === void 0 ? void 0 : (_roomDetail$building_3 = _roomDetail$building_2.campus_id) === null || _roomDetail$building_3 === void 0 ? void 0 : _roomDetail$building_3.name) || \"N/A\";\n    return `${roomDetail.room_number} (${buildingName} - ${campusName})`;\n  };\n\n  // Hàm tính toán trạng thái lớp học dựa trên dữ liệu hiện có\n  const calculateDerivedClassStatus = useCallback((classData, sessions) => {\n    if (!classData) return \"LOADING\";\n    const totalPlannedSessions = classData.total_sessions || 0;\n    const actualSessions = sessions || [];\n    if (totalPlannedSessions === 0 && actualSessions.length === 0) {\n      return \"NOT_STARTED\";\n    }\n    const completedSessionCount = actualSessions.filter(s => s.status === \"completed\").length;\n    if (totalPlannedSessions > 0 && completedSessionCount === totalPlannedSessions) {\n      return \"COMPLETED\";\n    }\n    const anySessionTaken = actualSessions.some(s => s.status === \"active\" || s.status === \"completed\");\n    if (anySessionTaken) {\n      return \"IN_PROGRESS\";\n    }\n    return \"NOT_STARTED\";\n  }, []);\n\n  // Hàm chuyển đổi trạng thái tiếng Anh sang tiếng Việt để hiển thị\n  const getVietnameseClassStatus = status => {\n    switch (status) {\n      case \"LOADING\":\n        return \"Đang tải...\";\n      case \"NOT_STARTED\":\n        return \"Chưa bắt đầu\";\n      case \"IN_PROGRESS\":\n        return \"Đang học\";\n      case \"COMPLETED\":\n        return \"Đã kết thúc\";\n      default:\n        return status;\n      // Trả về chính nó nếu không khớp\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      p: 3,\n      bgcolor: \"grey.50\",\n      minHeight: \"100vh\"\n    },\n    children: isLoading ? /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: \"flex\",\n        justifyContent: \"center\",\n        p: 3\n      },\n      children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1726,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1725,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: \"flex\",\n          justifyContent: \"space-between\",\n          mb: 3\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h4\",\n          gutterBottom: true,\n          sx: {\n            fontWeight: \"bold\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(School, {\n            sx: {\n              mr: 1,\n              verticalAlign: \"middle\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1732,\n            columnNumber: 15\n          }, this), (classInfo === null || classInfo === void 0 ? void 0 : classInfo.class_name) || \"Chi tiết lớp học\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1731,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Box, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1735,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1730,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Paper, {\n        sx: {\n          p: 3,\n          mb: 3,\n          borderRadius: 2,\n          boxShadow: 3\n        },\n        elevation: 3,\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          spacing: 3,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            sm: 6,\n            md: 3,\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"subtitle2\",\n              sx: {\n                color: \"text.secondary\",\n                mb: 1\n              },\n              children: \"M\\xE3 l\\u1EDBp\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1758,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body1\",\n              sx: {\n                fontWeight: \"medium\"\n              },\n              children: (classInfo === null || classInfo === void 0 ? void 0 : classInfo.class_code) || \"Không có\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1764,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1757,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            sm: 6,\n            md: 3,\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"subtitle2\",\n              sx: {\n                color: \"text.secondary\",\n                mb: 1\n              },\n              children: \"M\\xF4n h\\u1ECDc\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1769,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body1\",\n              sx: {\n                fontWeight: \"medium\"\n              },\n              children: (classInfo === null || classInfo === void 0 ? void 0 : (_classInfo$subject_id2 = classInfo.subject_id) === null || _classInfo$subject_id2 === void 0 ? void 0 : _classInfo$subject_id2.name) || \"Không xác định\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1775,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1768,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            sm: 6,\n            md: 3,\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"subtitle2\",\n              sx: {\n                color: \"text.secondary\",\n                mb: 1\n              },\n              children: \"K\\u1EF3 h\\u1ECDc\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1780,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Chip, {\n              label: classInfo !== null && classInfo !== void 0 && (_classInfo$semester_i2 = classInfo.semester_id) !== null && _classInfo$semester_i2 !== void 0 && _classInfo$semester_i2.name ? `${classInfo.semester_id.name} (${classInfo.semester_id.academic_year || classInfo.semester_id.year})` : \"Không xác định\",\n              color: \"primary\",\n              variant: \"outlined\",\n              size: \"small\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1786,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1779,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            sm: 6,\n            md: 3,\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"subtitle2\",\n              sx: {\n                color: \"text.secondary\",\n                mb: 1\n              },\n              children: \"L\\u1EDBp ch\\xEDnh\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1801,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Chip, {\n              label: (classInfo === null || classInfo === void 0 ? void 0 : (_classInfo$main_class2 = classInfo.main_class_id) === null || _classInfo$main_class2 === void 0 ? void 0 : _classInfo$main_class2.name) || \"Không thuộc lớp chính nào\",\n              color: \"info\",\n              variant: classInfo !== null && classInfo !== void 0 && classInfo.main_class_id ? \"filled\" : \"outlined\",\n              size: \"small\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1807,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1800,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            sm: 6,\n            md: 3,\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"subtitle2\",\n              sx: {\n                color: \"text.secondary\",\n                mb: 1\n              },\n              children: \"Gi\\u1EA3ng vi\\xEAn\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1818,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body1\",\n              sx: {\n                fontWeight: \"medium\"\n              },\n              children: (classInfo === null || classInfo === void 0 ? void 0 : (_classInfo$teacher_id2 = classInfo.teacher_id) === null || _classInfo$teacher_id2 === void 0 ? void 0 : _classInfo$teacher_id2.full_name) || \"Không xác định\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1824,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1817,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            sm: 6,\n            md: 3,\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"subtitle2\",\n              sx: {\n                color: \"text.secondary\",\n                mb: 1\n              },\n              children: \"Ng\\xE0y b\\u1EAFt \\u0111\\u1EA7u - K\\u1EBFt th\\xFAc\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1829,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body1\",\n              sx: {\n                fontWeight: \"medium\"\n              },\n              children: [classInfo !== null && classInfo !== void 0 && classInfo.course_start_date ? new Date(classInfo.course_start_date).toLocaleDateString(\"vi-VN\") : \"N/A\", \" \", \"-\", \" \", classInfo !== null && classInfo !== void 0 && classInfo.course_end_date ? new Date(classInfo.course_end_date).toLocaleDateString(\"vi-VN\") : \"N/A\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1835,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1828,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            sm: 6,\n            md: 3,\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"subtitle2\",\n              sx: {\n                color: \"text.secondary\",\n                mb: 1\n              },\n              children: \"S\\u1ED1 bu\\u1ED5i h\\u1ECDc\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1850,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body1\",\n              sx: {\n                fontWeight: \"medium\"\n              },\n              children: (classInfo === null || classInfo === void 0 ? void 0 : classInfo.total_sessions) || 0\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1856,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1849,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            sm: 6,\n            md: 3,\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"subtitle2\",\n              sx: {\n                color: \"text.secondary\",\n                mb: 1\n              },\n              children: \"S\\u1ED1 l\\u01B0\\u1EE3ng sinh vi\\xEAn\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1861,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body1\",\n              sx: {\n                fontWeight: \"medium\"\n              },\n              children: Array.isArray(classInfo === null || classInfo === void 0 ? void 0 : classInfo.students) ? classInfo.students.length : 0\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1867,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1860,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            sm: 6,\n            md: 3,\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"subtitle2\",\n              sx: {\n                color: \"text.secondary\",\n                mb: 1\n              },\n              children: \"Tr\\u1EA1ng th\\xE1i l\\u1EDBp h\\u1ECDc\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1874,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Chip, {\n              label: getVietnameseClassStatus(derivedClassStatus) || \"Đang tải...\",\n              color: derivedClassStatus === \"IN_PROGRESS\" ? \"warning\" : derivedClassStatus === \"COMPLETED\" ? \"success\" : derivedClassStatus === \"NOT_STARTED\" ? \"info\" : \"default\",\n              variant: \"outlined\",\n              size: \"small\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1880,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1873,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1756,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1752,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          width: \"100%\",\n          mt: 3\n        },\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            borderBottom: 1,\n            borderColor: \"divider\"\n          },\n          children: /*#__PURE__*/_jsxDEV(Tabs, {\n            value: tabValue,\n            onChange: handleChangeTab,\n            \"aria-label\": \"class tabs\",\n            variant: \"scrollable\",\n            scrollButtons: \"auto\",\n            children: [/*#__PURE__*/_jsxDEV(Tab, {\n              label: \"L\\u1ECBch h\\u1ECDc\",\n              ...a11yProps(0),\n              icon: /*#__PURE__*/_jsxDEV(Event, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1962,\n                columnNumber: 25\n              }, this),\n              iconPosition: \"start\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1959,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Tab, {\n              label: \"Bu\\u1ED5i \\u0111i\\u1EC3m danh\",\n              ...a11yProps(1),\n              icon: /*#__PURE__*/_jsxDEV(CalendarToday, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1968,\n                columnNumber: 25\n              }, this),\n              iconPosition: \"start\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1965,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Tab, {\n              label: \"Sinh vi\\xEAn\",\n              ...a11yProps(2),\n              icon: /*#__PURE__*/_jsxDEV(School, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1974,\n                columnNumber: 25\n              }, this),\n              iconPosition: \"start\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1971,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Tab, {\n              label: \"Th\\u1ED1ng k\\xEA\",\n              ...a11yProps(3),\n              icon: /*#__PURE__*/_jsxDEV(Info, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1980,\n                columnNumber: 25\n              }, this),\n              iconPosition: \"start\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1977,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Tab, {\n              label: \"C\\u1EA5u h\\xECnh\",\n              ...a11yProps(4),\n              icon: /*#__PURE__*/_jsxDEV(Settings, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1986,\n                columnNumber: 25\n              }, this),\n              iconPosition: \"start\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1983,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1952,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1951,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n          value: tabValue,\n          index: 0,\n          children: /*#__PURE__*/_jsxDEV(Paper, {\n            elevation: 2,\n            sx: {\n              p: 3,\n              borderRadius: 2\n            },\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              gutterBottom: true,\n              children: \"L\\u1ECBch h\\u1ECDc c\\u1EE7a l\\u1EDBp\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1995,\n              columnNumber: 17\n            }, this), classInfo !== null && classInfo !== void 0 && classInfo.schedule && classInfo.schedule.length > 0 ? /*#__PURE__*/_jsxDEV(TableContainer, {\n              component: Paper,\n              variant: \"outlined\",\n              children: /*#__PURE__*/_jsxDEV(Table, {\n                children: [/*#__PURE__*/_jsxDEV(TableHead, {\n                  children: /*#__PURE__*/_jsxDEV(TableRow, {\n                    sx: {\n                      bgcolor: \"grey.100\"\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                      children: \"Th\\u1EE9\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2003,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                      children: \"Ti\\u1EBFt h\\u1ECDc\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2004,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                      children: \"Th\\u1EDDi gian\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2005,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                      children: \"Ph\\xF2ng h\\u1ECDc\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2006,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2002,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2001,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n                  children: classInfo.schedule.map((day, index) => {\n                    var _rooms$find, _classInfo$room;\n                    return /*#__PURE__*/_jsxDEV(TableRow, {\n                      children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                        children: /*#__PURE__*/_jsxDEV(Chip, {\n                          label: getDayOfWeekName(day.day_of_week),\n                          color: \"primary\",\n                          variant: \"outlined\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2013,\n                          columnNumber: 31\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2012,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                        children: [\"Ti\\u1EBFt \", day.start_period, \" - \", day.end_period]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2019,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                        children: [day.start_time, \" - \", day.end_time]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2022,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                        children: day.room_id && ((_rooms$find = rooms.find(r => r._id === day.room_id)) === null || _rooms$find === void 0 ? void 0 : _rooms$find.room_number) || ((_classInfo$room = classInfo.room) !== null && _classInfo$room !== void 0 && _classInfo$room.room_number ? classInfo.room.room_number : \"Chưa xác định\")\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2025,\n                        columnNumber: 29\n                      }, this)]\n                    }, index, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2011,\n                      columnNumber: 27\n                    }, this);\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2009,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2000,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1999,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(Alert, {\n              severity: \"info\",\n              children: \"Ch\\u01B0a c\\xF3 th\\xF4ng tin l\\u1ECBch h\\u1ECDc cho l\\u1EDBp n\\xE0y\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2039,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n              title: derivedClassStatus !== \"NOT_STARTED\" ? `Lớp học ${getVietnameseClassStatus(derivedClassStatus)}, không thể chỉnh sửa` : \"Chỉnh sửa lịch học\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\" \", /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"contained\",\n                  color: \"primary\",\n                  onClick: handleOpenEditClassDialog,\n                  sx: {\n                    mt: 2\n                  },\n                  startIcon: /*#__PURE__*/_jsxDEV(Edit, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2061,\n                    columnNumber: 34\n                  }, this),\n                  disabled: derivedClassStatus !== \"NOT_STARTED\" || isUpdating,\n                  children: \"Ch\\u1EC9nh s\\u1EEDa l\\u1ECBch h\\u1ECDc\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2056,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2053,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2044,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1994,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1993,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n          value: tabValue,\n          index: 1,\n          children: /*#__PURE__*/_jsxDEV(Paper, {\n            elevation: 2,\n            sx: {\n              p: 3,\n              borderRadius: 2\n            },\n            children: [/*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                display: \"flex\",\n                justifyContent: \"space-between\",\n                mb: 3\n              },\n              children: /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h6\",\n                gutterBottom: true,\n                children: \"Qu\\u1EA3n l\\xFD \\u0111i\\u1EC3m danh\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2083,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2076,\n              columnNumber: 17\n            }, this), attendanceSessions.length > 0 ? /*#__PURE__*/_jsxDEV(TableContainer, {\n              component: Paper,\n              variant: \"outlined\",\n              children: /*#__PURE__*/_jsxDEV(Table, {\n                children: [/*#__PURE__*/_jsxDEV(TableHead, {\n                  children: /*#__PURE__*/_jsxDEV(TableRow, {\n                    sx: {\n                      bgcolor: \"grey.100\"\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                      children: \"Ng\\xE0y\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2103,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                      children: \"Th\\u1EDDi gian\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2104,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                      children: \"Tr\\u1EA1ng th\\xE1i\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2105,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                      children: \"Ph\\xF2ng h\\u1ECDc\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2106,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                      children: \"Ghi ch\\xFA\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2107,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                      align: \"right\",\n                      children: \"Thao t\\xE1c\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2108,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2102,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2101,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n                  children: attendanceSessions.map(session => {\n                    var _session$room;\n                    return /*#__PURE__*/_jsxDEV(TableRow, {\n                      children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                        children: new Date(session.date).toLocaleDateString(\"vi-VN\")\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2114,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                        children: session.start_time && session.end_time ? `${new Date(session.start_time).toLocaleTimeString(\"vi-VN\", {\n                          hour: \"2-digit\",\n                          minute: \"2-digit\",\n                          timeZone: \"UTC\"\n                        })} - ${new Date(session.end_time).toLocaleTimeString(\"vi-VN\", {\n                          hour: \"2-digit\",\n                          minute: \"2-digit\",\n                          timeZone: \"UTC\"\n                        })}` : \"N/A\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2119,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                        children: /*#__PURE__*/_jsxDEV(Chip, {\n                          label: session.status === \"completed\" ? \"Đã hoàn thành\" : session.status === \"active\" ? \"Đang diễn ra\" : \"Chưa bắt đầu\",\n                          color: session.status === \"completed\" ? \"success\" : session.status === \"active\" ? \"warning\" : \"primary\",\n                          size: \"small\",\n                          variant: \"outlined\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2137,\n                          columnNumber: 31\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2136,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                        children: getRoomDetailsString(((_session$room = session.room) === null || _session$room === void 0 ? void 0 : _session$room._id) || session.room)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2156,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                        children: session.notes && session.notes.length > 20 ? `${session.notes.substring(0, 20)}...` : session.notes || \"\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2161,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                        align: \"right\",\n                        children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n                          title: session.notes ? \"Xem/Sửa Ghi chú\" : \"Thêm Ghi chú\",\n                          children: /*#__PURE__*/_jsxDEV(IconButton, {\n                            onClick: () => handleOpenNotesDialog(session),\n                            size: \"small\",\n                            sx: {\n                              mr: 0.5\n                            },\n                            children: /*#__PURE__*/_jsxDEV(AssignmentIcon, {\n                              fontSize: \"small\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 2179,\n                              columnNumber: 35\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 2174,\n                            columnNumber: 33\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2167,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(Button, {\n                          variant: \"contained\",\n                          color: \"primary\",\n                          size: \"small\",\n                          onClick: () => handleStartSession(session._id),\n                          startIcon: session.status === \"completed\" ? /*#__PURE__*/_jsxDEV(CheckCircle, {}, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 2189,\n                            columnNumber: 37\n                          }, this) : /*#__PURE__*/_jsxDEV(PlayArrow, {}, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 2191,\n                            columnNumber: 37\n                          }, this),\n                          children: session.status === \"completed\" ? \"Xem\" : \"Bắt đầu\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2182,\n                          columnNumber: 31\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2166,\n                        columnNumber: 29\n                      }, this)]\n                    }, session._id, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2113,\n                      columnNumber: 27\n                    }, this);\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2111,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2100,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2099,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(Alert, {\n              severity: \"info\",\n              children: \"Ch\\u01B0a c\\xF3 bu\\u1ED5i \\u0111i\\u1EC3m danh n\\xE0o \\u0111\\u01B0\\u1EE3c t\\u1EA1o\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2206,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2075,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2074,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n          value: tabValue,\n          index: 2,\n          children: /*#__PURE__*/_jsxDEV(Paper, {\n            elevation: 2,\n            sx: {\n              p: 3,\n              borderRadius: 2\n            },\n            children: [/*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                display: \"flex\",\n                justifyContent: \"space-between\",\n                mb: 3\n              },\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h6\",\n                gutterBottom: true,\n                children: [\"Danh s\\xE1ch sinh vi\\xEAn (\", students.length, \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2223,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Box, {\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"outlined\",\n                  color: \"primary\",\n                  startIcon: /*#__PURE__*/_jsxDEV(Download, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2230,\n                    columnNumber: 34\n                  }, this),\n                  onClick: handleExportStudentList,\n                  sx: {\n                    mr: 1\n                  },\n                  children: \"Xu\\u1EA5t DS\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2227,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"contained\",\n                  color: \"primary\",\n                  startIcon: /*#__PURE__*/_jsxDEV(PersonAdd, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2239,\n                    columnNumber: 34\n                  }, this),\n                  onClick: handleOpenAddStudentDialog,\n                  children: \"Th\\xEAm sinh vi\\xEAn\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2236,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2226,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2216,\n              columnNumber: 17\n            }, this), students.length > 0 ? /*#__PURE__*/_jsxDEV(TableContainer, {\n              component: Paper,\n              variant: \"outlined\",\n              children: /*#__PURE__*/_jsxDEV(Table, {\n                children: [/*#__PURE__*/_jsxDEV(TableHead, {\n                  children: /*#__PURE__*/_jsxDEV(TableRow, {\n                    sx: {\n                      bgcolor: \"grey.100\"\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                      children: \"STT\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2252,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                      children: \"M\\xE3 SV\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2253,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                      children: \"H\\u1ECD t\\xEAn\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2254,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                      children: \"Email\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2255,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                      children: \"\\u0110\\u0103ng k\\xFD khu\\xF4n m\\u1EB7t\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2256,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                      children: \"S\\u1ED1 bu\\u1ED5i v\\u1EAFng\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2257,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                      children: \"\\u0110i\\u1EC1u ki\\u1EC7n thi\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2258,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                      align: \"right\",\n                      children: \"Thao t\\xE1c\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2259,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2251,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2250,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n                  children: students.map((student, index) => {\n                    var _student$school_info4, _student$score$absent, _student$score$absent2;\n                    return /*#__PURE__*/_jsxDEV(TableRow, {\n                      children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                        children: index + 1\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2265,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                        children: ((_student$school_info4 = student.school_info) === null || _student$school_info4 === void 0 ? void 0 : _student$school_info4.student_id) || \"Chưa có mã SV\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2266,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                        children: student.full_name\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2270,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                        children: student.email\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2271,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                        children: /*#__PURE__*/_jsxDEV(Chip, {\n                          label: student.has_face_data ? \"Đã đăng ký\" : \"Chưa đăng ký\",\n                          color: student.has_face_data ? \"success\" : \"warning\",\n                          size: \"small\",\n                          variant: \"outlined\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2273,\n                          columnNumber: 31\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2272,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                        children: student.score ? /*#__PURE__*/_jsxDEV(Tooltip, {\n                          title: `Tối đa vắng: ${student.score.max_absent_allowed != null ? student.score.max_absent_allowed : (classInfo === null || classInfo === void 0 ? void 0 : classInfo.max_absent_allowed) || \"N/A\"} buổi`,\n                          children: /*#__PURE__*/_jsxDEV(Chip, {\n                            label: `${(_student$score$absent = student.score.absent_sessions) !== null && _student$score$absent !== void 0 ? _student$score$absent : 0} / ${student.score.max_absent_allowed != null ? student.score.max_absent_allowed : (classInfo === null || classInfo === void 0 ? void 0 : classInfo.max_absent_allowed) || \"N/A\"}`,\n                            size: \"small\",\n                            color: ((_student$score$absent2 = student.score.absent_sessions) !== null && _student$score$absent2 !== void 0 ? _student$score$absent2 : 0) > (student.score.max_absent_allowed != null ? student.score.max_absent_allowed : (classInfo === null || classInfo === void 0 ? void 0 : classInfo.max_absent_allowed) || Infinity) ? \"error\" : \"default\",\n                            variant: \"outlined\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 2295,\n                            columnNumber: 35\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2288,\n                          columnNumber: 33\n                        }, this) : /*#__PURE__*/_jsxDEV(Chip, {\n                          label: \"N/A\",\n                          size: \"small\",\n                          variant: \"outlined\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2317,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2286,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                        children: student.score ? student.score.is_failed_due_to_absent ? /*#__PURE__*/_jsxDEV(Chip, {\n                          label: \"Kh\\xF4ng \\u0111\\u1EE7 \\u0110K (v\\u1EAFng)\",\n                          color: \"error\",\n                          size: \"small\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2327,\n                          columnNumber: 35\n                        }, this) : /*#__PURE__*/_jsxDEV(Chip, {\n                          label: \"\\u0110\\u1EE7 \\u0111i\\u1EC1u ki\\u1EC7n\",\n                          color: \"success\",\n                          size: \"small\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2333,\n                          columnNumber: 35\n                        }, this) : /*#__PURE__*/_jsxDEV(Chip, {\n                          label: \"Ch\\u01B0a c\\xF3 d\\u1EEF li\\u1EC7u\",\n                          size: \"small\",\n                          variant: \"outlined\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2340,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2324,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                        align: \"right\",\n                        children: /*#__PURE__*/_jsxDEV(IconButton, {\n                          color: \"error\",\n                          onClick: () => handleRemoveStudent(student._id),\n                          size: \"small\",\n                          children: /*#__PURE__*/_jsxDEV(Delete, {\n                            fontSize: \"small\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 2353,\n                            columnNumber: 33\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2348,\n                          columnNumber: 31\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2347,\n                        columnNumber: 29\n                      }, this)]\n                    }, student._id, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2264,\n                      columnNumber: 27\n                    }, this);\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2262,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2249,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2248,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(Alert, {\n              severity: \"info\",\n              children: \"Ch\\u01B0a c\\xF3 sinh vi\\xEAn n\\xE0o trong l\\u1EDBp n\\xE0y\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2362,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2215,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2214,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n          value: tabValue,\n          index: 3,\n          children: /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            spacing: 3,\n            children: [/*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              md: 6,\n              children: /*#__PURE__*/_jsxDEV(Paper, {\n                elevation: 2,\n                sx: {\n                  p: 3,\n                  borderRadius: 2,\n                  height: \"100%\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"h6\",\n                  gutterBottom: true,\n                  children: \"Th\\u1ED1ng k\\xEA \\u0111i\\u1EC3m danh\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2377,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Box, {\n                  sx: {\n                    mt: 2\n                  },\n                  children: /*#__PURE__*/_jsxDEV(Grid, {\n                    container: true,\n                    spacing: 2,\n                    children: [/*#__PURE__*/_jsxDEV(Grid, {\n                      item: true,\n                      xs: 12,\n                      sm: 4,\n                      children: /*#__PURE__*/_jsxDEV(Paper, {\n                        sx: {\n                          p: 2,\n                          textAlign: \"center\",\n                          bgcolor: \"primary.lighter\",\n                          color: \"primary.dark\",\n                          borderRadius: 2\n                        },\n                        children: [/*#__PURE__*/_jsxDEV(Typography, {\n                          variant: \"h4\",\n                          children: attendanceStats.total\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2392,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                          variant: \"body2\",\n                          children: \"T\\u1ED5ng bu\\u1ED5i h\\u1ECDc\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2395,\n                          columnNumber: 29\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2383,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2382,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                      item: true,\n                      xs: 12,\n                      sm: 4,\n                      children: /*#__PURE__*/_jsxDEV(Paper, {\n                        sx: {\n                          p: 2,\n                          textAlign: \"center\",\n                          bgcolor: \"success.lighter\",\n                          color: \"success.dark\",\n                          borderRadius: 2\n                        },\n                        children: [/*#__PURE__*/_jsxDEV(Typography, {\n                          variant: \"h4\",\n                          children: attendanceStats.completed\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2410,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                          variant: \"body2\",\n                          children: \"\\u0110\\xE3 ho\\xE0n th\\xE0nh\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2413,\n                          columnNumber: 29\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2401,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2400,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                      item: true,\n                      xs: 12,\n                      sm: 4,\n                      children: /*#__PURE__*/_jsxDEV(Paper, {\n                        sx: {\n                          p: 2,\n                          textAlign: \"center\",\n                          bgcolor: \"warning.lighter\",\n                          color: \"warning.dark\",\n                          borderRadius: 2\n                        },\n                        children: [/*#__PURE__*/_jsxDEV(Typography, {\n                          variant: \"h4\",\n                          children: attendanceStats.pending\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2428,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                          variant: \"body2\",\n                          children: \"Ch\\u01B0a b\\u1EAFt \\u0111\\u1EA7u\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2431,\n                          columnNumber: 29\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2419,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2418,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2381,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2380,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2373,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2372,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              md: 6,\n              children: /*#__PURE__*/_jsxDEV(Paper, {\n                elevation: 2,\n                sx: {\n                  p: 3,\n                  borderRadius: 2,\n                  height: \"100%\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"h6\",\n                  gutterBottom: true,\n                  children: \"Th\\u1ED1ng k\\xEA sinh vi\\xEAn\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2445,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Box, {\n                  sx: {\n                    mt: 2\n                  },\n                  children: /*#__PURE__*/_jsxDEV(Grid, {\n                    container: true,\n                    spacing: 2,\n                    children: [/*#__PURE__*/_jsxDEV(Grid, {\n                      item: true,\n                      xs: 12,\n                      sm: 4,\n                      children: /*#__PURE__*/_jsxDEV(Paper, {\n                        sx: {\n                          p: 2,\n                          textAlign: \"center\",\n                          bgcolor: \"info.lighter\",\n                          color: \"info.dark\",\n                          borderRadius: 2\n                        },\n                        children: [/*#__PURE__*/_jsxDEV(Typography, {\n                          variant: \"h4\",\n                          children: students.length\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2460,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                          variant: \"body2\",\n                          children: \"T\\u1ED5ng sinh vi\\xEAn\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2463,\n                          columnNumber: 29\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2451,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2450,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                      item: true,\n                      xs: 12,\n                      sm: 4,\n                      children: /*#__PURE__*/_jsxDEV(Paper, {\n                        sx: {\n                          p: 2,\n                          textAlign: \"center\",\n                          bgcolor: \"success.lighter\",\n                          color: \"success.dark\",\n                          borderRadius: 2\n                        },\n                        children: [/*#__PURE__*/_jsxDEV(Typography, {\n                          variant: \"h4\",\n                          children: students.filter(s => s.has_face_data).length\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2478,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                          variant: \"body2\",\n                          children: \"\\u0110\\xE3 \\u0111\\u0103ng k\\xFD KM\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2481,\n                          columnNumber: 29\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2469,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2468,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                      item: true,\n                      xs: 12,\n                      sm: 4,\n                      children: /*#__PURE__*/_jsxDEV(Paper, {\n                        sx: {\n                          p: 2,\n                          textAlign: \"center\",\n                          bgcolor: \"warning.lighter\",\n                          color: \"warning.dark\",\n                          borderRadius: 2\n                        },\n                        children: [/*#__PURE__*/_jsxDEV(Typography, {\n                          variant: \"h4\",\n                          children: students.filter(s => !s.has_face_data).length\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2496,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                          variant: \"body2\",\n                          children: \"Ch\\u01B0a \\u0111\\u0103ng k\\xFD KM\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2499,\n                          columnNumber: 29\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2487,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2486,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2449,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2448,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2441,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2440,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2371,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2370,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n          value: tabValue,\n          index: 4,\n          children: /*#__PURE__*/_jsxDEV(Paper, {\n            elevation: 2,\n            sx: {\n              p: 3,\n              borderRadius: 2\n            },\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              gutterBottom: true,\n              children: \"C\\u1EA5u h\\xECnh l\\u1EDBp h\\u1ECDc\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2514,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n              title: derivedClassStatus !== \"NOT_STARTED\" ? `Lớp học ${getVietnameseClassStatus(derivedClassStatus)}, không thể chỉnh sửa` : \"Chỉnh sửa thông tin lớp\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\" \", /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"contained\",\n                  color: \"primary\",\n                  startIcon: /*#__PURE__*/_jsxDEV(Edit, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2533,\n                    columnNumber: 34\n                  }, this),\n                  onClick: handleOpenEditClassDialog,\n                  sx: {\n                    mt: 2\n                  },\n                  disabled: derivedClassStatus !== \"NOT_STARTED\" || isUpdating,\n                  children: \"Ch\\u1EC9nh s\\u1EEDa th\\xF4ng tin l\\u1EDBp\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2530,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2527,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2518,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2513,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2512,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1950,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n        open: openAddStudentDialog,\n        onClose: handleCloseAddStudentDialog,\n        maxWidth: \"md\",\n        fullWidth: true,\n        children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n          children: \"Th\\xEAm sinh vi\\xEAn v\\xE0o l\\u1EDBp\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2555,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n          dividers: true,\n          children: /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            spacing: 2,\n            children: [/*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              children: /*#__PURE__*/_jsxDEV(FormControl, {\n                fullWidth: true,\n                sx: {\n                  mb: 2\n                },\n                children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                  children: \"Ch\\u1ECDn l\\u1EDBp ch\\xEDnh\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2560,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Select, {\n                  value: selectedMainClass,\n                  onChange: handleMainClassChange,\n                  label: \"Ch\\u1ECDn l\\u1EDBp ch\\xEDnh\",\n                  children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: \"\",\n                    children: \"Ch\\u1ECDn l\\u1EDBp ch\\xEDnh\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2566,\n                    columnNumber: 23\n                  }, this), mainClasses.map(cls => /*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: cls._id,\n                    children: [cls.name, \" (\", cls.class_code, \")\"]\n                  }, cls._id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2568,\n                    columnNumber: 25\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2561,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(FormHelperText, {\n                  children: \"Ch\\u1ECDn l\\u1EDBp ch\\xEDnh \\u0111\\u1EC3 xem danh s\\xE1ch sinh vi\\xEAn\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2573,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2559,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2558,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                fullWidth: true,\n                label: \"T\\xECm ki\\u1EBFm sinh vi\\xEAn\",\n                variant: \"outlined\",\n                value: searchStudent,\n                onChange: e => setSearchStudent(e.target.value),\n                placeholder: \"Nh\\u1EADp t\\xEAn, m\\xE3 SV ho\\u1EB7c email \\u0111\\u1EC3 t\\xECm ki\\u1EBFm\",\n                sx: {\n                  mb: 2\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2580,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2579,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              children: isLoadingStudents ? /*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  display: \"flex\",\n                  justifyContent: \"center\",\n                  p: 3\n                },\n                children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2600,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2593,\n                columnNumber: 21\n              }, this) : filteredAvailableStudents.length > 0 ? /*#__PURE__*/_jsxDEV(List, {\n                sx: {\n                  width: \"100%\",\n                  bgcolor: \"background.paper\",\n                  maxHeight: 300,\n                  overflow: \"auto\"\n                },\n                children: filteredAvailableStudents.map(student => {\n                  var _student$school_info5;\n                  return /*#__PURE__*/_jsxDEV(ListItem, {\n                    divider: true,\n                    children: [/*#__PURE__*/_jsxDEV(Checkbox, {\n                      checked: selectedStudents.includes(student._id),\n                      onChange: () => handleSelectStudent(student._id)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2613,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n                      primary: student.full_name,\n                      secondary: /*#__PURE__*/_jsxDEV(_Fragment, {\n                        children: [\"MSSV: \", ((_student$school_info5 = student.school_info) === null || _student$school_info5 === void 0 ? void 0 : _student$school_info5.student_id) || \"N/A\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2622,\n                          columnNumber: 33\n                        }, this), \"Email: \", student.email]\n                      }, void 0, true)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2617,\n                      columnNumber: 27\n                    }, this)]\n                  }, student._id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2612,\n                    columnNumber: 25\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2603,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(Alert, {\n                severity: \"info\",\n                sx: {\n                  width: \"100%\"\n                },\n                children: !selectedMainClass ? \"Vui lòng chọn lớp chính để xem danh sách sinh viên\" : \"Không tìm thấy sinh viên phù hợp hoặc đã thêm tất cả sinh viên từ lớp này\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2631,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2591,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2557,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2556,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n          sx: {\n            p: 2,\n            justifyContent: \"space-between\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            onClick: handleCloseAddStudentDialog,\n            color: \"inherit\",\n            variant: \"outlined\",\n            children: \"H\\u1EE7y\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2641,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: handleAddStudents,\n            color: \"primary\",\n            variant: \"contained\",\n            disabled: selectedStudents.length === 0,\n            children: [\"Th\\xEAm \", selectedStudents.length, \" sinh vi\\xEAn\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2648,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2640,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2549,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n        open: openSessionDialog,\n        onClose: handleCloseSessionDialog,\n        maxWidth: \"md\",\n        fullWidth: true,\n        children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n          children: sessionFormData._id ? \"Chỉnh sửa buổi điểm danh\" : \"Tạo buổi điểm danh mới\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2666,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n          dividers: true,\n          children: /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            spacing: 2,\n            sx: {\n              pt: 1\n            },\n            children: [/*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              sm: 6,\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                fullWidth: true,\n                label: \"T\\xEAn bu\\u1ED5i h\\u1ECDc\",\n                name: \"title\",\n                value: sessionFormData.title,\n                onChange: handleSessionFormChange,\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2674,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2673,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              sm: 6,\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                fullWidth: true,\n                label: \"S\\u1ED1 bu\\u1ED5i (th\\u1EE9 t\\u1EF1)\",\n                name: \"session_number\",\n                type: \"number\",\n                value: sessionFormData.session_number,\n                onChange: handleSessionFormChange,\n                required: true,\n                InputProps: {\n                  inputProps: {\n                    min: 1,\n                    max: (classInfo === null || classInfo === void 0 ? void 0 : classInfo.total_sessions) || 15\n                  }\n                },\n                helperText: `Buổi học thứ (1-${(classInfo === null || classInfo === void 0 ? void 0 : classInfo.total_sessions) || \"?\"})`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2684,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2683,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              sm: 6,\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                fullWidth: true,\n                label: \"Ng\\xE0y\",\n                name: \"date\",\n                type: \"date\",\n                value: sessionFormData.date,\n                onChange: handleSessionFormChange,\n                required: true,\n                InputLabelProps: {\n                  shrink: true\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2704,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2703,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              sm: 6,\n              children: /*#__PURE__*/_jsxDEV(FormControl, {\n                fullWidth: true,\n                children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                  children: \"Ph\\xF2ng h\\u1ECDc\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2717,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Select, {\n                  label: \"Ph\\xF2ng h\\u1ECDc\",\n                  name: \"room\",\n                  value: sessionFormData.room,\n                  onChange: handleSessionFormChange,\n                  children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: \"\",\n                    children: /*#__PURE__*/_jsxDEV(\"em\", {\n                      children: \"Kh\\xF4ng ch\\u1ECDn ph\\xF2ng h\\u1ECDc\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2725,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2724,\n                    columnNumber: 23\n                  }, this), rooms.map(room => {\n                    var _room$building_id;\n                    return /*#__PURE__*/_jsxDEV(MenuItem, {\n                      value: room._id,\n                      children: [room.room_number, \" - T\\xF2a\", \" \", ((_room$building_id = room.building_id) === null || _room$building_id === void 0 ? void 0 : _room$building_id.name) || \"N/A\"]\n                    }, room._id, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2728,\n                      columnNumber: 25\n                    }, this);\n                  })]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2718,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(FormHelperText, {\n                  children: \"Ch\\u1ECDn ph\\xF2ng h\\u1ECDc cho bu\\u1ED5i \\u0111i\\u1EC3m danh\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2734,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2716,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2715,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              sm: 6,\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                fullWidth: true,\n                label: \"Gi\\u1EDD b\\u1EAFt \\u0111\\u1EA7u\",\n                name: \"start_time\",\n                type: \"time\",\n                value: sessionFormData.start_time,\n                onChange: handleSessionFormChange,\n                required: true,\n                InputLabelProps: {\n                  shrink: true\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2740,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2739,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              sm: 6,\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                fullWidth: true,\n                label: \"Gi\\u1EDD k\\u1EBFt th\\xFAc\",\n                name: \"end_time\",\n                type: \"time\",\n                value: sessionFormData.end_time,\n                onChange: handleSessionFormChange,\n                required: true,\n                InputLabelProps: {\n                  shrink: true\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2752,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2751,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              sm: 6,\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                fullWidth: true,\n                label: \"Ti\\u1EBFt b\\u1EAFt \\u0111\\u1EA7u\",\n                name: \"start_period\",\n                type: \"number\",\n                value: sessionFormData.start_period,\n                onChange: handleSessionFormChange,\n                InputProps: {\n                  inputProps: {\n                    min: 1,\n                    max: 15\n                  }\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2764,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2763,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              sm: 6,\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                fullWidth: true,\n                label: \"Ti\\u1EBFt k\\u1EBFt th\\xFAc\",\n                name: \"end_period\",\n                type: \"number\",\n                value: sessionFormData.end_period,\n                onChange: handleSessionFormChange,\n                InputProps: {\n                  inputProps: {\n                    min: 1,\n                    max: 15\n                  }\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2775,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2774,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                fullWidth: true,\n                label: \"Ghi ch\\xFA\",\n                name: \"notes\",\n                multiline: true,\n                rows: 3,\n                value: sessionFormData.notes,\n                onChange: handleSessionFormChange,\n                placeholder: \"Nh\\u1EADp ghi ch\\xFA v\\u1EC1 bu\\u1ED5i h\\u1ECDc (n\\u1EBFu c\\xF3)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2786,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2785,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              children: /*#__PURE__*/_jsxDEV(Alert, {\n                severity: \"info\",\n                sx: {\n                  mt: 1\n                },\n                children: [\"L\\u01B0u \\xFD: Th\\u1EDDi gian bu\\u1ED5i h\\u1ECDc ph\\u1EA3i n\\u1EB1m trong kho\\u1EA3ng th\\u1EDDi gian c\\u1EE7a h\\u1ECDc k\\u1EF3 (\", classInfo !== null && classInfo !== void 0 && (_classInfo$semester_i3 = classInfo.semester_id) !== null && _classInfo$semester_i3 !== void 0 && _classInfo$semester_i3.start_date ? new Date(classInfo.semester_id.start_date).toLocaleDateString(\"vi-VN\") : \"?\", \" \", \"-\", classInfo !== null && classInfo !== void 0 && (_classInfo$semester_i4 = classInfo.semester_id) !== null && _classInfo$semester_i4 !== void 0 && _classInfo$semester_i4.end_date ? new Date(classInfo.semester_id.end_date).toLocaleDateString(\"vi-VN\") : \"?\", \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2798,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2797,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2672,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2671,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n          sx: {\n            p: 2,\n            justifyContent: \"space-between\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            onClick: handleCloseSessionDialog,\n            color: \"inherit\",\n            variant: \"outlined\",\n            children: \"H\\u1EE7y\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2818,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: sessionFormData._id ? handleUpdateSession : handleCreateSession,\n            color: \"primary\",\n            variant: \"contained\",\n            children: sessionFormData._id ? \"Cập nhật\" : \"Tạo buổi điểm danh\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2825,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2817,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2660,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n        open: openEditClassDialog,\n        onClose: handleCloseEditClassDialog,\n        maxWidth: \"md\",\n        fullWidth: true,\n        children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n          children: \"Ch\\u1EC9nh s\\u1EEDa th\\xF4ng tin l\\u1EDBp h\\u1ECDc\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2846,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n          dividers: true,\n          children: editClassData && /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            spacing: 2,\n            sx: {\n              pt: 1\n            },\n            children: [/*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              sm: 6,\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                fullWidth: true,\n                label: \"T\\xEAn l\\u1EDBp\",\n                name: \"class_name\",\n                value: editClassData.class_name,\n                onChange: handleEditClassChange,\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2851,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2850,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              sm: 6,\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                fullWidth: true,\n                label: \"M\\xE3 l\\u1EDBp\",\n                name: \"class_code\",\n                value: editClassData.class_code,\n                onChange: handleEditClassChange,\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2861,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2860,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              sm: 6,\n              children: /*#__PURE__*/_jsxDEV(FormControl, {\n                fullWidth: true,\n                children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                  children: \"M\\xF4n h\\u1ECDc\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2872,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Select, {\n                  name: \"subject_id\",\n                  value: editClassData.subject_id,\n                  onChange: handleEditClassChange,\n                  label: \"M\\xF4n h\\u1ECDc\",\n                  children: subjects.map(subject => /*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: subject._id,\n                    children: [subject.name, \" (\", subject.code, \")\"]\n                  }, subject._id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2880,\n                    columnNumber: 27\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2873,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2871,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2870,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              sm: 6,\n              children: /*#__PURE__*/_jsxDEV(FormControl, {\n                fullWidth: true,\n                children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                  children: \"H\\u1ECDc k\\u1EF3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2889,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Select, {\n                  name: \"semester_id\",\n                  value: editClassData.semester_id,\n                  onChange: handleEditClassChange,\n                  label: \"H\\u1ECDc k\\u1EF3\",\n                  children: semesters.map(semester => /*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: semester._id,\n                    children: [semester.name, \" (\", semester.academic_year || semester.year, \")\"]\n                  }, semester._id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2897,\n                    columnNumber: 27\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2890,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2888,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2887,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              sm: 6,\n              children: /*#__PURE__*/_jsxDEV(FormControl, {\n                fullWidth: true,\n                children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                  children: \"L\\u1EDBp ch\\xEDnh\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2907,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Select, {\n                  name: \"main_class_id\",\n                  value: editClassData.main_class_id,\n                  onChange: handleEditClassChange,\n                  label: \"L\\u1EDBp ch\\xEDnh\",\n                  children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: \"\",\n                    children: \"Kh\\xF4ng ch\\u1ECDn l\\u1EDBp ch\\xEDnh\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2914,\n                    columnNumber: 25\n                  }, this), mainClasses.map(cls => /*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: cls._id,\n                    children: [cls.name, \" (\", cls.class_code, \")\"]\n                  }, cls._id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2916,\n                    columnNumber: 27\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2908,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2906,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2905,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              sm: 6,\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                fullWidth: true,\n                label: \"S\\u1ED1 bu\\u1ED5i h\\u1ECDc\",\n                name: \"total_sessions\",\n                type: \"number\",\n                value: editClassData.total_sessions,\n                onChange: handleTotalSessionsChange,\n                InputProps: {\n                  inputProps: {\n                    min: 1\n                  }\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2924,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2923,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              sm: 6,\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                fullWidth: true,\n                label: \"Ng\\xE0y b\\u1EAFt \\u0111\\u1EA7u\",\n                name: \"course_start_date\",\n                type: \"date\",\n                value: editClassData.course_start_date,\n                onChange: handleStartDateChange,\n                InputLabelProps: {\n                  shrink: true\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2935,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2934,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              sm: 6,\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                fullWidth: true,\n                label: \"Ng\\xE0y k\\u1EBFt th\\xFAc (t\\u1EF1 \\u0111\\u1ED9ng t\\xEDnh)\",\n                name: \"course_end_date\",\n                type: \"date\",\n                value: editClassData.course_end_date,\n                disabled: true,\n                InputLabelProps: {\n                  shrink: true\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2946,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2945,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h6\",\n                sx: {\n                  mt: 2,\n                  mb: 1\n                },\n                children: \"C\\u1EA5u h\\xECnh l\\u1ECBch h\\u1ECDc\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2959,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Divider, {\n                sx: {\n                  mb: 2\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2962,\n                columnNumber: 21\n              }, this), scheduleDays.map((day, index) => /*#__PURE__*/_jsxDEV(Paper, {\n                sx: {\n                  p: 2,\n                  mb: 2,\n                  position: \"relative\"\n                },\n                variant: \"outlined\",\n                children: [/*#__PURE__*/_jsxDEV(Grid, {\n                  container: true,\n                  spacing: 2,\n                  alignItems: \"center\",\n                  children: [/*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    sm: 6,\n                    md: 3,\n                    children: /*#__PURE__*/_jsxDEV(FormControl, {\n                      fullWidth: true,\n                      size: \"small\",\n                      children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                        children: \"Th\\u1EE9\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2973,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(Select, {\n                        label: \"Th\\u1EE9\",\n                        value: day.day_of_week !== undefined ? day.day_of_week : \"\",\n                        onChange: e => handleScheduleChange(index, \"day_of_week\", e.target.value),\n                        children: [0, 1, 2, 3, 4, 5, 6].map(d => /*#__PURE__*/_jsxDEV(MenuItem, {\n                          value: d,\n                          children: getDayOfWeekName(d)\n                        }, d, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 2990,\n                          columnNumber: 35\n                        }, this))\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2974,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2972,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2971,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 6,\n                    sm: 3,\n                    md: 1.5,\n                    children: /*#__PURE__*/_jsxDEV(TextField, {\n                      fullWidth: true,\n                      label: \"Ti\\u1EBFt B\\u0110\",\n                      type: \"number\",\n                      size: \"small\",\n                      value: day.start_period,\n                      onChange: e => handleScheduleChange(index, \"start_period\", e.target.value),\n                      InputProps: {\n                        inputProps: {\n                          min: 1,\n                          max: 15\n                        }\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2998,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2997,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 6,\n                    sm: 3,\n                    md: 1.5,\n                    children: /*#__PURE__*/_jsxDEV(TextField, {\n                      fullWidth: true,\n                      label: \"Ti\\u1EBFt KT\",\n                      type: \"number\",\n                      size: \"small\",\n                      value: day.end_period,\n                      onChange: e => handleScheduleChange(index, \"end_period\", e.target.value),\n                      InputProps: {\n                        inputProps: {\n                          min: day.start_period || 1,\n                          max: 15\n                        }\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3015,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3014,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 6,\n                    sm: 3,\n                    md: 3,\n                    children: /*#__PURE__*/_jsxDEV(TextField, {\n                      fullWidth: true,\n                      label: \"Gi\\u1EDD B\\u0110\",\n                      type: \"time\",\n                      size: \"small\",\n                      value: day.start_time,\n                      InputLabelProps: {\n                        shrink: true\n                      },\n                      onChange: e => handleScheduleChange(index, \"start_time\", e.target.value)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3038,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3037,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 6,\n                    sm: 3,\n                    md: 3,\n                    children: /*#__PURE__*/_jsxDEV(TextField, {\n                      fullWidth: true,\n                      label: \"Gi\\u1EDD KT\",\n                      type: \"time\",\n                      size: \"small\",\n                      value: day.end_time,\n                      InputLabelProps: {\n                        shrink: true\n                      },\n                      onChange: e => handleScheduleChange(index, \"end_time\", e.target.value)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3055,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3054,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    sm: 4,\n                    md: 4,\n                    children: /*#__PURE__*/_jsxDEV(FormControl, {\n                      fullWidth: true,\n                      size: \"small\",\n                      children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                        children: \"C\\u01A1 s\\u1EDF\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 3074,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(Select, {\n                        label: \"C\\u01A1 s\\u1EDF\",\n                        value: day.campusId || \"\",\n                        onChange: e => handleScheduleChange(index, \"campusId\", e.target.value),\n                        children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n                          value: \"\",\n                          children: /*#__PURE__*/_jsxDEV(\"em\", {\n                            children: \"Ch\\u1ECDn c\\u01A1 s\\u1EDF\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 3087,\n                            columnNumber: 35\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3086,\n                          columnNumber: 33\n                        }, this), campuses.map(campus => /*#__PURE__*/_jsxDEV(MenuItem, {\n                          value: campus._id,\n                          children: campus.name\n                        }, campus._id, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3090,\n                          columnNumber: 35\n                        }, this))]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 3075,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3073,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3072,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    sm: 4,\n                    md: 4,\n                    children: /*#__PURE__*/_jsxDEV(FormControl, {\n                      fullWidth: true,\n                      size: \"small\",\n                      disabled: !day.campusId,\n                      children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                        children: \"T\\xF2a nh\\xE0\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 3103,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(Select, {\n                        label: \"T\\xF2a nh\\xE0\",\n                        value: day.buildingId || \"\",\n                        onChange: e => handleScheduleChange(index, \"buildingId\", e.target.value),\n                        children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n                          value: \"\",\n                          children: /*#__PURE__*/_jsxDEV(\"em\", {\n                            children: \"Ch\\u1ECDn t\\xF2a nh\\xE0\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 3116,\n                            columnNumber: 35\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3115,\n                          columnNumber: 33\n                        }, this), day.availableBuildings && day.availableBuildings.map(building => /*#__PURE__*/_jsxDEV(MenuItem, {\n                          value: building._id,\n                          children: building.name\n                        }, building._id, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3120,\n                          columnNumber: 37\n                        }, this))]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 3104,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3098,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3097,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    sm: 4,\n                    md: 4,\n                    children: /*#__PURE__*/_jsxDEV(FormControl, {\n                      fullWidth: true,\n                      size: \"small\",\n                      disabled: !day.buildingId,\n                      children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                        children: \"Ph\\xF2ng h\\u1ECDc\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 3136,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(Select, {\n                        label: \"Ph\\xF2ng h\\u1ECDc\",\n                        value: day.room_id || \"\",\n                        onChange: e => handleScheduleChange(index, \"room_id\", e.target.value),\n                        children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n                          value: \"\",\n                          children: /*#__PURE__*/_jsxDEV(\"em\", {\n                            children: \"Ch\\u1ECDn ph\\xF2ng h\\u1ECDc\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 3149,\n                            columnNumber: 35\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3148,\n                          columnNumber: 33\n                        }, this), day.availableRooms && day.availableRooms.map(room => /*#__PURE__*/_jsxDEV(MenuItem, {\n                          value: room._id,\n                          children: [room.room_number, \" (SL: \", room.capacity, \")\"]\n                        }, room._id, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 3153,\n                          columnNumber: 37\n                        }, this))]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 3137,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3131,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3130,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2970,\n                  columnNumber: 25\n                }, this), scheduleDays.length > 1 && /*#__PURE__*/_jsxDEV(IconButton, {\n                  color: \"error\",\n                  size: \"small\",\n                  onClick: () => removeScheduleDay(index),\n                  sx: {\n                    position: \"absolute\",\n                    top: 8,\n                    right: 8\n                  },\n                  children: /*#__PURE__*/_jsxDEV(Delete, {\n                    fontSize: \"small\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3169,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3163,\n                  columnNumber: 27\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2965,\n                columnNumber: 23\n              }, this)), /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"outlined\",\n                startIcon: /*#__PURE__*/_jsxDEV(Add, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3177,\n                  columnNumber: 34\n                }, this),\n                onClick: addScheduleDay,\n                sx: {\n                  mt: 1\n                },\n                children: \"Th\\xEAm bu\\u1ED5i h\\u1ECDc\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3175,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2958,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2849,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2847,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n          sx: {\n            p: 2,\n            justifyContent: \"space-between\",\n            bgcolor: \"grey.50\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            onClick: handleCloseEditClassDialog,\n            color: \"inherit\",\n            variant: \"outlined\",\n            children: \"H\\u1EE7y\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3258,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: handleUpdateClass,\n            color: \"primary\",\n            variant: \"contained\",\n            disabled: isSubmittingEdit || !editClassData,\n            children: \"C\\u1EADp nh\\u1EADt l\\u1EDBp h\\u1ECDc\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3265,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3255,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2840,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n        open: openNotesDialog,\n        onClose: handleCloseNotesDialog,\n        maxWidth: \"sm\",\n        fullWidth: true,\n        children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n          sx: {\n            pb: 1\n          },\n          children: currentSessionForNotes !== null && currentSessionForNotes !== void 0 && currentSessionForNotes.notes ? \"Xem/Sửa ghi chú\" : \"Thêm ghi chú\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3283,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n          dividers: true,\n          sx: {\n            pt: \"16px !important\"\n          },\n          children: /*#__PURE__*/_jsxDEV(TextField, {\n            fullWidth: true,\n            multiline: true,\n            rows: 5,\n            label: \"N\\u1ED9i dung ghi ch\\xFA\",\n            value: notesText,\n            onChange: e => setNotesText(e.target.value),\n            placeholder: \"Nh\\u1EADp n\\u1ED9i dung ghi ch\\xFA cho bu\\u1ED5i h\\u1ECDc...\",\n            variant: \"outlined\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3289,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3288,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n          sx: {\n            p: 2,\n            justifyContent: \"space-between\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            onClick: handleCloseNotesDialog,\n            color: \"inherit\",\n            variant: \"outlined\",\n            children: \"H\\u1EE7y\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3301,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: handleSaveNotes,\n            color: \"primary\",\n            variant: \"contained\",\n            disabled: isSavingNotes,\n            children: isSavingNotes ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3314,\n              columnNumber: 34\n            }, this) : \"Lưu ghi chú\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3308,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3300,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3277,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 1723,\n    columnNumber: 5\n  }, this);\n};\n_s(TeacherClassDetailPage, \"OYJT+Vq7+Z2LgTrgGnkdYF6UsE0=\", false, function () {\n  return [useParams, useNavigate, useSnackbar, useSelector];\n});\n_c2 = TeacherClassDetailPage;\nexport default TeacherClassDetailPage;\nvar _c, _c2;\n$RefreshReg$(_c, \"TabPanel\");\n$RefreshReg$(_c2, \"TeacherClassDetailPage\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useParams","useNavigate","useSelector","useSnackbar","axios","Box","Typography","Card","CardContent","Grid","Paper","Button","Tabs","Tab","CircularProgress","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Chip","IconButton","Dialog","DialogTitle","DialogContent","DialogActions","TextField","FormControl","InputLabel","Select","MenuItem","List","ListItem","ListItemText","ListItemSecondaryAction","Divider","Alert","Tooltip","Checkbox","FormHelperText","AlertTitle","ListItemIcon","PersonAdd","Delete","Add","Edit","PlayArrow","Stop","CheckCircle","Warning","Info","CalendarToday","AccessTime","Download","School","Settings","Event","Person","Room","Assignment","AssignmentIcon","getTeachingClassById","updateTeachingClass","checkScheduleConflicts","jsxDEV","_jsxDEV","Fragment","_Fragment","API_URL","process","env","REACT_APP_API_URL","periodTimings","start","end","a11yProps","index","id","TabPanel","props","children","value","other","role","hidden","sx","p","fileName","_jsxFileName","lineNumber","columnNumber","_c","TeacherClassDetailPage","_s","_classInfo$subject_id2","_classInfo$semester_i2","_classInfo$main_class2","_classInfo$teacher_id2","_classInfo$semester_i3","_classInfo$semester_i4","classId","navigate","enqueueSnackbar","token","state","auth","classInfo","setClassInfo","students","setStudents","attendanceSessions","setAttendanceSessions","attendanceStats","setAttendanceStats","total","pending","completed","isLoading","setIsLoading","isUpdating","setIsUpdating","tabValue","setTabValue","openSessionDialog","setOpenSessionDialog","sessionFormData","setSessionFormData","title","date","Date","toISOString","split","start_time","end_time","room","session_number","length","start_period","end_period","notes","openAddStudentDialog","setOpenAddStudentDialog","availableStudents","setAvailableStudents","selectedStudents","setSelectedStudents","searchStudent","setSearchStudent","mainClasses","setMainClasses","selectedMainClass","setSelectedMainClass","isLoadingStudents","setIsLoadingStudents","openEditClassDialog","setOpenEditClassDialog","editClassData","setEditClassData","isSubmittingEdit","setIsSubmittingEdit","subjects","setSubjects","semesters","setSemesters","rooms","setRooms","campuses","setCampuses","buildings","setBuildings","selectedCampus","setSelectedCampus","selectedBuilding","setSelectedBuilding","scheduleDays","setScheduleDays","conflictWarnings","setConflictWarnings","checkingConflicts","setCheckingConflicts","openNotesDialog","setOpenNotesDialog","currentSessionForNotes","setCurrentSessionForNotes","notesText","setNotesText","isSavingNotes","setIsSavingNotes","derivedClassStatus","setDerivedClassStatus","fetchRooms","buildingId","url","response","get","headers","Authorization","data","success","Array","isArray","console","error","variant","fetchClassData","classResponse","Accept","fetchedClassInfo","sessionsResponse","fetchedSessions","calculateDerivedClassStatus","stats","forEach","session","status","studentsResponse","studentsWithBasicInfo","detailedStudents","Promise","all","map","student","studentDetailResponse","_id","detailedInfo","hasFaceData","faceFeatures","descriptors","has_face_data","_error$response$data","message","handleChangeTab","event","newValue","handleOpenSessionDialog","handleCloseSessionDialog","handleSessionFormChange","e","name","target","prev","handleCreateSession","sessionData","teaching_class_id","parseInt","post","_error$response","_error$response$data2","handleUpdateSession","put","_error$response2","_error$response2$data","handleStartSession","sessionId","find","s","handleOpenAddStudentDialog","_mainClassResponse$da","mainClassResponse","handleMainClassChange","mainClassId","_studentsResponse$dat","currentStudentIds","filteredStudents","filter","includes","handleCloseAddStudentDialog","handleSelectStudent","studentId","handleAddStudents","student_ids","_error$response$data3","handleRemoveStudent","window","confirm","delete","handleExportStudentList","studentsData","_student$school_info","STT","school_info","student_id","full_name","Email","email","header","csvContent","join","row","encodedUri","encodeURI","link","document","createElement","setAttribute","class_name","body","appendChild","click","removeChild","filteredAvailableStudents","_student$school_info2","_student$school_info3","toLowerCase","fetchReferenceDataForEdit","subjectsRes","semestersRes","mainClassesRes","campusesRes","roomDetails","building_id","_room$building_id$cam","_room$building_id$cam2","campus_id","buildingsRes","roomsRes","fetchBuildings","campusId","handleOpenEditClassDialog","_classInfo$subject_id","_classInfo$main_class","_classInfo$semester_i","initialEditData","class_code","subject_id","main_class_id","semester_id","total_sessions","course_start_date","course_end_date","auto_generate_sessions","schedule","processedScheduleDays","item","availableBuildings","availableRooms","room_id","roomDetailRes","roomData","day_of_week","undefined","is_recurring","specific_dates","excluded_dates","dayOfWeek","getDayOfWeekFromDate","handleCloseEditClassDialog","handleEditClassChange","handleCampusChange","handleBuildingChange","checkConflicts","scheduleToCheck","_classInfo$teacher_id","teacher_id","some","day","class_id","has_conflicts","conflicts","handleScheduleChange","field","updatedSchedule","currentScheduleItem","intValue","isNaN","_periodTimings$intVal","_periodTimings$curren","_periodTimings$curren2","calculateEndDate","setTimeout","handleUpdateClass","getDayOfWeekName","c","updateClassData","updateData","createdAt","updatedAt","_error$response3","_error$response3$data","dateString","getDay","days","addScheduleDay","startDate","lastScheduleItem","removeScheduleDay","_","i","totalSessions","getTime","sessionsPerWeek","weeksNeeded","Math","ceil","daysOfWeek","sort","a","b","currentDate","sessionCount","week","dayIndex","targetDayOfWeek","setDate","getDate","handleStartDateChange","handleTotalSessionsChange","renderConflictWarnings","severity","mt","mb","dense","conflict","type","color","primary","handleOpenNotesDialog","handleCloseNotesDialog","handleSaveNotes","prevSessions","_error$response4","_error$response4$data","getRoomDetailsString","roomId","_roomDetail$building_","_roomDetail$building_2","_roomDetail$building_3","roomDetail","r","buildingName","campusName","room_number","classData","sessions","totalPlannedSessions","actualSessions","completedSessionCount","anySessionTaken","getVietnameseClassStatus","bgcolor","minHeight","display","justifyContent","gutterBottom","fontWeight","mr","verticalAlign","borderRadius","boxShadow","elevation","container","spacing","xs","sm","md","label","academic_year","year","size","toLocaleDateString","width","borderBottom","borderColor","onChange","scrollButtons","icon","iconPosition","component","_rooms$find","_classInfo$room","onClick","startIcon","disabled","align","_session$room","toLocaleTimeString","hour","minute","timeZone","substring","fontSize","_student$school_info4","_student$score$absent","_student$score$absent2","score","max_absent_allowed","absent_sessions","Infinity","is_failed_due_to_absent","height","textAlign","open","onClose","maxWidth","fullWidth","dividers","cls","placeholder","maxHeight","overflow","_student$school_info5","divider","checked","secondary","pt","required","InputProps","inputProps","min","max","helperText","InputLabelProps","shrink","_room$building_id","multiline","rows","start_date","end_date","subject","code","semester","position","alignItems","d","campus","building","capacity","top","right","pb","_c2","$RefreshReg$"],"sources":["C:/Users/kasiz/Documents/Studying/FaceReg/frontend/src/pages/teacher/ClassDetailPage.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\nimport { useSnackbar } from \"notistack\";\nimport axios from \"axios\";\nimport {\n  Box,\n  Typography,\n  Card,\n  CardContent,\n  Grid,\n  Paper,\n  Button,\n  Tabs,\n  Tab,\n  CircularProgress,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Chip,\n  IconButton,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  TextField,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  List,\n  ListItem,\n  ListItemText,\n  ListItemSecondaryAction,\n  Divider,\n  Alert,\n  Tooltip,\n  Checkbox,\n  FormHelperText,\n  AlertTitle,\n  ListItemIcon,\n} from \"@mui/material\";\nimport {\n  PersonAdd,\n  Delete,\n  Add,\n  Edit,\n  PlayArrow,\n  Stop,\n  CheckCircle,\n  Warning,\n  Info,\n  CalendarToday,\n  AccessTime,\n  Download,\n  School,\n  Settings,\n  Event,\n  Person,\n  Room,\n  Assignment as AssignmentIcon,\n} from \"@mui/icons-material\";\nimport {\n  getTeachingClassById,\n  updateTeachingClass,\n  checkScheduleConflicts,\n} from \"../../services/api\";\n\nconst API_URL = process.env.REACT_APP_API_URL || \"http://localhost:5000/api\";\n\n// --- Định nghĩa thời gian tiết học --- (Thêm vào đây)\nconst periodTimings = {\n  1: { start: \"07:00\", end: \"07:45\" },\n  2: { start: \"07:50\", end: \"08:35\" },\n  3: { start: \"08:40\", end: \"09:25\" },\n  4: { start: \"09:35\", end: \"10:20\" },\n  5: { start: \"10:25\", end: \"11:10\" },\n  6: { start: \"11:15\", end: \"12:00\" },\n  7: { start: \"13:00\", end: \"13:45\" },\n  8: { start: \"13:50\", end: \"14:35\" },\n  9: { start: \"14:40\", end: \"15:25\" },\n  10: { start: \"15:35\", end: \"16:20\" },\n  11: { start: \"16:25\", end: \"17:10\" },\n  12: { start: \"17:15\", end: \"18:00\" },\n  13: { start: \"18:05\", end: \"18:50\" },\n  14: { start: \"18:55\", end: \"19:40\" },\n  15: { start: \"19:45\", end: \"20:30\" },\n};\n// --- Kết thúc định nghĩa ---\n\nfunction a11yProps(index) {\n  return {\n    id: `class-tab-${index}`,\n    \"aria-controls\": `class-tabpanel-${index}`,\n  };\n}\n\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`class-tabpanel-${index}`}\n      aria-labelledby={`class-tab-${index}`}\n      {...other}\n    >\n      {value === index && <Box sx={{ p: 3 }}>{children}</Box>}\n    </div>\n  );\n}\n\nconst TeacherClassDetailPage = () => {\n  const { classId } = useParams();\n  const id = classId; // Đảm bảo sử dụng đúng tên param\n  const navigate = useNavigate();\n  const { enqueueSnackbar } = useSnackbar();\n  const { token } = useSelector((state) => state.auth);\n\n  // State cho dữ liệu\n  const [classInfo, setClassInfo] = useState(null);\n  const [students, setStudents] = useState([]);\n  const [attendanceSessions, setAttendanceSessions] = useState([]);\n  const [attendanceStats, setAttendanceStats] = useState({\n    total: 0,\n    pending: 0,\n    completed: 0,\n  });\n  const [isLoading, setIsLoading] = useState(true);\n  const [isUpdating, setIsUpdating] = useState(false);\n\n  // State cho UI\n  const [tabValue, setTabValue] = useState(0);\n  const [openSessionDialog, setOpenSessionDialog] = useState(false);\n  const [sessionFormData, setSessionFormData] = useState({\n    title: \"\",\n    date: new Date().toISOString().split(\"T\")[0],\n    start_time: \"07:00\",\n    end_time: \"08:40\",\n    room: \"\",\n    session_number: attendanceSessions.length + 1,\n    start_period: 1,\n    end_period: 2,\n    notes: \"\",\n  });\n\n  // State cho thêm sinh viên\n  const [openAddStudentDialog, setOpenAddStudentDialog] = useState(false);\n  const [availableStudents, setAvailableStudents] = useState([]);\n  const [selectedStudents, setSelectedStudents] = useState([]);\n  const [searchStudent, setSearchStudent] = useState(\"\");\n  const [mainClasses, setMainClasses] = useState([]);\n  const [selectedMainClass, setSelectedMainClass] = useState(\"\");\n  const [isLoadingStudents, setIsLoadingStudents] = useState(false);\n\n  // State cho chỉnh sửa thông tin lớp học\n  const [openEditClassDialog, setOpenEditClassDialog] = useState(false);\n  const [editClassData, setEditClassData] = useState(null);\n  const [isSubmittingEdit, setIsSubmittingEdit] = useState(false);\n  const [subjects, setSubjects] = useState([]);\n  const [semesters, setSemesters] = useState([]);\n\n  // Thêm state để lưu danh sách phòng học\n  const [rooms, setRooms] = useState([]);\n  const [campuses, setCampuses] = useState([]);\n  const [buildings, setBuildings] = useState([]);\n  const [selectedCampus, setSelectedCampus] = useState(\"\");\n  const [selectedBuilding, setSelectedBuilding] = useState(\"\");\n\n  // Thêm state để quản lý lịch học\n  const [scheduleDays, setScheduleDays] = useState([]);\n\n  // Thêm state để lưu cảnh báo xung đột lịch\n  const [conflictWarnings, setConflictWarnings] = useState([]);\n  const [checkingConflicts, setCheckingConflicts] = useState(false);\n\n  // State cho dialog ghi chú\n  const [openNotesDialog, setOpenNotesDialog] = useState(false);\n  const [currentSessionForNotes, setCurrentSessionForNotes] = useState(null);\n  const [notesText, setNotesText] = useState(\"\");\n  const [isSavingNotes, setIsSavingNotes] = useState(false);\n\n  // State kiểm tra lớp học đã bắt đầu chưa - SẼ ĐƯỢC THAY THẾ\n  // const [isCourseStarted, setIsCourseStarted] = useState(false);\n  const [derivedClassStatus, setDerivedClassStatus] = useState(\"LOADING\"); // Trạng thái mới, tiếng Anh\n\n  // Thêm hàm fetch danh sách phòng học\n  const fetchRooms = async (buildingId) => {\n    try {\n      let url = `${API_URL}/facilities/rooms`;\n\n      // Nếu có buildingId, tải phòng theo tòa nhà\n      if (buildingId) {\n        url = `${API_URL}/facilities/rooms/building/${buildingId}`;\n      } else {\n        // Nếu không có buildingId, tải tất cả phòng\n        url = `${API_URL}/facilities/rooms?limit=1000`;\n      }\n\n      const response = await axios.get(url, {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n\n      // console.log(\"Dữ liệu phòng học từ API:\", response.data);\n\n      if (response.data.success && Array.isArray(response.data.data)) {\n        // Lưu trữ dữ liệu phòng học và ghi log để kiểm tra\n        setRooms(response.data.data);\n        // console.log(\"Đã cập nhật state rooms:\", response.data.data);\n      } else {\n        setRooms([]);\n        console.error(\n          \"API không trả về dữ liệu phòng học hợp lệ:\",\n          response.data\n        );\n        enqueueSnackbar(\n          \"Không thể tải danh sách phòng học (dữ liệu không hợp lệ)\",\n          { variant: \"warning\" }\n        );\n      }\n    } catch (error) {\n      console.error(\"Lỗi khi tải danh sách phòng học:\", error);\n      enqueueSnackbar(\"Không thể tải danh sách phòng học\", {\n        variant: \"error\",\n      });\n      setRooms([]);\n    }\n  };\n\n  // Load dữ liệu ban đầu\n  const fetchClassData = useCallback(async () => {\n    try {\n      setIsLoading(true);\n\n      // Kiểm tra id có tồn tại không\n      if (!id) {\n        enqueueSnackbar(\"ID lớp học không hợp lệ\", { variant: \"error\" });\n        navigate(\"/teacher/classes\");\n        return;\n      }\n\n      // Lấy thông tin lớp học\n      const classResponse = await axios.get(\n        `${API_URL}/classes/teaching/${id}`,\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n            Accept: \"application/json\",\n          },\n        }\n      );\n\n      // Log dữ liệu để xem cấu trúc\n      // console.log(\"Dữ liệu lớp học nhận về:\", classResponse.data);\n\n      // Kiểm tra nếu không có dữ liệu trả về\n      if (!classResponse.data.success || !classResponse.data.data) {\n        enqueueSnackbar(\"Không tìm thấy thông tin lớp học\", {\n          variant: \"error\",\n        });\n        navigate(\"/teacher/classes\");\n        return;\n      }\n\n      const fetchedClassInfo = classResponse.data.data;\n      setClassInfo(fetchedClassInfo);\n\n      // Kiểm tra xem khóa học đã bắt đầu chưa - LOGIC CŨ SẼ BỊ XÓA\n      // if (fetchedClassInfo.course_start_date) { ... }\n\n      // Fetch rooms right after setting class info to ensure it's done before rendering\n      await fetchRooms();\n\n      // Lấy danh sách phiên điểm danh\n      const sessionsResponse = await axios.get(\n        `${API_URL}/attendance/teaching-class/${id}/sessions`,\n        {\n          headers: { Authorization: `Bearer ${token}` },\n        }\n      );\n      const fetchedSessions = sessionsResponse.data.data || [];\n      setAttendanceSessions(fetchedSessions);\n\n      // Tính toán trạng thái lớp học\n      setDerivedClassStatus(\n        calculateDerivedClassStatus(fetchedClassInfo, fetchedSessions)\n      );\n\n      // Tính toán thống kê điểm danh\n      const stats = {\n        total: fetchedSessions.length,\n        pending: 0,\n        completed: 0,\n      };\n\n      fetchedSessions.forEach((session) => {\n        if (session.status === \"completed\") {\n          stats.completed++;\n        } else {\n          stats.pending++;\n        }\n      });\n\n      setAttendanceStats(stats);\n\n      // Vì API getClassStudents không trả về đầy đủ thông tin, chúng ta sẽ lấy chi tiết từng sinh viên\n      if (\n        classResponse.data.data.students &&\n        classResponse.data.data.students.length > 0\n      ) {\n        try {\n          // Lấy danh sách sinh viên cơ bản\n          const studentsResponse = await axios.get(\n            `${API_URL}/classes/teaching/${id}/students`,\n            {\n              headers: {\n                Authorization: `Bearer ${token}`,\n                Accept: \"application/json\",\n              },\n            }\n          );\n\n          // console.log(\"Dữ liệu sinh viên cơ bản:\", studentsResponse.data);\n\n          // Lưu danh sách sinh viên cơ bản trước\n          let studentsWithBasicInfo = [];\n          if (studentsResponse.data.success && studentsResponse.data.data) {\n            studentsWithBasicInfo = studentsResponse.data.data;\n          } else {\n            studentsWithBasicInfo = classResponse.data.data.students || [];\n          }\n\n          // Lấy chi tiết cho từng sinh viên (bao gồm faceFeatures)\n          const detailedStudents = await Promise.all(\n            studentsWithBasicInfo.map(async (student) => {\n              try {\n                // Gọi API để lấy thông tin chi tiết của sinh viên\n                const studentDetailResponse = await axios.get(\n                  `${API_URL}/users/${student._id}`,\n                  {\n                    headers: {\n                      Authorization: `Bearer ${token}`,\n                      Accept: \"application/json\",\n                    },\n                  }\n                );\n\n                // console.log(\n                //   `Thông tin chi tiết của sinh viên ${student.full_name}:`,\n                //   studentDetailResponse.data\n                // );\n\n                if (\n                  studentDetailResponse.data.success &&\n                  studentDetailResponse.data.data\n                ) {\n                  // Kết hợp dữ liệu từ API chi tiết sinh viên với dữ liệu cơ bản\n                  const detailedInfo = studentDetailResponse.data.data;\n\n                  // Kiểm tra dữ liệu khuôn mặt\n                  const hasFaceData = !!(\n                    detailedInfo.faceFeatures &&\n                    detailedInfo.faceFeatures.descriptors &&\n                    detailedInfo.faceFeatures.descriptors.length > 0\n                  );\n\n                  // console.log(\n                  //   `Sinh viên ${detailedInfo.full_name} có dữ liệu khuôn mặt: ${hasFaceData}`\n                  // );\n\n                  return {\n                    ...student,\n                    ...detailedInfo,\n                    has_face_data: hasFaceData,\n                  };\n                } else {\n                  // Nếu không lấy được chi tiết, sử dụng thông tin cơ bản\n                  return {\n                    ...student,\n                    has_face_data: false,\n                  };\n                }\n              } catch (error) {\n                console.error(\n                  `Lỗi khi lấy thông tin chi tiết của sinh viên ${student._id}:`,\n                  error\n                );\n                return {\n                  ...student,\n                  has_face_data: false,\n                };\n              }\n            })\n          );\n\n          setStudents(detailedStudents);\n        } catch (error) {\n          console.error(\"Lỗi khi lấy danh sách sinh viên:\", error);\n          // Sử dụng danh sách cơ bản nếu có lỗi\n          setStudents(classResponse.data.data.students || []);\n        }\n      } else {\n        setStudents([]);\n      }\n    } catch (error) {\n      console.error(\"Lỗi khi tải dữ liệu lớp học:\", error);\n      // Xử lý các loại lỗi từ API\n      if (error.response) {\n        // Nếu máy chủ phản hồi với mã lỗi\n        if (error.response.status === 404) {\n          enqueueSnackbar(\"Không tìm thấy lớp học với ID đã cho\", {\n            variant: \"error\",\n          });\n        } else if (error.response.status === 400) {\n          enqueueSnackbar(\"ID lớp học không hợp lệ\", { variant: \"error\" });\n        } else {\n          enqueueSnackbar(\n            error.response.data?.message || \"Lỗi khi tải dữ liệu lớp học\",\n            { variant: \"error\" }\n          );\n        }\n      } else {\n        enqueueSnackbar(\"Không thể kết nối đến máy chủ\", { variant: \"error\" });\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  }, [id, token, enqueueSnackbar, navigate]);\n\n  useEffect(() => {\n    fetchClassData();\n  }, [fetchClassData]);\n\n  // Thay đổi tab\n  const handleChangeTab = (event, newValue) => {\n    setTabValue(newValue);\n  };\n\n  // Mở dialog tạo phiên điểm danh\n  const handleOpenSessionDialog = () => {\n    // Tải danh sách phòng học\n    fetchRooms();\n\n    setSessionFormData({\n      title: `Buổi học ${attendanceSessions.length + 1}`,\n      date: new Date().toISOString().split(\"T\")[0],\n      start_time: \"07:00\",\n      end_time: \"08:40\",\n      room: \"\",\n      session_number: attendanceSessions.length + 1,\n      start_period: 1,\n      end_period: 2,\n      notes: \"\",\n    });\n    setOpenSessionDialog(true);\n  };\n\n  // Đóng dialog tạo phiên điểm danh\n  const handleCloseSessionDialog = () => {\n    setOpenSessionDialog(false);\n  };\n\n  // Cập nhật form dữ liệu phiên điểm danh\n  const handleSessionFormChange = (e) => {\n    const { name, value } = e.target;\n    setSessionFormData((prev) => ({\n      ...prev,\n      [name]: value,\n    }));\n  };\n\n  // Tạo phiên điểm danh mới\n  const handleCreateSession = async () => {\n    try {\n      const {\n        title,\n        date,\n        start_time,\n        end_time,\n        room,\n        session_number,\n        start_period,\n        end_period,\n        notes,\n      } = sessionFormData;\n\n      // Kiểm tra dữ liệu\n      if (!date || !start_time || !end_time || !session_number) {\n        enqueueSnackbar(\"Vui lòng điền đầy đủ thông tin\", { variant: \"error\" });\n        return;\n      }\n\n      // Tạo đối tượng để gửi lên API\n      const sessionData = {\n        title,\n        date,\n        start_time,\n        end_time,\n        teaching_class_id: id,\n        session_number: parseInt(session_number, 10),\n        start_period: parseInt(start_period, 10) || 1,\n        end_period: parseInt(end_period, 10) || 2,\n        notes,\n      };\n\n      // Thêm room nếu có\n      if (room) {\n        sessionData.room = room;\n      }\n\n      const response = await axios.post(\n        `${API_URL}/attendance/sessions`,\n        sessionData,\n        {\n          headers: { Authorization: `Bearer ${token}` },\n        }\n      );\n\n      enqueueSnackbar(\"Tạo phiên điểm danh thành công\", {\n        variant: \"success\",\n      });\n      setOpenSessionDialog(false);\n\n      // Cập nhật danh sách phiên\n      setAttendanceSessions((prev) => [...prev, response.data.data]);\n      setAttendanceStats((prev) => ({\n        ...prev,\n        total: prev.total + 1,\n        pending: prev.pending + 1,\n      }));\n    } catch (error) {\n      console.error(\"Lỗi khi tạo phiên điểm danh:\", error);\n      enqueueSnackbar(\n        error.response?.data?.message || \"Lỗi khi tạo phiên điểm danh\",\n        { variant: \"error\" }\n      );\n    }\n  };\n\n  // Cập nhật phiên điểm danh\n  const handleUpdateSession = async () => {\n    try {\n      const {\n        _id,\n        title,\n        date,\n        start_time,\n        end_time,\n        room,\n        session_number,\n        start_period,\n        end_period,\n        notes,\n      } = sessionFormData;\n\n      // Kiểm tra dữ liệu\n      if (!date || !start_time || !end_time || !session_number) {\n        enqueueSnackbar(\"Vui lòng điền đầy đủ thông tin\", { variant: \"error\" });\n        return;\n      }\n\n      // Tạo đối tượng để gửi lên API\n      const sessionData = {\n        title,\n        date,\n        start_time,\n        end_time,\n        session_number: parseInt(session_number, 10),\n        start_period: parseInt(start_period, 10) || 1,\n        end_period: parseInt(end_period, 10) || 2,\n        notes,\n      };\n\n      // Thêm room nếu có\n      if (room) {\n        sessionData.room = room;\n      }\n\n      // Gọi API cập nhật\n      const response = await axios.put(\n        `${API_URL}/attendance/sessions/${_id}`,\n        sessionData,\n        {\n          headers: { Authorization: `Bearer ${token}` },\n        }\n      );\n\n      enqueueSnackbar(\"Cập nhật phiên điểm danh thành công\", {\n        variant: \"success\",\n      });\n      setOpenSessionDialog(false);\n\n      // Cập nhật danh sách phiên\n      setAttendanceSessions((prev) =>\n        prev.map((session) =>\n          session._id === _id ? response.data.data : session\n        )\n      );\n    } catch (error) {\n      console.error(\"Lỗi khi cập nhật phiên điểm danh:\", error);\n      enqueueSnackbar(\n        error.response?.data?.message || \"Lỗi khi cập nhật phiên điểm danh\",\n        { variant: \"error\" }\n      );\n    }\n  };\n\n  // Bắt đầu phiên điểm danh\n  const handleStartSession = async (sessionId) => {\n    try {\n      // Kiểm tra tính hợp lệ của session\n      if (!sessionId) {\n        enqueueSnackbar(\"ID phiên điểm danh không hợp lệ\", {\n          variant: \"error\",\n        });\n        return;\n      }\n\n      // Kiểm tra trạng thái phiên điểm danh\n      const session = attendanceSessions.find((s) => s._id === sessionId);\n      if (!session) {\n        enqueueSnackbar(\"Không tìm thấy thông tin phiên điểm danh\", {\n          variant: \"error\",\n        });\n        return;\n      }\n\n      // Nếu phiên chưa bắt đầu hoặc đang ở trạng thái pending, cập nhật trạng thái thành active\n      if (session.status === \"pending\") {\n        try {\n          await axios.put(\n            `${API_URL}/attendance/sessions/${sessionId}/status`,\n            { status: \"active\" },\n            { headers: { Authorization: `Bearer ${token}` } }\n          );\n\n          // Cập nhật lại trạng thái trong state\n          setAttendanceSessions((prev) =>\n            prev.map((s) =>\n              s._id === sessionId ? { ...s, status: \"active\" } : s\n            )\n          );\n        } catch (error) {\n          console.error(\"Lỗi khi cập nhật trạng thái phiên:\", error);\n          // Vẫn tiếp tục điều hướng dù có lỗi\n        }\n      }\n\n      enqueueSnackbar(`Đang chuyển đến trang điểm danh`, { variant: \"info\" });\n      navigate(`/teacher/attendance/${id}/${sessionId}`);\n    } catch (error) {\n      console.error(\"Lỗi khi bắt đầu phiên điểm danh:\", error);\n      enqueueSnackbar(\"Có lỗi xảy ra khi bắt đầu phiên điểm danh\", {\n        variant: \"error\",\n      });\n    }\n  };\n\n  // Mở dialog thêm sinh viên\n  const handleOpenAddStudentDialog = async () => {\n    try {\n      setIsLoadingStudents(true);\n      // Lấy danh sách lớp chính\n      const mainClassResponse = await axios.get(\n        `${API_URL}/classes/main?all=true`,\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n            Accept: \"application/json\",\n          },\n        }\n      );\n\n      // console.log(\"Danh sách lớp chính:\", mainClassResponse.data);\n\n      if (!mainClassResponse.data?.data) {\n        enqueueSnackbar(\"Không thể tải danh sách lớp chính\", {\n          variant: \"error\",\n        });\n        return;\n      }\n\n      setMainClasses(mainClassResponse.data.data || []);\n      setAvailableStudents([]);\n      setSelectedStudents([]);\n      setSelectedMainClass(\"\");\n      setOpenAddStudentDialog(true);\n    } catch (error) {\n      console.error(\"Lỗi khi tải danh sách lớp chính:\", error);\n      enqueueSnackbar(\n        \"Không thể tải danh sách lớp chính. Vui lòng thử lại sau.\",\n        { variant: \"error\" }\n      );\n    } finally {\n      setIsLoadingStudents(false);\n    }\n  };\n\n  // Lấy danh sách sinh viên từ lớp chính\n  const handleMainClassChange = async (e) => {\n    const mainClassId = e.target.value;\n    setSelectedMainClass(mainClassId);\n\n    if (!mainClassId) {\n      setAvailableStudents([]);\n      return;\n    }\n\n    try {\n      setIsLoadingStudents(true);\n      const studentsResponse = await axios.get(\n        `${API_URL}/classes/main/${mainClassId}/approved-students`,\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n            Accept: \"application/json\",\n          },\n        }\n      );\n\n      // console.log(\"Danh sách sinh viên lớp chính:\", studentsResponse.data);\n\n      if (!studentsResponse.data?.data) {\n        enqueueSnackbar(\"Không thể tải danh sách sinh viên từ lớp chính\", {\n          variant: \"error\",\n        });\n        return;\n      }\n\n      // Lọc sinh viên chưa có trong lớp\n      const currentStudentIds = students.map((s) => s._id);\n      const filteredStudents = studentsResponse.data.data.students.filter(\n        (s) => !currentStudentIds.includes(s._id)\n      );\n\n      setAvailableStudents(filteredStudents);\n    } catch (error) {\n      console.error(\"Lỗi khi tải danh sách sinh viên từ lớp chính:\", error);\n      enqueueSnackbar(\"Không thể tải danh sách sinh viên từ lớp chính\", {\n        variant: \"error\",\n      });\n      setAvailableStudents([]);\n    } finally {\n      setIsLoadingStudents(false);\n    }\n  };\n\n  // Đóng dialog thêm sinh viên\n  const handleCloseAddStudentDialog = () => {\n    setOpenAddStudentDialog(false);\n  };\n\n  // Xử lý chọn sinh viên để thêm\n  const handleSelectStudent = (studentId) => {\n    if (selectedStudents.includes(studentId)) {\n      setSelectedStudents(selectedStudents.filter((id) => id !== studentId));\n    } else {\n      setSelectedStudents([...selectedStudents, studentId]);\n    }\n  };\n\n  // Thêm sinh viên vào lớp\n  const handleAddStudents = async () => {\n    try {\n      if (selectedStudents.length === 0) {\n        enqueueSnackbar(\"Vui lòng chọn ít nhất một sinh viên\", {\n          variant: \"warning\",\n        });\n        return;\n      }\n\n      // Gọi API thêm sinh viên\n      await axios.post(\n        `${API_URL}/classes/teaching/${id}/students/batch`,\n        {\n          student_ids: selectedStudents,\n        },\n        {\n          headers: { Authorization: `Bearer ${token}` },\n        }\n      );\n\n      enqueueSnackbar(`Đã thêm ${selectedStudents.length} sinh viên vào lớp`, {\n        variant: \"success\",\n      });\n      setOpenAddStudentDialog(false);\n\n      // Cập nhật lại danh sách sinh viên\n      fetchClassData();\n    } catch (error) {\n      console.error(\"Lỗi khi thêm sinh viên:\", error);\n\n      if (error.response) {\n        enqueueSnackbar(\n          `Lỗi: ${error.response.status} - ${\n            error.response.data?.message || \"Không thể thêm sinh viên\"\n          }`,\n          { variant: \"error\" }\n        );\n      } else {\n        enqueueSnackbar(\"Lỗi kết nối khi thêm sinh viên vào lớp\", {\n          variant: \"error\",\n        });\n      }\n    }\n  };\n\n  // Xóa sinh viên khỏi lớp\n  const handleRemoveStudent = async (studentId) => {\n    if (\n      !window.confirm(\"Bạn có chắc chắn muốn xóa sinh viên này khỏi lớp không?\")\n    ) {\n      return;\n    }\n\n    try {\n      await axios.delete(\n        `${API_URL}/classes/teaching/${id}/students/${studentId}`,\n        {\n          headers: { Authorization: `Bearer ${token}` },\n        }\n      );\n\n      enqueueSnackbar(\"Đã xóa sinh viên khỏi lớp\", { variant: \"success\" });\n\n      // Cập nhật lại danh sách sinh viên\n      setStudents(students.filter((s) => s._id !== studentId));\n    } catch (error) {\n      console.error(\"Lỗi khi xóa sinh viên:\", error);\n      enqueueSnackbar(\"Lỗi khi xóa sinh viên khỏi lớp\", { variant: \"error\" });\n    }\n  };\n\n  // Xuất danh sách sinh viên\n  const handleExportStudentList = () => {\n    try {\n      const studentsData = students.map((student, index) => {\n        // Kiểm tra có face data từ cả hai nguồn có thể\n        const hasFaceData =\n          student.has_face_data ||\n          !!(\n            student.faceFeatures &&\n            student.faceFeatures.descriptors &&\n            student.faceFeatures.descriptors.length > 0\n          );\n\n        return {\n          STT: index + 1,\n          \"Mã SV\": student.school_info?.student_id || \"N/A\",\n          \"Họ và tên\": student.full_name || student.name,\n          Email: student.email,\n          \"Đăng ký khuôn mặt\": hasFaceData ? \"Đã đăng ký\" : \"Chưa đăng ký\",\n        };\n      });\n\n      const header = [\n        \"STT\",\n        \"Mã SV\",\n        \"Họ và tên\",\n        \"Email\",\n        \"Đăng ký khuôn mặt\",\n      ];\n      const csvContent =\n        \"data:text/csv;charset=utf-8,\" +\n        [\n          header.join(\",\"),\n          ...studentsData.map((row) =>\n            [\n              row.STT,\n              row[\"Mã SV\"],\n              row[\"Họ và tên\"],\n              row.Email,\n              row[\"Đăng ký khuôn mặt\"],\n            ].join(\",\")\n          ),\n        ].join(\"\\n\");\n\n      const encodedUri = encodeURI(csvContent);\n      const link = document.createElement(\"a\");\n      link.setAttribute(\"href\", encodedUri);\n      link.setAttribute(\n        \"download\",\n        `danh_sach_sinh_vien_${classInfo?.class_name}.csv`\n      );\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n\n      enqueueSnackbar(\"Xuất danh sách sinh viên thành công\", {\n        variant: \"success\",\n      });\n    } catch (error) {\n      console.error(\"Lỗi khi xuất danh sách:\", error);\n      enqueueSnackbar(\"Lỗi khi xuất danh sách sinh viên\", { variant: \"error\" });\n    }\n  };\n\n  // Lọc sinh viên theo từ khóa tìm kiếm\n  const filteredAvailableStudents = availableStudents.filter(\n    (student) =>\n      student.full_name.toLowerCase().includes(searchStudent.toLowerCase()) ||\n      student.school_info?.student_id\n        ?.toLowerCase()\n        .includes(searchStudent.toLowerCase()) ||\n      student.email.toLowerCase().includes(searchStudent.toLowerCase())\n  );\n\n  // Tải dữ liệu tham chiếu cho form chỉnh sửa\n  const fetchReferenceDataForEdit = async () => {\n    try {\n      const [subjectsRes, semestersRes, mainClassesRes, campusesRes] =\n        await Promise.all([\n          axios.get(`${API_URL}/subjects`, {\n            headers: { Authorization: `Bearer ${token}` },\n          }),\n          axios.get(`${API_URL}/semesters`, {\n            headers: { Authorization: `Bearer ${token}` },\n          }),\n          axios.get(`${API_URL}/classes/main?all=true`, {\n            headers: { Authorization: `Bearer ${token}` },\n          }),\n          axios.get(`${API_URL}/facilities/campuses`, {\n            headers: { Authorization: `Bearer ${token}` },\n          }),\n        ]);\n\n      setSubjects(subjectsRes.data.data || []);\n      setSemesters(semestersRes.data.data || []);\n      setMainClasses(mainClassesRes.data.data || []);\n      setCampuses(campusesRes.data.data || []);\n\n      // Nếu lớp học có thông tin campus và building, tải danh sách building và room tương ứng\n      if (classInfo && classInfo.room) {\n        try {\n          const roomDetails = await axios.get(\n            `${API_URL}/facilities/rooms/${classInfo.room}`,\n            {\n              headers: { Authorization: `Bearer ${token}` },\n            }\n          );\n\n          if (roomDetails.data.success && roomDetails.data.data) {\n            const room = roomDetails.data.data;\n            if (room.building_id) {\n              setSelectedCampus(room.building_id.campus_id?._id || \"\");\n\n              // Tải danh sách buildings của campus\n              const buildingsRes = await axios.get(\n                `${API_URL}/facilities/buildings/campuses/${room.building_id.campus_id?._id}`,\n                { headers: { Authorization: `Bearer ${token}` } }\n              );\n              setBuildings(buildingsRes.data.data || []);\n\n              setSelectedBuilding(room.building_id._id || \"\");\n\n              // Tải danh sách rooms của building\n              const roomsRes = await axios.get(\n                `${API_URL}/facilities/rooms/building/${room.building_id._id}`,\n                { headers: { Authorization: `Bearer ${token}` } }\n              );\n              setRooms(roomsRes.data.data || []);\n            }\n          }\n        } catch (error) {\n          console.error(\"Lỗi khi tải thông tin phòng học:\", error);\n        }\n      }\n    } catch (error) {\n      console.error(\"Lỗi khi tải dữ liệu tham chiếu:\", error);\n      enqueueSnackbar(\"Lỗi khi tải dữ liệu tham chiếu\", { variant: \"error\" });\n    }\n  };\n\n  // Tải danh sách tòa nhà khi chọn campus\n  const fetchBuildings = async (campusId) => {\n    if (!campusId) {\n      setBuildings([]);\n      setSelectedBuilding(\"\");\n      return;\n    }\n\n    try {\n      const response = await axios.get(\n        `${API_URL}/facilities/buildings/campuses/${campusId}`,\n        {\n          headers: { Authorization: `Bearer ${token}` },\n        }\n      );\n      setBuildings(response.data.data || []);\n    } catch (error) {\n      console.error(\"Lỗi khi tải danh sách tòa nhà:\", error);\n      enqueueSnackbar(\"Lỗi khi tải danh sách tòa nhà\", { variant: \"error\" });\n    }\n  };\n\n  // Mở dialog chỉnh sửa lớp học\n  const handleOpenEditClassDialog = async () => {\n    setIsLoading(true); // Bắt đầu loading\n    // Chuẩn bị dữ liệu ban đầu cho form\n    const initialEditData = {\n      class_name: classInfo.class_name || \"\",\n      class_code: classInfo.class_code || \"\",\n      subject_id: classInfo.subject_id?._id || \"\",\n      main_class_id: classInfo.main_class_id?._id || \"\",\n      semester_id: classInfo.semester_id?._id || \"\",\n      total_sessions: classInfo.total_sessions || 15,\n      // room_id: classInfo.room?._id || \"\", // Sẽ được quản lý trong từng schedule day\n      course_start_date: classInfo.course_start_date\n        ? classInfo.course_start_date.split(\"T\")[0]\n        : \"\",\n      course_end_date: classInfo.course_end_date\n        ? classInfo.course_end_date.split(\"T\")[0]\n        : \"\",\n      auto_generate_sessions: classInfo.auto_generate_sessions !== false,\n      // schedule: classInfo.schedule || [], // Sẽ được xử lý riêng\n    };\n    setEditClassData(initialEditData);\n\n    // Tải dữ liệu tham chiếu chung (subjects, semesters, mainClasses, campuses)\n    await fetchReferenceDataForEdit(); // Đảm bảo campuses được tải\n\n    // Xử lý scheduleDays (quan trọng)\n    if (classInfo.schedule && classInfo.schedule.length > 0) {\n      const processedScheduleDays = await Promise.all(\n        classInfo.schedule.map(async (item) => {\n          let campusId = \"\";\n          let buildingId = \"\";\n          let availableBuildings = [];\n          let availableRooms = [];\n\n          if (item.room_id) {\n            try {\n              const roomDetailRes = await axios.get(\n                `${API_URL}/facilities/rooms/${item.room_id}?populate=building_id.campus_id`,\n                { headers: { Authorization: `Bearer ${token}` } }\n              );\n              if (roomDetailRes.data.success && roomDetailRes.data.data) {\n                const roomData = roomDetailRes.data.data;\n                if (roomData.building_id) {\n                  buildingId = roomData.building_id._id;\n                  if (roomData.building_id.campus_id) {\n                    campusId = roomData.building_id.campus_id._id;\n                    // Fetch buildings for this campus\n                    const buildingsRes = await axios.get(\n                      `${API_URL}/facilities/buildings/campuses/${campusId}`,\n                      { headers: { Authorization: `Bearer ${token}` } }\n                    );\n                    availableBuildings = buildingsRes.data.data || [];\n                  }\n                  // Fetch rooms for this building\n                  const roomsRes = await axios.get(\n                    `${API_URL}/facilities/rooms/building/${buildingId}`,\n                    { headers: { Authorization: `Bearer ${token}` } }\n                  );\n                  availableRooms = roomsRes.data.data || [];\n                }\n              }\n            } catch (error) {\n              console.error(\n                `Error fetching details for room ${item.room_id}:`,\n                error\n              );\n            }\n          }\n          return {\n            ...item,\n            day_of_week: item.day_of_week !== undefined ? item.day_of_week : 1,\n            start_period: item.start_period || 1,\n            end_period: item.end_period || 2,\n            start_time: item.start_time || \"07:00\",\n            end_time: item.end_time || \"08:40\",\n            room_id: item.room_id || \"\",\n            is_recurring:\n              item.is_recurring !== undefined ? item.is_recurring : true,\n            specific_dates: item.specific_dates || [],\n            excluded_dates: item.excluded_dates || [],\n            campusId: campusId,\n            buildingId: buildingId,\n            availableBuildings: availableBuildings,\n            availableRooms: availableRooms,\n          };\n        })\n      );\n      setScheduleDays(processedScheduleDays);\n    } else {\n      const dayOfWeek = initialEditData.course_start_date\n        ? getDayOfWeekFromDate(initialEditData.course_start_date)\n        : 1;\n      setScheduleDays([\n        {\n          day_of_week: dayOfWeek,\n          start_period: 1,\n          end_period: 2,\n          start_time: \"07:00\",\n          end_time: \"08:40\",\n          room_id: \"\",\n          is_recurring: true,\n          specific_dates: [],\n          excluded_dates: [],\n          campusId: \"\",\n          buildingId: \"\",\n          availableBuildings: [],\n          availableRooms: [],\n        },\n      ]);\n    }\n    setIsLoading(false); // Kết thúc loading\n    setOpenEditClassDialog(true);\n  };\n\n  // Đóng dialog chỉnh sửa lớp học\n  const handleCloseEditClassDialog = () => {\n    setOpenEditClassDialog(false);\n    setEditClassData(null);\n  };\n\n  // Xử lý thay đổi các trường trong form chỉnh sửa\n  const handleEditClassChange = (e) => {\n    const { name, value } = e.target;\n    setEditClassData((prev) => ({\n      ...prev,\n      [name]: value,\n    }));\n  };\n\n  // Xử lý thay đổi campus\n  const handleCampusChange = (e) => {\n    const campusId = e.target.value;\n    setSelectedCampus(campusId);\n    fetchBuildings(campusId);\n    setSelectedBuilding(\"\");\n    setEditClassData((prev) => ({\n      ...prev,\n      room_id: \"\",\n    }));\n  };\n\n  // Xử lý thay đổi building\n  const handleBuildingChange = (e) => {\n    const buildingId = e.target.value;\n    setSelectedBuilding(buildingId);\n    fetchRooms(buildingId);\n    setEditClassData((prev) => ({\n      ...prev,\n      room_id: \"\",\n    }));\n  };\n\n  // Thêm function để kiểm tra xung đột lịch\n  const checkConflicts = async (scheduleToCheck = scheduleDays) => {\n    // Xóa cảnh báo xung đột cũ\n    setConflictWarnings([]);\n\n    try {\n      setCheckingConflicts(true);\n\n      // Kiểm tra xem có thông tin đủ để check không\n      if (\n        !classInfo?.teacher_id?._id ||\n        !scheduleToCheck ||\n        scheduleToCheck.length === 0 ||\n        scheduleToCheck.some((day) => !day.room_id)\n      ) {\n        return;\n      }\n\n      const response = await checkScheduleConflicts({\n        teacher_id: classInfo.teacher_id._id,\n        schedule: scheduleToCheck,\n        class_id: id, // Loại trừ chính lớp này khi kiểm tra\n      });\n\n      if (response.data.has_conflicts) {\n        setConflictWarnings(response.data.conflicts);\n      }\n    } catch (error) {\n      console.error(\"Lỗi khi kiểm tra xung đột lịch học:\", error);\n      enqueueSnackbar(\"Lỗi khi kiểm tra xung đột lịch học\", {\n        variant: \"error\",\n      });\n    } finally {\n      setCheckingConflicts(false);\n    }\n  };\n\n  // Cập nhật hàm handleScheduleChange để check xung đột\n  const handleScheduleChange = async (index, field, value) => {\n    const updatedSchedule = [...scheduleDays];\n    const currentScheduleItem = { ...updatedSchedule[index] };\n\n    currentScheduleItem[field] = value;\n\n    if (field === \"campusId\") {\n      currentScheduleItem.buildingId = \"\";\n      currentScheduleItem.room_id = \"\";\n      currentScheduleItem.availableBuildings = [];\n      currentScheduleItem.availableRooms = [];\n      if (value) {\n        try {\n          const response = await axios.get(\n            `${API_URL}/facilities/buildings/campuses/${value}`,\n            { headers: { Authorization: `Bearer ${token}` } }\n          );\n          currentScheduleItem.availableBuildings = response.data.data || [];\n        } catch (error) {\n          console.error(\"Lỗi khi tải tòa nhà cho lịch học:\", error);\n          enqueueSnackbar(\"Lỗi khi tải tòa nhà\", { variant: \"error\" });\n        }\n      }\n    } else if (field === \"buildingId\") {\n      currentScheduleItem.room_id = \"\";\n      currentScheduleItem.availableRooms = [];\n      if (value) {\n        try {\n          const response = await axios.get(\n            `${API_URL}/facilities/rooms/building/${value}`,\n            { headers: { Authorization: `Bearer ${token}` } }\n          );\n          currentScheduleItem.availableRooms = response.data.data || [];\n        } catch (error) {\n          console.error(\"Lỗi khi tải phòng học cho lịch học:\", error);\n          enqueueSnackbar(\"Lỗi khi tải phòng học\", { variant: \"error\" });\n        }\n      }\n    } else if (field === \"start_period\" || field === \"end_period\") {\n      const intValue = parseInt(value, 10);\n      if (isNaN(intValue)) return; // Bỏ qua nếu không phải là số\n\n      if (field === \"start_period\") {\n        currentScheduleItem.start_period = intValue;\n        currentScheduleItem.start_time = periodTimings[intValue]?.start || \"\";\n        // Tự động điều chỉnh tiết kết thúc nếu tiết bắt đầu > tiết kết thúc\n        if (\n          currentScheduleItem.end_period &&\n          intValue > currentScheduleItem.end_period\n        ) {\n          currentScheduleItem.end_period = intValue; // Hoặc intValue + 1 tùy theo logic mong muốn\n          currentScheduleItem.end_time =\n            periodTimings[currentScheduleItem.end_period]?.end || \"\";\n        }\n      } else if (field === \"end_period\") {\n        // Đảm bảo tiết kết thúc không nhỏ hơn tiết bắt đầu\n        if (\n          currentScheduleItem.start_period &&\n          intValue < currentScheduleItem.start_period\n        ) {\n          currentScheduleItem.end_period = currentScheduleItem.start_period;\n        } else {\n          currentScheduleItem.end_period = intValue;\n        }\n        currentScheduleItem.end_time =\n          periodTimings[currentScheduleItem.end_period]?.end || \"\";\n      }\n    }\n\n    updatedSchedule[index] = currentScheduleItem;\n    setScheduleDays(updatedSchedule);\n\n    // Tính lại ngày kết thúc khi lịch học thay đổi\n    setEditClassData((prev) => ({\n      ...prev,\n      course_end_date: calculateEndDate(\n        prev.course_start_date,\n        updatedSchedule,\n        prev.total_sessions\n      ),\n    }));\n\n    // Kiểm tra xung đột nếu thay đổi phòng học hoặc thời gian\n    if (\n      field === \"room_id\" ||\n      field === \"day_of_week\" ||\n      field === \"start_period\" ||\n      field === \"end_period\" ||\n      field === \"start_time\" ||\n      field === \"end_time\"\n    ) {\n      setTimeout(() => {\n        if (\n          updatedSchedule[index].room_id &&\n          updatedSchedule[index].day_of_week !== undefined\n        ) {\n          checkConflicts(updatedSchedule);\n        }\n      }, 500);\n    }\n  };\n\n  // Cập nhật hàm handleUpdateClass\n  const handleUpdateClass = async () => {\n    if (!editClassData.class_name || !editClassData.class_code) {\n      enqueueSnackbar(\"Vui lòng điền đầy đủ thông tin bắt buộc\", {\n        variant: \"warning\",\n      });\n      return;\n    }\n\n    // Kiểm tra room_id trong từng schedule item\n    for (const day of scheduleDays) {\n      if (!day.room_id) {\n        enqueueSnackbar(\n          `Vui lòng chọn phòng học cho buổi học vào ${getDayOfWeekName(\n            day.day_of_week\n          )}`,\n          { variant: \"warning\" }\n        );\n        return;\n      }\n    }\n\n    // Kiểm tra xung đột lịch cuối cùng trước khi cập nhật lớp\n    try {\n      setCheckingConflicts(true);\n      const response = await checkScheduleConflicts({\n        teacher_id: classInfo.teacher_id._id,\n        schedule: scheduleDays,\n        class_id: id,\n      });\n\n      if (response.data.has_conflicts) {\n        setConflictWarnings(response.data.conflicts);\n\n        // Hiển thị thông báo xác nhận nếu có xung đột\n        if (\n          window.confirm(\n            \"Phát hiện xung đột lịch học. Bạn vẫn muốn cập nhật lịch học này không?\\n\\n\" +\n              response.data.conflicts.map((c) => c.message).join(\"\\n\")\n          )\n        ) {\n          // Tiếp tục cập nhật lớp nếu người dùng xác nhận\n          await updateClassData();\n        }\n      } else {\n        // Không có xung đột, cập nhật lớp\n        await updateClassData();\n      }\n    } catch (error) {\n      console.error(\"Lỗi khi kiểm tra xung đột lịch học:\", error);\n      // Vẫn cập nhật lớp ngay cả khi không thể kiểm tra xung đột\n      await updateClassData();\n    } finally {\n      setCheckingConflicts(false);\n    }\n  };\n\n  // Tách logic cập nhật lớp thành hàm riêng\n  const updateClassData = async () => {\n    setIsUpdating(true);\n    try {\n      // Tạo đối tượng dữ liệu để cập nhật\n      const updateData = {\n        ...editClassData,\n        schedule: scheduleDays,\n      };\n\n      // Xóa các trường không cần thiết\n      delete updateData.teacher_id;\n      delete updateData.createdAt;\n      delete updateData.updatedAt;\n\n      await updateTeachingClass(id, updateData);\n\n      enqueueSnackbar(\"Cập nhật lớp học thành công\", {\n        variant: \"success\",\n      });\n      setEditClassData(null); // Xóa state này vì không cần lưu trữ dữ liệu lớp học khi đã cập nhật\n      fetchClassData(); // Tải lại dữ liệu lớp học\n      setConflictWarnings([]); // Xóa cảnh báo xung đột\n    } catch (error) {\n      console.error(\"Lỗi khi cập nhật lớp học:\", error);\n      enqueueSnackbar(\n        error.response?.data?.message || \"Lỗi khi cập nhật lớp học\",\n        { variant: \"error\" }\n      );\n    } finally {\n      setIsUpdating(false);\n    }\n  };\n\n  // Lấy thứ trong tuần từ ngày\n  const getDayOfWeekFromDate = (dateString) => {\n    if (!dateString) return 1; // Mặc định là thứ 2 nếu không có ngày\n\n    const date = new Date(dateString);\n    // getDay() trả về 0 cho Chủ Nhật, 1-6 cho Thứ 2 đến Thứ 7\n    const day = date.getDay(); // Chủ nhật - 0, Thứ hai - 1, ... , Thứ bảy - 6\n\n    // Không cần chuyển đổi nữa nếu backend/logic khác cũng dùng 0-6\n    return day;\n  };\n\n  // Lấy tên của thứ trong tuần\n  const getDayOfWeekName = (dayOfWeek) => {\n    const days = [\n      \"Chủ Nhật\",\n      \"Thứ Hai\",\n      \"Thứ Ba\",\n      \"Thứ Tư\",\n      \"Thứ Năm\",\n      \"Thứ Sáu\",\n      \"Thứ Bảy\",\n    ];\n    return days[dayOfWeek];\n  };\n\n  // Thêm lịch học\n  const addScheduleDay = () => {\n    const startDate = editClassData.course_start_date;\n    // ... (logic tìm nextDay có thể giữ nguyên hoặc cải thiện)\n    const lastScheduleItem = scheduleDays[scheduleDays.length - 1] || {};\n\n    const updatedSchedule = [\n      ...scheduleDays,\n      {\n        day_of_week:\n          lastScheduleItem.day_of_week !== undefined\n            ? lastScheduleItem.day_of_week\n            : startDate\n            ? getDayOfWeekFromDate(startDate)\n            : 1,\n        start_period: 1,\n        end_period: 2,\n        start_time: \"07:00\", // Cần có periodTimings để lấy chính xác\n        end_time: \"08:40\", // Cần có periodTimings để lấy chính xác\n        room_id: \"\", // Để trống ban đầu\n        is_recurring: true,\n        specific_dates: [],\n        excluded_dates: [],\n        campusId: lastScheduleItem.campusId || \"\", // Kế thừa từ buổi cuối hoặc để trống\n        buildingId: lastScheduleItem.buildingId || \"\",\n        availableBuildings: lastScheduleItem.availableBuildings || [],\n        availableRooms: lastScheduleItem.availableRooms || [],\n      },\n    ];\n\n    setScheduleDays(updatedSchedule);\n\n    // Tính lại ngày kết thúc sau khi thêm buổi học\n    setEditClassData((prev) => ({\n      ...prev,\n      course_end_date: calculateEndDate(\n        prev.course_start_date,\n        updatedSchedule,\n        prev.total_sessions\n      ),\n    }));\n  };\n\n  // Xóa lịch học\n  const removeScheduleDay = (index) => {\n    if (scheduleDays.length > 1) {\n      const updatedSchedule = scheduleDays.filter((_, i) => i !== index);\n      setScheduleDays(updatedSchedule);\n\n      // Tính lại ngày kết thúc sau khi xóa buổi học\n      setEditClassData((prev) => ({\n        ...prev,\n        course_end_date: calculateEndDate(\n          prev.course_start_date,\n          updatedSchedule,\n          prev.total_sessions\n        ),\n      }));\n    }\n  };\n\n  // Tính ngày kết thúc dựa trên ngày bắt đầu và lịch học\n  const calculateEndDate = (startDate, schedule, totalSessions) => {\n    if (!startDate || !schedule || schedule.length === 0 || !totalSessions) {\n      return \"\";\n    }\n\n    try {\n      // Chuyển ngày bắt đầu thành đối tượng Date\n      const start = new Date(startDate);\n      if (isNaN(start.getTime())) {\n        return \"\";\n      }\n\n      // Tổng số tuần cần thiết = tổng số buổi học / số buổi học mỗi tuần\n      const sessionsPerWeek = schedule.length;\n      const weeksNeeded = Math.ceil(totalSessions / sessionsPerWeek);\n\n      // Tạo mảng chứa các ngày trong tuần từ lịch học (0-6, với 0 là Chủ Nhật)\n      const daysOfWeek = schedule.map((day) => day.day_of_week);\n\n      // Sắp xếp các ngày trong tuần\n      daysOfWeek.sort((a, b) => a - b);\n\n      // Tìm ngày đầu tiên trong lịch học sau ngày bắt đầu\n      let currentDate = new Date(start);\n\n      // Đếm số buổi học đã xếp lịch\n      let sessionCount = 0;\n\n      // Lặp qua từng tuần\n      for (let week = 0; week < weeksNeeded * 2; week++) {\n        // Nhân 2 để đảm bảo đủ số buổi\n        // Lặp qua các ngày trong tuần từ lịch học\n        for (let dayIndex = 0; dayIndex < daysOfWeek.length; dayIndex++) {\n          const targetDayOfWeek = daysOfWeek[dayIndex];\n\n          // Tìm ngày tiếp theo có thứ phù hợp\n          while (currentDate.getDay() !== targetDayOfWeek) {\n            currentDate.setDate(currentDate.getDate() + 1);\n          }\n\n          sessionCount++;\n\n          // Nếu đã đủ số buổi học, trả về ngày hiện tại\n          if (sessionCount >= totalSessions) {\n            return currentDate.toISOString().split(\"T\")[0];\n          }\n\n          // Di chuyển đến ngày tiếp theo\n          currentDate.setDate(currentDate.getDate() + 1);\n        }\n      }\n\n      // Nếu không tính được, trả về chuỗi rỗng\n      return \"\";\n    } catch (error) {\n      console.error(\"Lỗi khi tính ngày kết thúc:\", error);\n      return \"\";\n    }\n  };\n\n  // Xử lý thay đổi ngày bắt đầu\n  const handleStartDateChange = (e) => {\n    const startDate = e.target.value;\n\n    // Lấy thứ từ ngày bắt đầu\n    const dayOfWeek = getDayOfWeekFromDate(startDate);\n\n    // Cập nhật lịch học với thứ mới\n    const updatedSchedule = [\n      {\n        day_of_week: dayOfWeek,\n        start_period: 1,\n        end_period: 2,\n        start_time: \"07:00\",\n        end_time: \"08:40\",\n        room_id: editClassData.room_id,\n        is_recurring: true,\n        specific_dates: [],\n        excluded_dates: [],\n      },\n    ];\n\n    // Cập nhật lịch học\n    setScheduleDays(updatedSchedule);\n\n    // Cập nhật ngày bắt đầu và tính ngày kết thúc\n    setEditClassData((prev) => ({\n      ...prev,\n      course_start_date: startDate,\n      course_end_date: calculateEndDate(\n        startDate,\n        updatedSchedule,\n        prev.total_sessions\n      ),\n    }));\n  };\n\n  // Xử lý thay đổi số buổi học\n  const handleTotalSessionsChange = (e) => {\n    const totalSessions = e.target.value;\n\n    setEditClassData((prev) => ({\n      ...prev,\n      total_sessions: totalSessions,\n      // Tính lại ngày kết thúc khi thay đổi số buổi học\n      course_end_date: calculateEndDate(\n        prev.course_start_date,\n        scheduleDays,\n        totalSessions\n      ),\n    }));\n  };\n\n  // Thêm phần render cảnh báo xung đột lịch\n  const renderConflictWarnings = () => {\n    if (conflictWarnings.length === 0) {\n      return null;\n    }\n\n    return (\n      <Alert severity=\"warning\" sx={{ mt: 2, mb: 2 }}>\n        <AlertTitle>Phát hiện xung đột lịch học</AlertTitle>\n        <List dense>\n          {conflictWarnings.map((conflict, index) => (\n            <ListItem key={index}>\n              <ListItemIcon>\n                {conflict.type === \"teacher\" ? (\n                  <Person color=\"error\" />\n                ) : (\n                  <Room color=\"error\" />\n                )}\n              </ListItemIcon>\n              <ListItemText primary={conflict.message} />\n            </ListItem>\n          ))}\n        </List>\n      </Alert>\n    );\n  };\n\n  // Hàm mở dialog ghi chú\n  const handleOpenNotesDialog = (session) => {\n    setCurrentSessionForNotes(session);\n    setNotesText(session.notes || \"\");\n    setOpenNotesDialog(true);\n  };\n\n  // Hàm đóng dialog ghi chú\n  const handleCloseNotesDialog = () => {\n    setOpenNotesDialog(false);\n    setCurrentSessionForNotes(null);\n    setNotesText(\"\");\n  };\n\n  // Hàm lưu ghi chú\n  const handleSaveNotes = async () => {\n    if (!currentSessionForNotes) return;\n    setIsSavingNotes(true);\n    try {\n      // Giả sử API cho phép cập nhật một phần hoặc toàn bộ session\n      // Nếu chỉ cập nhật notes, body request có thể chỉ cần { notes: notesText }\n      // Endpoint này cần được backend hỗ trợ đúng cách\n      await axios.put(\n        `${API_URL}/attendance/sessions/${currentSessionForNotes._id}`,\n        { ...currentSessionForNotes, notes: notesText }, // Gửi lại session với notes đã cập nhật\n        // Hoặc chỉ: { notes: notesText } nếu API hỗ trợ partial update tốt\n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n\n      enqueueSnackbar(\"Cập nhật ghi chú thành công\", { variant: \"success\" });\n      setAttendanceSessions((prevSessions) =>\n        prevSessions.map((s) =>\n          s._id === currentSessionForNotes._id ? { ...s, notes: notesText } : s\n        )\n      );\n      handleCloseNotesDialog();\n    } catch (error) {\n      console.error(\"Lỗi khi cập nhật ghi chú:\", error);\n      enqueueSnackbar(\n        error.response?.data?.message || \"Lỗi khi cập nhật ghi chú\",\n        { variant: \"error\" }\n      );\n    } finally {\n      setIsSavingNotes(false);\n    }\n  };\n\n  // Helper function để lấy thông tin chi tiết phòng học\n  const getRoomDetailsString = (roomId) => {\n    if (!roomId) return \"Chưa xác định\";\n    // Đảm bảo rooms là một mảng trước khi sử dụng find\n    if (!Array.isArray(rooms)) return \"Đang tải phòng...\";\n\n    const roomDetail = rooms.find((r) => r._id === roomId);\n    if (!roomDetail) return \"Không tìm thấy phòng\";\n\n    const buildingName = roomDetail.building_id?.name || \"N/A\";\n    const campusName = roomDetail.building_id?.campus_id?.name || \"N/A\";\n    return `${roomDetail.room_number} (${buildingName} - ${campusName})`;\n  };\n\n  // Hàm tính toán trạng thái lớp học dựa trên dữ liệu hiện có\n  const calculateDerivedClassStatus = useCallback((classData, sessions) => {\n    if (!classData) return \"LOADING\";\n\n    const totalPlannedSessions = classData.total_sessions || 0;\n    const actualSessions = sessions || [];\n\n    if (totalPlannedSessions === 0 && actualSessions.length === 0) {\n      return \"NOT_STARTED\";\n    }\n\n    const completedSessionCount = actualSessions.filter(\n      (s) => s.status === \"completed\"\n    ).length;\n\n    if (\n      totalPlannedSessions > 0 &&\n      completedSessionCount === totalPlannedSessions\n    ) {\n      return \"COMPLETED\";\n    }\n\n    const anySessionTaken = actualSessions.some(\n      (s) => s.status === \"active\" || s.status === \"completed\"\n    );\n\n    if (anySessionTaken) {\n      return \"IN_PROGRESS\";\n    }\n\n    return \"NOT_STARTED\";\n  }, []);\n\n  // Hàm chuyển đổi trạng thái tiếng Anh sang tiếng Việt để hiển thị\n  const getVietnameseClassStatus = (status) => {\n    switch (status) {\n      case \"LOADING\":\n        return \"Đang tải...\";\n      case \"NOT_STARTED\":\n        return \"Chưa bắt đầu\";\n      case \"IN_PROGRESS\":\n        return \"Đang học\";\n      case \"COMPLETED\":\n        return \"Đã kết thúc\";\n      default:\n        return status; // Trả về chính nó nếu không khớp\n    }\n  };\n\n  return (\n    <Box sx={{ p: 3, bgcolor: \"grey.50\", minHeight: \"100vh\" }}>\n      {isLoading ? (\n        <Box sx={{ display: \"flex\", justifyContent: \"center\", p: 3 }}>\n          <CircularProgress />\n        </Box>\n      ) : (\n        <>\n          <Box sx={{ display: \"flex\", justifyContent: \"space-between\", mb: 3 }}>\n            <Typography variant=\"h4\" gutterBottom sx={{ fontWeight: \"bold\" }}>\n              <School sx={{ mr: 1, verticalAlign: \"middle\" }} />\n              {classInfo?.class_name || \"Chi tiết lớp học\"}\n            </Typography>\n            <Box>\n              {/* NÚT CHỈNH SỬA LỚP HỌC Ở GÓC TRÊN - XÓA\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={() => setEditMode(true)}\n                disabled={isLoading} // editMode đã bị xóa\n                startIcon={<Edit />}\n                sx={{ mr: 1 }}\n              >\n                Chỉnh sửa lớp học\n              </Button>\n              */}\n            </Box>\n          </Box>\n\n          {/* Hiển thị thông tin cơ bản về lớp học */}\n          <Paper\n            sx={{ p: 3, mb: 3, borderRadius: 2, boxShadow: 3 }}\n            elevation={3}\n          >\n            <Grid container spacing={3}>\n              <Grid item xs={12} sm={6} md={3}>\n                <Typography\n                  variant=\"subtitle2\"\n                  sx={{ color: \"text.secondary\", mb: 1 }}\n                >\n                  Mã lớp\n                </Typography>\n                <Typography variant=\"body1\" sx={{ fontWeight: \"medium\" }}>\n                  {classInfo?.class_code || \"Không có\"}\n                </Typography>\n              </Grid>\n              <Grid item xs={12} sm={6} md={3}>\n                <Typography\n                  variant=\"subtitle2\"\n                  sx={{ color: \"text.secondary\", mb: 1 }}\n                >\n                  Môn học\n                </Typography>\n                <Typography variant=\"body1\" sx={{ fontWeight: \"medium\" }}>\n                  {classInfo?.subject_id?.name || \"Không xác định\"}\n                </Typography>\n              </Grid>\n              <Grid item xs={12} sm={6} md={3}>\n                <Typography\n                  variant=\"subtitle2\"\n                  sx={{ color: \"text.secondary\", mb: 1 }}\n                >\n                  Kỳ học\n                </Typography>\n                <Chip\n                  label={\n                    classInfo?.semester_id?.name\n                      ? `${classInfo.semester_id.name} (${\n                          classInfo.semester_id.academic_year ||\n                          classInfo.semester_id.year\n                        })`\n                      : \"Không xác định\"\n                  }\n                  color=\"primary\"\n                  variant=\"outlined\"\n                  size=\"small\"\n                />\n              </Grid>\n              <Grid item xs={12} sm={6} md={3}>\n                <Typography\n                  variant=\"subtitle2\"\n                  sx={{ color: \"text.secondary\", mb: 1 }}\n                >\n                  Lớp chính\n                </Typography>\n                <Chip\n                  label={\n                    classInfo?.main_class_id?.name ||\n                    \"Không thuộc lớp chính nào\"\n                  }\n                  color=\"info\"\n                  variant={classInfo?.main_class_id ? \"filled\" : \"outlined\"}\n                  size=\"small\"\n                />\n              </Grid>\n              <Grid item xs={12} sm={6} md={3}>\n                <Typography\n                  variant=\"subtitle2\"\n                  sx={{ color: \"text.secondary\", mb: 1 }}\n                >\n                  Giảng viên\n                </Typography>\n                <Typography variant=\"body1\" sx={{ fontWeight: \"medium\" }}>\n                  {classInfo?.teacher_id?.full_name || \"Không xác định\"}\n                </Typography>\n              </Grid>\n              <Grid item xs={12} sm={6} md={3}>\n                <Typography\n                  variant=\"subtitle2\"\n                  sx={{ color: \"text.secondary\", mb: 1 }}\n                >\n                  Ngày bắt đầu - Kết thúc\n                </Typography>\n                <Typography variant=\"body1\" sx={{ fontWeight: \"medium\" }}>\n                  {classInfo?.course_start_date\n                    ? new Date(classInfo.course_start_date).toLocaleDateString(\n                        \"vi-VN\"\n                      )\n                    : \"N/A\"}{\" \"}\n                  -{\" \"}\n                  {classInfo?.course_end_date\n                    ? new Date(classInfo.course_end_date).toLocaleDateString(\n                        \"vi-VN\"\n                      )\n                    : \"N/A\"}\n                </Typography>\n              </Grid>\n              <Grid item xs={12} sm={6} md={3}>\n                <Typography\n                  variant=\"subtitle2\"\n                  sx={{ color: \"text.secondary\", mb: 1 }}\n                >\n                  Số buổi học\n                </Typography>\n                <Typography variant=\"body1\" sx={{ fontWeight: \"medium\" }}>\n                  {classInfo?.total_sessions || 0}\n                </Typography>\n              </Grid>\n              <Grid item xs={12} sm={6} md={3}>\n                <Typography\n                  variant=\"subtitle2\"\n                  sx={{ color: \"text.secondary\", mb: 1 }}\n                >\n                  Số lượng sinh viên\n                </Typography>\n                <Typography variant=\"body1\" sx={{ fontWeight: \"medium\" }}>\n                  {Array.isArray(classInfo?.students)\n                    ? classInfo.students.length\n                    : 0}\n                </Typography>\n              </Grid>\n              <Grid item xs={12} sm={6} md={3}>\n                <Typography\n                  variant=\"subtitle2\"\n                  sx={{ color: \"text.secondary\", mb: 1 }}\n                >\n                  Trạng thái lớp học\n                </Typography>\n                <Chip\n                  label={\n                    getVietnameseClassStatus(derivedClassStatus) ||\n                    \"Đang tải...\"\n                  }\n                  color={\n                    derivedClassStatus === \"IN_PROGRESS\"\n                      ? \"warning\"\n                      : derivedClassStatus === \"COMPLETED\"\n                      ? \"success\"\n                      : derivedClassStatus === \"NOT_STARTED\"\n                      ? \"info\"\n                      : \"default\"\n                  }\n                  variant=\"outlined\"\n                  size=\"small\"\n                />\n              </Grid>\n            </Grid>\n          </Paper>\n\n          {/* Hiển thị cảnh báo xung đột lịch nếu đang trong chế độ chỉnh sửa - XÓA PHẦN NÀY VÌ editMode BỊ XÓA */}\n          {/* {editMode && renderConflictWarnings()} */}\n\n          {/* Các nút hành động khi chỉnh sửa - XÓA KHỐI NÀY VÌ editMode BỊ XÓA */}\n          {/*\n          {editMode && (\n            <Box\n              sx={{\n                mt: 3,\n                display: \"flex\",\n                justifyContent: \"flex-end\",\n                gap: 2,\n              }}\n            >\n              <Button\n                variant=\"outlined\"\n                onClick={() => {\n                  // setEditMode(false); // Sẽ bị lỗi nếu editMode bị xóa\n                  setEditClassData({ ...classInfo });\n                  setScheduleDays(\n                    classInfo.schedule?.map((item) => ({ ...item })) || []\n                  );\n                  setConflictWarnings([]); \n                }}\n                disabled={isUpdating || checkingConflicts}\n              >\n                Hủy\n              </Button>\n              <Button\n                variant=\"contained\"\n                onClick={handleUpdateClass}\n                disabled={isUpdating || checkingConflicts}\n                startIcon={\n                  isUpdating || checkingConflicts ? (\n                    <CircularProgress size={20} />\n                  ) : null\n                }\n              >\n                {isUpdating\n                  ? \"Đang cập nhật...\"\n                  : checkingConflicts\n                  ? \"Đang kiểm tra...\"\n                  : \"Lưu thay đổi\"}\n              </Button>\n            </Box>\n          )}\n          */}\n\n          {/* Tabs */}\n          <Box sx={{ width: \"100%\", mt: 3 }}>\n            <Box sx={{ borderBottom: 1, borderColor: \"divider\" }}>\n              <Tabs\n                value={tabValue}\n                onChange={handleChangeTab}\n                aria-label=\"class tabs\"\n                variant=\"scrollable\"\n                scrollButtons=\"auto\"\n              >\n                <Tab\n                  label=\"Lịch học\"\n                  {...a11yProps(0)}\n                  icon={<Event />}\n                  iconPosition=\"start\"\n                />\n                <Tab\n                  label=\"Buổi điểm danh\"\n                  {...a11yProps(1)}\n                  icon={<CalendarToday />}\n                  iconPosition=\"start\"\n                />\n                <Tab\n                  label=\"Sinh viên\"\n                  {...a11yProps(2)}\n                  icon={<School />}\n                  iconPosition=\"start\"\n                />\n                <Tab\n                  label=\"Thống kê\"\n                  {...a11yProps(3)}\n                  icon={<Info />}\n                  iconPosition=\"start\"\n                />\n                <Tab\n                  label=\"Cấu hình\"\n                  {...a11yProps(4)}\n                  icon={<Settings />}\n                  iconPosition=\"start\"\n                />\n              </Tabs>\n            </Box>\n\n            {/* Tab Lịch học */}\n            <TabPanel value={tabValue} index={0}>\n              <Paper elevation={2} sx={{ p: 3, borderRadius: 2 }}>\n                <Typography variant=\"h6\" gutterBottom>\n                  Lịch học của lớp\n                </Typography>\n                {classInfo?.schedule && classInfo.schedule.length > 0 ? (\n                  <TableContainer component={Paper} variant=\"outlined\">\n                    <Table>\n                      <TableHead>\n                        <TableRow sx={{ bgcolor: \"grey.100\" }}>\n                          <TableCell>Thứ</TableCell>\n                          <TableCell>Tiết học</TableCell>\n                          <TableCell>Thời gian</TableCell>\n                          <TableCell>Phòng học</TableCell>\n                        </TableRow>\n                      </TableHead>\n                      <TableBody>\n                        {classInfo.schedule.map((day, index) => (\n                          <TableRow key={index}>\n                            <TableCell>\n                              <Chip\n                                label={getDayOfWeekName(day.day_of_week)}\n                                color=\"primary\"\n                                variant=\"outlined\"\n                              />\n                            </TableCell>\n                            <TableCell>\n                              Tiết {day.start_period} - {day.end_period}\n                            </TableCell>\n                            <TableCell>\n                              {day.start_time} - {day.end_time}\n                            </TableCell>\n                            <TableCell>\n                              {(day.room_id &&\n                                rooms.find((r) => r._id === day.room_id)\n                                  ?.room_number) ||\n                                (classInfo.room?.room_number\n                                  ? classInfo.room.room_number\n                                  : \"Chưa xác định\")}\n                            </TableCell>\n                          </TableRow>\n                        ))}\n                      </TableBody>\n                    </Table>\n                  </TableContainer>\n                ) : (\n                  <Alert severity=\"info\">\n                    Chưa có thông tin lịch học cho lớp này\n                  </Alert>\n                )}\n                {/* Nút chỉnh sửa lịch học trong tab Lịch học - Bỏ điều kiện editMode */}\n                <Tooltip\n                  title={\n                    derivedClassStatus !== \"NOT_STARTED\"\n                      ? `Lớp học ${getVietnameseClassStatus(\n                          derivedClassStatus\n                        )}, không thể chỉnh sửa`\n                      : \"Chỉnh sửa lịch học\"\n                  }\n                >\n                  <span>\n                    {\" \"}\n                    {/* Span để Tooltip hoạt động khi Button bị disabled */}\n                    <Button\n                      variant=\"contained\"\n                      color=\"primary\"\n                      onClick={handleOpenEditClassDialog}\n                      sx={{ mt: 2 }}\n                      startIcon={<Edit />}\n                      disabled={\n                        derivedClassStatus !== \"NOT_STARTED\" || isUpdating\n                      }\n                    >\n                      Chỉnh sửa lịch học\n                    </Button>\n                  </span>\n                </Tooltip>\n              </Paper>\n            </TabPanel>\n\n            {/* Tab Buổi điểm danh */}\n            <TabPanel value={tabValue} index={1}>\n              <Paper elevation={2} sx={{ p: 3, borderRadius: 2 }}>\n                <Box\n                  sx={{\n                    display: \"flex\",\n                    justifyContent: \"space-between\",\n                    mb: 3,\n                  }}\n                >\n                  <Typography variant=\"h6\" gutterBottom>\n                    Quản lý điểm danh\n                  </Typography>\n                  {/* Nút tạo buổi điểm danh - ĐÃ BỊ XÓA\n                  <Button\n                    variant=\"contained\"\n                    color=\"primary\"\n                    startIcon={<Add />}\n                    onClick={handleOpenSessionDialog}\n                  >\n                    Tạo buổi điểm danh\n                  </Button>\n                  */}\n                </Box>\n\n                {attendanceSessions.length > 0 ? (\n                  <TableContainer component={Paper} variant=\"outlined\">\n                    <Table>\n                      <TableHead>\n                        <TableRow sx={{ bgcolor: \"grey.100\" }}>\n                          <TableCell>Ngày</TableCell>\n                          <TableCell>Thời gian</TableCell>\n                          <TableCell>Trạng thái</TableCell>\n                          <TableCell>Phòng học</TableCell>\n                          <TableCell>Ghi chú</TableCell>\n                          <TableCell align=\"right\">Thao tác</TableCell>\n                        </TableRow>\n                      </TableHead>\n                      <TableBody>\n                        {attendanceSessions.map((session) => (\n                          <TableRow key={session._id}>\n                            <TableCell>\n                              {new Date(session.date).toLocaleDateString(\n                                \"vi-VN\"\n                              )}\n                            </TableCell>\n                            <TableCell>\n                              {session.start_time && session.end_time\n                                ? `${new Date(\n                                    session.start_time\n                                  ).toLocaleTimeString(\"vi-VN\", {\n                                    hour: \"2-digit\",\n                                    minute: \"2-digit\",\n                                    timeZone: \"UTC\",\n                                  })} - ${new Date(\n                                    session.end_time\n                                  ).toLocaleTimeString(\"vi-VN\", {\n                                    hour: \"2-digit\",\n                                    minute: \"2-digit\",\n                                    timeZone: \"UTC\",\n                                  })}`\n                                : \"N/A\"}\n                            </TableCell>\n                            <TableCell>\n                              <Chip\n                                label={\n                                  session.status === \"completed\"\n                                    ? \"Đã hoàn thành\"\n                                    : session.status === \"active\"\n                                    ? \"Đang diễn ra\"\n                                    : \"Chưa bắt đầu\"\n                                }\n                                color={\n                                  session.status === \"completed\"\n                                    ? \"success\"\n                                    : session.status === \"active\"\n                                    ? \"warning\"\n                                    : \"primary\"\n                                }\n                                size=\"small\"\n                                variant=\"outlined\"\n                              />\n                            </TableCell>\n                            <TableCell>\n                              {getRoomDetailsString(\n                                session.room?._id || session.room\n                              )}\n                            </TableCell>\n                            <TableCell>\n                              {session.notes && session.notes.length > 20\n                                ? `${session.notes.substring(0, 20)}...`\n                                : session.notes || \"\"}\n                            </TableCell>\n                            <TableCell align=\"right\">\n                              <Tooltip\n                                title={\n                                  session.notes\n                                    ? \"Xem/Sửa Ghi chú\"\n                                    : \"Thêm Ghi chú\"\n                                }\n                              >\n                                <IconButton\n                                  onClick={() => handleOpenNotesDialog(session)}\n                                  size=\"small\"\n                                  sx={{ mr: 0.5 }}\n                                >\n                                  <AssignmentIcon fontSize=\"small\" />\n                                </IconButton>\n                              </Tooltip>\n                              <Button\n                                variant=\"contained\"\n                                color=\"primary\"\n                                size=\"small\"\n                                onClick={() => handleStartSession(session._id)}\n                                startIcon={\n                                  session.status === \"completed\" ? (\n                                    <CheckCircle />\n                                  ) : (\n                                    <PlayArrow />\n                                  )\n                                }\n                              >\n                                {session.status === \"completed\"\n                                  ? \"Xem\"\n                                  : \"Bắt đầu\"}\n                              </Button>\n                            </TableCell>\n                          </TableRow>\n                        ))}\n                      </TableBody>\n                    </Table>\n                  </TableContainer>\n                ) : (\n                  <Alert severity=\"info\">\n                    Chưa có buổi điểm danh nào được tạo\n                  </Alert>\n                )}\n              </Paper>\n            </TabPanel>\n\n            {/* Tab Sinh viên */}\n            <TabPanel value={tabValue} index={2}>\n              <Paper elevation={2} sx={{ p: 3, borderRadius: 2 }}>\n                <Box\n                  sx={{\n                    display: \"flex\",\n                    justifyContent: \"space-between\",\n                    mb: 3,\n                  }}\n                >\n                  <Typography variant=\"h6\" gutterBottom>\n                    Danh sách sinh viên ({students.length})\n                  </Typography>\n                  <Box>\n                    <Button\n                      variant=\"outlined\"\n                      color=\"primary\"\n                      startIcon={<Download />}\n                      onClick={handleExportStudentList}\n                      sx={{ mr: 1 }}\n                    >\n                      Xuất DS\n                    </Button>\n                    <Button\n                      variant=\"contained\"\n                      color=\"primary\"\n                      startIcon={<PersonAdd />}\n                      onClick={handleOpenAddStudentDialog}\n                    >\n                      Thêm sinh viên\n                    </Button>\n                  </Box>\n                </Box>\n\n                {students.length > 0 ? (\n                  <TableContainer component={Paper} variant=\"outlined\">\n                    <Table>\n                      <TableHead>\n                        <TableRow sx={{ bgcolor: \"grey.100\" }}>\n                          <TableCell>STT</TableCell>\n                          <TableCell>Mã SV</TableCell>\n                          <TableCell>Họ tên</TableCell>\n                          <TableCell>Email</TableCell>\n                          <TableCell>Đăng ký khuôn mặt</TableCell>\n                          <TableCell>Số buổi vắng</TableCell>\n                          <TableCell>Điều kiện thi</TableCell>\n                          <TableCell align=\"right\">Thao tác</TableCell>\n                        </TableRow>\n                      </TableHead>\n                      <TableBody>\n                        {students.map((student, index) => (\n                          <TableRow key={student._id}>\n                            <TableCell>{index + 1}</TableCell>\n                            <TableCell>\n                              {student.school_info?.student_id ||\n                                \"Chưa có mã SV\"}\n                            </TableCell>\n                            <TableCell>{student.full_name}</TableCell>\n                            <TableCell>{student.email}</TableCell>\n                            <TableCell>\n                              <Chip\n                                label={\n                                  student.has_face_data\n                                    ? \"Đã đăng ký\"\n                                    : \"Chưa đăng ký\"\n                                }\n                                color={\n                                  student.has_face_data ? \"success\" : \"warning\"\n                                }\n                                size=\"small\"\n                                variant=\"outlined\"\n                              />\n                            </TableCell>\n                            <TableCell>\n                              {student.score ? (\n                                <Tooltip\n                                  title={`Tối đa vắng: ${\n                                    student.score.max_absent_allowed != null\n                                      ? student.score.max_absent_allowed\n                                      : classInfo?.max_absent_allowed || \"N/A\"\n                                  } buổi`}\n                                >\n                                  <Chip\n                                    label={`${\n                                      student.score.absent_sessions ?? 0\n                                    } / ${\n                                      student.score.max_absent_allowed != null\n                                        ? student.score.max_absent_allowed\n                                        : classInfo?.max_absent_allowed || \"N/A\"\n                                    }`}\n                                    size=\"small\"\n                                    color={\n                                      (student.score.absent_sessions ?? 0) >\n                                      (student.score.max_absent_allowed != null\n                                        ? student.score.max_absent_allowed\n                                        : classInfo?.max_absent_allowed ||\n                                          Infinity)\n                                        ? \"error\"\n                                        : \"default\"\n                                    }\n                                    variant=\"outlined\"\n                                  />\n                                </Tooltip>\n                              ) : (\n                                <Chip\n                                  label=\"N/A\"\n                                  size=\"small\"\n                                  variant=\"outlined\"\n                                />\n                              )}\n                            </TableCell>\n                            <TableCell>\n                              {student.score ? (\n                                student.score.is_failed_due_to_absent ? (\n                                  <Chip\n                                    label=\"Không đủ ĐK (vắng)\"\n                                    color=\"error\"\n                                    size=\"small\"\n                                  />\n                                ) : (\n                                  <Chip\n                                    label=\"Đủ điều kiện\"\n                                    color=\"success\"\n                                    size=\"small\"\n                                  />\n                                )\n                              ) : (\n                                <Chip\n                                  label=\"Chưa có dữ liệu\"\n                                  size=\"small\"\n                                  variant=\"outlined\"\n                                />\n                              )}\n                            </TableCell>\n                            <TableCell align=\"right\">\n                              <IconButton\n                                color=\"error\"\n                                onClick={() => handleRemoveStudent(student._id)}\n                                size=\"small\"\n                              >\n                                <Delete fontSize=\"small\" />\n                              </IconButton>\n                            </TableCell>\n                          </TableRow>\n                        ))}\n                      </TableBody>\n                    </Table>\n                  </TableContainer>\n                ) : (\n                  <Alert severity=\"info\">\n                    Chưa có sinh viên nào trong lớp này\n                  </Alert>\n                )}\n              </Paper>\n            </TabPanel>\n\n            {/* Tab Thống kê */}\n            <TabPanel value={tabValue} index={3}>\n              <Grid container spacing={3}>\n                <Grid item xs={12} md={6}>\n                  <Paper\n                    elevation={2}\n                    sx={{ p: 3, borderRadius: 2, height: \"100%\" }}\n                  >\n                    <Typography variant=\"h6\" gutterBottom>\n                      Thống kê điểm danh\n                    </Typography>\n                    <Box sx={{ mt: 2 }}>\n                      <Grid container spacing={2}>\n                        <Grid item xs={12} sm={4}>\n                          <Paper\n                            sx={{\n                              p: 2,\n                              textAlign: \"center\",\n                              bgcolor: \"primary.lighter\",\n                              color: \"primary.dark\",\n                              borderRadius: 2,\n                            }}\n                          >\n                            <Typography variant=\"h4\">\n                              {attendanceStats.total}\n                            </Typography>\n                            <Typography variant=\"body2\">\n                              Tổng buổi học\n                            </Typography>\n                          </Paper>\n                        </Grid>\n                        <Grid item xs={12} sm={4}>\n                          <Paper\n                            sx={{\n                              p: 2,\n                              textAlign: \"center\",\n                              bgcolor: \"success.lighter\",\n                              color: \"success.dark\",\n                              borderRadius: 2,\n                            }}\n                          >\n                            <Typography variant=\"h4\">\n                              {attendanceStats.completed}\n                            </Typography>\n                            <Typography variant=\"body2\">\n                              Đã hoàn thành\n                            </Typography>\n                          </Paper>\n                        </Grid>\n                        <Grid item xs={12} sm={4}>\n                          <Paper\n                            sx={{\n                              p: 2,\n                              textAlign: \"center\",\n                              bgcolor: \"warning.lighter\",\n                              color: \"warning.dark\",\n                              borderRadius: 2,\n                            }}\n                          >\n                            <Typography variant=\"h4\">\n                              {attendanceStats.pending}\n                            </Typography>\n                            <Typography variant=\"body2\">\n                              Chưa bắt đầu\n                            </Typography>\n                          </Paper>\n                        </Grid>\n                      </Grid>\n                    </Box>\n                  </Paper>\n                </Grid>\n                <Grid item xs={12} md={6}>\n                  <Paper\n                    elevation={2}\n                    sx={{ p: 3, borderRadius: 2, height: \"100%\" }}\n                  >\n                    <Typography variant=\"h6\" gutterBottom>\n                      Thống kê sinh viên\n                    </Typography>\n                    <Box sx={{ mt: 2 }}>\n                      <Grid container spacing={2}>\n                        <Grid item xs={12} sm={4}>\n                          <Paper\n                            sx={{\n                              p: 2,\n                              textAlign: \"center\",\n                              bgcolor: \"info.lighter\",\n                              color: \"info.dark\",\n                              borderRadius: 2,\n                            }}\n                          >\n                            <Typography variant=\"h4\">\n                              {students.length}\n                            </Typography>\n                            <Typography variant=\"body2\">\n                              Tổng sinh viên\n                            </Typography>\n                          </Paper>\n                        </Grid>\n                        <Grid item xs={12} sm={4}>\n                          <Paper\n                            sx={{\n                              p: 2,\n                              textAlign: \"center\",\n                              bgcolor: \"success.lighter\",\n                              color: \"success.dark\",\n                              borderRadius: 2,\n                            }}\n                          >\n                            <Typography variant=\"h4\">\n                              {students.filter((s) => s.has_face_data).length}\n                            </Typography>\n                            <Typography variant=\"body2\">\n                              Đã đăng ký KM\n                            </Typography>\n                          </Paper>\n                        </Grid>\n                        <Grid item xs={12} sm={4}>\n                          <Paper\n                            sx={{\n                              p: 2,\n                              textAlign: \"center\",\n                              bgcolor: \"warning.lighter\",\n                              color: \"warning.dark\",\n                              borderRadius: 2,\n                            }}\n                          >\n                            <Typography variant=\"h4\">\n                              {students.filter((s) => !s.has_face_data).length}\n                            </Typography>\n                            <Typography variant=\"body2\">\n                              Chưa đăng ký KM\n                            </Typography>\n                          </Paper>\n                        </Grid>\n                      </Grid>\n                    </Box>\n                  </Paper>\n                </Grid>\n              </Grid>\n            </TabPanel>\n\n            {/* Tab Cấu hình */}\n            <TabPanel value={tabValue} index={4}>\n              <Paper elevation={2} sx={{ p: 3, borderRadius: 2 }}>\n                <Typography variant=\"h6\" gutterBottom>\n                  Cấu hình lớp học\n                </Typography>\n\n                <Tooltip\n                  title={\n                    derivedClassStatus !== \"NOT_STARTED\"\n                      ? `Lớp học ${getVietnameseClassStatus(\n                          derivedClassStatus\n                        )}, không thể chỉnh sửa`\n                      : \"Chỉnh sửa thông tin lớp\"\n                  }\n                >\n                  <span>\n                    {\" \"}\n                    {/* Span để Tooltip hoạt động khi Button bị disabled */}\n                    <Button\n                      variant=\"contained\"\n                      color=\"primary\"\n                      startIcon={<Edit />}\n                      onClick={handleOpenEditClassDialog}\n                      sx={{ mt: 2 }}\n                      disabled={\n                        derivedClassStatus !== \"NOT_STARTED\" || isUpdating\n                      }\n                    >\n                      Chỉnh sửa thông tin lớp\n                    </Button>\n                  </span>\n                </Tooltip>\n              </Paper>\n            </TabPanel>\n          </Box>\n\n          {/* Dialog thêm sinh viên */}\n          <Dialog\n            open={openAddStudentDialog}\n            onClose={handleCloseAddStudentDialog}\n            maxWidth=\"md\"\n            fullWidth\n          >\n            <DialogTitle>Thêm sinh viên vào lớp</DialogTitle>\n            <DialogContent dividers>\n              <Grid container spacing={2}>\n                <Grid item xs={12}>\n                  <FormControl fullWidth sx={{ mb: 2 }}>\n                    <InputLabel>Chọn lớp chính</InputLabel>\n                    <Select\n                      value={selectedMainClass}\n                      onChange={handleMainClassChange}\n                      label=\"Chọn lớp chính\"\n                    >\n                      <MenuItem value=\"\">Chọn lớp chính</MenuItem>\n                      {mainClasses.map((cls) => (\n                        <MenuItem key={cls._id} value={cls._id}>\n                          {cls.name} ({cls.class_code})\n                        </MenuItem>\n                      ))}\n                    </Select>\n                    <FormHelperText>\n                      Chọn lớp chính để xem danh sách sinh viên\n                    </FormHelperText>\n                  </FormControl>\n                </Grid>\n\n                <Grid item xs={12}>\n                  <TextField\n                    fullWidth\n                    label=\"Tìm kiếm sinh viên\"\n                    variant=\"outlined\"\n                    value={searchStudent}\n                    onChange={(e) => setSearchStudent(e.target.value)}\n                    placeholder=\"Nhập tên, mã SV hoặc email để tìm kiếm\"\n                    sx={{ mb: 2 }}\n                  />\n                </Grid>\n\n                <Grid item xs={12}>\n                  {isLoadingStudents ? (\n                    <Box\n                      sx={{\n                        display: \"flex\",\n                        justifyContent: \"center\",\n                        p: 3,\n                      }}\n                    >\n                      <CircularProgress />\n                    </Box>\n                  ) : filteredAvailableStudents.length > 0 ? (\n                    <List\n                      sx={{\n                        width: \"100%\",\n                        bgcolor: \"background.paper\",\n                        maxHeight: 300,\n                        overflow: \"auto\",\n                      }}\n                    >\n                      {filteredAvailableStudents.map((student) => (\n                        <ListItem key={student._id} divider>\n                          <Checkbox\n                            checked={selectedStudents.includes(student._id)}\n                            onChange={() => handleSelectStudent(student._id)}\n                          />\n                          <ListItemText\n                            primary={student.full_name}\n                            secondary={\n                              <>\n                                MSSV: {student.school_info?.student_id || \"N/A\"}\n                                <br />\n                                Email: {student.email}\n                              </>\n                            }\n                          />\n                        </ListItem>\n                      ))}\n                    </List>\n                  ) : (\n                    <Alert severity=\"info\" sx={{ width: \"100%\" }}>\n                      {!selectedMainClass\n                        ? \"Vui lòng chọn lớp chính để xem danh sách sinh viên\"\n                        : \"Không tìm thấy sinh viên phù hợp hoặc đã thêm tất cả sinh viên từ lớp này\"}\n                    </Alert>\n                  )}\n                </Grid>\n              </Grid>\n            </DialogContent>\n            <DialogActions sx={{ p: 2, justifyContent: \"space-between\" }}>\n              <Button\n                onClick={handleCloseAddStudentDialog}\n                color=\"inherit\"\n                variant=\"outlined\"\n              >\n                Hủy\n              </Button>\n              <Button\n                onClick={handleAddStudents}\n                color=\"primary\"\n                variant=\"contained\"\n                disabled={selectedStudents.length === 0}\n              >\n                Thêm {selectedStudents.length} sinh viên\n              </Button>\n            </DialogActions>\n          </Dialog>\n\n          {/* Dialog tạo buổi điểm danh */}\n          <Dialog\n            open={openSessionDialog}\n            onClose={handleCloseSessionDialog}\n            maxWidth=\"md\"\n            fullWidth\n          >\n            <DialogTitle>\n              {sessionFormData._id\n                ? \"Chỉnh sửa buổi điểm danh\"\n                : \"Tạo buổi điểm danh mới\"}\n            </DialogTitle>\n            <DialogContent dividers>\n              <Grid container spacing={2} sx={{ pt: 1 }}>\n                <Grid item xs={12} sm={6}>\n                  <TextField\n                    fullWidth\n                    label=\"Tên buổi học\"\n                    name=\"title\"\n                    value={sessionFormData.title}\n                    onChange={handleSessionFormChange}\n                    required\n                  />\n                </Grid>\n                <Grid item xs={12} sm={6}>\n                  <TextField\n                    fullWidth\n                    label=\"Số buổi (thứ tự)\"\n                    name=\"session_number\"\n                    type=\"number\"\n                    value={sessionFormData.session_number}\n                    onChange={handleSessionFormChange}\n                    required\n                    InputProps={{\n                      inputProps: {\n                        min: 1,\n                        max: classInfo?.total_sessions || 15,\n                      },\n                    }}\n                    helperText={`Buổi học thứ (1-${\n                      classInfo?.total_sessions || \"?\"\n                    })`}\n                  />\n                </Grid>\n                <Grid item xs={12} sm={6}>\n                  <TextField\n                    fullWidth\n                    label=\"Ngày\"\n                    name=\"date\"\n                    type=\"date\"\n                    value={sessionFormData.date}\n                    onChange={handleSessionFormChange}\n                    required\n                    InputLabelProps={{ shrink: true }}\n                  />\n                </Grid>\n                <Grid item xs={12} sm={6}>\n                  <FormControl fullWidth>\n                    <InputLabel>Phòng học</InputLabel>\n                    <Select\n                      label=\"Phòng học\"\n                      name=\"room\"\n                      value={sessionFormData.room}\n                      onChange={handleSessionFormChange}\n                    >\n                      <MenuItem value=\"\">\n                        <em>Không chọn phòng học</em>\n                      </MenuItem>\n                      {rooms.map((room) => (\n                        <MenuItem key={room._id} value={room._id}>\n                          {room.room_number} - Tòa{\" \"}\n                          {room.building_id?.name || \"N/A\"}\n                        </MenuItem>\n                      ))}\n                    </Select>\n                    <FormHelperText>\n                      Chọn phòng học cho buổi điểm danh\n                    </FormHelperText>\n                  </FormControl>\n                </Grid>\n                <Grid item xs={12} sm={6}>\n                  <TextField\n                    fullWidth\n                    label=\"Giờ bắt đầu\"\n                    name=\"start_time\"\n                    type=\"time\"\n                    value={sessionFormData.start_time}\n                    onChange={handleSessionFormChange}\n                    required\n                    InputLabelProps={{ shrink: true }}\n                  />\n                </Grid>\n                <Grid item xs={12} sm={6}>\n                  <TextField\n                    fullWidth\n                    label=\"Giờ kết thúc\"\n                    name=\"end_time\"\n                    type=\"time\"\n                    value={sessionFormData.end_time}\n                    onChange={handleSessionFormChange}\n                    required\n                    InputLabelProps={{ shrink: true }}\n                  />\n                </Grid>\n                <Grid item xs={12} sm={6}>\n                  <TextField\n                    fullWidth\n                    label=\"Tiết bắt đầu\"\n                    name=\"start_period\"\n                    type=\"number\"\n                    value={sessionFormData.start_period}\n                    onChange={handleSessionFormChange}\n                    InputProps={{ inputProps: { min: 1, max: 15 } }}\n                  />\n                </Grid>\n                <Grid item xs={12} sm={6}>\n                  <TextField\n                    fullWidth\n                    label=\"Tiết kết thúc\"\n                    name=\"end_period\"\n                    type=\"number\"\n                    value={sessionFormData.end_period}\n                    onChange={handleSessionFormChange}\n                    InputProps={{ inputProps: { min: 1, max: 15 } }}\n                  />\n                </Grid>\n                <Grid item xs={12}>\n                  <TextField\n                    fullWidth\n                    label=\"Ghi chú\"\n                    name=\"notes\"\n                    multiline\n                    rows={3}\n                    value={sessionFormData.notes}\n                    onChange={handleSessionFormChange}\n                    placeholder=\"Nhập ghi chú về buổi học (nếu có)\"\n                  />\n                </Grid>\n                <Grid item xs={12}>\n                  <Alert severity=\"info\" sx={{ mt: 1 }}>\n                    Lưu ý: Thời gian buổi học phải nằm trong khoảng thời gian\n                    của học kỳ (\n                    {classInfo?.semester_id?.start_date\n                      ? new Date(\n                          classInfo.semester_id.start_date\n                        ).toLocaleDateString(\"vi-VN\")\n                      : \"?\"}{\" \"}\n                    -\n                    {classInfo?.semester_id?.end_date\n                      ? new Date(\n                          classInfo.semester_id.end_date\n                        ).toLocaleDateString(\"vi-VN\")\n                      : \"?\"}\n                    )\n                  </Alert>\n                </Grid>\n              </Grid>\n            </DialogContent>\n            <DialogActions sx={{ p: 2, justifyContent: \"space-between\" }}>\n              <Button\n                onClick={handleCloseSessionDialog}\n                color=\"inherit\"\n                variant=\"outlined\"\n              >\n                Hủy\n              </Button>\n              <Button\n                onClick={\n                  sessionFormData._id\n                    ? handleUpdateSession\n                    : handleCreateSession\n                }\n                color=\"primary\"\n                variant=\"contained\"\n              >\n                {sessionFormData._id ? \"Cập nhật\" : \"Tạo buổi điểm danh\"}\n              </Button>\n            </DialogActions>\n          </Dialog>\n\n          {/* Dialog chỉnh sửa lớp học */}\n          <Dialog\n            open={openEditClassDialog}\n            onClose={handleCloseEditClassDialog}\n            maxWidth=\"md\"\n            fullWidth\n          >\n            <DialogTitle>Chỉnh sửa thông tin lớp học</DialogTitle>\n            <DialogContent dividers>\n              {editClassData && (\n                <Grid container spacing={2} sx={{ pt: 1 }}>\n                  <Grid item xs={12} sm={6}>\n                    <TextField\n                      fullWidth\n                      label=\"Tên lớp\"\n                      name=\"class_name\"\n                      value={editClassData.class_name}\n                      onChange={handleEditClassChange}\n                      required\n                    />\n                  </Grid>\n                  <Grid item xs={12} sm={6}>\n                    <TextField\n                      fullWidth\n                      label=\"Mã lớp\"\n                      name=\"class_code\"\n                      value={editClassData.class_code}\n                      onChange={handleEditClassChange}\n                      required\n                    />\n                  </Grid>\n                  <Grid item xs={12} sm={6}>\n                    <FormControl fullWidth>\n                      <InputLabel>Môn học</InputLabel>\n                      <Select\n                        name=\"subject_id\"\n                        value={editClassData.subject_id}\n                        onChange={handleEditClassChange}\n                        label=\"Môn học\"\n                      >\n                        {subjects.map((subject) => (\n                          <MenuItem key={subject._id} value={subject._id}>\n                            {subject.name} ({subject.code})\n                          </MenuItem>\n                        ))}\n                      </Select>\n                    </FormControl>\n                  </Grid>\n                  <Grid item xs={12} sm={6}>\n                    <FormControl fullWidth>\n                      <InputLabel>Học kỳ</InputLabel>\n                      <Select\n                        name=\"semester_id\"\n                        value={editClassData.semester_id}\n                        onChange={handleEditClassChange}\n                        label=\"Học kỳ\"\n                      >\n                        {semesters.map((semester) => (\n                          <MenuItem key={semester._id} value={semester._id}>\n                            {semester.name} (\n                            {semester.academic_year || semester.year})\n                          </MenuItem>\n                        ))}\n                      </Select>\n                    </FormControl>\n                  </Grid>\n                  <Grid item xs={12} sm={6}>\n                    <FormControl fullWidth>\n                      <InputLabel>Lớp chính</InputLabel>\n                      <Select\n                        name=\"main_class_id\"\n                        value={editClassData.main_class_id}\n                        onChange={handleEditClassChange}\n                        label=\"Lớp chính\"\n                      >\n                        <MenuItem value=\"\">Không chọn lớp chính</MenuItem>\n                        {mainClasses.map((cls) => (\n                          <MenuItem key={cls._id} value={cls._id}>\n                            {cls.name} ({cls.class_code})\n                          </MenuItem>\n                        ))}\n                      </Select>\n                    </FormControl>\n                  </Grid>\n                  <Grid item xs={12} sm={6}>\n                    <TextField\n                      fullWidth\n                      label=\"Số buổi học\"\n                      name=\"total_sessions\"\n                      type=\"number\"\n                      value={editClassData.total_sessions}\n                      onChange={handleTotalSessionsChange}\n                      InputProps={{ inputProps: { min: 1 } }}\n                    />\n                  </Grid>\n                  <Grid item xs={12} sm={6}>\n                    <TextField\n                      fullWidth\n                      label=\"Ngày bắt đầu\"\n                      name=\"course_start_date\"\n                      type=\"date\"\n                      value={editClassData.course_start_date}\n                      onChange={handleStartDateChange}\n                      InputLabelProps={{ shrink: true }}\n                    />\n                  </Grid>\n                  <Grid item xs={12} sm={6}>\n                    <TextField\n                      fullWidth\n                      label=\"Ngày kết thúc (tự động tính)\"\n                      name=\"course_end_date\"\n                      type=\"date\"\n                      value={editClassData.course_end_date}\n                      disabled\n                      InputLabelProps={{ shrink: true }}\n                    />\n                  </Grid>\n\n                  {/* Phần cấu hình lịch học */}\n                  <Grid item xs={12}>\n                    <Typography variant=\"h6\" sx={{ mt: 2, mb: 1 }}>\n                      Cấu hình lịch học\n                    </Typography>\n                    <Divider sx={{ mb: 2 }} />\n\n                    {scheduleDays.map((day, index) => (\n                      <Paper\n                        key={index}\n                        sx={{ p: 2, mb: 2, position: \"relative\" }}\n                        variant=\"outlined\"\n                      >\n                        <Grid container spacing={2} alignItems=\"center\">\n                          <Grid item xs={12} sm={6} md={3}>\n                            <FormControl fullWidth size=\"small\">\n                              <InputLabel>Thứ</InputLabel>\n                              <Select\n                                label=\"Thứ\"\n                                value={\n                                  day.day_of_week !== undefined\n                                    ? day.day_of_week\n                                    : \"\"\n                                }\n                                onChange={(e) =>\n                                  handleScheduleChange(\n                                    index,\n                                    \"day_of_week\",\n                                    e.target.value\n                                  )\n                                }\n                              >\n                                {[0, 1, 2, 3, 4, 5, 6].map((d) => (\n                                  <MenuItem key={d} value={d}>\n                                    {getDayOfWeekName(d)}\n                                  </MenuItem>\n                                ))}\n                              </Select>\n                            </FormControl>\n                          </Grid>\n                          <Grid item xs={6} sm={3} md={1.5}>\n                            <TextField\n                              fullWidth\n                              label=\"Tiết BĐ\"\n                              type=\"number\"\n                              size=\"small\"\n                              value={day.start_period}\n                              onChange={(e) =>\n                                handleScheduleChange(\n                                  index,\n                                  \"start_period\",\n                                  e.target.value\n                                )\n                              }\n                              InputProps={{ inputProps: { min: 1, max: 15 } }}\n                            />\n                          </Grid>\n                          <Grid item xs={6} sm={3} md={1.5}>\n                            <TextField\n                              fullWidth\n                              label=\"Tiết KT\"\n                              type=\"number\"\n                              size=\"small\"\n                              value={day.end_period}\n                              onChange={(e) =>\n                                handleScheduleChange(\n                                  index,\n                                  \"end_period\",\n                                  e.target.value\n                                )\n                              }\n                              InputProps={{\n                                inputProps: {\n                                  min: day.start_period || 1,\n                                  max: 15,\n                                },\n                              }}\n                            />\n                          </Grid>\n                          {/* Thời gian có thể ẩn hoặc hiển thị dạng readOnly nếu được tính từ tiết */}\n                          <Grid item xs={6} sm={3} md={3}>\n                            <TextField\n                              fullWidth\n                              label=\"Giờ BĐ\"\n                              type=\"time\"\n                              size=\"small\"\n                              value={day.start_time}\n                              InputLabelProps={{ shrink: true }}\n                              onChange={(e) =>\n                                handleScheduleChange(\n                                  index,\n                                  \"start_time\",\n                                  e.target.value\n                                )\n                              }\n                            />\n                          </Grid>\n                          <Grid item xs={6} sm={3} md={3}>\n                            <TextField\n                              fullWidth\n                              label=\"Giờ KT\"\n                              type=\"time\"\n                              size=\"small\"\n                              value={day.end_time}\n                              InputLabelProps={{ shrink: true }}\n                              onChange={(e) =>\n                                handleScheduleChange(\n                                  index,\n                                  \"end_time\",\n                                  e.target.value\n                                )\n                              }\n                            />\n                          </Grid>\n\n                          <Grid item xs={12} sm={4} md={4}>\n                            <FormControl fullWidth size=\"small\">\n                              <InputLabel>Cơ sở</InputLabel>\n                              <Select\n                                label=\"Cơ sở\"\n                                value={day.campusId || \"\"}\n                                onChange={(e) =>\n                                  handleScheduleChange(\n                                    index,\n                                    \"campusId\",\n                                    e.target.value\n                                  )\n                                }\n                              >\n                                <MenuItem value=\"\">\n                                  <em>Chọn cơ sở</em>\n                                </MenuItem>\n                                {campuses.map((campus) => (\n                                  <MenuItem key={campus._id} value={campus._id}>\n                                    {campus.name}\n                                  </MenuItem>\n                                ))}\n                              </Select>\n                            </FormControl>\n                          </Grid>\n                          <Grid item xs={12} sm={4} md={4}>\n                            <FormControl\n                              fullWidth\n                              size=\"small\"\n                              disabled={!day.campusId}\n                            >\n                              <InputLabel>Tòa nhà</InputLabel>\n                              <Select\n                                label=\"Tòa nhà\"\n                                value={day.buildingId || \"\"}\n                                onChange={(e) =>\n                                  handleScheduleChange(\n                                    index,\n                                    \"buildingId\",\n                                    e.target.value\n                                  )\n                                }\n                              >\n                                <MenuItem value=\"\">\n                                  <em>Chọn tòa nhà</em>\n                                </MenuItem>\n                                {day.availableBuildings &&\n                                  day.availableBuildings.map((building) => (\n                                    <MenuItem\n                                      key={building._id}\n                                      value={building._id}\n                                    >\n                                      {building.name}\n                                    </MenuItem>\n                                  ))}\n                              </Select>\n                            </FormControl>\n                          </Grid>\n                          <Grid item xs={12} sm={4} md={4}>\n                            <FormControl\n                              fullWidth\n                              size=\"small\"\n                              disabled={!day.buildingId}\n                            >\n                              <InputLabel>Phòng học</InputLabel>\n                              <Select\n                                label=\"Phòng học\"\n                                value={day.room_id || \"\"}\n                                onChange={(e) =>\n                                  handleScheduleChange(\n                                    index,\n                                    \"room_id\",\n                                    e.target.value\n                                  )\n                                }\n                              >\n                                <MenuItem value=\"\">\n                                  <em>Chọn phòng học</em>\n                                </MenuItem>\n                                {day.availableRooms &&\n                                  day.availableRooms.map((room) => (\n                                    <MenuItem key={room._id} value={room._id}>\n                                      {room.room_number} (SL: {room.capacity})\n                                    </MenuItem>\n                                  ))}\n                              </Select>\n                            </FormControl>\n                          </Grid>\n                        </Grid>\n\n                        {scheduleDays.length > 1 && (\n                          <IconButton\n                            color=\"error\"\n                            size=\"small\"\n                            onClick={() => removeScheduleDay(index)}\n                            sx={{ position: \"absolute\", top: 8, right: 8 }}\n                          >\n                            <Delete fontSize=\"small\" />\n                          </IconButton>\n                        )}\n                      </Paper>\n                    ))}\n\n                    <Button\n                      variant=\"outlined\"\n                      startIcon={<Add />}\n                      onClick={addScheduleDay}\n                      sx={{ mt: 1 }}\n                    >\n                      Thêm buổi học\n                    </Button>\n                  </Grid>\n\n                  {/* Xóa Phần chọn Cơ sở, Tòa nhà, Phòng học chung ở cuối */}\n                  {/*\n                  <Grid item xs={12} sm={4}>\n                    <FormControl fullWidth>\n                      <InputLabel>Cơ sở</InputLabel>\n                      <Select\n                        name=\"campus_id\"\n                        value={selectedCampus}\n                        onChange={handleCampusChange} \n                        label=\"Cơ sở\"\n                      >\n                        <MenuItem value=\"\">\n                          <em>Chọn cơ sở</em>\n                        </MenuItem>\n                        {campuses.map((campus) => (\n                          <MenuItem key={campus._id} value={campus._id}>\n                            {campus.name}\n                          </MenuItem>\n                        ))}\n                      </Select>\n                    </FormControl>\n                  </Grid>\n                  <Grid item xs={12} sm={4}>\n                    <FormControl fullWidth disabled={!selectedCampus}>\n                      <InputLabel>Tòa nhà</InputLabel>\n                      <Select\n                        name=\"building_id\"\n                        value={selectedBuilding}\n                        onChange={handleBuildingChange} \n                        label=\"Tòa nhà\"\n                      >\n                        <MenuItem value=\"\">\n                          <em>Chọn tòa nhà</em>\n                        </MenuItem>\n                        {buildings.map((building) => (\n                          <MenuItem key={building._id} value={building._id}>\n                            {building.name}\n                          </MenuItem>\n                        ))}\n                      </Select>\n                    </FormControl>\n                  </Grid>\n                  <Grid item xs={12} sm={4}>\n                    <FormControl fullWidth disabled={!selectedBuilding}>\n                      <InputLabel>Phòng học chung</InputLabel>\n                      <Select\n                        name=\"room_id\" \n                        value={editClassData.room_id || \"\"} \n                        onChange={handleEditClassChange} \n                        label=\"Phòng học chung\"\n                      >\n                        <MenuItem value=\"\">\n                          <em>Chọn phòng học chung</em>\n                        </MenuItem>\n                        {rooms.map((room) => (\n                          <MenuItem key={room._id} value={room._id}>\n                            {room.room_number}\n                          </MenuItem>\n                        ))}\n                      </Select>\n                      <FormHelperText>\n                        Phòng học này sẽ được dùng mặc định cho các buổi học mới\n                        trong lịch.\n                      </FormHelperText>\n                    </FormControl>\n                  </Grid>\n                  */}\n                </Grid>\n              )}\n            </DialogContent>\n            <DialogActions\n              sx={{ p: 2, justifyContent: \"space-between\", bgcolor: \"grey.50\" }}\n            >\n              <Button\n                onClick={handleCloseEditClassDialog}\n                color=\"inherit\"\n                variant=\"outlined\"\n              >\n                Hủy\n              </Button>\n              <Button\n                onClick={handleUpdateClass}\n                color=\"primary\"\n                variant=\"contained\"\n                disabled={isSubmittingEdit || !editClassData}\n              >\n                Cập nhật lớp học\n              </Button>\n            </DialogActions>\n          </Dialog>\n\n          {/* Dialog Ghi chú */}\n          <Dialog\n            open={openNotesDialog}\n            onClose={handleCloseNotesDialog}\n            maxWidth=\"sm\"\n            fullWidth\n          >\n            <DialogTitle sx={{ pb: 1 }}>\n              {currentSessionForNotes?.notes\n                ? \"Xem/Sửa ghi chú\"\n                : \"Thêm ghi chú\"}\n            </DialogTitle>\n            <DialogContent dividers sx={{ pt: \"16px !important\" }}>\n              <TextField\n                fullWidth\n                multiline\n                rows={5}\n                label=\"Nội dung ghi chú\"\n                value={notesText}\n                onChange={(e) => setNotesText(e.target.value)}\n                placeholder=\"Nhập nội dung ghi chú cho buổi học...\"\n                variant=\"outlined\"\n              />\n            </DialogContent>\n            <DialogActions sx={{ p: 2, justifyContent: \"space-between\" }}>\n              <Button\n                onClick={handleCloseNotesDialog}\n                color=\"inherit\"\n                variant=\"outlined\"\n              >\n                Hủy\n              </Button>\n              <Button\n                onClick={handleSaveNotes}\n                color=\"primary\"\n                variant=\"contained\"\n                disabled={isSavingNotes}\n              >\n                {isSavingNotes ? <CircularProgress size={20} /> : \"Lưu ghi chú\"}\n              </Button>\n            </DialogActions>\n          </Dialog>\n        </>\n      )}\n    </Box>\n  );\n};\n\nexport default TeacherClassDetailPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}