{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kasiz\\\\Documents\\\\Studying\\\\FaceReg\\\\frontend\\\\src\\\\pages\\\\teacher\\\\ClassDetailPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\nimport { useSnackbar } from \"notistack\";\nimport axios from \"axios\";\nimport { Box, Typography, Card, CardContent, Grid, Paper, Button, Tabs, Tab, CircularProgress, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, Chip, IconButton, Dialog, DialogTitle, DialogContent, DialogActions, TextField, FormControl, InputLabel, Select, MenuItem, List, ListItem, ListItemText, ListItemSecondaryAction, Divider, Alert, Tooltip, Checkbox, FormHelperText, AlertTitle, ListItemIcon, Person, Room } from \"@mui/material\";\nimport { PersonAdd, Delete, Add, Edit, PlayArrow, Stop, CheckCircle, Warning, Info, CalendarToday, AccessTime, Download, School, Settings, Event } from \"@mui/icons-material\";\nimport { getTeachingClassById, updateTeachingClass, checkScheduleConflicts } from \"../../services/api\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst API_URL = process.env.REACT_APP_API_URL || \"http://localhost:5000/api\";\nfunction a11yProps(index) {\n  return {\n    id: `class-tab-${index}`,\n    \"aria-controls\": `class-tabpanel-${index}`\n  };\n}\nfunction TabPanel(props) {\n  const {\n    children,\n    value,\n    index,\n    ...other\n  } = props;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    role: \"tabpanel\",\n    hidden: value !== index,\n    id: `class-tabpanel-${index}`,\n    \"aria-labelledby\": `class-tab-${index}`,\n    ...other,\n    children: value === index && /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        p: 3\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 27\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 5\n  }, this);\n}\n_c = TabPanel;\nconst TeacherClassDetailPage = () => {\n  _s();\n  var _classInfo$subject_id2, _classInfo$subject_id3, _classInfo$semester_i2;\n  const {\n    classId\n  } = useParams();\n  const id = classId; // Đảm bảo sử dụng đúng tên param\n  const navigate = useNavigate();\n  const {\n    enqueueSnackbar\n  } = useSnackbar();\n  const {\n    token\n  } = useSelector(state => state.auth);\n\n  // State cho dữ liệu\n  const [classInfo, setClassInfo] = useState(null);\n  const [students, setStudents] = useState([]);\n  const [attendanceSessions, setAttendanceSessions] = useState([]);\n  const [attendanceStats, setAttendanceStats] = useState({\n    total: 0,\n    pending: 0,\n    completed: 0\n  });\n  const [isLoading, setIsLoading] = useState(true);\n\n  // State cho UI\n  const [tabValue, setTabValue] = useState(0);\n  const [openSessionDialog, setOpenSessionDialog] = useState(false);\n  const [sessionFormData, setSessionFormData] = useState({\n    title: \"\",\n    date: new Date().toISOString().split(\"T\")[0],\n    start_time: \"07:00\",\n    end_time: \"08:40\",\n    room: \"\",\n    start_period: 1,\n    end_period: 2,\n    notes: \"\"\n  });\n\n  // State cho thêm sinh viên\n  const [openAddStudentDialog, setOpenAddStudentDialog] = useState(false);\n  const [availableStudents, setAvailableStudents] = useState([]);\n  const [selectedStudents, setSelectedStudents] = useState([]);\n  const [searchStudent, setSearchStudent] = useState(\"\");\n  const [mainClasses, setMainClasses] = useState([]);\n  const [selectedMainClass, setSelectedMainClass] = useState(\"\");\n  const [isLoadingStudents, setIsLoadingStudents] = useState(false);\n\n  // State cho chỉnh sửa thông tin lớp học\n  const [openEditClassDialog, setOpenEditClassDialog] = useState(false);\n  const [editClassData, setEditClassData] = useState(null);\n  const [isSubmittingEdit, setIsSubmittingEdit] = useState(false);\n  const [subjects, setSubjects] = useState([]);\n  const [semesters, setSemesters] = useState([]);\n\n  // Thêm state để lưu danh sách phòng học\n  const [rooms, setRooms] = useState([]);\n  const [campuses, setCampuses] = useState([]);\n  const [buildings, setBuildings] = useState([]);\n  const [selectedCampus, setSelectedCampus] = useState(\"\");\n  const [selectedBuilding, setSelectedBuilding] = useState(\"\");\n\n  // Thêm state để quản lý lịch học\n  const [scheduleDays, setScheduleDays] = useState([]);\n\n  // Thêm state để lưu cảnh báo xung đột lịch\n  const [conflictWarnings, setConflictWarnings] = useState([]);\n  const [checkingConflicts, setCheckingConflicts] = useState(false);\n\n  // Thêm hàm fetch danh sách phòng học\n  const fetchRooms = async buildingId => {\n    try {\n      let url = `${API_URL}/facilities/rooms`;\n\n      // Nếu có buildingId, tải phòng theo tòa nhà\n      if (buildingId) {\n        url = `${API_URL}/facilities/rooms/building/${buildingId}`;\n      } else {\n        // Nếu không có buildingId, tải tất cả phòng\n        url = `${API_URL}/facilities/rooms?limit=1000`;\n      }\n      const response = await axios.get(url, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n\n      // console.log(\"Dữ liệu phòng học từ API:\", response.data);\n\n      if (response.data.success && Array.isArray(response.data.data)) {\n        // Lưu trữ dữ liệu phòng học và ghi log để kiểm tra\n        setRooms(response.data.data);\n        // console.log(\"Đã cập nhật state rooms:\", response.data.data);\n      } else {\n        setRooms([]);\n        console.error(\"API không trả về dữ liệu phòng học hợp lệ:\", response.data);\n        enqueueSnackbar(\"Không thể tải danh sách phòng học (dữ liệu không hợp lệ)\", {\n          variant: \"warning\"\n        });\n      }\n    } catch (error) {\n      console.error(\"Lỗi khi tải danh sách phòng học:\", error);\n      enqueueSnackbar(\"Không thể tải danh sách phòng học\", {\n        variant: \"error\"\n      });\n      setRooms([]);\n    }\n  };\n\n  // Load dữ liệu ban đầu\n  const fetchClassData = useCallback(async () => {\n    try {\n      var _sessionsResponse$dat, _sessionsResponse$dat2;\n      setIsLoading(true);\n\n      // Kiểm tra id có tồn tại không\n      if (!id) {\n        enqueueSnackbar(\"ID lớp học không hợp lệ\", {\n          variant: \"error\"\n        });\n        navigate(\"/teacher/classes\");\n        return;\n      }\n\n      // Lấy thông tin lớp học\n      const classResponse = await axios.get(`${API_URL}/classes/teaching/${id}`, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          Accept: \"application/json\"\n        }\n      });\n\n      // Log dữ liệu để xem cấu trúc\n      // console.log(\"Dữ liệu lớp học nhận về:\", classResponse.data);\n\n      // Kiểm tra nếu không có dữ liệu trả về\n      if (!classResponse.data.success || !classResponse.data.data) {\n        enqueueSnackbar(\"Không tìm thấy thông tin lớp học\", {\n          variant: \"error\"\n        });\n        navigate(\"/teacher/classes\");\n        return;\n      }\n      setClassInfo(classResponse.data.data);\n\n      // Fetch rooms right after setting class info to ensure it's done before rendering\n      await fetchRooms();\n\n      // Lấy danh sách phiên điểm danh\n      const sessionsResponse = await axios.get(`${API_URL}/attendance/teaching-class/${id}/sessions`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setAttendanceSessions(sessionsResponse.data.data || []);\n\n      // Tính toán thống kê điểm danh\n      const stats = {\n        total: ((_sessionsResponse$dat = sessionsResponse.data.data) === null || _sessionsResponse$dat === void 0 ? void 0 : _sessionsResponse$dat.length) || 0,\n        pending: 0,\n        completed: 0\n      };\n      (_sessionsResponse$dat2 = sessionsResponse.data.data) === null || _sessionsResponse$dat2 === void 0 ? void 0 : _sessionsResponse$dat2.forEach(session => {\n        if (session.status === \"completed\") {\n          stats.completed++;\n        } else {\n          stats.pending++;\n        }\n      });\n      setAttendanceStats(stats);\n\n      // Vì API getClassStudents không trả về đầy đủ thông tin, chúng ta sẽ lấy chi tiết từng sinh viên\n      if (classResponse.data.data.students && classResponse.data.data.students.length > 0) {\n        try {\n          // Lấy danh sách sinh viên cơ bản\n          const studentsResponse = await axios.get(`${API_URL}/classes/teaching/${id}/students`, {\n            headers: {\n              Authorization: `Bearer ${token}`,\n              Accept: \"application/json\"\n            }\n          });\n\n          // console.log(\"Dữ liệu sinh viên cơ bản:\", studentsResponse.data);\n\n          // Lưu danh sách sinh viên cơ bản trước\n          let studentsWithBasicInfo = [];\n          if (studentsResponse.data.success && studentsResponse.data.data) {\n            studentsWithBasicInfo = studentsResponse.data.data;\n          } else {\n            studentsWithBasicInfo = classResponse.data.data.students || [];\n          }\n\n          // Lấy chi tiết cho từng sinh viên (bao gồm faceFeatures)\n          const detailedStudents = await Promise.all(studentsWithBasicInfo.map(async student => {\n            try {\n              // Gọi API để lấy thông tin chi tiết của sinh viên\n              const studentDetailResponse = await axios.get(`${API_URL}/users/${student._id}`, {\n                headers: {\n                  Authorization: `Bearer ${token}`,\n                  Accept: \"application/json\"\n                }\n              });\n\n              // console.log(\n              //   `Thông tin chi tiết của sinh viên ${student.full_name}:`,\n              //   studentDetailResponse.data\n              // );\n\n              if (studentDetailResponse.data.success && studentDetailResponse.data.data) {\n                // Kết hợp dữ liệu từ API chi tiết sinh viên với dữ liệu cơ bản\n                const detailedInfo = studentDetailResponse.data.data;\n\n                // Kiểm tra dữ liệu khuôn mặt\n                const hasFaceData = !!(detailedInfo.faceFeatures && detailedInfo.faceFeatures.descriptors && detailedInfo.faceFeatures.descriptors.length > 0);\n\n                // console.log(\n                //   `Sinh viên ${detailedInfo.full_name} có dữ liệu khuôn mặt: ${hasFaceData}`\n                // );\n\n                return {\n                  ...student,\n                  ...detailedInfo,\n                  has_face_data: hasFaceData\n                };\n              } else {\n                // Nếu không lấy được chi tiết, sử dụng thông tin cơ bản\n                return {\n                  ...student,\n                  has_face_data: false\n                };\n              }\n            } catch (error) {\n              console.error(`Lỗi khi lấy thông tin chi tiết của sinh viên ${student._id}:`, error);\n              return {\n                ...student,\n                has_face_data: false\n              };\n            }\n          }));\n          setStudents(detailedStudents);\n        } catch (error) {\n          console.error(\"Lỗi khi lấy danh sách sinh viên:\", error);\n          // Sử dụng danh sách cơ bản nếu có lỗi\n          setStudents(classResponse.data.data.students || []);\n        }\n      } else {\n        setStudents([]);\n      }\n    } catch (error) {\n      console.error(\"Lỗi khi tải dữ liệu lớp học:\", error);\n      // Xử lý các loại lỗi từ API\n      if (error.response) {\n        // Nếu máy chủ phản hồi với mã lỗi\n        if (error.response.status === 404) {\n          enqueueSnackbar(\"Không tìm thấy lớp học với ID đã cho\", {\n            variant: \"error\"\n          });\n        } else if (error.response.status === 400) {\n          enqueueSnackbar(\"ID lớp học không hợp lệ\", {\n            variant: \"error\"\n          });\n        } else {\n          var _error$response$data;\n          enqueueSnackbar(((_error$response$data = error.response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || \"Lỗi khi tải dữ liệu lớp học\", {\n            variant: \"error\"\n          });\n        }\n      } else {\n        enqueueSnackbar(\"Không thể kết nối đến máy chủ\", {\n          variant: \"error\"\n        });\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  }, [id, token, enqueueSnackbar, navigate]);\n  useEffect(() => {\n    fetchClassData();\n  }, [fetchClassData]);\n\n  // Thay đổi tab\n  const handleChangeTab = (event, newValue) => {\n    setTabValue(newValue);\n  };\n\n  // Mở dialog tạo phiên điểm danh\n  const handleOpenSessionDialog = () => {\n    // Tải danh sách phòng học\n    fetchRooms();\n    setSessionFormData({\n      title: `Buổi học ${attendanceSessions.length + 1}`,\n      date: new Date().toISOString().split(\"T\")[0],\n      start_time: \"07:00\",\n      end_time: \"08:40\",\n      room: \"\",\n      start_period: 1,\n      end_period: 2,\n      notes: \"\"\n    });\n    setOpenSessionDialog(true);\n  };\n\n  // Đóng dialog tạo phiên điểm danh\n  const handleCloseSessionDialog = () => {\n    setOpenSessionDialog(false);\n  };\n\n  // Cập nhật form dữ liệu phiên điểm danh\n  const handleSessionFormChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setSessionFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  // Tạo phiên điểm danh mới\n  const handleCreateSession = async () => {\n    try {\n      const {\n        title,\n        date,\n        start_time,\n        end_time,\n        room,\n        start_period,\n        end_period,\n        notes\n      } = sessionFormData;\n\n      // Kiểm tra dữ liệu\n      if (!date || !start_time || !end_time) {\n        enqueueSnackbar(\"Vui lòng điền đầy đủ thông tin\", {\n          variant: \"error\"\n        });\n        return;\n      }\n\n      // Tạo đối tượng để gửi lên API\n      const sessionData = {\n        title,\n        date,\n        start_time,\n        end_time,\n        teaching_class_id: id,\n        start_period: parseInt(start_period, 10) || 1,\n        end_period: parseInt(end_period, 10) || 2,\n        notes\n      };\n\n      // Thêm room nếu có\n      if (room) {\n        sessionData.room = room;\n      }\n      const response = await axios.post(`${API_URL}/attendance/sessions`, sessionData, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      enqueueSnackbar(\"Tạo phiên điểm danh thành công\", {\n        variant: \"success\"\n      });\n      setOpenSessionDialog(false);\n\n      // Cập nhật danh sách phiên\n      setAttendanceSessions(prev => [...prev, response.data.data]);\n      setAttendanceStats(prev => ({\n        ...prev,\n        total: prev.total + 1,\n        pending: prev.pending + 1\n      }));\n    } catch (error) {\n      var _error$response, _error$response$data2;\n      console.error(\"Lỗi khi tạo phiên điểm danh:\", error);\n      enqueueSnackbar(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data2 = _error$response.data) === null || _error$response$data2 === void 0 ? void 0 : _error$response$data2.message) || \"Lỗi khi tạo phiên điểm danh\", {\n        variant: \"error\"\n      });\n    }\n  };\n\n  // Cập nhật phiên điểm danh\n  const handleUpdateSession = async () => {\n    try {\n      const {\n        _id,\n        title,\n        date,\n        start_time,\n        end_time,\n        room,\n        start_period,\n        end_period,\n        notes\n      } = sessionFormData;\n\n      // Kiểm tra dữ liệu\n      if (!date || !start_time || !end_time) {\n        enqueueSnackbar(\"Vui lòng điền đầy đủ thông tin\", {\n          variant: \"error\"\n        });\n        return;\n      }\n\n      // Tạo đối tượng để gửi lên API\n      const sessionData = {\n        title,\n        date,\n        start_time,\n        end_time,\n        start_period: parseInt(start_period, 10) || 1,\n        end_period: parseInt(end_period, 10) || 2,\n        notes\n      };\n\n      // Thêm room nếu có\n      if (room) {\n        sessionData.room = room;\n      }\n\n      // Gọi API cập nhật\n      const response = await axios.put(`${API_URL}/attendance/sessions/${_id}`, sessionData, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      enqueueSnackbar(\"Cập nhật phiên điểm danh thành công\", {\n        variant: \"success\"\n      });\n      setOpenSessionDialog(false);\n\n      // Cập nhật danh sách phiên\n      setAttendanceSessions(prev => prev.map(session => session._id === _id ? response.data.data : session));\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      console.error(\"Lỗi khi cập nhật phiên điểm danh:\", error);\n      enqueueSnackbar(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || \"Lỗi khi cập nhật phiên điểm danh\", {\n        variant: \"error\"\n      });\n    }\n  };\n\n  // Bắt đầu phiên điểm danh\n  const handleStartSession = async sessionId => {\n    try {\n      // Kiểm tra tính hợp lệ của session\n      if (!sessionId) {\n        enqueueSnackbar(\"ID phiên điểm danh không hợp lệ\", {\n          variant: \"error\"\n        });\n        return;\n      }\n\n      // Kiểm tra trạng thái phiên điểm danh\n      const session = attendanceSessions.find(s => s._id === sessionId);\n      if (!session) {\n        enqueueSnackbar(\"Không tìm thấy thông tin phiên điểm danh\", {\n          variant: \"error\"\n        });\n        return;\n      }\n\n      // Nếu phiên chưa bắt đầu hoặc đang ở trạng thái pending, cập nhật trạng thái thành active\n      if (session.status === \"pending\") {\n        try {\n          await axios.put(`${API_URL}/attendance/sessions/${sessionId}/status`, {\n            status: \"active\"\n          }, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n\n          // Cập nhật lại trạng thái trong state\n          setAttendanceSessions(prev => prev.map(s => s._id === sessionId ? {\n            ...s,\n            status: \"active\"\n          } : s));\n        } catch (error) {\n          console.error(\"Lỗi khi cập nhật trạng thái phiên:\", error);\n          // Vẫn tiếp tục điều hướng dù có lỗi\n        }\n      }\n      enqueueSnackbar(`Đang chuyển đến trang điểm danh`, {\n        variant: \"info\"\n      });\n      navigate(`/teacher/attendance/${id}/${sessionId}`);\n    } catch (error) {\n      console.error(\"Lỗi khi bắt đầu phiên điểm danh:\", error);\n      enqueueSnackbar(\"Có lỗi xảy ra khi bắt đầu phiên điểm danh\", {\n        variant: \"error\"\n      });\n    }\n  };\n\n  // Mở dialog thêm sinh viên\n  const handleOpenAddStudentDialog = async () => {\n    try {\n      var _mainClassResponse$da;\n      setIsLoadingStudents(true);\n      // Lấy danh sách lớp chính\n      const mainClassResponse = await axios.get(`${API_URL}/classes/main?all=true`, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          Accept: \"application/json\"\n        }\n      });\n\n      // console.log(\"Danh sách lớp chính:\", mainClassResponse.data);\n\n      if (!((_mainClassResponse$da = mainClassResponse.data) !== null && _mainClassResponse$da !== void 0 && _mainClassResponse$da.data)) {\n        enqueueSnackbar(\"Không thể tải danh sách lớp chính\", {\n          variant: \"error\"\n        });\n        return;\n      }\n      setMainClasses(mainClassResponse.data.data || []);\n      setAvailableStudents([]);\n      setSelectedStudents([]);\n      setSelectedMainClass(\"\");\n      setOpenAddStudentDialog(true);\n    } catch (error) {\n      console.error(\"Lỗi khi tải danh sách lớp chính:\", error);\n      enqueueSnackbar(\"Không thể tải danh sách lớp chính. Vui lòng thử lại sau.\", {\n        variant: \"error\"\n      });\n    } finally {\n      setIsLoadingStudents(false);\n    }\n  };\n\n  // Lấy danh sách sinh viên từ lớp chính\n  const handleMainClassChange = async e => {\n    const mainClassId = e.target.value;\n    setSelectedMainClass(mainClassId);\n    if (!mainClassId) {\n      setAvailableStudents([]);\n      return;\n    }\n    try {\n      var _studentsResponse$dat;\n      setIsLoadingStudents(true);\n      const studentsResponse = await axios.get(`${API_URL}/classes/main/${mainClassId}/approved-students`, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          Accept: \"application/json\"\n        }\n      });\n\n      // console.log(\"Danh sách sinh viên lớp chính:\", studentsResponse.data);\n\n      if (!((_studentsResponse$dat = studentsResponse.data) !== null && _studentsResponse$dat !== void 0 && _studentsResponse$dat.data)) {\n        enqueueSnackbar(\"Không thể tải danh sách sinh viên từ lớp chính\", {\n          variant: \"error\"\n        });\n        return;\n      }\n\n      // Lọc sinh viên chưa có trong lớp\n      const currentStudentIds = students.map(s => s._id);\n      const filteredStudents = studentsResponse.data.data.students.filter(s => !currentStudentIds.includes(s._id));\n      setAvailableStudents(filteredStudents);\n    } catch (error) {\n      console.error(\"Lỗi khi tải danh sách sinh viên từ lớp chính:\", error);\n      enqueueSnackbar(\"Không thể tải danh sách sinh viên từ lớp chính\", {\n        variant: \"error\"\n      });\n      setAvailableStudents([]);\n    } finally {\n      setIsLoadingStudents(false);\n    }\n  };\n\n  // Đóng dialog thêm sinh viên\n  const handleCloseAddStudentDialog = () => {\n    setOpenAddStudentDialog(false);\n  };\n\n  // Xử lý chọn sinh viên để thêm\n  const handleSelectStudent = studentId => {\n    if (selectedStudents.includes(studentId)) {\n      setSelectedStudents(selectedStudents.filter(id => id !== studentId));\n    } else {\n      setSelectedStudents([...selectedStudents, studentId]);\n    }\n  };\n\n  // Thêm sinh viên vào lớp\n  const handleAddStudents = async () => {\n    try {\n      if (selectedStudents.length === 0) {\n        enqueueSnackbar(\"Vui lòng chọn ít nhất một sinh viên\", {\n          variant: \"warning\"\n        });\n        return;\n      }\n\n      // Gọi API thêm sinh viên\n      await axios.post(`${API_URL}/classes/teaching/${id}/students/batch`, {\n        student_ids: selectedStudents\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      enqueueSnackbar(`Đã thêm ${selectedStudents.length} sinh viên vào lớp`, {\n        variant: \"success\"\n      });\n      setOpenAddStudentDialog(false);\n\n      // Cập nhật lại danh sách sinh viên\n      fetchClassData();\n    } catch (error) {\n      console.error(\"Lỗi khi thêm sinh viên:\", error);\n      if (error.response) {\n        var _error$response$data3;\n        enqueueSnackbar(`Lỗi: ${error.response.status} - ${((_error$response$data3 = error.response.data) === null || _error$response$data3 === void 0 ? void 0 : _error$response$data3.message) || \"Không thể thêm sinh viên\"}`, {\n          variant: \"error\"\n        });\n      } else {\n        enqueueSnackbar(\"Lỗi kết nối khi thêm sinh viên vào lớp\", {\n          variant: \"error\"\n        });\n      }\n    }\n  };\n\n  // Xóa sinh viên khỏi lớp\n  const handleRemoveStudent = async studentId => {\n    if (!window.confirm(\"Bạn có chắc chắn muốn xóa sinh viên này khỏi lớp không?\")) {\n      return;\n    }\n    try {\n      await axios.delete(`${API_URL}/classes/teaching/${id}/students/${studentId}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      enqueueSnackbar(\"Đã xóa sinh viên khỏi lớp\", {\n        variant: \"success\"\n      });\n\n      // Cập nhật lại danh sách sinh viên\n      setStudents(students.filter(s => s._id !== studentId));\n    } catch (error) {\n      console.error(\"Lỗi khi xóa sinh viên:\", error);\n      enqueueSnackbar(\"Lỗi khi xóa sinh viên khỏi lớp\", {\n        variant: \"error\"\n      });\n    }\n  };\n\n  // Xuất danh sách sinh viên\n  const handleExportStudentList = () => {\n    try {\n      const studentsData = students.map((student, index) => {\n        var _student$school_info;\n        // Kiểm tra có face data từ cả hai nguồn có thể\n        const hasFaceData = student.has_face_data || !!(student.faceFeatures && student.faceFeatures.descriptors && student.faceFeatures.descriptors.length > 0);\n        return {\n          STT: index + 1,\n          \"Mã SV\": ((_student$school_info = student.school_info) === null || _student$school_info === void 0 ? void 0 : _student$school_info.student_id) || \"N/A\",\n          \"Họ và tên\": student.full_name || student.name,\n          Email: student.email,\n          \"Đăng ký khuôn mặt\": hasFaceData ? \"Đã đăng ký\" : \"Chưa đăng ký\"\n        };\n      });\n      const header = [\"STT\", \"Mã SV\", \"Họ và tên\", \"Email\", \"Đăng ký khuôn mặt\"];\n      const csvContent = \"data:text/csv;charset=utf-8,\" + [header.join(\",\"), ...studentsData.map(row => [row.STT, row[\"Mã SV\"], row[\"Họ và tên\"], row.Email, row[\"Đăng ký khuôn mặt\"]].join(\",\"))].join(\"\\n\");\n      const encodedUri = encodeURI(csvContent);\n      const link = document.createElement(\"a\");\n      link.setAttribute(\"href\", encodedUri);\n      link.setAttribute(\"download\", `danh_sach_sinh_vien_${classInfo === null || classInfo === void 0 ? void 0 : classInfo.class_name}.csv`);\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      enqueueSnackbar(\"Xuất danh sách sinh viên thành công\", {\n        variant: \"success\"\n      });\n    } catch (error) {\n      console.error(\"Lỗi khi xuất danh sách:\", error);\n      enqueueSnackbar(\"Lỗi khi xuất danh sách sinh viên\", {\n        variant: \"error\"\n      });\n    }\n  };\n\n  // Lọc sinh viên theo từ khóa tìm kiếm\n  const filteredAvailableStudents = availableStudents.filter(student => {\n    var _student$school_info2, _student$school_info3;\n    return student.full_name.toLowerCase().includes(searchStudent.toLowerCase()) || ((_student$school_info2 = student.school_info) === null || _student$school_info2 === void 0 ? void 0 : (_student$school_info3 = _student$school_info2.student_id) === null || _student$school_info3 === void 0 ? void 0 : _student$school_info3.toLowerCase().includes(searchStudent.toLowerCase())) || student.email.toLowerCase().includes(searchStudent.toLowerCase());\n  });\n\n  // Tải dữ liệu tham chiếu cho form chỉnh sửa\n  const fetchReferenceDataForEdit = async () => {\n    try {\n      const [subjectsRes, semestersRes, mainClassesRes, campusesRes] = await Promise.all([axios.get(`${API_URL}/subjects`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }), axios.get(`${API_URL}/semesters`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }), axios.get(`${API_URL}/classes/main?all=true`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }), axios.get(`${API_URL}/facilities/campuses`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      })]);\n      setSubjects(subjectsRes.data.data || []);\n      setSemesters(semestersRes.data.data || []);\n      setMainClasses(mainClassesRes.data.data || []);\n      setCampuses(campusesRes.data.data || []);\n\n      // Nếu lớp học có thông tin campus và building, tải danh sách building và room tương ứng\n      if (classInfo && classInfo.room) {\n        try {\n          const roomDetails = await axios.get(`${API_URL}/facilities/rooms/${classInfo.room}`, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n          if (roomDetails.data.success && roomDetails.data.data) {\n            const room = roomDetails.data.data;\n            if (room.building_id) {\n              var _room$building_id$cam, _room$building_id$cam2;\n              setSelectedCampus(((_room$building_id$cam = room.building_id.campus_id) === null || _room$building_id$cam === void 0 ? void 0 : _room$building_id$cam._id) || \"\");\n\n              // Tải danh sách buildings của campus\n              const buildingsRes = await axios.get(`${API_URL}/facilities/buildings/campuses/${(_room$building_id$cam2 = room.building_id.campus_id) === null || _room$building_id$cam2 === void 0 ? void 0 : _room$building_id$cam2._id}`, {\n                headers: {\n                  Authorization: `Bearer ${token}`\n                }\n              });\n              setBuildings(buildingsRes.data.data || []);\n              setSelectedBuilding(room.building_id._id || \"\");\n\n              // Tải danh sách rooms của building\n              const roomsRes = await axios.get(`${API_URL}/facilities/rooms/building/${room.building_id._id}`, {\n                headers: {\n                  Authorization: `Bearer ${token}`\n                }\n              });\n              setRooms(roomsRes.data.data || []);\n            }\n          }\n        } catch (error) {\n          console.error(\"Lỗi khi tải thông tin phòng học:\", error);\n        }\n      }\n    } catch (error) {\n      console.error(\"Lỗi khi tải dữ liệu tham chiếu:\", error);\n      enqueueSnackbar(\"Lỗi khi tải dữ liệu tham chiếu\", {\n        variant: \"error\"\n      });\n    }\n  };\n\n  // Tải danh sách tòa nhà khi chọn campus\n  const fetchBuildings = async campusId => {\n    if (!campusId) {\n      setBuildings([]);\n      setSelectedBuilding(\"\");\n      return;\n    }\n    try {\n      const response = await axios.get(`${API_URL}/facilities/buildings/campuses/${campusId}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setBuildings(response.data.data || []);\n    } catch (error) {\n      console.error(\"Lỗi khi tải danh sách tòa nhà:\", error);\n      enqueueSnackbar(\"Lỗi khi tải danh sách tòa nhà\", {\n        variant: \"error\"\n      });\n    }\n  };\n\n  // Mở dialog chỉnh sửa lớp học\n  const handleOpenEditClassDialog = () => {\n    var _classInfo$subject_id, _classInfo$main_class, _classInfo$semester_i, _classInfo$room;\n    // Chuẩn bị dữ liệu ban đầu cho form\n    setEditClassData({\n      class_name: classInfo.class_name || \"\",\n      class_code: classInfo.class_code || \"\",\n      subject_id: ((_classInfo$subject_id = classInfo.subject_id) === null || _classInfo$subject_id === void 0 ? void 0 : _classInfo$subject_id._id) || \"\",\n      main_class_id: ((_classInfo$main_class = classInfo.main_class_id) === null || _classInfo$main_class === void 0 ? void 0 : _classInfo$main_class._id) || \"\",\n      semester_id: ((_classInfo$semester_i = classInfo.semester_id) === null || _classInfo$semester_i === void 0 ? void 0 : _classInfo$semester_i._id) || \"\",\n      total_sessions: classInfo.total_sessions || 15,\n      room_id: ((_classInfo$room = classInfo.room) === null || _classInfo$room === void 0 ? void 0 : _classInfo$room._id) || \"\",\n      course_start_date: classInfo.course_start_date ? classInfo.course_start_date.split(\"T\")[0] : \"\",\n      course_end_date: classInfo.course_end_date ? classInfo.course_end_date.split(\"T\")[0] : \"\",\n      auto_generate_sessions: classInfo.auto_generate_sessions !== false,\n      schedule: classInfo.schedule || []\n    });\n\n    // Chuẩn bị lịch học từ classInfo\n    if (classInfo.schedule && classInfo.schedule.length > 0) {\n      setScheduleDays(classInfo.schedule);\n    } else {\n      var _classInfo$room2;\n      // Nếu không có lịch học, tạo lịch mặc định dựa trên ngày bắt đầu\n      const dayOfWeek = classInfo.course_start_date ? getDayOfWeekFromDate(classInfo.course_start_date.split(\"T\")[0]) : 1;\n      setScheduleDays([{\n        day_of_week: dayOfWeek,\n        start_period: 1,\n        end_period: 2,\n        start_time: \"07:00\",\n        end_time: \"08:40\",\n        room_id: ((_classInfo$room2 = classInfo.room) === null || _classInfo$room2 === void 0 ? void 0 : _classInfo$room2._id) || \"\",\n        is_recurring: true,\n        specific_dates: [],\n        excluded_dates: []\n      }]);\n    }\n\n    // Tải dữ liệu tham chiếu\n    fetchReferenceDataForEdit();\n\n    // Mở dialog\n    setOpenEditClassDialog(true);\n  };\n\n  // Đóng dialog chỉnh sửa lớp học\n  const handleCloseEditClassDialog = () => {\n    setOpenEditClassDialog(false);\n    setEditClassData(null);\n  };\n\n  // Xử lý thay đổi các trường trong form chỉnh sửa\n  const handleEditClassChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setEditClassData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  // Xử lý thay đổi campus\n  const handleCampusChange = e => {\n    const campusId = e.target.value;\n    setSelectedCampus(campusId);\n    fetchBuildings(campusId);\n    setSelectedBuilding(\"\");\n    setEditClassData(prev => ({\n      ...prev,\n      room_id: \"\"\n    }));\n  };\n\n  // Xử lý thay đổi building\n  const handleBuildingChange = e => {\n    const buildingId = e.target.value;\n    setSelectedBuilding(buildingId);\n    fetchRooms(buildingId);\n    setEditClassData(prev => ({\n      ...prev,\n      room_id: \"\"\n    }));\n  };\n\n  // Thêm function để kiểm tra xung đột lịch\n  const checkConflicts = async (scheduleToCheck = scheduleDays) => {\n    // Xóa cảnh báo xung đột cũ\n    setConflictWarnings([]);\n    try {\n      var _user;\n      setCheckingConflicts(true);\n\n      // Kiểm tra xem có thông tin đủ để check không\n      if (!((_user = user) !== null && _user !== void 0 && _user.id) || !scheduleToCheck || scheduleToCheck.length === 0 || scheduleToCheck.some(day => !day.room_id)) {\n        return;\n      }\n      const response = await checkScheduleConflicts({\n        teacher_id: user.id,\n        schedule: scheduleToCheck,\n        class_id: id // Loại trừ chính lớp này khi kiểm tra\n      });\n      if (response.data.has_conflicts) {\n        setConflictWarnings(response.data.conflicts);\n      }\n    } catch (error) {\n      console.error(\"Lỗi khi kiểm tra xung đột lịch học:\", error);\n      enqueueSnackbar(\"Lỗi khi kiểm tra xung đột lịch học\", {\n        variant: \"error\"\n      });\n    } finally {\n      setCheckingConflicts(false);\n    }\n  };\n\n  // Cập nhật hàm handleScheduleChange để check xung đột\n  const handleScheduleChange = (index, field, value) => {\n    const updatedSchedule = [...scheduleDays];\n    updatedSchedule[index] = {\n      ...updatedSchedule[index],\n      [field]: value\n    };\n    setScheduleDays(updatedSchedule);\n\n    // Tính lại ngày kết thúc khi lịch học thay đổi\n    setEditClassData(prev => ({\n      ...prev,\n      course_end_date: calculateEndDate(prev.course_start_date, updatedSchedule, prev.total_sessions)\n    }));\n\n    // Kiểm tra xung đột nếu thay đổi phòng học hoặc thời gian\n    if (field === \"room_id\" || field === \"day_of_week\" || field === \"start_period\" || field === \"end_period\" || field === \"start_time\" || field === \"end_time\") {\n      // Đặt timeout để tránh gọi API quá nhiều khi người dùng thay đổi nhiều lần\n      setTimeout(() => {\n        if (updatedSchedule[index].room_id && updatedSchedule[index].day_of_week !== undefined) {\n          checkConflicts(updatedSchedule);\n        }\n      }, 500);\n    }\n  };\n\n  // Cập nhật hàm handleUpdateClass\n  const handleUpdateClass = async () => {\n    if (!editClassData.class_name || !editClassData.class_code) {\n      enqueueSnackbar(\"Vui lòng điền đầy đủ thông tin bắt buộc\", {\n        variant: \"warning\"\n      });\n      return;\n    }\n\n    // Kiểm tra room_id trong từng schedule item\n    for (const day of scheduleDays) {\n      if (!day.room_id) {\n        enqueueSnackbar(`Vui lòng chọn phòng học cho buổi học vào ${getDayOfWeekName(day.day_of_week)}`, {\n          variant: \"warning\"\n        });\n        return;\n      }\n    }\n\n    // Kiểm tra xung đột lịch cuối cùng trước khi cập nhật lớp\n    try {\n      setCheckingConflicts(true);\n      const response = await checkScheduleConflicts({\n        teacher_id: classData.teacher_id._id,\n        schedule: scheduleDays,\n        class_id: id\n      });\n      if (response.data.has_conflicts) {\n        setConflictWarnings(response.data.conflicts);\n\n        // Hiển thị thông báo xác nhận nếu có xung đột\n        if (window.confirm(\"Phát hiện xung đột lịch học. Bạn vẫn muốn cập nhật lịch học này không?\\n\\n\" + response.data.conflicts.map(c => c.message).join(\"\\n\"))) {\n          // Tiếp tục cập nhật lớp nếu người dùng xác nhận\n          await updateClassData();\n        }\n      } else {\n        // Không có xung đột, cập nhật lớp\n        await updateClassData();\n      }\n    } catch (error) {\n      console.error(\"Lỗi khi kiểm tra xung đột lịch học:\", error);\n      // Vẫn cập nhật lớp ngay cả khi không thể kiểm tra xung đột\n      await updateClassData();\n    } finally {\n      setCheckingConflicts(false);\n    }\n  };\n\n  // Tách logic cập nhật lớp thành hàm riêng\n  const updateClassData = async () => {\n    setIsUpdating(true);\n    try {\n      // Tạo đối tượng dữ liệu để cập nhật\n      const updateData = {\n        ...editClassData,\n        schedule: scheduleDays\n      };\n\n      // Xóa các trường không cần thiết\n      delete updateData.teacher_id;\n      delete updateData.createdAt;\n      delete updateData.updatedAt;\n      await updateTeachingClass(id, updateData);\n      enqueueSnackbar(\"Cập nhật lớp học thành công\", {\n        variant: \"success\"\n      });\n      setEditMode(false);\n      fetchClassData(); // Tải lại dữ liệu lớp học\n      setConflictWarnings([]); // Xóa cảnh báo xung đột\n    } catch (error) {\n      var _error$response3, _error$response3$data;\n      console.error(\"Lỗi khi cập nhật lớp học:\", error);\n      enqueueSnackbar(((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.message) || \"Lỗi khi cập nhật lớp học\", {\n        variant: \"error\"\n      });\n    } finally {\n      setIsUpdating(false);\n    }\n  };\n\n  // Lấy thứ trong tuần từ ngày\n  const getDayOfWeekFromDate = dateString => {\n    if (!dateString) return 1; // Mặc định là thứ 2 nếu không có ngày\n\n    const date = new Date(dateString);\n    // getDay() trả về 0 cho Chủ Nhật, 1-6 cho Thứ 2 đến Thứ 7\n    const day = date.getDay();\n\n    // Chuyển đổi để 0 = Chủ Nhật, 1 = Thứ Hai, ...\n    return day;\n  };\n\n  // Lấy tên của thứ trong tuần\n  const getDayOfWeekName = dayOfWeek => {\n    const days = [\"Chủ Nhật\", \"Thứ Hai\", \"Thứ Ba\", \"Thứ Tư\", \"Thứ Năm\", \"Thứ Sáu\", \"Thứ Bảy\"];\n    return days[dayOfWeek];\n  };\n\n  // Thêm lịch học\n  const addScheduleDay = () => {\n    // Lấy ngày bắt đầu\n    const startDate = editClassData.course_start_date;\n    if (!startDate) {\n      enqueueSnackbar(\"Vui lòng chọn ngày bắt đầu trước\", {\n        variant: \"warning\"\n      });\n      return;\n    }\n\n    // Lấy thứ từ ngày bắt đầu\n    const baseDayOfWeek = getDayOfWeekFromDate(startDate);\n\n    // Tìm thứ tiếp theo chưa có trong lịch\n    const existingDays = scheduleDays.map(day => day.day_of_week);\n    let nextDay = (baseDayOfWeek + 1) % 7; // Thứ tiếp theo\n\n    // Tìm một thứ chưa có trong lịch hiện tại\n    for (let i = 0; i < 7; i++) {\n      if (!existingDays.includes(nextDay)) {\n        break;\n      }\n      nextDay = (nextDay + 1) % 7;\n    }\n\n    // Nếu đã có đủ 7 ngày trong tuần, thì dùng thứ 2\n    if (existingDays.length >= 7) {\n      nextDay = 1;\n    }\n    const updatedSchedule = [...scheduleDays, {\n      day_of_week: nextDay,\n      start_period: 1,\n      end_period: 2,\n      start_time: \"07:00\",\n      end_time: \"08:40\",\n      room_id: editClassData.room_id,\n      is_recurring: true,\n      specific_dates: [],\n      excluded_dates: []\n    }];\n    setScheduleDays(updatedSchedule);\n\n    // Tính lại ngày kết thúc sau khi thêm buổi học\n    setEditClassData(prev => ({\n      ...prev,\n      course_end_date: calculateEndDate(prev.course_start_date, updatedSchedule, prev.total_sessions)\n    }));\n  };\n\n  // Xóa lịch học\n  const removeScheduleDay = index => {\n    if (scheduleDays.length > 1) {\n      const updatedSchedule = scheduleDays.filter((_, i) => i !== index);\n      setScheduleDays(updatedSchedule);\n\n      // Tính lại ngày kết thúc sau khi xóa buổi học\n      setEditClassData(prev => ({\n        ...prev,\n        course_end_date: calculateEndDate(prev.course_start_date, updatedSchedule, prev.total_sessions)\n      }));\n    }\n  };\n\n  // Tính ngày kết thúc dựa trên ngày bắt đầu và lịch học\n  const calculateEndDate = (startDate, schedule, totalSessions) => {\n    if (!startDate || !schedule || schedule.length === 0 || !totalSessions) {\n      return \"\";\n    }\n    try {\n      // Chuyển ngày bắt đầu thành đối tượng Date\n      const start = new Date(startDate);\n      if (isNaN(start.getTime())) {\n        return \"\";\n      }\n\n      // Tổng số tuần cần thiết = tổng số buổi học / số buổi học mỗi tuần\n      const sessionsPerWeek = schedule.length;\n      const weeksNeeded = Math.ceil(totalSessions / sessionsPerWeek);\n\n      // Tạo mảng chứa các ngày trong tuần từ lịch học (0-6, với 0 là Chủ Nhật)\n      const daysOfWeek = schedule.map(day => day.day_of_week);\n\n      // Sắp xếp các ngày trong tuần\n      daysOfWeek.sort((a, b) => a - b);\n\n      // Tìm ngày đầu tiên trong lịch học sau ngày bắt đầu\n      let currentDate = new Date(start);\n\n      // Đếm số buổi học đã xếp lịch\n      let sessionCount = 0;\n\n      // Lặp qua từng tuần\n      for (let week = 0; week < weeksNeeded * 2; week++) {\n        // Nhân 2 để đảm bảo đủ số buổi\n        // Lặp qua các ngày trong tuần từ lịch học\n        for (let dayIndex = 0; dayIndex < daysOfWeek.length; dayIndex++) {\n          const targetDayOfWeek = daysOfWeek[dayIndex];\n\n          // Tìm ngày tiếp theo có thứ phù hợp\n          while (currentDate.getDay() !== targetDayOfWeek) {\n            currentDate.setDate(currentDate.getDate() + 1);\n          }\n          sessionCount++;\n\n          // Nếu đã đủ số buổi học, trả về ngày hiện tại\n          if (sessionCount >= totalSessions) {\n            return currentDate.toISOString().split(\"T\")[0];\n          }\n\n          // Di chuyển đến ngày tiếp theo\n          currentDate.setDate(currentDate.getDate() + 1);\n        }\n      }\n\n      // Nếu không tính được, trả về chuỗi rỗng\n      return \"\";\n    } catch (error) {\n      console.error(\"Lỗi khi tính ngày kết thúc:\", error);\n      return \"\";\n    }\n  };\n\n  // Xử lý thay đổi ngày bắt đầu\n  const handleStartDateChange = e => {\n    const startDate = e.target.value;\n\n    // Lấy thứ từ ngày bắt đầu\n    const dayOfWeek = getDayOfWeekFromDate(startDate);\n\n    // Cập nhật lịch học với thứ mới\n    const updatedSchedule = [{\n      day_of_week: dayOfWeek,\n      start_period: 1,\n      end_period: 2,\n      start_time: \"07:00\",\n      end_time: \"08:40\",\n      room_id: editClassData.room_id,\n      is_recurring: true,\n      specific_dates: [],\n      excluded_dates: []\n    }];\n\n    // Cập nhật lịch học\n    setScheduleDays(updatedSchedule);\n\n    // Cập nhật ngày bắt đầu và tính ngày kết thúc\n    setEditClassData(prev => ({\n      ...prev,\n      course_start_date: startDate,\n      course_end_date: calculateEndDate(startDate, updatedSchedule, prev.total_sessions)\n    }));\n  };\n\n  // Xử lý thay đổi số buổi học\n  const handleTotalSessionsChange = e => {\n    const totalSessions = e.target.value;\n    setEditClassData(prev => ({\n      ...prev,\n      total_sessions: totalSessions,\n      // Tính lại ngày kết thúc khi thay đổi số buổi học\n      course_end_date: calculateEndDate(prev.course_start_date, scheduleDays, totalSessions)\n    }));\n  };\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        height: \"80vh\"\n      },\n      children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1437,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1429,\n      columnNumber: 7\n    }, this);\n  }\n  if (!classInfo) {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        py: 3\n      },\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        sx: {\n          textAlign: \"center\",\n          p: 4\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          color: \"error\",\n          gutterBottom: true,\n          children: \"Kh\\xF4ng t\\xECm th\\u1EA5y l\\u1EDBp h\\u1ECDc\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1446,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body1\",\n          sx: {\n            mb: 3\n          },\n          children: \"L\\u1EDBp h\\u1ECDc b\\u1EA1n \\u0111ang t\\xECm ki\\u1EBFm kh\\xF4ng t\\u1ED3n t\\u1EA1i ho\\u1EB7c \\u0111\\xE3 b\\u1ECB x\\xF3a.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1449,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          onClick: () => navigate(\"/teacher/classes\"),\n          children: \"Quay l\\u1EA1i danh s\\xE1ch l\\u1EDBp\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1452,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1445,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1444,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      padding: 3\n    },\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        mb: 3\n      },\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        variant: \"outlined\",\n        onClick: () => navigate(\"/teacher/classes\"),\n        sx: {\n          mb: 2\n        },\n        children: \"Quay l\\u1EA1i danh s\\xE1ch l\\u1EDBp\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1467,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: \"flex\",\n          justifyContent: \"space-between\",\n          alignItems: \"flex-start\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h4\",\n            gutterBottom: true,\n            children: classInfo.class_name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1482,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"subtitle1\",\n            color: \"text.secondary\",\n            gutterBottom: true,\n            children: [(_classInfo$subject_id2 = classInfo.subject_id) === null || _classInfo$subject_id2 === void 0 ? void 0 : _classInfo$subject_id2.name, \" (\", (_classInfo$subject_id3 = classInfo.subject_id) === null || _classInfo$subject_id3 === void 0 ? void 0 : _classInfo$subject_id3.code, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1485,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1481,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          startIcon: /*#__PURE__*/_jsxDEV(Edit, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1492,\n            columnNumber: 24\n          }, this),\n          onClick: handleOpenEditClassDialog,\n          children: \"Ch\\u1EC9nh s\\u1EEDa th\\xF4ng tin l\\u1EDBp\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1489,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1474,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1466,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      spacing: 3,\n      sx: {\n        mb: 3\n      },\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        md: 4,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          children: /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              gutterBottom: true,\n              children: \"Th\\xF4ng tin l\\u1EDBp h\\u1ECDc\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1504,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                mt: 2\n              },\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                sx: {\n                  mb: 1,\n                  display: \"flex\",\n                  alignItems: \"center\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(CalendarToday, {\n                  sx: {\n                    mr: 1,\n                    fontSize: \"small\"\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1512,\n                  columnNumber: 19\n                }, this), \"H\\u1ECDc k\\u1EF3: \", ((_classInfo$semester_i2 = classInfo.semester_id) === null || _classInfo$semester_i2 === void 0 ? void 0 : _classInfo$semester_i2.name) || \"N/A\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1508,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                sx: {\n                  mb: 1,\n                  display: \"flex\",\n                  alignItems: \"center\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(CalendarToday, {\n                  sx: {\n                    mr: 1,\n                    fontSize: \"small\"\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1519,\n                  columnNumber: 19\n                }, this), \"Ng\\xE0y b\\u1EAFt \\u0111\\u1EA7u:\", \" \", classInfo.course_start_date ? new Date(classInfo.course_start_date).toLocaleDateString(\"vi-VN\") : \"N/A\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1515,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                sx: {\n                  mb: 1,\n                  display: \"flex\",\n                  alignItems: \"center\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(CalendarToday, {\n                  sx: {\n                    mr: 1,\n                    fontSize: \"small\"\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1531,\n                  columnNumber: 19\n                }, this), \"Ng\\xE0y k\\u1EBFt th\\xFAc:\", \" \", classInfo.course_end_date ? new Date(classInfo.course_end_date).toLocaleDateString(\"vi-VN\") : \"N/A\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1527,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                sx: {\n                  mb: 1,\n                  display: \"flex\",\n                  alignItems: \"center\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(Info, {\n                  sx: {\n                    mr: 1,\n                    fontSize: \"small\"\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1543,\n                  columnNumber: 19\n                }, this), \"S\\u1ED1 bu\\u1ED5i h\\u1ECDc: \", classInfo.total_sessions || 15]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1539,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1507,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1503,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1502,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1501,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        md: 4,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          children: /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              gutterBottom: true,\n              children: \"\\u0110i\\u1EC3m danh\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1553,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                mt: 2\n              },\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                sx: {\n                  mb: 1\n                },\n                children: [\"T\\u1ED5ng s\\u1ED1 bu\\u1ED5i: \", attendanceStats.total]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1557,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                sx: {\n                  mb: 1\n                },\n                children: [\"\\u0110\\xE3 ho\\xE0n th\\xE0nh: \", attendanceStats.completed]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1560,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                sx: {\n                  mb: 1\n                },\n                children: [\"Ch\\u01B0a ho\\xE0n th\\xE0nh: \", attendanceStats.pending]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1563,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1556,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1552,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1551,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1550,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        md: 4,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          children: /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              gutterBottom: true,\n              children: \"Sinh vi\\xEAn\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1573,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                mt: 2\n              },\n              children: /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                sx: {\n                  mb: 1\n                },\n                children: [\"T\\u1ED5ng s\\u1ED1 sinh vi\\xEAn: \", students.length]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1577,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1576,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outlined\",\n              size: \"small\",\n              startIcon: /*#__PURE__*/_jsxDEV(Download, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1584,\n                columnNumber: 28\n              }, this),\n              onClick: handleExportStudentList,\n              sx: {\n                mt: 2\n              },\n              children: \"Xu\\u1EA5t danh s\\xE1ch\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1581,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1572,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1571,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1570,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1500,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        width: \"100%\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          borderBottom: 1,\n          borderColor: \"divider\"\n        },\n        children: /*#__PURE__*/_jsxDEV(Tabs, {\n          value: tabValue,\n          onChange: handleChangeTab,\n          \"aria-label\": \"l\\u1EDBp h\\u1ECDc tabs\",\n          children: [/*#__PURE__*/_jsxDEV(Tab, {\n            label: \"Sinh vi\\xEAn\",\n            ...a11yProps(0)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1602,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Tab, {\n            label: \"Phi\\xEAn \\u0111i\\u1EC3m danh\",\n            ...a11yProps(1)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1603,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1597,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1596,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n        value: tabValue,\n        index: 0,\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: \"flex\",\n            justifyContent: \"flex-end\",\n            mb: 2\n          },\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            startIcon: /*#__PURE__*/_jsxDEV(PersonAdd, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1610,\n              columnNumber: 26\n            }, this),\n            onClick: handleOpenAddStudentDialog,\n            children: \"Th\\xEAm sinh vi\\xEAn\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1608,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1607,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TableContainer, {\n          component: Paper,\n          children: /*#__PURE__*/_jsxDEV(Table, {\n            children: [/*#__PURE__*/_jsxDEV(TableHead, {\n              children: /*#__PURE__*/_jsxDEV(TableRow, {\n                children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                  children: \"STT\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1620,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  children: \"M\\xE3 sinh vi\\xEAn\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1621,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  children: \"H\\u1ECD v\\xE0 t\\xEAn\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1622,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  children: \"Email\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1623,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  children: \"Tr\\u1EA1ng th\\xE1i\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1624,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  children: \"Thao t\\xE1c\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1625,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1619,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1618,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n              children: students.length > 0 ? students.map((student, index) => {\n                var _student$school_info4;\n                // Kiểm tra và log mỗi sinh viên để debug\n                // console.log(`Hiển thị sinh viên ${index + 1}:`, student);\n\n                // Kiểm tra có face data từ cả hai nguồn có thể\n                const hasFaceData = student.has_face_data || !!(student.faceFeatures && student.faceFeatures.descriptors && student.faceFeatures.descriptors.length > 0);\n                return /*#__PURE__*/_jsxDEV(TableRow, {\n                  children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                    children: index + 1\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1645,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                    children: ((_student$school_info4 = student.school_info) === null || _student$school_info4 === void 0 ? void 0 : _student$school_info4.student_id) || \"N/A\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1646,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                    children: student.full_name || student.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1649,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                    children: student.email\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1652,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                    children: hasFaceData ? /*#__PURE__*/_jsxDEV(Chip, {\n                      label: \"\\u0110\\xE3 \\u0111\\u0103ng k\\xFD khu\\xF4n m\\u1EB7t\",\n                      color: \"success\",\n                      size: \"small\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1655,\n                      columnNumber: 29\n                    }, this) : /*#__PURE__*/_jsxDEV(Chip, {\n                      label: \"Ch\\u01B0a \\u0111\\u0103ng k\\xFD khu\\xF4n m\\u1EB7t\",\n                      color: \"warning\",\n                      size: \"small\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1661,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1653,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                    children: /*#__PURE__*/_jsxDEV(Tooltip, {\n                      title: \"X\\xF3a kh\\u1ECFi l\\u1EDBp\",\n                      children: /*#__PURE__*/_jsxDEV(IconButton, {\n                        size: \"small\",\n                        color: \"error\",\n                        onClick: () => handleRemoveStudent(student._id),\n                        children: /*#__PURE__*/_jsxDEV(Delete, {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1675,\n                          columnNumber: 31\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1670,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1669,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1668,\n                    columnNumber: 25\n                  }, this)]\n                }, student._id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1644,\n                  columnNumber: 23\n                }, this);\n              }) : /*#__PURE__*/_jsxDEV(TableRow, {\n                children: /*#__PURE__*/_jsxDEV(TableCell, {\n                  colSpan: 6,\n                  align: \"center\",\n                  children: \"Ch\\u01B0a c\\xF3 sinh vi\\xEAn n\\xE0o trong l\\u1EDBp\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1684,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1683,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1628,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1617,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1616,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1606,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TabPanel, {\n        value: tabValue,\n        index: 1,\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: \"flex\",\n            justifyContent: \"flex-end\",\n            mb: 2\n          },\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            startIcon: /*#__PURE__*/_jsxDEV(Add, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1697,\n              columnNumber: 26\n            }, this),\n            onClick: handleOpenSessionDialog,\n            children: \"T\\u1EA1o phi\\xEAn \\u0111i\\u1EC3m danh\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1695,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1694,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TableContainer, {\n          component: Paper,\n          children: /*#__PURE__*/_jsxDEV(Table, {\n            children: [/*#__PURE__*/_jsxDEV(TableHead, {\n              children: /*#__PURE__*/_jsxDEV(TableRow, {\n                children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                  children: \"STT\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1707,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  children: \"Ng\\xE0y\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1708,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  children: \"Ti\\u1EBFt/Th\\u1EDDi gian\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1709,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  children: \"Ph\\xF2ng\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1710,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  children: \"Ghi ch\\xFA\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1711,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  children: \"Tr\\u1EA1ng th\\xE1i\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1712,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  children: \"Thao t\\xE1c\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1713,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1706,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1705,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n              children: attendanceSessions.length > 0 ? attendanceSessions.map((session, index) => {\n                var _session$room$buildin, _session$room$buildin2, _session$room$buildin3;\n                // Log the session.room before rendering\n                // console.log(\n                //   `[DEBUG] Rendering room for session ${session._id}:`,\n                //   session.room\n                // );\n                return /*#__PURE__*/_jsxDEV(TableRow, {\n                  children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                    children: index + 1\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1726,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                    children: new Date(session.date).toLocaleString(\"vi-VN\", {\n                      weekday: \"long\",\n                      year: \"numeric\",\n                      month: \"numeric\",\n                      day: \"numeric\"\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1727,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                    children: session.start_period && session.end_period ? /*#__PURE__*/_jsxDEV(Box, {\n                      children: [/*#__PURE__*/_jsxDEV(Typography, {\n                        variant: \"body2\",\n                        children: [\"Ti\\u1EBFt \", session.start_period, \"-\", session.end_period]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1738,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                        variant: \"caption\",\n                        color: \"text.secondary\",\n                        children: (() => {\n                          // Hiển thị thời gian bắt đầu từ API\n                          const startTime = session.start_time ? new Date(session.start_time).toLocaleTimeString(\"vi-VN\", {\n                            hour: \"2-digit\",\n                            minute: \"2-digit\"\n                          }) : \"N/A\";\n\n                          // Tính thời gian kết thúc dự kiến dựa trên lịch học, không phải thời gian kết thúc thực tế\n                          // Mỗi tiết thường kéo dài 50 phút\n                          let endTimeDate;\n                          if (session.start_time) {\n                            // Tính thời gian kết thúc dự kiến dựa trên số tiết\n                            const tietsCount = session.end_period - session.start_period + 1;\n                            endTimeDate = new Date(session.start_time);\n                            endTimeDate.setMinutes(endTimeDate.getMinutes() + tietsCount * 50);\n                          }\n                          const endTime = endTimeDate ? endTimeDate.toLocaleTimeString(\"vi-VN\", {\n                            hour: \"2-digit\",\n                            minute: \"2-digit\"\n                          }) : \"N/A\";\n                          return `${startTime} - ${endTime}`;\n                        })()\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1741,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1737,\n                      columnNumber: 29\n                    }, this) : session.start_time ? (() => {\n                      // Hiển thị thời gian bắt đầu từ API\n                      const startTime = new Date(session.start_time).toLocaleTimeString(\"vi-VN\", {\n                        hour: \"2-digit\",\n                        minute: \"2-digit\"\n                      });\n\n                      // Mặc định coi mỗi buổi học kéo dài 4 tiết (200 phút) nếu không có thông tin tiết\n                      const endTimeDate = new Date(session.start_time);\n                      endTimeDate.setMinutes(endTimeDate.getMinutes() + 200);\n                      const endTime = endTimeDate.toLocaleTimeString(\"vi-VN\", {\n                        hour: \"2-digit\",\n                        minute: \"2-digit\"\n                      });\n                      return `${startTime} - ${endTime}`;\n                    })() : \"N/A\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1735,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                    children: session.room ? /*#__PURE__*/_jsxDEV(Tooltip, {\n                      title: \"Th\\xF4ng tin ph\\xF2ng h\\u1ECDc\",\n                      children: /*#__PURE__*/_jsxDEV(Typography, {\n                        variant: \"body2\",\n                        children: [session.room.room_number || \"Không xác định\", \" -\", \" \", ((_session$room$buildin = session.room.building_id) === null || _session$room$buildin === void 0 ? void 0 : _session$room$buildin.name) || \"Không xác định\", \" \", \"-\", \" \", ((_session$room$buildin2 = session.room.building_id) === null || _session$room$buildin2 === void 0 ? void 0 : (_session$room$buildin3 = _session$room$buildin2.campus_id) === null || _session$room$buildin3 === void 0 ? void 0 : _session$room$buildin3.name) || \"Không xác định\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1811,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1810,\n                      columnNumber: 29\n                    }, this) : /*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"body2\",\n                      color: \"text.secondary\",\n                      children: \"Kh\\xF4ng c\\xF3 ph\\xF2ng\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1821,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1808,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                    children: session.notes ? /*#__PURE__*/_jsxDEV(Tooltip, {\n                      title: session.notes,\n                      children: /*#__PURE__*/_jsxDEV(Typography, {\n                        variant: \"body2\",\n                        sx: {\n                          maxWidth: \"150px\",\n                          whiteSpace: \"nowrap\",\n                          overflow: \"hidden\",\n                          textOverflow: \"ellipsis\"\n                        },\n                        children: session.notes\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1829,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1828,\n                      columnNumber: 29\n                    }, this) : /*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"body2\",\n                      color: \"text.secondary\",\n                      children: \"-\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1842,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1826,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                    children: session.status === \"completed\" ? /*#__PURE__*/_jsxDEV(Chip, {\n                      label: \"Ho\\xE0n th\\xE0nh\",\n                      color: \"success\",\n                      size: \"small\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1849,\n                      columnNumber: 29\n                    }, this) : session.status === \"in_progress\" ? /*#__PURE__*/_jsxDEV(Chip, {\n                      label: \"\\u0110ang di\\u1EC5n ra\",\n                      color: \"primary\",\n                      size: \"small\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1855,\n                      columnNumber: 29\n                    }, this) : /*#__PURE__*/_jsxDEV(Chip, {\n                      label: \"Ch\\u01B0a b\\u1EAFt \\u0111\\u1EA7u\",\n                      color: \"default\",\n                      size: \"small\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1861,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1847,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                    children: /*#__PURE__*/_jsxDEV(Box, {\n                      sx: {\n                        display: \"flex\",\n                        gap: 1\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(Button, {\n                        variant: \"contained\",\n                        size: \"small\",\n                        color: \"primary\",\n                        onClick: () => handleStartSession(session._id),\n                        startIcon: session.status === \"completed\" ? /*#__PURE__*/_jsxDEV(CheckCircle, {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1877,\n                          columnNumber: 35\n                        }, this) : /*#__PURE__*/_jsxDEV(PlayArrow, {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1879,\n                          columnNumber: 35\n                        }, this),\n                        children: session.status === \"completed\" ? \"Xem\" : \"Bắt đầu\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1870,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n                        title: \"Ch\\u1EC9nh s\\u1EEDa th\\xF4ng tin\",\n                        children: /*#__PURE__*/_jsxDEV(IconButton, {\n                          size: \"small\",\n                          color: \"default\",\n                          onClick: () => {\n                            setSessionFormData({\n                              ...session,\n                              date: session.date.split(\"T\")[0]\n                            });\n                            // Tải danh sách phòng học\n                            fetchRooms();\n                            setOpenSessionDialog(true);\n                          },\n                          children: /*#__PURE__*/_jsxDEV(Edit, {}, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1901,\n                            columnNumber: 33\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1888,\n                          columnNumber: 31\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1887,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1869,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1868,\n                    columnNumber: 25\n                  }, this)]\n                }, session._id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1725,\n                  columnNumber: 23\n                }, this);\n              }) : /*#__PURE__*/_jsxDEV(TableRow, {\n                children: /*#__PURE__*/_jsxDEV(TableCell, {\n                  colSpan: 8,\n                  align: \"center\",\n                  children: \"Ch\\u01B0a c\\xF3 phi\\xEAn \\u0111i\\u1EC3m danh n\\xE0o\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1911,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1910,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1716,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1704,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1703,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1693,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1595,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: openSessionDialog,\n      onClose: handleCloseSessionDialog,\n      maxWidth: \"md\",\n      fullWidth: true,\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        children: sessionFormData._id ? \"Chỉnh sửa phiên điểm danh\" : \"Tạo phiên điểm danh mới\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1929,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            mt: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            fullWidth: true,\n            label: \"Ng\\xE0y\",\n            name: \"date\",\n            type: \"date\",\n            value: sessionFormData.date,\n            onChange: handleSessionFormChange,\n            sx: {\n              mb: 2\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1936,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            spacing: 2,\n            sx: {\n              mb: 2\n            },\n            children: [/*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 6,\n              md: 3,\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                fullWidth: true,\n                label: \"Ti\\u1EBFt b\\u1EAFt \\u0111\\u1EA7u\",\n                name: \"start_period\",\n                type: \"number\",\n                value: sessionFormData.start_period,\n                onChange: handleSessionFormChange,\n                InputProps: {\n                  inputProps: {\n                    min: 1,\n                    max: 15\n                  }\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1948,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1947,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 6,\n              md: 3,\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                fullWidth: true,\n                label: \"Ti\\u1EBFt k\\u1EBFt th\\xFAc\",\n                name: \"end_period\",\n                type: \"number\",\n                value: sessionFormData.end_period,\n                onChange: handleSessionFormChange,\n                InputProps: {\n                  inputProps: {\n                    min: sessionFormData.start_period || 1,\n                    max: 15\n                  }\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1959,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1958,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 6,\n              md: 3,\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                fullWidth: true,\n                label: \"Th\\u1EDDi gian b\\u1EAFt \\u0111\\u1EA7u\",\n                name: \"start_time\",\n                type: \"time\",\n                value: sessionFormData.start_time,\n                onChange: handleSessionFormChange,\n                InputLabelProps: {\n                  shrink: true\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1975,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1974,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 6,\n              md: 3,\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                fullWidth: true,\n                label: \"Th\\u1EDDi gian k\\u1EBFt th\\xFAc\",\n                name: \"end_time\",\n                type: \"time\",\n                value: sessionFormData.end_time,\n                onChange: handleSessionFormChange,\n                InputLabelProps: {\n                  shrink: true\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1986,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1985,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1946,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            spacing: 2,\n            sx: {\n              mb: 2\n            },\n            children: /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              children: /*#__PURE__*/_jsxDEV(FormControl, {\n                fullWidth: true,\n                children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                  children: \"Ph\\xF2ng h\\u1ECDc\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2001,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Select, {\n                  name: \"room\",\n                  value: sessionFormData.room || \"\",\n                  onChange: handleSessionFormChange,\n                  label: \"Ph\\xF2ng h\\u1ECDc\",\n                  children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: \"\",\n                    children: \"-- Ch\\u1ECDn ph\\xF2ng h\\u1ECDc --\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2008,\n                    columnNumber: 21\n                  }, this), rooms && rooms.map(room => {\n                    var _room$building_id, _room$building_id2, _room$building_id2$ca;\n                    return /*#__PURE__*/_jsxDEV(MenuItem, {\n                      value: room._id,\n                      children: [room.room_number || \"Không xác định\", \" -\", \" \", ((_room$building_id = room.building_id) === null || _room$building_id === void 0 ? void 0 : _room$building_id.name) || \"Không xác định\", \" -\", \" \", ((_room$building_id2 = room.building_id) === null || _room$building_id2 === void 0 ? void 0 : (_room$building_id2$ca = _room$building_id2.campus_id) === null || _room$building_id2$ca === void 0 ? void 0 : _room$building_id2$ca.name) || \"Không xác định\"]\n                    }, room._id, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2011,\n                      columnNumber: 25\n                    }, this);\n                  })]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2002,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(FormHelperText, {\n                  children: \"Ch\\u1ECDn ph\\xF2ng h\\u1ECDc v\\u1EDBi th\\xF4ng tin \\u0111\\u1EA7y \\u0111\\u1EE7\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2019,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2000,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1999,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1998,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            fullWidth: true,\n            label: \"Ghi ch\\xFA\",\n            name: \"notes\",\n            multiline: true,\n            rows: 3,\n            placeholder: \"N\\u1ED9i dung bu\\u1ED5i h\\u1ECDc, y\\xEAu c\\u1EA7u \\u0111\\u1EB7c bi\\u1EC7t, v.v...\",\n            value: sessionFormData.notes,\n            onChange: handleSessionFormChange,\n            sx: {\n              mb: 2\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2026,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1935,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1934,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleCloseSessionDialog,\n          children: \"H\\u1EE7y\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2040,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          onClick: sessionFormData._id ? handleUpdateSession : handleCreateSession,\n          children: sessionFormData._id ? \"Lưu thay đổi\" : \"Tạo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2041,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2039,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1923,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: openAddStudentDialog,\n      onClose: handleCloseAddStudentDialog,\n      maxWidth: \"md\",\n      fullWidth: true,\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        children: \"Th\\xEAm sinh vi\\xEAn v\\xE0o l\\u1EDBp\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2060,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            mb: 3,\n            mt: 1\n          },\n          children: [/*#__PURE__*/_jsxDEV(FormControl, {\n            fullWidth: true,\n            sx: {\n              mb: 2\n            },\n            children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n              children: \"Ch\\u1ECDn l\\u1EDBp ch\\xEDnh\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2064,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Select, {\n              value: selectedMainClass,\n              onChange: handleMainClassChange,\n              label: \"Ch\\u1ECDn l\\u1EDBp ch\\xEDnh\",\n              disabled: isLoadingStudents,\n              children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n                value: \"\",\n                children: \"-- Ch\\u1ECDn l\\u1EDBp ch\\xEDnh --\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2071,\n                columnNumber: 17\n              }, this), mainClasses.map(mainClass => /*#__PURE__*/_jsxDEV(MenuItem, {\n                value: mainClass._id,\n                children: [mainClass.name, \" (\", mainClass.class_code, \")\"]\n              }, mainClass._id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2073,\n                columnNumber: 19\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2065,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2063,\n            columnNumber: 13\n          }, this), selectedMainClass && /*#__PURE__*/_jsxDEV(TextField, {\n            fullWidth: true,\n            label: \"T\\xECm ki\\u1EBFm sinh vi\\xEAn\",\n            value: searchStudent,\n            onChange: e => setSearchStudent(e.target.value),\n            disabled: isLoadingStudents\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2081,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2062,\n          columnNumber: 11\n        }, this), isLoadingStudents ? /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: \"flex\",\n            justifyContent: \"center\",\n            my: 3\n          },\n          children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2093,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2092,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            maxHeight: 400,\n            overflow: \"auto\",\n            mb: 2\n          },\n          children: !selectedMainClass ? /*#__PURE__*/_jsxDEV(Alert, {\n            severity: \"info\",\n            children: \"Vui l\\xF2ng ch\\u1ECDn l\\u1EDBp ch\\xEDnh \\u0111\\u1EC3 xem danh s\\xE1ch sinh vi\\xEAn\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2098,\n            columnNumber: 17\n          }, this) : availableStudents.length === 0 ? /*#__PURE__*/_jsxDEV(Alert, {\n            severity: \"warning\",\n            children: \"Kh\\xF4ng t\\xECm th\\u1EA5y sinh vi\\xEAn c\\xF3 th\\u1EC3 th\\xEAm v\\xE0o l\\u1EDBp\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2102,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(List, {\n            children: availableStudents.filter(student => {\n              var _student$full_name, _student$school_info5, _student$school_info6, _student$email;\n              return ((_student$full_name = student.full_name) === null || _student$full_name === void 0 ? void 0 : _student$full_name.toLowerCase().includes(searchStudent.toLowerCase())) || ((_student$school_info5 = student.school_info) === null || _student$school_info5 === void 0 ? void 0 : (_student$school_info6 = _student$school_info5.student_id) === null || _student$school_info6 === void 0 ? void 0 : _student$school_info6.toLowerCase().includes(searchStudent.toLowerCase())) || ((_student$email = student.email) === null || _student$email === void 0 ? void 0 : _student$email.toLowerCase().includes(searchStudent.toLowerCase()));\n            }).map(student => {\n              var _student$school_info7;\n              return /*#__PURE__*/_jsxDEV(React.Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(ListItem, {\n                  children: [/*#__PURE__*/_jsxDEV(ListItemText, {\n                    primary: student.full_name || student.name,\n                    secondary: /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: [((_student$school_info7 = student.school_info) === null || _student$school_info7 === void 0 ? void 0 : _student$school_info7.student_id) || \"Chưa có mã SV\", \" \", \"- \", student.email]\n                    }, void 0, true)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2123,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(ListItemSecondaryAction, {\n                    children: /*#__PURE__*/_jsxDEV(Checkbox, {\n                      edge: \"end\",\n                      checked: selectedStudents.includes(student._id),\n                      onChange: () => handleSelectStudent(student._id)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2134,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2133,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2122,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2141,\n                  columnNumber: 25\n                }, this)]\n              }, student._id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2121,\n                columnNumber: 23\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2106,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2096,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            textAlign: \"right\"\n          },\n          children: /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            children: [\"\\u0110\\xE3 ch\\u1ECDn: \", selectedStudents.length, \" sinh vi\\xEAn\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2150,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2149,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2061,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleCloseAddStudentDialog,\n          children: \"H\\u1EE7y\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2156,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          onClick: handleAddStudents,\n          disabled: selectedStudents.length === 0 || isLoadingStudents,\n          children: \"Th\\xEAm v\\xE0o l\\u1EDBp\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2157,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2155,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2054,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: openEditClassDialog,\n      onClose: handleCloseEditClassDialog,\n      maxWidth: \"md\",\n      fullWidth: true,\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        sx: {\n          bgcolor: \"primary.main\",\n          color: \"white\",\n          fontWeight: \"bold\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(Edit, {\n          sx: {\n            verticalAlign: \"middle\",\n            mr: 1\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2178,\n          columnNumber: 11\n        }, this), \"Ch\\u1EC9nh s\\u1EEDa th\\xF4ng tin l\\u1EDBp h\\u1ECDc\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2175,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        dividers: true,\n        children: editClassData && /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          spacing: 2,\n          sx: {\n            mt: 1\n          },\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            sm: 6,\n            children: /*#__PURE__*/_jsxDEV(TextField, {\n              fullWidth: true,\n              label: \"T\\xEAn l\\u1EDBp\",\n              name: \"class_name\",\n              value: editClassData.class_name,\n              onChange: handleEditClassChange,\n              required: true,\n              variant: \"outlined\",\n              placeholder: \"VD: L\\u1EADp tr\\xECnh web - Nh\\xF3m 1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2185,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2184,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            sm: 6,\n            children: /*#__PURE__*/_jsxDEV(TextField, {\n              fullWidth: true,\n              label: \"M\\xE3 l\\u1EDBp\",\n              name: \"class_code\",\n              value: editClassData.class_code,\n              onChange: handleEditClassChange,\n              required: true,\n              variant: \"outlined\",\n              placeholder: \"VD: WEB101-G1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2197,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2196,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            sm: 6,\n            children: /*#__PURE__*/_jsxDEV(FormControl, {\n              fullWidth: true,\n              required: true,\n              children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                children: \"M\\xF4n h\\u1ECDc\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2210,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Select, {\n                label: \"M\\xF4n h\\u1ECDc\",\n                name: \"subject_id\",\n                value: editClassData.subject_id,\n                onChange: handleEditClassChange,\n                children: subjects.map(subject => /*#__PURE__*/_jsxDEV(MenuItem, {\n                  value: subject._id,\n                  children: [subject.name, \" (\", subject.code, \")\"]\n                }, subject._id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2218,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2211,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2209,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2208,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            sm: 6,\n            children: /*#__PURE__*/_jsxDEV(FormControl, {\n              fullWidth: true,\n              required: true,\n              children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                children: \"H\\u1ECDc k\\u1EF3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2227,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Select, {\n                label: \"H\\u1ECDc k\\u1EF3\",\n                name: \"semester_id\",\n                value: editClassData.semester_id,\n                onChange: handleEditClassChange,\n                children: semesters.map(sem => /*#__PURE__*/_jsxDEV(MenuItem, {\n                  value: sem._id,\n                  children: [sem.name, \" (\", sem.academic_year, \")\"]\n                }, sem._id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2235,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2228,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2226,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2225,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            sm: 6,\n            children: /*#__PURE__*/_jsxDEV(FormControl, {\n              fullWidth: true,\n              children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                children: \"L\\u1EDBp ch\\xEDnh\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2244,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Select, {\n                label: \"L\\u1EDBp ch\\xEDnh\",\n                name: \"main_class_id\",\n                value: editClassData.main_class_id,\n                onChange: handleEditClassChange,\n                children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n                  value: \"\",\n                  children: \"Kh\\xF4ng ch\\u1ECDn l\\u1EDBp ch\\xEDnh\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2251,\n                  columnNumber: 21\n                }, this), mainClasses.map(mainClass => /*#__PURE__*/_jsxDEV(MenuItem, {\n                  value: mainClass._id,\n                  children: [mainClass.name, \" (\", mainClass.class_code, \")\"]\n                }, mainClass._id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2253,\n                  columnNumber: 23\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2245,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(FormHelperText, {\n                children: \"C\\xF3 th\\u1EC3 \\u0111\\u1EC3 tr\\u1ED1ng n\\u1EBFu l\\u1EDBp d\\xE0nh cho nhi\\u1EC1u l\\u1EDBp ch\\xEDnh\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2258,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2243,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2242,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            sm: 6,\n            children: /*#__PURE__*/_jsxDEV(TextField, {\n              fullWidth: true,\n              type: \"number\",\n              label: \"T\\u1ED5ng s\\u1ED1 bu\\u1ED5i h\\u1ECDc\",\n              name: \"total_sessions\",\n              value: editClassData.total_sessions,\n              onChange: handleTotalSessionsChange,\n              required: true,\n              variant: \"outlined\",\n              InputProps: {\n                inputProps: {\n                  min: 1\n                }\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2264,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2263,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            sm: 6,\n            children: /*#__PURE__*/_jsxDEV(TextField, {\n              fullWidth: true,\n              type: \"date\",\n              label: \"Ng\\xE0y b\\u1EAFt \\u0111\\u1EA7u kh\\xF3a h\\u1ECDc\",\n              name: \"course_start_date\",\n              value: editClassData.course_start_date,\n              onChange: handleStartDateChange,\n              required: true,\n              variant: \"outlined\",\n              InputLabelProps: {\n                shrink: true\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2277,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2276,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            sm: 6,\n            children: /*#__PURE__*/_jsxDEV(TextField, {\n              fullWidth: true,\n              type: \"date\",\n              label: \"Ng\\xE0y k\\u1EBFt th\\xFAc kh\\xF3a h\\u1ECDc\",\n              name: \"course_end_date\",\n              value: editClassData.course_end_date,\n              onChange: handleEditClassChange,\n              variant: \"outlined\",\n              InputLabelProps: {\n                shrink: true\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2290,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2289,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"subtitle1\",\n              gutterBottom: true,\n              sx: {\n                fontWeight: \"bold\",\n                mt: 2\n              },\n              children: [/*#__PURE__*/_jsxDEV(Room, {\n                sx: {\n                  verticalAlign: \"middle\",\n                  mr: 1\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2309,\n                columnNumber: 19\n              }, this), \"Th\\xF4ng tin ph\\xF2ng h\\u1ECDc\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2304,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Divider, {\n              sx: {\n                mb: 2\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2312,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2303,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            sm: 4,\n            children: /*#__PURE__*/_jsxDEV(FormControl, {\n              fullWidth: true,\n              children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                children: \"C\\u01A1 s\\u1EDF\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2316,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Select, {\n                label: \"C\\u01A1 s\\u1EDF\",\n                value: selectedCampus,\n                onChange: handleCampusChange,\n                children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n                  value: \"\",\n                  children: \"Ch\\u1ECDn c\\u01A1 s\\u1EDF\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2322,\n                  columnNumber: 21\n                }, this), campuses.map(campus => /*#__PURE__*/_jsxDEV(MenuItem, {\n                  value: campus._id,\n                  children: campus.name\n                }, campus._id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2324,\n                  columnNumber: 23\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2317,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2315,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2314,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            sm: 4,\n            children: /*#__PURE__*/_jsxDEV(FormControl, {\n              fullWidth: true,\n              disabled: !selectedCampus,\n              children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                children: \"T\\xF2a nh\\xE0\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2333,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Select, {\n                label: \"T\\xF2a nh\\xE0\",\n                value: selectedBuilding,\n                onChange: handleBuildingChange,\n                children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n                  value: \"\",\n                  children: \"Ch\\u1ECDn t\\xF2a nh\\xE0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2339,\n                  columnNumber: 21\n                }, this), buildings.map(building => /*#__PURE__*/_jsxDEV(MenuItem, {\n                  value: building._id,\n                  children: building.name\n                }, building._id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2341,\n                  columnNumber: 23\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2334,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2332,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2331,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            sm: 4,\n            children: /*#__PURE__*/_jsxDEV(FormControl, {\n              fullWidth: true,\n              disabled: !selectedBuilding,\n              children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                children: \"Ph\\xF2ng h\\u1ECDc\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2350,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Select, {\n                label: \"Ph\\xF2ng h\\u1ECDc\",\n                name: \"room_id\",\n                value: editClassData.room_id,\n                onChange: handleEditClassChange,\n                children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n                  value: \"\",\n                  children: \"Ch\\u1ECDn ph\\xF2ng h\\u1ECDc\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2357,\n                  columnNumber: 21\n                }, this), rooms.map(room => /*#__PURE__*/_jsxDEV(MenuItem, {\n                  value: room._id,\n                  children: [room.room_number, \" (S\\u1EE9c ch\\u1EE9a: \", room.capacity, \")\"]\n                }, room._id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2359,\n                  columnNumber: 23\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2351,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2349,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2348,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"subtitle1\",\n              gutterBottom: true,\n              sx: {\n                fontWeight: \"bold\",\n                mt: 2\n              },\n              children: [/*#__PURE__*/_jsxDEV(Event, {\n                sx: {\n                  verticalAlign: \"middle\",\n                  mr: 1\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2374,\n                columnNumber: 19\n              }, this), \"L\\u1ECBch h\\u1ECDc\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2369,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Divider, {\n              sx: {\n                mb: 2\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2377,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2368,\n            columnNumber: 15\n          }, this), scheduleDays.map((day, index) => /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            spacing: 2,\n            sx: {\n              ml: 0,\n              mt: 1,\n              width: \"100%\",\n              pb: 2,\n              borderBottom: index < scheduleDays.length - 1 ? \"1px dashed #ddd\" : \"none\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              sm: 3,\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                fullWidth: true,\n                label: \"Th\\u1EE9 trong tu\\u1EA7n\",\n                value: getDayOfWeekName(day.day_of_week),\n                InputProps: {\n                  readOnly: true\n                },\n                variant: \"outlined\",\n                helperText: \"\\u0110\\u01B0\\u1EE3c x\\xE1c \\u0111\\u1ECBnh t\\u1EEB ng\\xE0y b\\u1EAFt \\u0111\\u1EA7u\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2397,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2396,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 6,\n              sm: 2,\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                fullWidth: true,\n                label: \"Ti\\u1EBFt b\\u1EAFt \\u0111\\u1EA7u\",\n                type: \"number\",\n                value: day.start_period,\n                onChange: e => handleScheduleChange(index, \"start_period\", parseInt(e.target.value)),\n                InputProps: {\n                  inputProps: {\n                    min: 1,\n                    max: 15\n                  }\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2409,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2408,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 6,\n              sm: 2,\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                fullWidth: true,\n                label: \"Ti\\u1EBFt k\\u1EBFt th\\xFAc\",\n                type: \"number\",\n                value: day.end_period,\n                onChange: e => handleScheduleChange(index, \"end_period\", parseInt(e.target.value)),\n                InputProps: {\n                  inputProps: {\n                    min: day.start_period,\n                    max: 15\n                  }\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2425,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2424,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 6,\n              sm: 2,\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                fullWidth: true,\n                label: \"Gi\\u1EDD b\\u1EAFt \\u0111\\u1EA7u\",\n                type: \"time\",\n                value: day.start_time,\n                onChange: e => handleScheduleChange(index, \"start_time\", e.target.value),\n                InputLabelProps: {\n                  shrink: true\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2443,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2442,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 6,\n              sm: 2,\n              children: /*#__PURE__*/_jsxDEV(TextField, {\n                fullWidth: true,\n                label: \"Gi\\u1EDD k\\u1EBFt th\\xFAc\",\n                type: \"time\",\n                value: day.end_time,\n                onChange: e => handleScheduleChange(index, \"end_time\", e.target.value),\n                InputLabelProps: {\n                  shrink: true\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2459,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2458,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              sm: 1,\n              sx: {\n                display: \"flex\",\n                alignItems: \"center\"\n              },\n              children: /*#__PURE__*/_jsxDEV(IconButton, {\n                color: \"error\",\n                onClick: () => removeScheduleDay(index),\n                disabled: scheduleDays.length <= 1,\n                children: /*#__PURE__*/_jsxDEV(Chip, {\n                  label: \"X\\xF3a\",\n                  color: \"error\",\n                  size: \"small\",\n                  variant: \"outlined\",\n                  disabled: scheduleDays.length <= 1\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2481,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2476,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2470,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              sm: 4,\n              children: /*#__PURE__*/_jsxDEV(FormControl, {\n                fullWidth: true,\n                children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                  children: \"Ph\\xF2ng h\\u1ECDc ri\\xEAng\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2493,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Select, {\n                  label: \"Ph\\xF2ng h\\u1ECDc ri\\xEAng\",\n                  value: day.room_id || \"\",\n                  onChange: e => handleScheduleChange(index, \"room_id\", e.target.value),\n                  children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: \"\",\n                    children: \"D\\xF9ng ph\\xF2ng m\\u1EB7c \\u0111\\u1ECBnh\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2501,\n                    columnNumber: 25\n                  }, this), rooms.map(room => /*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: room._id,\n                    children: [room.room_number, \" (S\\u1EE9c ch\\u1EE9a: \", room.capacity, \")\"]\n                  }, room._id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2503,\n                    columnNumber: 27\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2494,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(FormHelperText, {\n                  children: \"Ph\\xF2ng h\\u1ECDc ri\\xEAng cho bu\\u1ED5i n\\xE0y, \\u0111\\u1EC3 tr\\u1ED1ng s\\u1EBD d\\xF9ng ph\\xF2ng m\\u1EB7c \\u0111\\u1ECBnh c\\u1EE7a l\\u1EDBp\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2508,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2492,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2491,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              sm: 4,\n              children: /*#__PURE__*/_jsxDEV(FormControl, {\n                fullWidth: true,\n                children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                  children: \"Lo\\u1EA1i l\\u1ECBch\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2517,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Select, {\n                  label: \"Lo\\u1EA1i l\\u1ECBch\",\n                  value: day.is_recurring,\n                  onChange: e => handleScheduleChange(index, \"is_recurring\", e.target.value),\n                  children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: true,\n                    children: \"\\u0110\\u1ECBnh k\\u1EF3 h\\xE0ng tu\\u1EA7n\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2529,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: false,\n                    children: \"C\\xE1c ng\\xE0y c\\u1EE5 th\\u1EC3\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2530,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2518,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2516,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2515,\n              columnNumber: 19\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2381,\n            columnNumber: 17\n          }, this)), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outlined\",\n              color: \"primary\",\n              startIcon: /*#__PURE__*/_jsxDEV(Add, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2541,\n                columnNumber: 30\n              }, this),\n              onClick: addScheduleDay,\n              sx: {\n                mt: 1\n              },\n              children: \"Th\\xEAm l\\u1ECBch h\\u1ECDc\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2538,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2537,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2183,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2181,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        sx: {\n          px: 3,\n          pb: 2\n        },\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleCloseEditClassDialog,\n          disabled: isSubmittingEdit,\n          children: \"H\\u1EE7y\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2552,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleUpdateClass,\n          variant: \"contained\",\n          color: \"primary\",\n          disabled: isSubmittingEdit,\n          startIcon: isSubmittingEdit ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2564,\n            columnNumber: 34\n          }, this) : /*#__PURE__*/_jsxDEV(Edit, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2564,\n            columnNumber: 67\n          }, this),\n          children: isSubmittingEdit ? \"Đang cập nhật...\" : \"Cập nhật lớp học\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2558,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2551,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2169,\n      columnNumber: 7\n    }, this), editMode && renderConflictWarnings(), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        mt: 3,\n        display: \"flex\",\n        justifyContent: \"flex-end\",\n        gap: 2\n      },\n      children: editMode ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outlined\",\n          onClick: () => {\n            var _classData$schedule;\n            setEditMode(false);\n            setEditClassData({\n              ...classData\n            });\n            setScheduleDays(((_classData$schedule = classData.schedule) === null || _classData$schedule === void 0 ? void 0 : _classData$schedule.map(item => ({\n              ...item\n            }))) || []);\n            setConflictWarnings([]); // Xóa cảnh báo khi hủy\n          },\n          disabled: isUpdating || checkingConflicts,\n          children: \"H\\u1EE7y\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2579,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          onClick: handleUpdateClass,\n          disabled: isUpdating || checkingConflicts,\n          startIcon: isUpdating || checkingConflicts ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2599,\n            columnNumber: 19\n          }, this) : null,\n          children: isUpdating ? \"Đang cập nhật...\" : checkingConflicts ? \"Đang kiểm tra...\" : \"Lưu thay đổi\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2593,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        onClick: () => setEditMode(true),\n        disabled: isLoading,\n        children: \"Ch\\u1EC9nh s\\u1EEDa l\\u1EDBp h\\u1ECDc\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2611,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2576,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1465,\n    columnNumber: 5\n  }, this);\n};\n_s(TeacherClassDetailPage, \"/ghI5BldIN1X09sFPBUe0NmmpEw=\", false, function () {\n  return [useParams, useNavigate, useSnackbar, useSelector];\n});\n_c2 = TeacherClassDetailPage;\nexport default TeacherClassDetailPage;\nvar _c, _c2;\n$RefreshReg$(_c, \"TabPanel\");\n$RefreshReg$(_c2, \"TeacherClassDetailPage\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useParams","useNavigate","useSelector","useSnackbar","axios","Box","Typography","Card","CardContent","Grid","Paper","Button","Tabs","Tab","CircularProgress","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Chip","IconButton","Dialog","DialogTitle","DialogContent","DialogActions","TextField","FormControl","InputLabel","Select","MenuItem","List","ListItem","ListItemText","ListItemSecondaryAction","Divider","Alert","Tooltip","Checkbox","FormHelperText","AlertTitle","ListItemIcon","Person","Room","PersonAdd","Delete","Add","Edit","PlayArrow","Stop","CheckCircle","Warning","Info","CalendarToday","AccessTime","Download","School","Settings","Event","getTeachingClassById","updateTeachingClass","checkScheduleConflicts","jsxDEV","_jsxDEV","Fragment","_Fragment","API_URL","process","env","REACT_APP_API_URL","a11yProps","index","id","TabPanel","props","children","value","other","role","hidden","sx","p","fileName","_jsxFileName","lineNumber","columnNumber","_c","TeacherClassDetailPage","_s","_classInfo$subject_id2","_classInfo$subject_id3","_classInfo$semester_i2","classId","navigate","enqueueSnackbar","token","state","auth","classInfo","setClassInfo","students","setStudents","attendanceSessions","setAttendanceSessions","attendanceStats","setAttendanceStats","total","pending","completed","isLoading","setIsLoading","tabValue","setTabValue","openSessionDialog","setOpenSessionDialog","sessionFormData","setSessionFormData","title","date","Date","toISOString","split","start_time","end_time","room","start_period","end_period","notes","openAddStudentDialog","setOpenAddStudentDialog","availableStudents","setAvailableStudents","selectedStudents","setSelectedStudents","searchStudent","setSearchStudent","mainClasses","setMainClasses","selectedMainClass","setSelectedMainClass","isLoadingStudents","setIsLoadingStudents","openEditClassDialog","setOpenEditClassDialog","editClassData","setEditClassData","isSubmittingEdit","setIsSubmittingEdit","subjects","setSubjects","semesters","setSemesters","rooms","setRooms","campuses","setCampuses","buildings","setBuildings","selectedCampus","setSelectedCampus","selectedBuilding","setSelectedBuilding","scheduleDays","setScheduleDays","conflictWarnings","setConflictWarnings","checkingConflicts","setCheckingConflicts","fetchRooms","buildingId","url","response","get","headers","Authorization","data","success","Array","isArray","console","error","variant","fetchClassData","_sessionsResponse$dat","_sessionsResponse$dat2","classResponse","Accept","sessionsResponse","stats","length","forEach","session","status","studentsResponse","studentsWithBasicInfo","detailedStudents","Promise","all","map","student","studentDetailResponse","_id","detailedInfo","hasFaceData","faceFeatures","descriptors","has_face_data","_error$response$data","message","handleChangeTab","event","newValue","handleOpenSessionDialog","handleCloseSessionDialog","handleSessionFormChange","e","name","target","prev","handleCreateSession","sessionData","teaching_class_id","parseInt","post","_error$response","_error$response$data2","handleUpdateSession","put","_error$response2","_error$response2$data","handleStartSession","sessionId","find","s","handleOpenAddStudentDialog","_mainClassResponse$da","mainClassResponse","handleMainClassChange","mainClassId","_studentsResponse$dat","currentStudentIds","filteredStudents","filter","includes","handleCloseAddStudentDialog","handleSelectStudent","studentId","handleAddStudents","student_ids","_error$response$data3","handleRemoveStudent","window","confirm","delete","handleExportStudentList","studentsData","_student$school_info","STT","school_info","student_id","full_name","Email","email","header","csvContent","join","row","encodedUri","encodeURI","link","document","createElement","setAttribute","class_name","body","appendChild","click","removeChild","filteredAvailableStudents","_student$school_info2","_student$school_info3","toLowerCase","fetchReferenceDataForEdit","subjectsRes","semestersRes","mainClassesRes","campusesRes","roomDetails","building_id","_room$building_id$cam","_room$building_id$cam2","campus_id","buildingsRes","roomsRes","fetchBuildings","campusId","handleOpenEditClassDialog","_classInfo$subject_id","_classInfo$main_class","_classInfo$semester_i","_classInfo$room","class_code","subject_id","main_class_id","semester_id","total_sessions","room_id","course_start_date","course_end_date","auto_generate_sessions","schedule","_classInfo$room2","dayOfWeek","getDayOfWeekFromDate","day_of_week","is_recurring","specific_dates","excluded_dates","handleCloseEditClassDialog","handleEditClassChange","handleCampusChange","handleBuildingChange","checkConflicts","scheduleToCheck","_user","user","some","day","teacher_id","class_id","has_conflicts","conflicts","handleScheduleChange","field","updatedSchedule","calculateEndDate","setTimeout","undefined","handleUpdateClass","getDayOfWeekName","classData","c","updateClassData","setIsUpdating","updateData","createdAt","updatedAt","setEditMode","_error$response3","_error$response3$data","dateString","getDay","days","addScheduleDay","startDate","baseDayOfWeek","existingDays","nextDay","i","removeScheduleDay","_","totalSessions","start","isNaN","getTime","sessionsPerWeek","weeksNeeded","Math","ceil","daysOfWeek","sort","a","b","currentDate","sessionCount","week","dayIndex","targetDayOfWeek","setDate","getDate","handleStartDateChange","handleTotalSessionsChange","display","justifyContent","alignItems","height","py","textAlign","color","gutterBottom","mb","onClick","padding","code","startIcon","container","spacing","item","xs","md","mt","mr","fontSize","toLocaleDateString","size","width","borderBottom","borderColor","onChange","label","component","_student$school_info4","colSpan","align","_session$room$buildin","_session$room$buildin2","_session$room$buildin3","toLocaleString","weekday","year","month","startTime","toLocaleTimeString","hour","minute","endTimeDate","tietsCount","setMinutes","getMinutes","endTime","room_number","maxWidth","whiteSpace","overflow","textOverflow","gap","open","onClose","fullWidth","type","InputProps","inputProps","min","max","InputLabelProps","shrink","_room$building_id","_room$building_id2","_room$building_id2$ca","multiline","rows","placeholder","disabled","mainClass","my","maxHeight","severity","_student$full_name","_student$school_info5","_student$school_info6","_student$email","_student$school_info7","primary","secondary","edge","checked","bgcolor","fontWeight","verticalAlign","dividers","sm","required","subject","sem","academic_year","campus","building","capacity","ml","pb","readOnly","helperText","px","editMode","renderConflictWarnings","_classData$schedule","isUpdating","_c2","$RefreshReg$"],"sources":["C:/Users/kasiz/Documents/Studying/FaceReg/frontend/src/pages/teacher/ClassDetailPage.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\nimport { useSnackbar } from \"notistack\";\nimport axios from \"axios\";\nimport {\n  Box,\n  Typography,\n  Card,\n  CardContent,\n  Grid,\n  Paper,\n  Button,\n  Tabs,\n  Tab,\n  CircularProgress,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Chip,\n  IconButton,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  TextField,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  List,\n  ListItem,\n  ListItemText,\n  ListItemSecondaryAction,\n  Divider,\n  Alert,\n  Tooltip,\n  Checkbox,\n  FormHelperText,\n  AlertTitle,\n  ListItemIcon,\n  Person,\n  Room,\n} from \"@mui/material\";\nimport {\n  PersonAdd,\n  Delete,\n  Add,\n  Edit,\n  PlayArrow,\n  Stop,\n  CheckCircle,\n  Warning,\n  Info,\n  CalendarToday,\n  AccessTime,\n  Download,\n  School,\n  Settings,\n  Event,\n} from \"@mui/icons-material\";\nimport {\n  getTeachingClassById,\n  updateTeachingClass,\n  checkScheduleConflicts,\n} from \"../../services/api\";\n\nconst API_URL = process.env.REACT_APP_API_URL || \"http://localhost:5000/api\";\n\nfunction a11yProps(index) {\n  return {\n    id: `class-tab-${index}`,\n    \"aria-controls\": `class-tabpanel-${index}`,\n  };\n}\n\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`class-tabpanel-${index}`}\n      aria-labelledby={`class-tab-${index}`}\n      {...other}\n    >\n      {value === index && <Box sx={{ p: 3 }}>{children}</Box>}\n    </div>\n  );\n}\n\nconst TeacherClassDetailPage = () => {\n  const { classId } = useParams();\n  const id = classId; // Đảm bảo sử dụng đúng tên param\n  const navigate = useNavigate();\n  const { enqueueSnackbar } = useSnackbar();\n  const { token } = useSelector((state) => state.auth);\n\n  // State cho dữ liệu\n  const [classInfo, setClassInfo] = useState(null);\n  const [students, setStudents] = useState([]);\n  const [attendanceSessions, setAttendanceSessions] = useState([]);\n  const [attendanceStats, setAttendanceStats] = useState({\n    total: 0,\n    pending: 0,\n    completed: 0,\n  });\n  const [isLoading, setIsLoading] = useState(true);\n\n  // State cho UI\n  const [tabValue, setTabValue] = useState(0);\n  const [openSessionDialog, setOpenSessionDialog] = useState(false);\n  const [sessionFormData, setSessionFormData] = useState({\n    title: \"\",\n    date: new Date().toISOString().split(\"T\")[0],\n    start_time: \"07:00\",\n    end_time: \"08:40\",\n    room: \"\",\n    start_period: 1,\n    end_period: 2,\n    notes: \"\",\n  });\n\n  // State cho thêm sinh viên\n  const [openAddStudentDialog, setOpenAddStudentDialog] = useState(false);\n  const [availableStudents, setAvailableStudents] = useState([]);\n  const [selectedStudents, setSelectedStudents] = useState([]);\n  const [searchStudent, setSearchStudent] = useState(\"\");\n  const [mainClasses, setMainClasses] = useState([]);\n  const [selectedMainClass, setSelectedMainClass] = useState(\"\");\n  const [isLoadingStudents, setIsLoadingStudents] = useState(false);\n\n  // State cho chỉnh sửa thông tin lớp học\n  const [openEditClassDialog, setOpenEditClassDialog] = useState(false);\n  const [editClassData, setEditClassData] = useState(null);\n  const [isSubmittingEdit, setIsSubmittingEdit] = useState(false);\n  const [subjects, setSubjects] = useState([]);\n  const [semesters, setSemesters] = useState([]);\n\n  // Thêm state để lưu danh sách phòng học\n  const [rooms, setRooms] = useState([]);\n  const [campuses, setCampuses] = useState([]);\n  const [buildings, setBuildings] = useState([]);\n  const [selectedCampus, setSelectedCampus] = useState(\"\");\n  const [selectedBuilding, setSelectedBuilding] = useState(\"\");\n\n  // Thêm state để quản lý lịch học\n  const [scheduleDays, setScheduleDays] = useState([]);\n\n  // Thêm state để lưu cảnh báo xung đột lịch\n  const [conflictWarnings, setConflictWarnings] = useState([]);\n  const [checkingConflicts, setCheckingConflicts] = useState(false);\n\n  // Thêm hàm fetch danh sách phòng học\n  const fetchRooms = async (buildingId) => {\n    try {\n      let url = `${API_URL}/facilities/rooms`;\n\n      // Nếu có buildingId, tải phòng theo tòa nhà\n      if (buildingId) {\n        url = `${API_URL}/facilities/rooms/building/${buildingId}`;\n      } else {\n        // Nếu không có buildingId, tải tất cả phòng\n        url = `${API_URL}/facilities/rooms?limit=1000`;\n      }\n\n      const response = await axios.get(url, {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n\n      // console.log(\"Dữ liệu phòng học từ API:\", response.data);\n\n      if (response.data.success && Array.isArray(response.data.data)) {\n        // Lưu trữ dữ liệu phòng học và ghi log để kiểm tra\n        setRooms(response.data.data);\n        // console.log(\"Đã cập nhật state rooms:\", response.data.data);\n      } else {\n        setRooms([]);\n        console.error(\n          \"API không trả về dữ liệu phòng học hợp lệ:\",\n          response.data\n        );\n        enqueueSnackbar(\n          \"Không thể tải danh sách phòng học (dữ liệu không hợp lệ)\",\n          { variant: \"warning\" }\n        );\n      }\n    } catch (error) {\n      console.error(\"Lỗi khi tải danh sách phòng học:\", error);\n      enqueueSnackbar(\"Không thể tải danh sách phòng học\", {\n        variant: \"error\",\n      });\n      setRooms([]);\n    }\n  };\n\n  // Load dữ liệu ban đầu\n  const fetchClassData = useCallback(async () => {\n    try {\n      setIsLoading(true);\n\n      // Kiểm tra id có tồn tại không\n      if (!id) {\n        enqueueSnackbar(\"ID lớp học không hợp lệ\", { variant: \"error\" });\n        navigate(\"/teacher/classes\");\n        return;\n      }\n\n      // Lấy thông tin lớp học\n      const classResponse = await axios.get(\n        `${API_URL}/classes/teaching/${id}`,\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n            Accept: \"application/json\",\n          },\n        }\n      );\n\n      // Log dữ liệu để xem cấu trúc\n      // console.log(\"Dữ liệu lớp học nhận về:\", classResponse.data);\n\n      // Kiểm tra nếu không có dữ liệu trả về\n      if (!classResponse.data.success || !classResponse.data.data) {\n        enqueueSnackbar(\"Không tìm thấy thông tin lớp học\", {\n          variant: \"error\",\n        });\n        navigate(\"/teacher/classes\");\n        return;\n      }\n\n      setClassInfo(classResponse.data.data);\n\n      // Fetch rooms right after setting class info to ensure it's done before rendering\n      await fetchRooms();\n\n      // Lấy danh sách phiên điểm danh\n      const sessionsResponse = await axios.get(\n        `${API_URL}/attendance/teaching-class/${id}/sessions`,\n        {\n          headers: { Authorization: `Bearer ${token}` },\n        }\n      );\n      setAttendanceSessions(sessionsResponse.data.data || []);\n\n      // Tính toán thống kê điểm danh\n      const stats = {\n        total: sessionsResponse.data.data?.length || 0,\n        pending: 0,\n        completed: 0,\n      };\n\n      sessionsResponse.data.data?.forEach((session) => {\n        if (session.status === \"completed\") {\n          stats.completed++;\n        } else {\n          stats.pending++;\n        }\n      });\n\n      setAttendanceStats(stats);\n\n      // Vì API getClassStudents không trả về đầy đủ thông tin, chúng ta sẽ lấy chi tiết từng sinh viên\n      if (\n        classResponse.data.data.students &&\n        classResponse.data.data.students.length > 0\n      ) {\n        try {\n          // Lấy danh sách sinh viên cơ bản\n          const studentsResponse = await axios.get(\n            `${API_URL}/classes/teaching/${id}/students`,\n            {\n              headers: {\n                Authorization: `Bearer ${token}`,\n                Accept: \"application/json\",\n              },\n            }\n          );\n\n          // console.log(\"Dữ liệu sinh viên cơ bản:\", studentsResponse.data);\n\n          // Lưu danh sách sinh viên cơ bản trước\n          let studentsWithBasicInfo = [];\n          if (studentsResponse.data.success && studentsResponse.data.data) {\n            studentsWithBasicInfo = studentsResponse.data.data;\n          } else {\n            studentsWithBasicInfo = classResponse.data.data.students || [];\n          }\n\n          // Lấy chi tiết cho từng sinh viên (bao gồm faceFeatures)\n          const detailedStudents = await Promise.all(\n            studentsWithBasicInfo.map(async (student) => {\n              try {\n                // Gọi API để lấy thông tin chi tiết của sinh viên\n                const studentDetailResponse = await axios.get(\n                  `${API_URL}/users/${student._id}`,\n                  {\n                    headers: {\n                      Authorization: `Bearer ${token}`,\n                      Accept: \"application/json\",\n                    },\n                  }\n                );\n\n                // console.log(\n                //   `Thông tin chi tiết của sinh viên ${student.full_name}:`,\n                //   studentDetailResponse.data\n                // );\n\n                if (\n                  studentDetailResponse.data.success &&\n                  studentDetailResponse.data.data\n                ) {\n                  // Kết hợp dữ liệu từ API chi tiết sinh viên với dữ liệu cơ bản\n                  const detailedInfo = studentDetailResponse.data.data;\n\n                  // Kiểm tra dữ liệu khuôn mặt\n                  const hasFaceData = !!(\n                    detailedInfo.faceFeatures &&\n                    detailedInfo.faceFeatures.descriptors &&\n                    detailedInfo.faceFeatures.descriptors.length > 0\n                  );\n\n                  // console.log(\n                  //   `Sinh viên ${detailedInfo.full_name} có dữ liệu khuôn mặt: ${hasFaceData}`\n                  // );\n\n                  return {\n                    ...student,\n                    ...detailedInfo,\n                    has_face_data: hasFaceData,\n                  };\n                } else {\n                  // Nếu không lấy được chi tiết, sử dụng thông tin cơ bản\n                  return {\n                    ...student,\n                    has_face_data: false,\n                  };\n                }\n              } catch (error) {\n                console.error(\n                  `Lỗi khi lấy thông tin chi tiết của sinh viên ${student._id}:`,\n                  error\n                );\n                return {\n                  ...student,\n                  has_face_data: false,\n                };\n              }\n            })\n          );\n\n          setStudents(detailedStudents);\n        } catch (error) {\n          console.error(\"Lỗi khi lấy danh sách sinh viên:\", error);\n          // Sử dụng danh sách cơ bản nếu có lỗi\n          setStudents(classResponse.data.data.students || []);\n        }\n      } else {\n        setStudents([]);\n      }\n    } catch (error) {\n      console.error(\"Lỗi khi tải dữ liệu lớp học:\", error);\n      // Xử lý các loại lỗi từ API\n      if (error.response) {\n        // Nếu máy chủ phản hồi với mã lỗi\n        if (error.response.status === 404) {\n          enqueueSnackbar(\"Không tìm thấy lớp học với ID đã cho\", {\n            variant: \"error\",\n          });\n        } else if (error.response.status === 400) {\n          enqueueSnackbar(\"ID lớp học không hợp lệ\", { variant: \"error\" });\n        } else {\n          enqueueSnackbar(\n            error.response.data?.message || \"Lỗi khi tải dữ liệu lớp học\",\n            { variant: \"error\" }\n          );\n        }\n      } else {\n        enqueueSnackbar(\"Không thể kết nối đến máy chủ\", { variant: \"error\" });\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  }, [id, token, enqueueSnackbar, navigate]);\n\n  useEffect(() => {\n    fetchClassData();\n  }, [fetchClassData]);\n\n  // Thay đổi tab\n  const handleChangeTab = (event, newValue) => {\n    setTabValue(newValue);\n  };\n\n  // Mở dialog tạo phiên điểm danh\n  const handleOpenSessionDialog = () => {\n    // Tải danh sách phòng học\n    fetchRooms();\n\n    setSessionFormData({\n      title: `Buổi học ${attendanceSessions.length + 1}`,\n      date: new Date().toISOString().split(\"T\")[0],\n      start_time: \"07:00\",\n      end_time: \"08:40\",\n      room: \"\",\n      start_period: 1,\n      end_period: 2,\n      notes: \"\",\n    });\n    setOpenSessionDialog(true);\n  };\n\n  // Đóng dialog tạo phiên điểm danh\n  const handleCloseSessionDialog = () => {\n    setOpenSessionDialog(false);\n  };\n\n  // Cập nhật form dữ liệu phiên điểm danh\n  const handleSessionFormChange = (e) => {\n    const { name, value } = e.target;\n    setSessionFormData((prev) => ({\n      ...prev,\n      [name]: value,\n    }));\n  };\n\n  // Tạo phiên điểm danh mới\n  const handleCreateSession = async () => {\n    try {\n      const {\n        title,\n        date,\n        start_time,\n        end_time,\n        room,\n        start_period,\n        end_period,\n        notes,\n      } = sessionFormData;\n\n      // Kiểm tra dữ liệu\n      if (!date || !start_time || !end_time) {\n        enqueueSnackbar(\"Vui lòng điền đầy đủ thông tin\", { variant: \"error\" });\n        return;\n      }\n\n      // Tạo đối tượng để gửi lên API\n      const sessionData = {\n        title,\n        date,\n        start_time,\n        end_time,\n        teaching_class_id: id,\n        start_period: parseInt(start_period, 10) || 1,\n        end_period: parseInt(end_period, 10) || 2,\n        notes,\n      };\n\n      // Thêm room nếu có\n      if (room) {\n        sessionData.room = room;\n      }\n\n      const response = await axios.post(\n        `${API_URL}/attendance/sessions`,\n        sessionData,\n        {\n          headers: { Authorization: `Bearer ${token}` },\n        }\n      );\n\n      enqueueSnackbar(\"Tạo phiên điểm danh thành công\", {\n        variant: \"success\",\n      });\n      setOpenSessionDialog(false);\n\n      // Cập nhật danh sách phiên\n      setAttendanceSessions((prev) => [...prev, response.data.data]);\n      setAttendanceStats((prev) => ({\n        ...prev,\n        total: prev.total + 1,\n        pending: prev.pending + 1,\n      }));\n    } catch (error) {\n      console.error(\"Lỗi khi tạo phiên điểm danh:\", error);\n      enqueueSnackbar(\n        error.response?.data?.message || \"Lỗi khi tạo phiên điểm danh\",\n        { variant: \"error\" }\n      );\n    }\n  };\n\n  // Cập nhật phiên điểm danh\n  const handleUpdateSession = async () => {\n    try {\n      const {\n        _id,\n        title,\n        date,\n        start_time,\n        end_time,\n        room,\n        start_period,\n        end_period,\n        notes,\n      } = sessionFormData;\n\n      // Kiểm tra dữ liệu\n      if (!date || !start_time || !end_time) {\n        enqueueSnackbar(\"Vui lòng điền đầy đủ thông tin\", { variant: \"error\" });\n        return;\n      }\n\n      // Tạo đối tượng để gửi lên API\n      const sessionData = {\n        title,\n        date,\n        start_time,\n        end_time,\n        start_period: parseInt(start_period, 10) || 1,\n        end_period: parseInt(end_period, 10) || 2,\n        notes,\n      };\n\n      // Thêm room nếu có\n      if (room) {\n        sessionData.room = room;\n      }\n\n      // Gọi API cập nhật\n      const response = await axios.put(\n        `${API_URL}/attendance/sessions/${_id}`,\n        sessionData,\n        {\n          headers: { Authorization: `Bearer ${token}` },\n        }\n      );\n\n      enqueueSnackbar(\"Cập nhật phiên điểm danh thành công\", {\n        variant: \"success\",\n      });\n      setOpenSessionDialog(false);\n\n      // Cập nhật danh sách phiên\n      setAttendanceSessions((prev) =>\n        prev.map((session) =>\n          session._id === _id ? response.data.data : session\n        )\n      );\n    } catch (error) {\n      console.error(\"Lỗi khi cập nhật phiên điểm danh:\", error);\n      enqueueSnackbar(\n        error.response?.data?.message || \"Lỗi khi cập nhật phiên điểm danh\",\n        { variant: \"error\" }\n      );\n    }\n  };\n\n  // Bắt đầu phiên điểm danh\n  const handleStartSession = async (sessionId) => {\n    try {\n      // Kiểm tra tính hợp lệ của session\n      if (!sessionId) {\n        enqueueSnackbar(\"ID phiên điểm danh không hợp lệ\", {\n          variant: \"error\",\n        });\n        return;\n      }\n\n      // Kiểm tra trạng thái phiên điểm danh\n      const session = attendanceSessions.find((s) => s._id === sessionId);\n      if (!session) {\n        enqueueSnackbar(\"Không tìm thấy thông tin phiên điểm danh\", {\n          variant: \"error\",\n        });\n        return;\n      }\n\n      // Nếu phiên chưa bắt đầu hoặc đang ở trạng thái pending, cập nhật trạng thái thành active\n      if (session.status === \"pending\") {\n        try {\n          await axios.put(\n            `${API_URL}/attendance/sessions/${sessionId}/status`,\n            { status: \"active\" },\n            { headers: { Authorization: `Bearer ${token}` } }\n          );\n\n          // Cập nhật lại trạng thái trong state\n          setAttendanceSessions((prev) =>\n            prev.map((s) =>\n              s._id === sessionId ? { ...s, status: \"active\" } : s\n            )\n          );\n        } catch (error) {\n          console.error(\"Lỗi khi cập nhật trạng thái phiên:\", error);\n          // Vẫn tiếp tục điều hướng dù có lỗi\n        }\n      }\n\n      enqueueSnackbar(`Đang chuyển đến trang điểm danh`, { variant: \"info\" });\n      navigate(`/teacher/attendance/${id}/${sessionId}`);\n    } catch (error) {\n      console.error(\"Lỗi khi bắt đầu phiên điểm danh:\", error);\n      enqueueSnackbar(\"Có lỗi xảy ra khi bắt đầu phiên điểm danh\", {\n        variant: \"error\",\n      });\n    }\n  };\n\n  // Mở dialog thêm sinh viên\n  const handleOpenAddStudentDialog = async () => {\n    try {\n      setIsLoadingStudents(true);\n      // Lấy danh sách lớp chính\n      const mainClassResponse = await axios.get(\n        `${API_URL}/classes/main?all=true`,\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n            Accept: \"application/json\",\n          },\n        }\n      );\n\n      // console.log(\"Danh sách lớp chính:\", mainClassResponse.data);\n\n      if (!mainClassResponse.data?.data) {\n        enqueueSnackbar(\"Không thể tải danh sách lớp chính\", {\n          variant: \"error\",\n        });\n        return;\n      }\n\n      setMainClasses(mainClassResponse.data.data || []);\n      setAvailableStudents([]);\n      setSelectedStudents([]);\n      setSelectedMainClass(\"\");\n      setOpenAddStudentDialog(true);\n    } catch (error) {\n      console.error(\"Lỗi khi tải danh sách lớp chính:\", error);\n      enqueueSnackbar(\n        \"Không thể tải danh sách lớp chính. Vui lòng thử lại sau.\",\n        { variant: \"error\" }\n      );\n    } finally {\n      setIsLoadingStudents(false);\n    }\n  };\n\n  // Lấy danh sách sinh viên từ lớp chính\n  const handleMainClassChange = async (e) => {\n    const mainClassId = e.target.value;\n    setSelectedMainClass(mainClassId);\n\n    if (!mainClassId) {\n      setAvailableStudents([]);\n      return;\n    }\n\n    try {\n      setIsLoadingStudents(true);\n      const studentsResponse = await axios.get(\n        `${API_URL}/classes/main/${mainClassId}/approved-students`,\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n            Accept: \"application/json\",\n          },\n        }\n      );\n\n      // console.log(\"Danh sách sinh viên lớp chính:\", studentsResponse.data);\n\n      if (!studentsResponse.data?.data) {\n        enqueueSnackbar(\"Không thể tải danh sách sinh viên từ lớp chính\", {\n          variant: \"error\",\n        });\n        return;\n      }\n\n      // Lọc sinh viên chưa có trong lớp\n      const currentStudentIds = students.map((s) => s._id);\n      const filteredStudents = studentsResponse.data.data.students.filter(\n        (s) => !currentStudentIds.includes(s._id)\n      );\n\n      setAvailableStudents(filteredStudents);\n    } catch (error) {\n      console.error(\"Lỗi khi tải danh sách sinh viên từ lớp chính:\", error);\n      enqueueSnackbar(\"Không thể tải danh sách sinh viên từ lớp chính\", {\n        variant: \"error\",\n      });\n      setAvailableStudents([]);\n    } finally {\n      setIsLoadingStudents(false);\n    }\n  };\n\n  // Đóng dialog thêm sinh viên\n  const handleCloseAddStudentDialog = () => {\n    setOpenAddStudentDialog(false);\n  };\n\n  // Xử lý chọn sinh viên để thêm\n  const handleSelectStudent = (studentId) => {\n    if (selectedStudents.includes(studentId)) {\n      setSelectedStudents(selectedStudents.filter((id) => id !== studentId));\n    } else {\n      setSelectedStudents([...selectedStudents, studentId]);\n    }\n  };\n\n  // Thêm sinh viên vào lớp\n  const handleAddStudents = async () => {\n    try {\n      if (selectedStudents.length === 0) {\n        enqueueSnackbar(\"Vui lòng chọn ít nhất một sinh viên\", {\n          variant: \"warning\",\n        });\n        return;\n      }\n\n      // Gọi API thêm sinh viên\n      await axios.post(\n        `${API_URL}/classes/teaching/${id}/students/batch`,\n        {\n          student_ids: selectedStudents,\n        },\n        {\n          headers: { Authorization: `Bearer ${token}` },\n        }\n      );\n\n      enqueueSnackbar(`Đã thêm ${selectedStudents.length} sinh viên vào lớp`, {\n        variant: \"success\",\n      });\n      setOpenAddStudentDialog(false);\n\n      // Cập nhật lại danh sách sinh viên\n      fetchClassData();\n    } catch (error) {\n      console.error(\"Lỗi khi thêm sinh viên:\", error);\n\n      if (error.response) {\n        enqueueSnackbar(\n          `Lỗi: ${error.response.status} - ${\n            error.response.data?.message || \"Không thể thêm sinh viên\"\n          }`,\n          { variant: \"error\" }\n        );\n      } else {\n        enqueueSnackbar(\"Lỗi kết nối khi thêm sinh viên vào lớp\", {\n          variant: \"error\",\n        });\n      }\n    }\n  };\n\n  // Xóa sinh viên khỏi lớp\n  const handleRemoveStudent = async (studentId) => {\n    if (\n      !window.confirm(\"Bạn có chắc chắn muốn xóa sinh viên này khỏi lớp không?\")\n    ) {\n      return;\n    }\n\n    try {\n      await axios.delete(\n        `${API_URL}/classes/teaching/${id}/students/${studentId}`,\n        {\n          headers: { Authorization: `Bearer ${token}` },\n        }\n      );\n\n      enqueueSnackbar(\"Đã xóa sinh viên khỏi lớp\", { variant: \"success\" });\n\n      // Cập nhật lại danh sách sinh viên\n      setStudents(students.filter((s) => s._id !== studentId));\n    } catch (error) {\n      console.error(\"Lỗi khi xóa sinh viên:\", error);\n      enqueueSnackbar(\"Lỗi khi xóa sinh viên khỏi lớp\", { variant: \"error\" });\n    }\n  };\n\n  // Xuất danh sách sinh viên\n  const handleExportStudentList = () => {\n    try {\n      const studentsData = students.map((student, index) => {\n        // Kiểm tra có face data từ cả hai nguồn có thể\n        const hasFaceData =\n          student.has_face_data ||\n          !!(\n            student.faceFeatures &&\n            student.faceFeatures.descriptors &&\n            student.faceFeatures.descriptors.length > 0\n          );\n\n        return {\n          STT: index + 1,\n          \"Mã SV\": student.school_info?.student_id || \"N/A\",\n          \"Họ và tên\": student.full_name || student.name,\n          Email: student.email,\n          \"Đăng ký khuôn mặt\": hasFaceData ? \"Đã đăng ký\" : \"Chưa đăng ký\",\n        };\n      });\n\n      const header = [\n        \"STT\",\n        \"Mã SV\",\n        \"Họ và tên\",\n        \"Email\",\n        \"Đăng ký khuôn mặt\",\n      ];\n      const csvContent =\n        \"data:text/csv;charset=utf-8,\" +\n        [\n          header.join(\",\"),\n          ...studentsData.map((row) =>\n            [\n              row.STT,\n              row[\"Mã SV\"],\n              row[\"Họ và tên\"],\n              row.Email,\n              row[\"Đăng ký khuôn mặt\"],\n            ].join(\",\")\n          ),\n        ].join(\"\\n\");\n\n      const encodedUri = encodeURI(csvContent);\n      const link = document.createElement(\"a\");\n      link.setAttribute(\"href\", encodedUri);\n      link.setAttribute(\n        \"download\",\n        `danh_sach_sinh_vien_${classInfo?.class_name}.csv`\n      );\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n\n      enqueueSnackbar(\"Xuất danh sách sinh viên thành công\", {\n        variant: \"success\",\n      });\n    } catch (error) {\n      console.error(\"Lỗi khi xuất danh sách:\", error);\n      enqueueSnackbar(\"Lỗi khi xuất danh sách sinh viên\", { variant: \"error\" });\n    }\n  };\n\n  // Lọc sinh viên theo từ khóa tìm kiếm\n  const filteredAvailableStudents = availableStudents.filter(\n    (student) =>\n      student.full_name.toLowerCase().includes(searchStudent.toLowerCase()) ||\n      student.school_info?.student_id\n        ?.toLowerCase()\n        .includes(searchStudent.toLowerCase()) ||\n      student.email.toLowerCase().includes(searchStudent.toLowerCase())\n  );\n\n  // Tải dữ liệu tham chiếu cho form chỉnh sửa\n  const fetchReferenceDataForEdit = async () => {\n    try {\n      const [subjectsRes, semestersRes, mainClassesRes, campusesRes] =\n        await Promise.all([\n          axios.get(`${API_URL}/subjects`, {\n            headers: { Authorization: `Bearer ${token}` },\n          }),\n          axios.get(`${API_URL}/semesters`, {\n            headers: { Authorization: `Bearer ${token}` },\n          }),\n          axios.get(`${API_URL}/classes/main?all=true`, {\n            headers: { Authorization: `Bearer ${token}` },\n          }),\n          axios.get(`${API_URL}/facilities/campuses`, {\n            headers: { Authorization: `Bearer ${token}` },\n          }),\n        ]);\n\n      setSubjects(subjectsRes.data.data || []);\n      setSemesters(semestersRes.data.data || []);\n      setMainClasses(mainClassesRes.data.data || []);\n      setCampuses(campusesRes.data.data || []);\n\n      // Nếu lớp học có thông tin campus và building, tải danh sách building và room tương ứng\n      if (classInfo && classInfo.room) {\n        try {\n          const roomDetails = await axios.get(\n            `${API_URL}/facilities/rooms/${classInfo.room}`,\n            {\n              headers: { Authorization: `Bearer ${token}` },\n            }\n          );\n\n          if (roomDetails.data.success && roomDetails.data.data) {\n            const room = roomDetails.data.data;\n            if (room.building_id) {\n              setSelectedCampus(room.building_id.campus_id?._id || \"\");\n\n              // Tải danh sách buildings của campus\n              const buildingsRes = await axios.get(\n                `${API_URL}/facilities/buildings/campuses/${room.building_id.campus_id?._id}`,\n                { headers: { Authorization: `Bearer ${token}` } }\n              );\n              setBuildings(buildingsRes.data.data || []);\n\n              setSelectedBuilding(room.building_id._id || \"\");\n\n              // Tải danh sách rooms của building\n              const roomsRes = await axios.get(\n                `${API_URL}/facilities/rooms/building/${room.building_id._id}`,\n                { headers: { Authorization: `Bearer ${token}` } }\n              );\n              setRooms(roomsRes.data.data || []);\n            }\n          }\n        } catch (error) {\n          console.error(\"Lỗi khi tải thông tin phòng học:\", error);\n        }\n      }\n    } catch (error) {\n      console.error(\"Lỗi khi tải dữ liệu tham chiếu:\", error);\n      enqueueSnackbar(\"Lỗi khi tải dữ liệu tham chiếu\", { variant: \"error\" });\n    }\n  };\n\n  // Tải danh sách tòa nhà khi chọn campus\n  const fetchBuildings = async (campusId) => {\n    if (!campusId) {\n      setBuildings([]);\n      setSelectedBuilding(\"\");\n      return;\n    }\n\n    try {\n      const response = await axios.get(\n        `${API_URL}/facilities/buildings/campuses/${campusId}`,\n        {\n          headers: { Authorization: `Bearer ${token}` },\n        }\n      );\n      setBuildings(response.data.data || []);\n    } catch (error) {\n      console.error(\"Lỗi khi tải danh sách tòa nhà:\", error);\n      enqueueSnackbar(\"Lỗi khi tải danh sách tòa nhà\", { variant: \"error\" });\n    }\n  };\n\n  // Mở dialog chỉnh sửa lớp học\n  const handleOpenEditClassDialog = () => {\n    // Chuẩn bị dữ liệu ban đầu cho form\n    setEditClassData({\n      class_name: classInfo.class_name || \"\",\n      class_code: classInfo.class_code || \"\",\n      subject_id: classInfo.subject_id?._id || \"\",\n      main_class_id: classInfo.main_class_id?._id || \"\",\n      semester_id: classInfo.semester_id?._id || \"\",\n      total_sessions: classInfo.total_sessions || 15,\n      room_id: classInfo.room?._id || \"\",\n      course_start_date: classInfo.course_start_date\n        ? classInfo.course_start_date.split(\"T\")[0]\n        : \"\",\n      course_end_date: classInfo.course_end_date\n        ? classInfo.course_end_date.split(\"T\")[0]\n        : \"\",\n      auto_generate_sessions: classInfo.auto_generate_sessions !== false,\n      schedule: classInfo.schedule || [],\n    });\n\n    // Chuẩn bị lịch học từ classInfo\n    if (classInfo.schedule && classInfo.schedule.length > 0) {\n      setScheduleDays(classInfo.schedule);\n    } else {\n      // Nếu không có lịch học, tạo lịch mặc định dựa trên ngày bắt đầu\n      const dayOfWeek = classInfo.course_start_date\n        ? getDayOfWeekFromDate(classInfo.course_start_date.split(\"T\")[0])\n        : 1;\n\n      setScheduleDays([\n        {\n          day_of_week: dayOfWeek,\n          start_period: 1,\n          end_period: 2,\n          start_time: \"07:00\",\n          end_time: \"08:40\",\n          room_id: classInfo.room?._id || \"\",\n          is_recurring: true,\n          specific_dates: [],\n          excluded_dates: [],\n        },\n      ]);\n    }\n\n    // Tải dữ liệu tham chiếu\n    fetchReferenceDataForEdit();\n\n    // Mở dialog\n    setOpenEditClassDialog(true);\n  };\n\n  // Đóng dialog chỉnh sửa lớp học\n  const handleCloseEditClassDialog = () => {\n    setOpenEditClassDialog(false);\n    setEditClassData(null);\n  };\n\n  // Xử lý thay đổi các trường trong form chỉnh sửa\n  const handleEditClassChange = (e) => {\n    const { name, value } = e.target;\n    setEditClassData((prev) => ({\n      ...prev,\n      [name]: value,\n    }));\n  };\n\n  // Xử lý thay đổi campus\n  const handleCampusChange = (e) => {\n    const campusId = e.target.value;\n    setSelectedCampus(campusId);\n    fetchBuildings(campusId);\n    setSelectedBuilding(\"\");\n    setEditClassData((prev) => ({\n      ...prev,\n      room_id: \"\",\n    }));\n  };\n\n  // Xử lý thay đổi building\n  const handleBuildingChange = (e) => {\n    const buildingId = e.target.value;\n    setSelectedBuilding(buildingId);\n    fetchRooms(buildingId);\n    setEditClassData((prev) => ({\n      ...prev,\n      room_id: \"\",\n    }));\n  };\n\n  // Thêm function để kiểm tra xung đột lịch\n  const checkConflicts = async (scheduleToCheck = scheduleDays) => {\n    // Xóa cảnh báo xung đột cũ\n    setConflictWarnings([]);\n\n    try {\n      setCheckingConflicts(true);\n\n      // Kiểm tra xem có thông tin đủ để check không\n      if (\n        !user?.id ||\n        !scheduleToCheck ||\n        scheduleToCheck.length === 0 ||\n        scheduleToCheck.some((day) => !day.room_id)\n      ) {\n        return;\n      }\n\n      const response = await checkScheduleConflicts({\n        teacher_id: user.id,\n        schedule: scheduleToCheck,\n        class_id: id, // Loại trừ chính lớp này khi kiểm tra\n      });\n\n      if (response.data.has_conflicts) {\n        setConflictWarnings(response.data.conflicts);\n      }\n    } catch (error) {\n      console.error(\"Lỗi khi kiểm tra xung đột lịch học:\", error);\n      enqueueSnackbar(\"Lỗi khi kiểm tra xung đột lịch học\", {\n        variant: \"error\",\n      });\n    } finally {\n      setCheckingConflicts(false);\n    }\n  };\n\n  // Cập nhật hàm handleScheduleChange để check xung đột\n  const handleScheduleChange = (index, field, value) => {\n    const updatedSchedule = [...scheduleDays];\n    updatedSchedule[index] = {\n      ...updatedSchedule[index],\n      [field]: value,\n    };\n    setScheduleDays(updatedSchedule);\n\n    // Tính lại ngày kết thúc khi lịch học thay đổi\n    setEditClassData((prev) => ({\n      ...prev,\n      course_end_date: calculateEndDate(\n        prev.course_start_date,\n        updatedSchedule,\n        prev.total_sessions\n      ),\n    }));\n\n    // Kiểm tra xung đột nếu thay đổi phòng học hoặc thời gian\n    if (\n      field === \"room_id\" ||\n      field === \"day_of_week\" ||\n      field === \"start_period\" ||\n      field === \"end_period\" ||\n      field === \"start_time\" ||\n      field === \"end_time\"\n    ) {\n      // Đặt timeout để tránh gọi API quá nhiều khi người dùng thay đổi nhiều lần\n      setTimeout(() => {\n        if (\n          updatedSchedule[index].room_id &&\n          updatedSchedule[index].day_of_week !== undefined\n        ) {\n          checkConflicts(updatedSchedule);\n        }\n      }, 500);\n    }\n  };\n\n  // Cập nhật hàm handleUpdateClass\n  const handleUpdateClass = async () => {\n    if (!editClassData.class_name || !editClassData.class_code) {\n      enqueueSnackbar(\"Vui lòng điền đầy đủ thông tin bắt buộc\", {\n        variant: \"warning\",\n      });\n      return;\n    }\n\n    // Kiểm tra room_id trong từng schedule item\n    for (const day of scheduleDays) {\n      if (!day.room_id) {\n        enqueueSnackbar(\n          `Vui lòng chọn phòng học cho buổi học vào ${getDayOfWeekName(\n            day.day_of_week\n          )}`,\n          { variant: \"warning\" }\n        );\n        return;\n      }\n    }\n\n    // Kiểm tra xung đột lịch cuối cùng trước khi cập nhật lớp\n    try {\n      setCheckingConflicts(true);\n      const response = await checkScheduleConflicts({\n        teacher_id: classData.teacher_id._id,\n        schedule: scheduleDays,\n        class_id: id,\n      });\n\n      if (response.data.has_conflicts) {\n        setConflictWarnings(response.data.conflicts);\n\n        // Hiển thị thông báo xác nhận nếu có xung đột\n        if (\n          window.confirm(\n            \"Phát hiện xung đột lịch học. Bạn vẫn muốn cập nhật lịch học này không?\\n\\n\" +\n              response.data.conflicts.map((c) => c.message).join(\"\\n\")\n          )\n        ) {\n          // Tiếp tục cập nhật lớp nếu người dùng xác nhận\n          await updateClassData();\n        }\n      } else {\n        // Không có xung đột, cập nhật lớp\n        await updateClassData();\n      }\n    } catch (error) {\n      console.error(\"Lỗi khi kiểm tra xung đột lịch học:\", error);\n      // Vẫn cập nhật lớp ngay cả khi không thể kiểm tra xung đột\n      await updateClassData();\n    } finally {\n      setCheckingConflicts(false);\n    }\n  };\n\n  // Tách logic cập nhật lớp thành hàm riêng\n  const updateClassData = async () => {\n    setIsUpdating(true);\n    try {\n      // Tạo đối tượng dữ liệu để cập nhật\n      const updateData = {\n        ...editClassData,\n        schedule: scheduleDays,\n      };\n\n      // Xóa các trường không cần thiết\n      delete updateData.teacher_id;\n      delete updateData.createdAt;\n      delete updateData.updatedAt;\n\n      await updateTeachingClass(id, updateData);\n\n      enqueueSnackbar(\"Cập nhật lớp học thành công\", {\n        variant: \"success\",\n      });\n      setEditMode(false);\n      fetchClassData(); // Tải lại dữ liệu lớp học\n      setConflictWarnings([]); // Xóa cảnh báo xung đột\n    } catch (error) {\n      console.error(\"Lỗi khi cập nhật lớp học:\", error);\n      enqueueSnackbar(\n        error.response?.data?.message || \"Lỗi khi cập nhật lớp học\",\n        { variant: \"error\" }\n      );\n    } finally {\n      setIsUpdating(false);\n    }\n  };\n\n  // Lấy thứ trong tuần từ ngày\n  const getDayOfWeekFromDate = (dateString) => {\n    if (!dateString) return 1; // Mặc định là thứ 2 nếu không có ngày\n\n    const date = new Date(dateString);\n    // getDay() trả về 0 cho Chủ Nhật, 1-6 cho Thứ 2 đến Thứ 7\n    const day = date.getDay();\n\n    // Chuyển đổi để 0 = Chủ Nhật, 1 = Thứ Hai, ...\n    return day;\n  };\n\n  // Lấy tên của thứ trong tuần\n  const getDayOfWeekName = (dayOfWeek) => {\n    const days = [\n      \"Chủ Nhật\",\n      \"Thứ Hai\",\n      \"Thứ Ba\",\n      \"Thứ Tư\",\n      \"Thứ Năm\",\n      \"Thứ Sáu\",\n      \"Thứ Bảy\",\n    ];\n    return days[dayOfWeek];\n  };\n\n  // Thêm lịch học\n  const addScheduleDay = () => {\n    // Lấy ngày bắt đầu\n    const startDate = editClassData.course_start_date;\n    if (!startDate) {\n      enqueueSnackbar(\"Vui lòng chọn ngày bắt đầu trước\", {\n        variant: \"warning\",\n      });\n      return;\n    }\n\n    // Lấy thứ từ ngày bắt đầu\n    const baseDayOfWeek = getDayOfWeekFromDate(startDate);\n\n    // Tìm thứ tiếp theo chưa có trong lịch\n    const existingDays = scheduleDays.map((day) => day.day_of_week);\n    let nextDay = (baseDayOfWeek + 1) % 7; // Thứ tiếp theo\n\n    // Tìm một thứ chưa có trong lịch hiện tại\n    for (let i = 0; i < 7; i++) {\n      if (!existingDays.includes(nextDay)) {\n        break;\n      }\n      nextDay = (nextDay + 1) % 7;\n    }\n\n    // Nếu đã có đủ 7 ngày trong tuần, thì dùng thứ 2\n    if (existingDays.length >= 7) {\n      nextDay = 1;\n    }\n\n    const updatedSchedule = [\n      ...scheduleDays,\n      {\n        day_of_week: nextDay,\n        start_period: 1,\n        end_period: 2,\n        start_time: \"07:00\",\n        end_time: \"08:40\",\n        room_id: editClassData.room_id,\n        is_recurring: true,\n        specific_dates: [],\n        excluded_dates: [],\n      },\n    ];\n\n    setScheduleDays(updatedSchedule);\n\n    // Tính lại ngày kết thúc sau khi thêm buổi học\n    setEditClassData((prev) => ({\n      ...prev,\n      course_end_date: calculateEndDate(\n        prev.course_start_date,\n        updatedSchedule,\n        prev.total_sessions\n      ),\n    }));\n  };\n\n  // Xóa lịch học\n  const removeScheduleDay = (index) => {\n    if (scheduleDays.length > 1) {\n      const updatedSchedule = scheduleDays.filter((_, i) => i !== index);\n      setScheduleDays(updatedSchedule);\n\n      // Tính lại ngày kết thúc sau khi xóa buổi học\n      setEditClassData((prev) => ({\n        ...prev,\n        course_end_date: calculateEndDate(\n          prev.course_start_date,\n          updatedSchedule,\n          prev.total_sessions\n        ),\n      }));\n    }\n  };\n\n  // Tính ngày kết thúc dựa trên ngày bắt đầu và lịch học\n  const calculateEndDate = (startDate, schedule, totalSessions) => {\n    if (!startDate || !schedule || schedule.length === 0 || !totalSessions) {\n      return \"\";\n    }\n\n    try {\n      // Chuyển ngày bắt đầu thành đối tượng Date\n      const start = new Date(startDate);\n      if (isNaN(start.getTime())) {\n        return \"\";\n      }\n\n      // Tổng số tuần cần thiết = tổng số buổi học / số buổi học mỗi tuần\n      const sessionsPerWeek = schedule.length;\n      const weeksNeeded = Math.ceil(totalSessions / sessionsPerWeek);\n\n      // Tạo mảng chứa các ngày trong tuần từ lịch học (0-6, với 0 là Chủ Nhật)\n      const daysOfWeek = schedule.map((day) => day.day_of_week);\n\n      // Sắp xếp các ngày trong tuần\n      daysOfWeek.sort((a, b) => a - b);\n\n      // Tìm ngày đầu tiên trong lịch học sau ngày bắt đầu\n      let currentDate = new Date(start);\n\n      // Đếm số buổi học đã xếp lịch\n      let sessionCount = 0;\n\n      // Lặp qua từng tuần\n      for (let week = 0; week < weeksNeeded * 2; week++) {\n        // Nhân 2 để đảm bảo đủ số buổi\n        // Lặp qua các ngày trong tuần từ lịch học\n        for (let dayIndex = 0; dayIndex < daysOfWeek.length; dayIndex++) {\n          const targetDayOfWeek = daysOfWeek[dayIndex];\n\n          // Tìm ngày tiếp theo có thứ phù hợp\n          while (currentDate.getDay() !== targetDayOfWeek) {\n            currentDate.setDate(currentDate.getDate() + 1);\n          }\n\n          sessionCount++;\n\n          // Nếu đã đủ số buổi học, trả về ngày hiện tại\n          if (sessionCount >= totalSessions) {\n            return currentDate.toISOString().split(\"T\")[0];\n          }\n\n          // Di chuyển đến ngày tiếp theo\n          currentDate.setDate(currentDate.getDate() + 1);\n        }\n      }\n\n      // Nếu không tính được, trả về chuỗi rỗng\n      return \"\";\n    } catch (error) {\n      console.error(\"Lỗi khi tính ngày kết thúc:\", error);\n      return \"\";\n    }\n  };\n\n  // Xử lý thay đổi ngày bắt đầu\n  const handleStartDateChange = (e) => {\n    const startDate = e.target.value;\n\n    // Lấy thứ từ ngày bắt đầu\n    const dayOfWeek = getDayOfWeekFromDate(startDate);\n\n    // Cập nhật lịch học với thứ mới\n    const updatedSchedule = [\n      {\n        day_of_week: dayOfWeek,\n        start_period: 1,\n        end_period: 2,\n        start_time: \"07:00\",\n        end_time: \"08:40\",\n        room_id: editClassData.room_id,\n        is_recurring: true,\n        specific_dates: [],\n        excluded_dates: [],\n      },\n    ];\n\n    // Cập nhật lịch học\n    setScheduleDays(updatedSchedule);\n\n    // Cập nhật ngày bắt đầu và tính ngày kết thúc\n    setEditClassData((prev) => ({\n      ...prev,\n      course_start_date: startDate,\n      course_end_date: calculateEndDate(\n        startDate,\n        updatedSchedule,\n        prev.total_sessions\n      ),\n    }));\n  };\n\n  // Xử lý thay đổi số buổi học\n  const handleTotalSessionsChange = (e) => {\n    const totalSessions = e.target.value;\n\n    setEditClassData((prev) => ({\n      ...prev,\n      total_sessions: totalSessions,\n      // Tính lại ngày kết thúc khi thay đổi số buổi học\n      course_end_date: calculateEndDate(\n        prev.course_start_date,\n        scheduleDays,\n        totalSessions\n      ),\n    }));\n  };\n\n  if (isLoading) {\n    return (\n      <Box\n        sx={{\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          height: \"80vh\",\n        }}\n      >\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  if (!classInfo) {\n    return (\n      <Box sx={{ py: 3 }}>\n        <Card sx={{ textAlign: \"center\", p: 4 }}>\n          <Typography variant=\"h5\" color=\"error\" gutterBottom>\n            Không tìm thấy lớp học\n          </Typography>\n          <Typography variant=\"body1\" sx={{ mb: 3 }}>\n            Lớp học bạn đang tìm kiếm không tồn tại hoặc đã bị xóa.\n          </Typography>\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={() => navigate(\"/teacher/classes\")}\n          >\n            Quay lại danh sách lớp\n          </Button>\n        </Card>\n      </Box>\n    );\n  }\n\n  return (\n    <Box sx={{ padding: 3 }}>\n      <Box sx={{ mb: 3 }}>\n        <Button\n          variant=\"outlined\"\n          onClick={() => navigate(\"/teacher/classes\")}\n          sx={{ mb: 2 }}\n        >\n          Quay lại danh sách lớp\n        </Button>\n        <Box\n          sx={{\n            display: \"flex\",\n            justifyContent: \"space-between\",\n            alignItems: \"flex-start\",\n          }}\n        >\n          <Box>\n            <Typography variant=\"h4\" gutterBottom>\n              {classInfo.class_name}\n            </Typography>\n            <Typography variant=\"subtitle1\" color=\"text.secondary\" gutterBottom>\n              {classInfo.subject_id?.name} ({classInfo.subject_id?.code})\n            </Typography>\n          </Box>\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            startIcon={<Edit />}\n            onClick={handleOpenEditClassDialog}\n          >\n            Chỉnh sửa thông tin lớp\n          </Button>\n        </Box>\n      </Box>\n\n      <Grid container spacing={3} sx={{ mb: 3 }}>\n        <Grid item xs={12} md={4}>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h6\" gutterBottom>\n                Thông tin lớp học\n              </Typography>\n              <Box sx={{ mt: 2 }}>\n                <Typography\n                  variant=\"body2\"\n                  sx={{ mb: 1, display: \"flex\", alignItems: \"center\" }}\n                >\n                  <CalendarToday sx={{ mr: 1, fontSize: \"small\" }} />\n                  Học kỳ: {classInfo.semester_id?.name || \"N/A\"}\n                </Typography>\n                <Typography\n                  variant=\"body2\"\n                  sx={{ mb: 1, display: \"flex\", alignItems: \"center\" }}\n                >\n                  <CalendarToday sx={{ mr: 1, fontSize: \"small\" }} />\n                  Ngày bắt đầu:{\" \"}\n                  {classInfo.course_start_date\n                    ? new Date(classInfo.course_start_date).toLocaleDateString(\n                        \"vi-VN\"\n                      )\n                    : \"N/A\"}\n                </Typography>\n                <Typography\n                  variant=\"body2\"\n                  sx={{ mb: 1, display: \"flex\", alignItems: \"center\" }}\n                >\n                  <CalendarToday sx={{ mr: 1, fontSize: \"small\" }} />\n                  Ngày kết thúc:{\" \"}\n                  {classInfo.course_end_date\n                    ? new Date(classInfo.course_end_date).toLocaleDateString(\n                        \"vi-VN\"\n                      )\n                    : \"N/A\"}\n                </Typography>\n                <Typography\n                  variant=\"body2\"\n                  sx={{ mb: 1, display: \"flex\", alignItems: \"center\" }}\n                >\n                  <Info sx={{ mr: 1, fontSize: \"small\" }} />\n                  Số buổi học: {classInfo.total_sessions || 15}\n                </Typography>\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n        <Grid item xs={12} md={4}>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h6\" gutterBottom>\n                Điểm danh\n              </Typography>\n              <Box sx={{ mt: 2 }}>\n                <Typography variant=\"body2\" sx={{ mb: 1 }}>\n                  Tổng số buổi: {attendanceStats.total}\n                </Typography>\n                <Typography variant=\"body2\" sx={{ mb: 1 }}>\n                  Đã hoàn thành: {attendanceStats.completed}\n                </Typography>\n                <Typography variant=\"body2\" sx={{ mb: 1 }}>\n                  Chưa hoàn thành: {attendanceStats.pending}\n                </Typography>\n              </Box>\n            </CardContent>\n          </Card>\n        </Grid>\n        <Grid item xs={12} md={4}>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h6\" gutterBottom>\n                Sinh viên\n              </Typography>\n              <Box sx={{ mt: 2 }}>\n                <Typography variant=\"body2\" sx={{ mb: 1 }}>\n                  Tổng số sinh viên: {students.length}\n                </Typography>\n              </Box>\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                startIcon={<Download />}\n                onClick={handleExportStudentList}\n                sx={{ mt: 2 }}\n              >\n                Xuất danh sách\n              </Button>\n            </CardContent>\n          </Card>\n        </Grid>\n      </Grid>\n\n      <Box sx={{ width: \"100%\" }}>\n        <Box sx={{ borderBottom: 1, borderColor: \"divider\" }}>\n          <Tabs\n            value={tabValue}\n            onChange={handleChangeTab}\n            aria-label=\"lớp học tabs\"\n          >\n            <Tab label=\"Sinh viên\" {...a11yProps(0)} />\n            <Tab label=\"Phiên điểm danh\" {...a11yProps(1)} />\n          </Tabs>\n        </Box>\n        <TabPanel value={tabValue} index={0}>\n          <Box sx={{ display: \"flex\", justifyContent: \"flex-end\", mb: 2 }}>\n            <Button\n              variant=\"contained\"\n              startIcon={<PersonAdd />}\n              onClick={handleOpenAddStudentDialog}\n            >\n              Thêm sinh viên\n            </Button>\n          </Box>\n          <TableContainer component={Paper}>\n            <Table>\n              <TableHead>\n                <TableRow>\n                  <TableCell>STT</TableCell>\n                  <TableCell>Mã sinh viên</TableCell>\n                  <TableCell>Họ và tên</TableCell>\n                  <TableCell>Email</TableCell>\n                  <TableCell>Trạng thái</TableCell>\n                  <TableCell>Thao tác</TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {students.length > 0 ? (\n                  students.map((student, index) => {\n                    // Kiểm tra và log mỗi sinh viên để debug\n                    // console.log(`Hiển thị sinh viên ${index + 1}:`, student);\n\n                    // Kiểm tra có face data từ cả hai nguồn có thể\n                    const hasFaceData =\n                      student.has_face_data ||\n                      !!(\n                        student.faceFeatures &&\n                        student.faceFeatures.descriptors &&\n                        student.faceFeatures.descriptors.length > 0\n                      );\n\n                    return (\n                      <TableRow key={student._id}>\n                        <TableCell>{index + 1}</TableCell>\n                        <TableCell>\n                          {student.school_info?.student_id || \"N/A\"}\n                        </TableCell>\n                        <TableCell>\n                          {student.full_name || student.name}\n                        </TableCell>\n                        <TableCell>{student.email}</TableCell>\n                        <TableCell>\n                          {hasFaceData ? (\n                            <Chip\n                              label=\"Đã đăng ký khuôn mặt\"\n                              color=\"success\"\n                              size=\"small\"\n                            />\n                          ) : (\n                            <Chip\n                              label=\"Chưa đăng ký khuôn mặt\"\n                              color=\"warning\"\n                              size=\"small\"\n                            />\n                          )}\n                        </TableCell>\n                        <TableCell>\n                          <Tooltip title=\"Xóa khỏi lớp\">\n                            <IconButton\n                              size=\"small\"\n                              color=\"error\"\n                              onClick={() => handleRemoveStudent(student._id)}\n                            >\n                              <Delete />\n                            </IconButton>\n                          </Tooltip>\n                        </TableCell>\n                      </TableRow>\n                    );\n                  })\n                ) : (\n                  <TableRow>\n                    <TableCell colSpan={6} align=\"center\">\n                      Chưa có sinh viên nào trong lớp\n                    </TableCell>\n                  </TableRow>\n                )}\n              </TableBody>\n            </Table>\n          </TableContainer>\n        </TabPanel>\n        <TabPanel value={tabValue} index={1}>\n          <Box sx={{ display: \"flex\", justifyContent: \"flex-end\", mb: 2 }}>\n            <Button\n              variant=\"contained\"\n              startIcon={<Add />}\n              onClick={handleOpenSessionDialog}\n            >\n              Tạo phiên điểm danh\n            </Button>\n          </Box>\n          <TableContainer component={Paper}>\n            <Table>\n              <TableHead>\n                <TableRow>\n                  <TableCell>STT</TableCell>\n                  <TableCell>Ngày</TableCell>\n                  <TableCell>Tiết/Thời gian</TableCell>\n                  <TableCell>Phòng</TableCell>\n                  <TableCell>Ghi chú</TableCell>\n                  <TableCell>Trạng thái</TableCell>\n                  <TableCell>Thao tác</TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {attendanceSessions.length > 0 ? (\n                  attendanceSessions.map((session, index) => {\n                    // Log the session.room before rendering\n                    // console.log(\n                    //   `[DEBUG] Rendering room for session ${session._id}:`,\n                    //   session.room\n                    // );\n                    return (\n                      <TableRow key={session._id}>\n                        <TableCell>{index + 1}</TableCell>\n                        <TableCell>\n                          {new Date(session.date).toLocaleString(\"vi-VN\", {\n                            weekday: \"long\",\n                            year: \"numeric\",\n                            month: \"numeric\",\n                            day: \"numeric\",\n                          })}\n                        </TableCell>\n                        <TableCell>\n                          {session.start_period && session.end_period ? (\n                            <Box>\n                              <Typography variant=\"body2\">\n                                Tiết {session.start_period}-{session.end_period}\n                              </Typography>\n                              <Typography\n                                variant=\"caption\"\n                                color=\"text.secondary\"\n                              >\n                                {(() => {\n                                  // Hiển thị thời gian bắt đầu từ API\n                                  const startTime = session.start_time\n                                    ? new Date(\n                                        session.start_time\n                                      ).toLocaleTimeString(\"vi-VN\", {\n                                        hour: \"2-digit\",\n                                        minute: \"2-digit\",\n                                      })\n                                    : \"N/A\";\n\n                                  // Tính thời gian kết thúc dự kiến dựa trên lịch học, không phải thời gian kết thúc thực tế\n                                  // Mỗi tiết thường kéo dài 50 phút\n                                  let endTimeDate;\n                                  if (session.start_time) {\n                                    // Tính thời gian kết thúc dự kiến dựa trên số tiết\n                                    const tietsCount =\n                                      session.end_period -\n                                      session.start_period +\n                                      1;\n                                    endTimeDate = new Date(session.start_time);\n                                    endTimeDate.setMinutes(\n                                      endTimeDate.getMinutes() + tietsCount * 50\n                                    );\n                                  }\n\n                                  const endTime = endTimeDate\n                                    ? endTimeDate.toLocaleTimeString(\"vi-VN\", {\n                                        hour: \"2-digit\",\n                                        minute: \"2-digit\",\n                                      })\n                                    : \"N/A\";\n\n                                  return `${startTime} - ${endTime}`;\n                                })()}\n                              </Typography>\n                            </Box>\n                          ) : session.start_time ? (\n                            (() => {\n                              // Hiển thị thời gian bắt đầu từ API\n                              const startTime = new Date(\n                                session.start_time\n                              ).toLocaleTimeString(\"vi-VN\", {\n                                hour: \"2-digit\",\n                                minute: \"2-digit\",\n                              });\n\n                              // Mặc định coi mỗi buổi học kéo dài 4 tiết (200 phút) nếu không có thông tin tiết\n                              const endTimeDate = new Date(session.start_time);\n                              endTimeDate.setMinutes(\n                                endTimeDate.getMinutes() + 200\n                              );\n                              const endTime = endTimeDate.toLocaleTimeString(\n                                \"vi-VN\",\n                                { hour: \"2-digit\", minute: \"2-digit\" }\n                              );\n\n                              return `${startTime} - ${endTime}`;\n                            })()\n                          ) : (\n                            \"N/A\"\n                          )}\n                        </TableCell>\n                        <TableCell>\n                          {session.room ? (\n                            <Tooltip title=\"Thông tin phòng học\">\n                              <Typography variant=\"body2\">\n                                {session.room.room_number || \"Không xác định\"} -{\" \"}\n                                {session.room.building_id?.name ||\n                                  \"Không xác định\"}{\" \"}\n                                -{\" \"}\n                                {session.room.building_id?.campus_id?.name ||\n                                  \"Không xác định\"}\n                              </Typography>\n                            </Tooltip>\n                          ) : (\n                            <Typography variant=\"body2\" color=\"text.secondary\">\n                              Không có phòng\n                            </Typography>\n                          )}\n                        </TableCell>\n                        <TableCell>\n                          {session.notes ? (\n                            <Tooltip title={session.notes}>\n                              <Typography\n                                variant=\"body2\"\n                                sx={{\n                                  maxWidth: \"150px\",\n                                  whiteSpace: \"nowrap\",\n                                  overflow: \"hidden\",\n                                  textOverflow: \"ellipsis\",\n                                }}\n                              >\n                                {session.notes}\n                              </Typography>\n                            </Tooltip>\n                          ) : (\n                            <Typography variant=\"body2\" color=\"text.secondary\">\n                              -\n                            </Typography>\n                          )}\n                        </TableCell>\n                        <TableCell>\n                          {session.status === \"completed\" ? (\n                            <Chip\n                              label=\"Hoàn thành\"\n                              color=\"success\"\n                              size=\"small\"\n                            />\n                          ) : session.status === \"in_progress\" ? (\n                            <Chip\n                              label=\"Đang diễn ra\"\n                              color=\"primary\"\n                              size=\"small\"\n                            />\n                          ) : (\n                            <Chip\n                              label=\"Chưa bắt đầu\"\n                              color=\"default\"\n                              size=\"small\"\n                            />\n                          )}\n                        </TableCell>\n                        <TableCell>\n                          <Box sx={{ display: \"flex\", gap: 1 }}>\n                            <Button\n                              variant=\"contained\"\n                              size=\"small\"\n                              color=\"primary\"\n                              onClick={() => handleStartSession(session._id)}\n                              startIcon={\n                                session.status === \"completed\" ? (\n                                  <CheckCircle />\n                                ) : (\n                                  <PlayArrow />\n                                )\n                              }\n                            >\n                              {session.status === \"completed\"\n                                ? \"Xem\"\n                                : \"Bắt đầu\"}\n                            </Button>\n                            <Tooltip title=\"Chỉnh sửa thông tin\">\n                              <IconButton\n                                size=\"small\"\n                                color=\"default\"\n                                onClick={() => {\n                                  setSessionFormData({\n                                    ...session,\n                                    date: session.date.split(\"T\")[0],\n                                  });\n                                  // Tải danh sách phòng học\n                                  fetchRooms();\n                                  setOpenSessionDialog(true);\n                                }}\n                              >\n                                <Edit />\n                              </IconButton>\n                            </Tooltip>\n                          </Box>\n                        </TableCell>\n                      </TableRow>\n                    );\n                  })\n                ) : (\n                  <TableRow>\n                    <TableCell colSpan={8} align=\"center\">\n                      Chưa có phiên điểm danh nào\n                    </TableCell>\n                  </TableRow>\n                )}\n              </TableBody>\n            </Table>\n          </TableContainer>\n        </TabPanel>\n      </Box>\n\n      {/* Dialog tạo/chỉnh sửa phiên điểm danh */}\n      <Dialog\n        open={openSessionDialog}\n        onClose={handleCloseSessionDialog}\n        maxWidth=\"md\"\n        fullWidth\n      >\n        <DialogTitle>\n          {sessionFormData._id\n            ? \"Chỉnh sửa phiên điểm danh\"\n            : \"Tạo phiên điểm danh mới\"}\n        </DialogTitle>\n        <DialogContent>\n          <Box sx={{ mt: 2 }}>\n            <TextField\n              fullWidth\n              label=\"Ngày\"\n              name=\"date\"\n              type=\"date\"\n              value={sessionFormData.date}\n              onChange={handleSessionFormChange}\n              sx={{ mb: 2 }}\n            />\n\n            <Grid container spacing={2} sx={{ mb: 2 }}>\n              <Grid item xs={6} md={3}>\n                <TextField\n                  fullWidth\n                  label=\"Tiết bắt đầu\"\n                  name=\"start_period\"\n                  type=\"number\"\n                  value={sessionFormData.start_period}\n                  onChange={handleSessionFormChange}\n                  InputProps={{ inputProps: { min: 1, max: 15 } }}\n                />\n              </Grid>\n              <Grid item xs={6} md={3}>\n                <TextField\n                  fullWidth\n                  label=\"Tiết kết thúc\"\n                  name=\"end_period\"\n                  type=\"number\"\n                  value={sessionFormData.end_period}\n                  onChange={handleSessionFormChange}\n                  InputProps={{\n                    inputProps: {\n                      min: sessionFormData.start_period || 1,\n                      max: 15,\n                    },\n                  }}\n                />\n              </Grid>\n              <Grid item xs={6} md={3}>\n                <TextField\n                  fullWidth\n                  label=\"Thời gian bắt đầu\"\n                  name=\"start_time\"\n                  type=\"time\"\n                  value={sessionFormData.start_time}\n                  onChange={handleSessionFormChange}\n                  InputLabelProps={{ shrink: true }}\n                />\n              </Grid>\n              <Grid item xs={6} md={3}>\n                <TextField\n                  fullWidth\n                  label=\"Thời gian kết thúc\"\n                  name=\"end_time\"\n                  type=\"time\"\n                  value={sessionFormData.end_time}\n                  onChange={handleSessionFormChange}\n                  InputLabelProps={{ shrink: true }}\n                />\n              </Grid>\n            </Grid>\n\n            <Grid container spacing={2} sx={{ mb: 2 }}>\n              <Grid item xs={12}>\n                <FormControl fullWidth>\n                  <InputLabel>Phòng học</InputLabel>\n                  <Select\n                    name=\"room\"\n                    value={sessionFormData.room || \"\"}\n                    onChange={handleSessionFormChange}\n                    label=\"Phòng học\"\n                  >\n                    <MenuItem value=\"\">-- Chọn phòng học --</MenuItem>\n                    {rooms &&\n                      rooms.map((room) => (\n                        <MenuItem key={room._id} value={room._id}>\n                          {room.room_number || \"Không xác định\"} -{\" \"}\n                          {room.building_id?.name || \"Không xác định\"} -{\" \"}\n                          {room.building_id?.campus_id?.name ||\n                            \"Không xác định\"}\n                        </MenuItem>\n                      ))}\n                  </Select>\n                  <FormHelperText>\n                    Chọn phòng học với thông tin đầy đủ\n                  </FormHelperText>\n                </FormControl>\n              </Grid>\n            </Grid>\n\n            <TextField\n              fullWidth\n              label=\"Ghi chú\"\n              name=\"notes\"\n              multiline\n              rows={3}\n              placeholder=\"Nội dung buổi học, yêu cầu đặc biệt, v.v...\"\n              value={sessionFormData.notes}\n              onChange={handleSessionFormChange}\n              sx={{ mb: 2 }}\n            />\n          </Box>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleCloseSessionDialog}>Hủy</Button>\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={\n              sessionFormData._id ? handleUpdateSession : handleCreateSession\n            }\n          >\n            {sessionFormData._id ? \"Lưu thay đổi\" : \"Tạo\"}\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {/* Dialog thêm sinh viên */}\n      <Dialog\n        open={openAddStudentDialog}\n        onClose={handleCloseAddStudentDialog}\n        maxWidth=\"md\"\n        fullWidth\n      >\n        <DialogTitle>Thêm sinh viên vào lớp</DialogTitle>\n        <DialogContent>\n          <Box sx={{ mb: 3, mt: 1 }}>\n            <FormControl fullWidth sx={{ mb: 2 }}>\n              <InputLabel>Chọn lớp chính</InputLabel>\n              <Select\n                value={selectedMainClass}\n                onChange={handleMainClassChange}\n                label=\"Chọn lớp chính\"\n                disabled={isLoadingStudents}\n              >\n                <MenuItem value=\"\">-- Chọn lớp chính --</MenuItem>\n                {mainClasses.map((mainClass) => (\n                  <MenuItem key={mainClass._id} value={mainClass._id}>\n                    {mainClass.name} ({mainClass.class_code})\n                  </MenuItem>\n                ))}\n              </Select>\n            </FormControl>\n\n            {selectedMainClass && (\n              <TextField\n                fullWidth\n                label=\"Tìm kiếm sinh viên\"\n                value={searchStudent}\n                onChange={(e) => setSearchStudent(e.target.value)}\n                disabled={isLoadingStudents}\n              />\n            )}\n          </Box>\n\n          {isLoadingStudents ? (\n            <Box sx={{ display: \"flex\", justifyContent: \"center\", my: 3 }}>\n              <CircularProgress />\n            </Box>\n          ) : (\n            <Box sx={{ maxHeight: 400, overflow: \"auto\", mb: 2 }}>\n              {!selectedMainClass ? (\n                <Alert severity=\"info\">\n                  Vui lòng chọn lớp chính để xem danh sách sinh viên\n                </Alert>\n              ) : availableStudents.length === 0 ? (\n                <Alert severity=\"warning\">\n                  Không tìm thấy sinh viên có thể thêm vào lớp\n                </Alert>\n              ) : (\n                <List>\n                  {availableStudents\n                    .filter(\n                      (student) =>\n                        student.full_name\n                          ?.toLowerCase()\n                          .includes(searchStudent.toLowerCase()) ||\n                        student.school_info?.student_id\n                          ?.toLowerCase()\n                          .includes(searchStudent.toLowerCase()) ||\n                        student.email\n                          ?.toLowerCase()\n                          .includes(searchStudent.toLowerCase())\n                    )\n                    .map((student) => (\n                      <React.Fragment key={student._id}>\n                        <ListItem>\n                          <ListItemText\n                            primary={student.full_name || student.name}\n                            secondary={\n                              <>\n                                {student.school_info?.student_id ||\n                                  \"Chưa có mã SV\"}{\" \"}\n                                - {student.email}\n                              </>\n                            }\n                          />\n                          <ListItemSecondaryAction>\n                            <Checkbox\n                              edge=\"end\"\n                              checked={selectedStudents.includes(student._id)}\n                              onChange={() => handleSelectStudent(student._id)}\n                            />\n                          </ListItemSecondaryAction>\n                        </ListItem>\n                        <Divider />\n                      </React.Fragment>\n                    ))}\n                </List>\n              )}\n            </Box>\n          )}\n\n          <Box sx={{ textAlign: \"right\" }}>\n            <Typography variant=\"body2\">\n              Đã chọn: {selectedStudents.length} sinh viên\n            </Typography>\n          </Box>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleCloseAddStudentDialog}>Hủy</Button>\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={handleAddStudents}\n            disabled={selectedStudents.length === 0 || isLoadingStudents}\n          >\n            Thêm vào lớp\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {/* Dialog chỉnh sửa lớp học */}\n      <Dialog\n        open={openEditClassDialog}\n        onClose={handleCloseEditClassDialog}\n        maxWidth=\"md\"\n        fullWidth\n      >\n        <DialogTitle\n          sx={{ bgcolor: \"primary.main\", color: \"white\", fontWeight: \"bold\" }}\n        >\n          <Edit sx={{ verticalAlign: \"middle\", mr: 1 }} />\n          Chỉnh sửa thông tin lớp học\n        </DialogTitle>\n        <DialogContent dividers>\n          {editClassData && (\n            <Grid container spacing={2} sx={{ mt: 1 }}>\n              <Grid item xs={12} sm={6}>\n                <TextField\n                  fullWidth\n                  label=\"Tên lớp\"\n                  name=\"class_name\"\n                  value={editClassData.class_name}\n                  onChange={handleEditClassChange}\n                  required\n                  variant=\"outlined\"\n                  placeholder=\"VD: Lập trình web - Nhóm 1\"\n                />\n              </Grid>\n              <Grid item xs={12} sm={6}>\n                <TextField\n                  fullWidth\n                  label=\"Mã lớp\"\n                  name=\"class_code\"\n                  value={editClassData.class_code}\n                  onChange={handleEditClassChange}\n                  required\n                  variant=\"outlined\"\n                  placeholder=\"VD: WEB101-G1\"\n                />\n              </Grid>\n              <Grid item xs={12} sm={6}>\n                <FormControl fullWidth required>\n                  <InputLabel>Môn học</InputLabel>\n                  <Select\n                    label=\"Môn học\"\n                    name=\"subject_id\"\n                    value={editClassData.subject_id}\n                    onChange={handleEditClassChange}\n                  >\n                    {subjects.map((subject) => (\n                      <MenuItem key={subject._id} value={subject._id}>\n                        {subject.name} ({subject.code})\n                      </MenuItem>\n                    ))}\n                  </Select>\n                </FormControl>\n              </Grid>\n              <Grid item xs={12} sm={6}>\n                <FormControl fullWidth required>\n                  <InputLabel>Học kỳ</InputLabel>\n                  <Select\n                    label=\"Học kỳ\"\n                    name=\"semester_id\"\n                    value={editClassData.semester_id}\n                    onChange={handleEditClassChange}\n                  >\n                    {semesters.map((sem) => (\n                      <MenuItem key={sem._id} value={sem._id}>\n                        {sem.name} ({sem.academic_year})\n                      </MenuItem>\n                    ))}\n                  </Select>\n                </FormControl>\n              </Grid>\n              <Grid item xs={12} sm={6}>\n                <FormControl fullWidth>\n                  <InputLabel>Lớp chính</InputLabel>\n                  <Select\n                    label=\"Lớp chính\"\n                    name=\"main_class_id\"\n                    value={editClassData.main_class_id}\n                    onChange={handleEditClassChange}\n                  >\n                    <MenuItem value=\"\">Không chọn lớp chính</MenuItem>\n                    {mainClasses.map((mainClass) => (\n                      <MenuItem key={mainClass._id} value={mainClass._id}>\n                        {mainClass.name} ({mainClass.class_code})\n                      </MenuItem>\n                    ))}\n                  </Select>\n                  <FormHelperText>\n                    Có thể để trống nếu lớp dành cho nhiều lớp chính\n                  </FormHelperText>\n                </FormControl>\n              </Grid>\n              <Grid item xs={12} sm={6}>\n                <TextField\n                  fullWidth\n                  type=\"number\"\n                  label=\"Tổng số buổi học\"\n                  name=\"total_sessions\"\n                  value={editClassData.total_sessions}\n                  onChange={handleTotalSessionsChange}\n                  required\n                  variant=\"outlined\"\n                  InputProps={{ inputProps: { min: 1 } }}\n                />\n              </Grid>\n              <Grid item xs={12} sm={6}>\n                <TextField\n                  fullWidth\n                  type=\"date\"\n                  label=\"Ngày bắt đầu khóa học\"\n                  name=\"course_start_date\"\n                  value={editClassData.course_start_date}\n                  onChange={handleStartDateChange}\n                  required\n                  variant=\"outlined\"\n                  InputLabelProps={{ shrink: true }}\n                />\n              </Grid>\n              <Grid item xs={12} sm={6}>\n                <TextField\n                  fullWidth\n                  type=\"date\"\n                  label=\"Ngày kết thúc khóa học\"\n                  name=\"course_end_date\"\n                  value={editClassData.course_end_date}\n                  onChange={handleEditClassChange}\n                  variant=\"outlined\"\n                  InputLabelProps={{ shrink: true }}\n                />\n              </Grid>\n\n              {/* Chọn phòng học */}\n              <Grid item xs={12}>\n                <Typography\n                  variant=\"subtitle1\"\n                  gutterBottom\n                  sx={{ fontWeight: \"bold\", mt: 2 }}\n                >\n                  <Room sx={{ verticalAlign: \"middle\", mr: 1 }} />\n                  Thông tin phòng học\n                </Typography>\n                <Divider sx={{ mb: 2 }} />\n              </Grid>\n              <Grid item xs={12} sm={4}>\n                <FormControl fullWidth>\n                  <InputLabel>Cơ sở</InputLabel>\n                  <Select\n                    label=\"Cơ sở\"\n                    value={selectedCampus}\n                    onChange={handleCampusChange}\n                  >\n                    <MenuItem value=\"\">Chọn cơ sở</MenuItem>\n                    {campuses.map((campus) => (\n                      <MenuItem key={campus._id} value={campus._id}>\n                        {campus.name}\n                      </MenuItem>\n                    ))}\n                  </Select>\n                </FormControl>\n              </Grid>\n              <Grid item xs={12} sm={4}>\n                <FormControl fullWidth disabled={!selectedCampus}>\n                  <InputLabel>Tòa nhà</InputLabel>\n                  <Select\n                    label=\"Tòa nhà\"\n                    value={selectedBuilding}\n                    onChange={handleBuildingChange}\n                  >\n                    <MenuItem value=\"\">Chọn tòa nhà</MenuItem>\n                    {buildings.map((building) => (\n                      <MenuItem key={building._id} value={building._id}>\n                        {building.name}\n                      </MenuItem>\n                    ))}\n                  </Select>\n                </FormControl>\n              </Grid>\n              <Grid item xs={12} sm={4}>\n                <FormControl fullWidth disabled={!selectedBuilding}>\n                  <InputLabel>Phòng học</InputLabel>\n                  <Select\n                    label=\"Phòng học\"\n                    name=\"room_id\"\n                    value={editClassData.room_id}\n                    onChange={handleEditClassChange}\n                  >\n                    <MenuItem value=\"\">Chọn phòng học</MenuItem>\n                    {rooms.map((room) => (\n                      <MenuItem key={room._id} value={room._id}>\n                        {room.room_number} (Sức chứa: {room.capacity})\n                      </MenuItem>\n                    ))}\n                  </Select>\n                </FormControl>\n              </Grid>\n\n              {/* Lịch học */}\n              <Grid item xs={12}>\n                <Typography\n                  variant=\"subtitle1\"\n                  gutterBottom\n                  sx={{ fontWeight: \"bold\", mt: 2 }}\n                >\n                  <Event sx={{ verticalAlign: \"middle\", mr: 1 }} />\n                  Lịch học\n                </Typography>\n                <Divider sx={{ mb: 2 }} />\n              </Grid>\n\n              {scheduleDays.map((day, index) => (\n                <Grid\n                  container\n                  spacing={2}\n                  key={index}\n                  sx={{\n                    ml: 0,\n                    mt: 1,\n                    width: \"100%\",\n                    pb: 2,\n                    borderBottom:\n                      index < scheduleDays.length - 1\n                        ? \"1px dashed #ddd\"\n                        : \"none\",\n                  }}\n                >\n                  <Grid item xs={12} sm={3}>\n                    <TextField\n                      fullWidth\n                      label=\"Thứ trong tuần\"\n                      value={getDayOfWeekName(day.day_of_week)}\n                      InputProps={{\n                        readOnly: true,\n                      }}\n                      variant=\"outlined\"\n                      helperText=\"Được xác định từ ngày bắt đầu\"\n                    />\n                  </Grid>\n                  <Grid item xs={6} sm={2}>\n                    <TextField\n                      fullWidth\n                      label=\"Tiết bắt đầu\"\n                      type=\"number\"\n                      value={day.start_period}\n                      onChange={(e) =>\n                        handleScheduleChange(\n                          index,\n                          \"start_period\",\n                          parseInt(e.target.value)\n                        )\n                      }\n                      InputProps={{ inputProps: { min: 1, max: 15 } }}\n                    />\n                  </Grid>\n                  <Grid item xs={6} sm={2}>\n                    <TextField\n                      fullWidth\n                      label=\"Tiết kết thúc\"\n                      type=\"number\"\n                      value={day.end_period}\n                      onChange={(e) =>\n                        handleScheduleChange(\n                          index,\n                          \"end_period\",\n                          parseInt(e.target.value)\n                        )\n                      }\n                      InputProps={{\n                        inputProps: { min: day.start_period, max: 15 },\n                      }}\n                    />\n                  </Grid>\n                  <Grid item xs={6} sm={2}>\n                    <TextField\n                      fullWidth\n                      label=\"Giờ bắt đầu\"\n                      type=\"time\"\n                      value={day.start_time}\n                      onChange={(e) =>\n                        handleScheduleChange(\n                          index,\n                          \"start_time\",\n                          e.target.value\n                        )\n                      }\n                      InputLabelProps={{ shrink: true }}\n                    />\n                  </Grid>\n                  <Grid item xs={6} sm={2}>\n                    <TextField\n                      fullWidth\n                      label=\"Giờ kết thúc\"\n                      type=\"time\"\n                      value={day.end_time}\n                      onChange={(e) =>\n                        handleScheduleChange(index, \"end_time\", e.target.value)\n                      }\n                      InputLabelProps={{ shrink: true }}\n                    />\n                  </Grid>\n                  <Grid\n                    item\n                    xs={12}\n                    sm={1}\n                    sx={{ display: \"flex\", alignItems: \"center\" }}\n                  >\n                    <IconButton\n                      color=\"error\"\n                      onClick={() => removeScheduleDay(index)}\n                      disabled={scheduleDays.length <= 1}\n                    >\n                      <Chip\n                        label=\"Xóa\"\n                        color=\"error\"\n                        size=\"small\"\n                        variant=\"outlined\"\n                        disabled={scheduleDays.length <= 1}\n                      />\n                    </IconButton>\n                  </Grid>\n\n                  <Grid item xs={12} sm={4}>\n                    <FormControl fullWidth>\n                      <InputLabel>Phòng học riêng</InputLabel>\n                      <Select\n                        label=\"Phòng học riêng\"\n                        value={day.room_id || \"\"}\n                        onChange={(e) =>\n                          handleScheduleChange(index, \"room_id\", e.target.value)\n                        }\n                      >\n                        <MenuItem value=\"\">Dùng phòng mặc định</MenuItem>\n                        {rooms.map((room) => (\n                          <MenuItem key={room._id} value={room._id}>\n                            {room.room_number} (Sức chứa: {room.capacity})\n                          </MenuItem>\n                        ))}\n                      </Select>\n                      <FormHelperText>\n                        Phòng học riêng cho buổi này, để trống sẽ dùng phòng mặc\n                        định của lớp\n                      </FormHelperText>\n                    </FormControl>\n                  </Grid>\n\n                  <Grid item xs={12} sm={4}>\n                    <FormControl fullWidth>\n                      <InputLabel>Loại lịch</InputLabel>\n                      <Select\n                        label=\"Loại lịch\"\n                        value={day.is_recurring}\n                        onChange={(e) =>\n                          handleScheduleChange(\n                            index,\n                            \"is_recurring\",\n                            e.target.value\n                          )\n                        }\n                      >\n                        <MenuItem value={true}>Định kỳ hàng tuần</MenuItem>\n                        <MenuItem value={false}>Các ngày cụ thể</MenuItem>\n                      </Select>\n                    </FormControl>\n                  </Grid>\n                </Grid>\n              ))}\n\n              <Grid item xs={12}>\n                <Button\n                  variant=\"outlined\"\n                  color=\"primary\"\n                  startIcon={<Add />}\n                  onClick={addScheduleDay}\n                  sx={{ mt: 1 }}\n                >\n                  Thêm lịch học\n                </Button>\n              </Grid>\n            </Grid>\n          )}\n        </DialogContent>\n        <DialogActions sx={{ px: 3, pb: 2 }}>\n          <Button\n            onClick={handleCloseEditClassDialog}\n            disabled={isSubmittingEdit}\n          >\n            Hủy\n          </Button>\n          <Button\n            onClick={handleUpdateClass}\n            variant=\"contained\"\n            color=\"primary\"\n            disabled={isSubmittingEdit}\n            startIcon={\n              isSubmittingEdit ? <CircularProgress size={20} /> : <Edit />\n            }\n          >\n            {isSubmittingEdit ? \"Đang cập nhật...\" : \"Cập nhật lớp học\"}\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {/* Thêm component hiển thị cảnh báo xung đột ngay trước các nút hành động */}\n      {editMode && renderConflictWarnings()}\n\n      {/* Các nút hành động */}\n      <Box sx={{ mt: 3, display: \"flex\", justifyContent: \"flex-end\", gap: 2 }}>\n        {editMode ? (\n          <>\n            <Button\n              variant=\"outlined\"\n              onClick={() => {\n                setEditMode(false);\n                setEditClassData({ ...classData });\n                setScheduleDays(\n                  classData.schedule?.map((item) => ({ ...item })) || []\n                );\n                setConflictWarnings([]); // Xóa cảnh báo khi hủy\n              }}\n              disabled={isUpdating || checkingConflicts}\n            >\n              Hủy\n            </Button>\n            <Button\n              variant=\"contained\"\n              onClick={handleUpdateClass}\n              disabled={isUpdating || checkingConflicts}\n              startIcon={\n                isUpdating || checkingConflicts ? (\n                  <CircularProgress size={20} />\n                ) : null\n              }\n            >\n              {isUpdating\n                ? \"Đang cập nhật...\"\n                : checkingConflicts\n                ? \"Đang kiểm tra...\"\n                : \"Lưu thay đổi\"}\n            </Button>\n          </>\n        ) : (\n          <Button\n            variant=\"contained\"\n            onClick={() => setEditMode(true)}\n            disabled={isLoading}\n          >\n            Chỉnh sửa lớp học\n          </Button>\n        )}\n      </Box>\n    </Box>\n  );\n};\n\nexport default TeacherClassDetailPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}