{"ast":null,"code":"import React from\"react\";import{Navigate}from\"react-router-dom\";import{useSelector}from\"react-redux\";/**\r\n * Component bảo vệ route, chỉ cho phép truy cập nếu đã đăng nhập\r\n * và có quyền phù hợp (nếu yêu cầu)\r\n *\r\n * @param {Object} props\r\n * @param {React.ReactNode} props.children - Component con\r\n * @param {Array} props.roles - Các vai trò được phép truy cập\r\n */import{jsx as _jsx}from\"react/jsx-runtime\";const ProtectedRoute=_ref=>{let{children,roles}=_ref;const{isAuthenticated,user}=useSelector(state=>state.auth);// Nếu chưa đăng nhập, chuyển hướng đến trang đăng nhập\nif(!isAuthenticated){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true});}// Kiểm tra trạng thái tài khoản (tất cả người dùng trừ admin)\nif((user===null||user===void 0?void 0:user.role)!==\"admin\"&&((user===null||user===void 0?void 0:user.status)===\"pending\"||(user===null||user===void 0?void 0:user.status)===\"rejected\")){// Chuyển hướng đến trang pending-approval với thông tin người dùng\nreturn/*#__PURE__*/_jsx(Navigate,{to:`/pending-approval?email=${encodeURIComponent((user===null||user===void 0?void 0:user.email)||\"\")}&status=${(user===null||user===void 0?void 0:user.status)||\"\"}&role=${(user===null||user===void 0?void 0:user.role)||\"\"}`,replace:true});}// Nếu có yêu cầu về vai trò và người dùng không có vai trò đó\nif(roles&&!roles.includes(user===null||user===void 0?void 0:user.role)){return/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\",replace:true});}// Cho phép truy cập\nreturn children;};export default ProtectedRoute;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}