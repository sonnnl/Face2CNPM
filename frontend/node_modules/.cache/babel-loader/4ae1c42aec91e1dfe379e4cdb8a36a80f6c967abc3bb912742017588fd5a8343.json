{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useSelector}from\"react-redux\";import{useNavigate}from\"react-router-dom\";import axios from\"axios\";import{Box,Typography,Grid,Card,CardContent,CardActions,Button,CircularProgress,Divider,Paper,List,ListItem,ListItemText,ListItemAvatar,Avatar,Chip}from\"@mui/material\";import{School,Class,Person,People,Event,EventAvailable,CheckCircle,Face,Today,AccessTime}from\"@mui/icons-material\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_URL=process.env.REACT_APP_API_URL||\"http://localhost:5000/api\";const DashboardPage=()=>{const navigate=useNavigate();const{user,token}=useSelector(state=>state.auth);const[stats,setStats]=useState({classes:[],attendanceSessions:[],todayAttendance:[],totalAttendedSessions:0,totalSessions:0,attendancePercentage:0});const[isLoading,setIsLoading]=useState(true);useEffect(()=>{const fetchDashboardData=async()=>{try{setIsLoading(true);if(user.role===\"student\"){// Dữ liệu cho sinh viên\n// Lấy các lớp mà sinh viên tham gia\nconst classesResponse=await axios.get(`${API_URL}/classes/teaching?student=${user._id}`,{headers:{Authorization:`Bearer ${token}`}});// Lấy thống kê điểm danh\nconst scoresResponse=await axios.get(`${API_URL}/attendance/student/${user._id}/scores`,{headers:{Authorization:`Bearer ${token}`}});// Lấy lịch sử điểm danh gần đây\nconst logsResponse=await axios.get(`${API_URL}/attendance/student/${user._id}/logs`,{headers:{Authorization:`Bearer ${token}`}});// Tính toán tổng số buổi đã tham gia\nconst totalAttended=scoresResponse.data.data.reduce((total,score)=>total+(score.total_sessions-score.absent_sessions),0);const totalSessions=scoresResponse.data.data.reduce((total,score)=>total+score.total_sessions,0);// Lọc phiên điểm danh hôm nay\nconst today=new Date();today.setHours(0,0,0,0);const todayAttendance=logsResponse.data.data.filter(log=>{const logDate=new Date(log.timestamp);logDate.setHours(0,0,0,0);return logDate.getTime()===today.getTime();});setStats({classes:classesResponse.data.data||[],attendanceSessions:logsResponse.data.data||[],todayAttendance,totalAttendedSessions:totalAttended,totalSessions,attendancePercentage:totalSessions>0?Math.round(totalAttended/totalSessions*100):0});}else if(user.role===\"teacher\"){// Dữ liệu cho giáo viên\n// Lấy các lớp do giáo viên dạy\nconst classesResponse=await axios.get(`${API_URL}/classes/teaching?teacher=${user._id}`,{headers:{Authorization:`Bearer ${token}`}});// Lấy các phiên điểm danh gần đây\nconst sessionsResponse=await axios.get(`${API_URL}/attendance/sessions?teacher=${user._id}&limit=5`,{headers:{Authorization:`Bearer ${token}`}});// Lọc phiên điểm danh hôm nay\nconst today=new Date();today.setHours(0,0,0,0);const todayAttendance=sessionsResponse.data.data.filter(session=>{const sessionDate=new Date(session.date);sessionDate.setHours(0,0,0,0);return sessionDate.getTime()===today.getTime();});setStats({classes:classesResponse.data.data||[],attendanceSessions:sessionsResponse.data.data||[],todayAttendance,totalClasses:classesResponse.data.data.length});}else if(user.role===\"admin\"){// Dữ liệu cho admin\n// Lấy tổng số lớp học\nconst classesResponse=await axios.get(`${API_URL}/classes/teaching?limit=5`,{headers:{Authorization:`Bearer ${token}`}});// Lấy tổng số người dùng\nconst usersResponse=await axios.get(`${API_URL}/users/stats`,{headers:{Authorization:`Bearer ${token}`}});// Lấy các phiên điểm danh gần đây\nconst sessionsResponse=await axios.get(`${API_URL}/attendance/sessions?limit=5`,{headers:{Authorization:`Bearer ${token}`}});setStats({classes:classesResponse.data.data||[],attendanceSessions:sessionsResponse.data.data||[],totalClasses:classesResponse.data.totalCount||0,totalUsers:usersResponse.data.totalUsers||0,totalStudents:usersResponse.data.students||0,totalTeachers:usersResponse.data.teachers||0});}setIsLoading(false);}catch(error){console.error(\"Lỗi khi tải dữ liệu dashboard:\",error);setIsLoading(false);}};fetchDashboardData();},[user,token]);if(isLoading){return/*#__PURE__*/_jsx(Box,{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",minHeight:\"60vh\",children:/*#__PURE__*/_jsx(CircularProgress,{})});}// Render dựa trên vai trò\nconst renderContent=()=>{switch(user.role){case\"student\":return renderStudentDashboard();case\"teacher\":return renderTeacherDashboard();case\"admin\":return renderAdminDashboard();default:return/*#__PURE__*/_jsx(Typography,{children:\"Vai tr\\xF2 kh\\xF4ng h\\u1EE3p l\\u1EC7\"});}};// Dashboard cho sinh viên\nconst renderStudentDashboard=()=>{var _user$faceFeatures,_user$faceFeatures$de;return/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:8,children:[/*#__PURE__*/_jsxs(Paper,{sx:{p:2,mb:3},children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",mb:2,children:[/*#__PURE__*/_jsx(Person,{sx:{fontSize:40,mr:2,color:\"primary.main\"}}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h5\",children:[\"Xin ch\\xE0o, \",user.full_name,\"!\"]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"textSecondary\",children:[\"M\\xE3 sinh vi\\xEAn: \",user.student_code]})]})]}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",gutterBottom:true,children:\"S\\u1ED1 l\\u1EDBp \\u0111ang h\\u1ECDc\"}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(School,{sx:{fontSize:32,mr:2,color:\"primary.main\"}}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:stats.classes.length})]})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",gutterBottom:true,children:\"T\\u1EF7 l\\u1EC7 tham gia\"}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(CheckCircle,{sx:{fontSize:32,mr:2,color:\"success.main\"}}),/*#__PURE__*/_jsxs(Typography,{variant:\"h4\",children:[stats.attendancePercentage,\"%\"]})]})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",gutterBottom:true,children:\"Bu\\u1ED5i \\u0111\\xE3 tham gia\"}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(EventAvailable,{sx:{fontSize:32,mr:2,color:\"info.main\"}}),/*#__PURE__*/_jsxs(Typography,{variant:\"h4\",children:[stats.totalAttendedSessions,\"/\",stats.totalSessions]})]})]})})})]})]}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"C\\xE1c l\\u1EDBp h\\u1ECDc c\\u1EE7a b\\u1EA1n\"}),stats.classes.length===0?/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:\"B\\u1EA1n ch\\u01B0a tham gia l\\u1EDBp h\\u1ECDc n\\xE0o\"}):/*#__PURE__*/_jsx(Grid,{container:true,spacing:2,children:stats.classes.map(classItem=>{var _classItem$course_id,_classItem$teacher_id;return/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsxs(Card,{variant:\"outlined\",children:[/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",noWrap:true,children:classItem.class_name}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",noWrap:true,children:((_classItem$course_id=classItem.course_id)===null||_classItem$course_id===void 0?void 0:_classItem$course_id.name)||\"N/A\"}),/*#__PURE__*/_jsxs(Box,{mt:1,display:\"flex\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(Person,{sx:{mr:1,fontSize:18}}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:((_classItem$teacher_id=classItem.teacher_id)===null||_classItem$teacher_id===void 0?void 0:_classItem$teacher_id.full_name)||\"Chưa có giáo viên\"})]})]}),/*#__PURE__*/_jsx(CardActions,{children:/*#__PURE__*/_jsx(Button,{size:\"small\",onClick:()=>navigate(`/student/attendance/${classItem._id}`),children:\"Xem \\u0111i\\u1EC3m danh\"})})]})},classItem._id);})})]}),stats.classes.length>0&&/*#__PURE__*/_jsx(CardActions,{children:/*#__PURE__*/_jsx(Button,{size:\"small\",onClick:()=>navigate(\"/student/classes\"),children:\"Xem t\\u1EA5t c\\u1EA3 l\\u1EDBp h\\u1ECDc\"})})]})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:4,children:[/*#__PURE__*/_jsx(Card,{sx:{mb:3},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",gutterBottom:true,children:[\"H\\xF4m nay (\",new Date().toLocaleDateString(\"vi-VN\"),\")\"]}),stats.todayAttendance.length===0?/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:\"Kh\\xF4ng c\\xF3 \\u0111i\\u1EC3m danh n\\xE0o h\\xF4m nay\"}):/*#__PURE__*/_jsx(List,{dense:true,children:stats.todayAttendance.map(log=>{var _log$session_id,_log$session_id$teach;return/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemAvatar,{children:/*#__PURE__*/_jsx(Avatar,{children:/*#__PURE__*/_jsx(Event,{})})}),/*#__PURE__*/_jsx(ListItemText,{primary:(_log$session_id=log.session_id)===null||_log$session_id===void 0?void 0:(_log$session_id$teach=_log$session_id.teaching_class_id)===null||_log$session_id$teach===void 0?void 0:_log$session_id$teach.class_name,secondary:`${new Date(log.timestamp).toLocaleTimeString(\"vi-VN\")} - ${log.status===\"present\"?\"Có mặt\":\"Vắng mặt\"}`}),/*#__PURE__*/_jsx(Chip,{size:\"small\",color:log.status===\"present\"?\"success\":\"error\",label:log.status===\"present\"?\"Có mặt\":\"Vắng mặt\"})]},log._id);})})]})}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"\\u0110i\\u1EC3m danh g\\u1EA7n \\u0111\\xE2y\"}),stats.attendanceSessions.length===0?/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:\"Ch\\u01B0a c\\xF3 l\\u1ECBch s\\u1EED \\u0111i\\u1EC3m danh\"}):/*#__PURE__*/_jsx(List,{dense:true,children:stats.attendanceSessions.slice(0,5).map(log=>{var _log$session_id2,_log$session_id2$teac;return/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemAvatar,{children:/*#__PURE__*/_jsx(Avatar,{children:/*#__PURE__*/_jsx(Event,{})})}),/*#__PURE__*/_jsx(ListItemText,{primary:(_log$session_id2=log.session_id)===null||_log$session_id2===void 0?void 0:(_log$session_id2$teac=_log$session_id2.teaching_class_id)===null||_log$session_id2$teac===void 0?void 0:_log$session_id2$teac.class_name,secondary:`${new Date(log.timestamp).toLocaleDateString(\"vi-VN\")} - ${log.status===\"present\"?\"Có mặt\":\"Vắng mặt\"}`}),/*#__PURE__*/_jsx(Chip,{size:\"small\",color:log.status===\"present\"?\"success\":\"error\",label:log.status===\"present\"?\"Có mặt\":\"Vắng mặt\"})]},log._id);})})]}),!((_user$faceFeatures=user.faceFeatures)!==null&&_user$faceFeatures!==void 0&&(_user$faceFeatures$de=_user$faceFeatures.descriptors)!==null&&_user$faceFeatures$de!==void 0&&_user$faceFeatures$de.length)&&/*#__PURE__*/_jsxs(Box,{p:2,bgcolor:\"action.hover\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",gutterBottom:true,children:\"B\\u1EA1n ch\\u01B0a \\u0111\\u0103ng k\\xFD khu\\xF4n m\\u1EB7t cho \\u0111i\\u1EC3m danh t\\u1EF1 \\u0111\\u1ED9ng\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",startIcon:/*#__PURE__*/_jsx(Face,{}),size:\"small\",onClick:()=>navigate(\"/register-face\"),children:\"\\u0110\\u0103ng k\\xFD ngay\"})]})]})]})]});};// Dashboard cho giáo viên\nconst renderTeacherDashboard=()=>/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:8,children:[/*#__PURE__*/_jsxs(Paper,{sx:{p:2,mb:3},children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",mb:2,children:[/*#__PURE__*/_jsx(Person,{sx:{fontSize:40,mr:2,color:\"primary.main\"}}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h5\",children:[\"Xin ch\\xE0o, \",user.full_name,\"!\"]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"textSecondary\",children:[\"M\\xE3 gi\\u1EA3ng vi\\xEAn: \",user.teacher_code]})]})]}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",gutterBottom:true,children:\"S\\u1ED1 l\\u1EDBp \\u0111ang d\\u1EA1y\"}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(School,{sx:{fontSize:32,mr:2,color:\"primary.main\"}}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:stats.classes.length})]})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",gutterBottom:true,children:\"\\u0110ang di\\u1EC5n ra h\\xF4m nay\"}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(Today,{sx:{fontSize:32,mr:2,color:\"success.main\"}}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:stats.todayAttendance.length})]})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",gutterBottom:true,children:\"Phi\\xEAn g\\u1EA7n \\u0111\\xE2y\"}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(AccessTime,{sx:{fontSize:32,mr:2,color:\"info.main\"}}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:stats.attendanceSessions.length})]})]})})})]})]}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"C\\xE1c l\\u1EDBp b\\u1EA1n \\u0111ang d\\u1EA1y\"}),stats.classes.length===0?/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:\"B\\u1EA1n ch\\u01B0a \\u0111\\u01B0\\u1EE3c ph\\xE2n c\\xF4ng l\\u1EDBp h\\u1ECDc n\\xE0o\"}):/*#__PURE__*/_jsx(Grid,{container:true,spacing:2,children:stats.classes.map(classItem=>{var _classItem$course_id2,_classItem$students;return/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsxs(Card,{variant:\"outlined\",children:[/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",noWrap:true,children:classItem.class_name}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",noWrap:true,children:((_classItem$course_id2=classItem.course_id)===null||_classItem$course_id2===void 0?void 0:_classItem$course_id2.name)||\"N/A\"}),/*#__PURE__*/_jsxs(Box,{mt:1,display:\"flex\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(People,{sx:{mr:1,fontSize:18}}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[((_classItem$students=classItem.students)===null||_classItem$students===void 0?void 0:_classItem$students.length)||0,\" sinh vi\\xEAn\"]})]})]}),/*#__PURE__*/_jsx(CardActions,{children:/*#__PURE__*/_jsx(Button,{size:\"small\",onClick:()=>navigate(`/teacher/classes/${classItem._id}`),children:\"Chi ti\\u1EBFt\"})})]})},classItem._id);})})]}),stats.classes.length>0&&/*#__PURE__*/_jsx(CardActions,{children:/*#__PURE__*/_jsx(Button,{size:\"small\",onClick:()=>navigate(\"/teacher/classes\"),children:\"Xem t\\u1EA5t c\\u1EA3 l\\u1EDBp h\\u1ECDc\"})})]})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:4,children:[/*#__PURE__*/_jsxs(Card,{sx:{mb:3},children:[/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",gutterBottom:true,children:[\"H\\xF4m nay (\",new Date().toLocaleDateString(\"vi-VN\"),\")\"]}),stats.todayAttendance.length===0?/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:\"Kh\\xF4ng c\\xF3 phi\\xEAn \\u0111i\\u1EC3m danh n\\xE0o h\\xF4m nay\"}):/*#__PURE__*/_jsx(List,{dense:true,children:stats.todayAttendance.map(session=>{var _session$teaching_cla;return/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemAvatar,{children:/*#__PURE__*/_jsx(Avatar,{children:/*#__PURE__*/_jsx(Event,{})})}),/*#__PURE__*/_jsx(ListItemText,{primary:(_session$teaching_cla=session.teaching_class_id)===null||_session$teaching_cla===void 0?void 0:_session$teaching_cla.class_name,secondary:`Buổi ${session.session_number} - ${session.status===\"active\"?\"Đang diễn ra\":\"Đã kết thúc\"}`}),/*#__PURE__*/_jsx(Chip,{size:\"small\",color:session.status===\"active\"?\"success\":\"default\",label:session.status===\"active\"?\"Đang diễn ra\":\"Đã kết thúc\"})]},session._id);})})]}),/*#__PURE__*/_jsx(CardActions,{children:/*#__PURE__*/_jsx(Button,{size:\"small\",onClick:()=>navigate(\"/teacher/classes\"),children:\"T\\u1EA1o phi\\xEAn \\u0111i\\u1EC3m danh m\\u1EDBi\"})})]}),/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Phi\\xEAn \\u0111i\\u1EC3m danh g\\u1EA7n \\u0111\\xE2y\"}),stats.attendanceSessions.length===0?/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:\"Ch\\u01B0a c\\xF3 phi\\xEAn \\u0111i\\u1EC3m danh n\\xE0o\"}):/*#__PURE__*/_jsx(List,{dense:true,children:stats.attendanceSessions.slice(0,5).map(session=>{var _session$teaching_cla2;return/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemAvatar,{children:/*#__PURE__*/_jsx(Avatar,{children:/*#__PURE__*/_jsx(Event,{})})}),/*#__PURE__*/_jsx(ListItemText,{primary:(_session$teaching_cla2=session.teaching_class_id)===null||_session$teaching_cla2===void 0?void 0:_session$teaching_cla2.class_name,secondary:`Buổi ${session.session_number} - ${new Date(session.date).toLocaleDateString(\"vi-VN\")}`}),/*#__PURE__*/_jsx(Chip,{size:\"small\",color:session.status===\"active\"?\"success\":\"default\",label:session.status===\"active\"?\"Đang diễn ra\":\"Đã kết thúc\"})]},session._id);})})]})})]})]});// Dashboard cho admin\nconst renderAdminDashboard=()=>/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(Paper,{sx:{p:2,mb:3},children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",mb:2,children:[/*#__PURE__*/_jsx(Person,{sx:{fontSize:40,mr:2,color:\"primary.main\"}}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h5\",children:[\"Xin ch\\xE0o, \",user.full_name,\"!\"]}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:\"Qu\\u1EA3n tr\\u1ECB vi\\xEAn h\\u1EC7 th\\u1ED1ng\"})]})]}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",gutterBottom:true,children:\"T\\u1ED5ng s\\u1ED1 l\\u1EDBp h\\u1ECDc\"}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(School,{sx:{fontSize:32,mr:2,color:\"primary.main\"}}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:stats.totalClasses||0})]})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",gutterBottom:true,children:\"T\\u1ED5ng s\\u1ED1 ng\\u01B0\\u1EDDi d\\xF9ng\"}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(People,{sx:{fontSize:32,mr:2,color:\"secondary.main\"}}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:stats.totalUsers||0})]})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",gutterBottom:true,children:\"Sinh vi\\xEAn\"}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(Person,{sx:{fontSize:32,mr:2,color:\"success.main\"}}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:stats.totalStudents||0})]})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",gutterBottom:true,children:\"Gi\\xE1o vi\\xEAn\"}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(Person,{sx:{fontSize:32,mr:2,color:\"info.main\"}}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:stats.totalTeachers||0})]})]})})})]})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"L\\u1EDBp h\\u1ECDc g\\u1EA7n \\u0111\\xE2y\"}),stats.classes.length===0?/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:\"Ch\\u01B0a c\\xF3 l\\u1EDBp h\\u1ECDc n\\xE0o\"}):/*#__PURE__*/_jsx(List,{dense:true,children:stats.classes.map(classItem=>{var _classItem$course_id3,_classItem$teacher_id2;return/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemAvatar,{children:/*#__PURE__*/_jsx(Avatar,{children:/*#__PURE__*/_jsx(Class,{})})}),/*#__PURE__*/_jsx(ListItemText,{primary:classItem.class_name,secondary:`${((_classItem$course_id3=classItem.course_id)===null||_classItem$course_id3===void 0?void 0:_classItem$course_id3.name)||\"N/A\"} - GV: ${((_classItem$teacher_id2=classItem.teacher_id)===null||_classItem$teacher_id2===void 0?void 0:_classItem$teacher_id2.full_name)||\"Chưa phân công\"}`})]},classItem._id);})})]}),/*#__PURE__*/_jsx(CardActions,{children:/*#__PURE__*/_jsx(Button,{size:\"small\",onClick:()=>navigate(\"/admin/classes\"),children:\"Qu\\u1EA3n l\\xFD l\\u1EDBp h\\u1ECDc\"})})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Phi\\xEAn \\u0111i\\u1EC3m danh g\\u1EA7n \\u0111\\xE2y\"}),stats.attendanceSessions.length===0?/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:\"Ch\\u01B0a c\\xF3 phi\\xEAn \\u0111i\\u1EC3m danh n\\xE0o\"}):/*#__PURE__*/_jsx(List,{dense:true,children:stats.attendanceSessions.slice(0,5).map(session=>{var _session$teaching_cla3;return/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemAvatar,{children:/*#__PURE__*/_jsx(Avatar,{children:/*#__PURE__*/_jsx(Event,{})})}),/*#__PURE__*/_jsx(ListItemText,{primary:(_session$teaching_cla3=session.teaching_class_id)===null||_session$teaching_cla3===void 0?void 0:_session$teaching_cla3.class_name,secondary:`Buổi ${session.session_number} - ${new Date(session.date).toLocaleDateString(\"vi-VN\")}`}),/*#__PURE__*/_jsx(Chip,{size:\"small\",color:session.status===\"active\"?\"success\":\"default\",label:session.status===\"active\"?\"Đang diễn ra\":\"Đã kết thúc\"})]},session._id);})})]}),/*#__PURE__*/_jsx(CardActions,{children:/*#__PURE__*/_jsx(Button,{size:\"small\",onClick:()=>navigate(\"/admin/users\"),children:\"Qu\\u1EA3n l\\xFD ng\\u01B0\\u1EDDi d\\xF9ng\"})})]})})]});return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,children:\"Trang ch\\u1EE7\"}),/*#__PURE__*/_jsx(Divider,{sx:{mb:3}}),renderContent()]});};export default DashboardPage;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}