{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kasiz\\\\Documents\\\\Studying\\\\FaceReg\\\\frontend\\\\src\\\\pages\\\\FaceRegistrationPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, lazy, Suspense } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useSnackbar } from \"notistack\";\nimport axios from \"axios\";\n// Lazy load Webcam để giảm kích thước ban đầu\nconst Webcam = /*#__PURE__*/lazy(_c = () => import(\"react-webcam\"));\n// Lazy load face-api.js và các utility\n_c2 = Webcam;\nimport { loadModels, detectFace } from \"../utils/faceUtils\";\nimport { getCurrentUser } from \"../redux/slices/authSlice\";\nimport { Box, Typography, Paper, Button, Stepper, Step, StepLabel, StepContent, CircularProgress, Alert, Card, CardContent, Grid, Divider, List, ListItem, ListItemIcon, ListItemText, Dialog, DialogTitle, DialogContent, DialogActions } from \"@mui/material\";\nimport { Camera, Check, Face, Info, ViewArray, SaveAlt, Error, CheckCircle, ArrowBack, Help, CameraAlt, Person } from \"@mui/icons-material\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst API_URL = process.env.REACT_APP_API_URL || \"http://localhost:5000/api\";\nconst FaceRegistrationPage = () => {\n  _s();\n  var _webcamRef$current2, _webcamRef$current2$v;\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const {\n    enqueueSnackbar\n  } = useSnackbar();\n  const {\n    user,\n    token\n  } = useSelector(state => state.auth);\n\n  // Refs\n  const webcamRef = useRef(null);\n  const canvasRef = useRef(null);\n\n  // State\n  const [isLoading, setIsLoading] = useState(false);\n  const [activeStep, setActiveStep] = useState(0);\n  const [modelsLoaded, setModelsLoaded] = useState(false);\n  const [isCameraReady, setIsCameraReady] = useState(false);\n  const [capturedImages, setCapturedImages] = useState([]);\n  const [detectedFace, setDetectedFace] = useState(null);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [success, setSuccess] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [showHelpDialog, setShowHelpDialog] = useState(false);\n\n  // Kiểm tra xem user đã đăng ký khuôn mặt chưa\n  useEffect(() => {\n    if (user !== null && user !== void 0 && user.face_registered) {\n      enqueueSnackbar(\"Bạn đã đăng ký khuôn mặt trước đó\", {\n        variant: \"info\"\n      });\n    }\n  }, [user, enqueueSnackbar]);\n\n  // Load các model nhận diện khuôn mặt khi cần thiết (chỉ khi đến bước chụp ảnh)\n  useEffect(() => {\n    const initModels = async () => {\n      if (activeStep === 1 && !modelsLoaded) {\n        try {\n          setIsLoading(true);\n          await loadModels();\n          setModelsLoaded(true);\n          enqueueSnackbar(\"Đã tải mô hình nhận diện khuôn mặt\", {\n            variant: \"success\"\n          });\n        } catch (error) {\n          console.error(\"Lỗi khi tải mô hình:\", error);\n          setError(\"Không thể tải mô hình nhận diện khuôn mặt. Vui lòng tải lại trang.\");\n          enqueueSnackbar(\"Lỗi khi tải mô hình nhận diện\", {\n            variant: \"error\"\n          });\n        } finally {\n          setIsLoading(false);\n        }\n      }\n    };\n    initModels();\n  }, [activeStep, modelsLoaded, enqueueSnackbar]);\n\n  // Kiểm tra camera đã sẵn sàng chưa\n  useEffect(() => {\n    var _webcamRef$current, _webcamRef$current$vi;\n    if (((_webcamRef$current = webcamRef.current) === null || _webcamRef$current === void 0 ? void 0 : (_webcamRef$current$vi = _webcamRef$current.video) === null || _webcamRef$current$vi === void 0 ? void 0 : _webcamRef$current$vi.readyState) === 4) {\n      setIsCameraReady(true);\n    }\n  }, [(_webcamRef$current2 = webcamRef.current) === null || _webcamRef$current2 === void 0 ? void 0 : (_webcamRef$current2$v = _webcamRef$current2.video) === null || _webcamRef$current2$v === void 0 ? void 0 : _webcamRef$current2$v.readyState]);\n\n  // Xử lý chuyển bước\n  const handleNext = () => {\n    setActiveStep(prevActiveStep => prevActiveStep + 1);\n  };\n  const handleBack = () => {\n    setActiveStep(prevActiveStep => prevActiveStep - 1);\n  };\n\n  // Chụp và phát hiện khuôn mặt\n  const captureImage = async () => {\n    if (!webcamRef.current || !isCameraReady) {\n      enqueueSnackbar(\"Camera chưa sẵn sàng, vui lòng thử lại\", {\n        variant: \"warning\"\n      });\n      return;\n    }\n    try {\n      setIsProcessing(true);\n      // Chụp ảnh\n      const imageSrc = webcamRef.current.getScreenshot();\n      if (!imageSrc) {\n        enqueueSnackbar(\"Không thể chụp ảnh, vui lòng thử lại\", {\n          variant: \"error\"\n        });\n        setIsProcessing(false);\n        return;\n      }\n\n      // Phát hiện khuôn mặt\n      const detections = await detectFace(imageSrc);\n      if (!detections) {\n        enqueueSnackbar(\"Không phát hiện được khuôn mặt, vui lòng thử lại và đảm bảo khuôn mặt của bạn nằm trong khung hình\", {\n          variant: \"warning\"\n        });\n        setIsProcessing(false);\n        return;\n      }\n\n      // Lưu ảnh và thông tin khuôn mặt\n      setDetectedFace(detections);\n      setCapturedImages(prev => [...prev, {\n        img: imageSrc,\n        descriptor: Array.from(detections.descriptor)\n      }]);\n      enqueueSnackbar(`Đã chụp ảnh ${capturedImages.length + 1}/5`, {\n        variant: \"success\"\n      });\n\n      // Nếu đã đủ 5 ảnh thì chuyển bước tiếp theo\n      if (capturedImages.length + 1 >= 5) {\n        handleNext();\n      }\n    } catch (error) {\n      console.error(\"Lỗi khi chụp ảnh:\", error);\n      enqueueSnackbar(\"Đã xảy ra lỗi khi chụp ảnh\", {\n        variant: \"error\"\n      });\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  // Đăng ký khuôn mặt lên server\n  const registerFace = async () => {\n    try {\n      setIsProcessing(true);\n\n      // Chuẩn bị dữ liệu để gửi lên server\n      const faceData = {\n        descriptors: capturedImages.map(img => img.descriptor),\n        images: capturedImages.map(img => img.img)\n      };\n\n      // Gửi request đăng ký khuôn mặt\n      const response = await axios.post(`${API_URL}/face-recognition/register`, faceData, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          \"Content-Type\": \"application/json\"\n        }\n      });\n      if (response.data.success) {\n        enqueueSnackbar(\"Đăng ký khuôn mặt thành công\", {\n          variant: \"success\"\n        });\n        setSuccess(true);\n        handleNext();\n\n        // Cập nhật thông tin user\n        dispatch(getCurrentUser());\n      } else {\n        setError(\"Không thể đăng ký khuôn mặt. Vui lòng thử lại.\");\n        enqueueSnackbar(\"Đăng ký khuôn mặt thất bại\", {\n          variant: \"error\"\n        });\n      }\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error(\"Lỗi khi đăng ký khuôn mặt:\", error);\n      setError(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || \"Không thể đăng ký khuôn mặt. Vui lòng thử lại.\");\n      enqueueSnackbar(\"Đăng ký khuôn mặt thất bại\", {\n        variant: \"error\"\n      });\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  // Reset lại quá trình\n  const handleReset = () => {\n    setCapturedImages([]);\n    setDetectedFace(null);\n    setActiveStep(0);\n    setError(\"\");\n    setSuccess(false);\n  };\n\n  // Quay lại trang danh sách lớp\n  const navigateToClasses = () => {\n    navigate(\"/student/classes\");\n  };\n\n  // Các bước đăng ký khuôn mặt\n  const steps = [{\n    label: \"Chuẩn bị\",\n    description: \"Chuẩn bị camera và kiểm tra kết nối\",\n    content: /*#__PURE__*/_jsxDEV(Box, {\n      children: [/*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"info\",\n        sx: {\n          mb: 2\n        },\n        children: \"Vui l\\xF2ng \\u0111\\u1EA3m b\\u1EA3o b\\u1EA1n \\u0111ang \\u1EDF trong m\\xF4i tr\\u01B0\\u1EDDng c\\xF3 \\xE1nh s\\xE1ng t\\u1ED1t v\\xE0 camera ho\\u1EA1t \\u0111\\u1ED9ng b\\xECnh th\\u01B0\\u1EDDng.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 2,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          md: 6,\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            children: /*#__PURE__*/_jsxDEV(CardContent, {\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h6\",\n                gutterBottom: true,\n                children: \"H\\u01B0\\u1EDBng d\\u1EABn\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 260,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Divider, {\n                sx: {\n                  my: 1\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 263,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(List, {\n                dense: true,\n                children: [/*#__PURE__*/_jsxDEV(ListItem, {\n                  children: [/*#__PURE__*/_jsxDEV(ListItemIcon, {\n                    children: /*#__PURE__*/_jsxDEV(Info, {\n                      fontSize: \"small\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 267,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 266,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n                    primary: \"\\u0110\\u1EE9ng \\u1EDF n\\u01A1i c\\xF3 \\xE1nh s\\xE1ng t\\u1ED1t, nh\\xECn th\\u1EB3ng v\\xE0o camera\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 269,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 265,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(ListItem, {\n                  children: [/*#__PURE__*/_jsxDEV(ListItemIcon, {\n                    children: /*#__PURE__*/_jsxDEV(Info, {\n                      fontSize: \"small\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 273,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 272,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n                    primary: \"Kh\\xF4ng \\u0111eo k\\xEDnh, m\\u0169 ho\\u1EB7c kh\\u1EA9u trang khi \\u0111\\u0103ng k\\xFD\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 275,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 271,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(ListItem, {\n                  children: [/*#__PURE__*/_jsxDEV(ListItemIcon, {\n                    children: /*#__PURE__*/_jsxDEV(Info, {\n                      fontSize: \"small\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 279,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 278,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n                    primary: \"Gi\\u1EEF khu\\xF4n m\\u1EB7t chi\\u1EBFm kho\\u1EA3ng 70% khung h\\xECnh\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 281,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 277,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(ListItem, {\n                  children: [/*#__PURE__*/_jsxDEV(ListItemIcon, {\n                    children: /*#__PURE__*/_jsxDEV(Info, {\n                      fontSize: \"small\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 285,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 284,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n                    primary: \"B\\u1EA1n s\\u1EBD c\\u1EA7n ch\\u1EE5p 5 \\u1EA3nh \\u1EDF c\\xE1c g\\xF3c \\u0111\\u1ED9 kh\\xE1c nhau\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 287,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 283,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 264,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          md: 6,\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            children: /*#__PURE__*/_jsxDEV(CardContent, {\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h6\",\n                gutterBottom: true,\n                children: \"Tr\\u1EA1ng th\\xE1i\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 296,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Divider, {\n                sx: {\n                  my: 1\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 299,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(List, {\n                children: [/*#__PURE__*/_jsxDEV(ListItem, {\n                  children: [/*#__PURE__*/_jsxDEV(ListItemIcon, {\n                    children: activeStep >= 1 ? modelsLoaded ? /*#__PURE__*/_jsxDEV(Check, {\n                      color: \"success\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 305,\n                      columnNumber: 29\n                    }, this) : /*#__PURE__*/_jsxDEV(CircularProgress, {\n                      size: 20\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 307,\n                      columnNumber: 29\n                    }, this) : /*#__PURE__*/_jsxDEV(Info, {\n                      color: \"disabled\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 310,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 302,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n                    primary: \"T\\u1EA3i m\\xF4 h\\xECnh nh\\u1EADn di\\u1EC7n\",\n                    secondary: activeStep >= 1 ? modelsLoaded ? \"Đã tải xong\" : \"Đang tải, vui lòng đợi...\" : \"Sẽ tải khi bắt đầu chụp ảnh\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 313,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 301,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(ListItem, {\n                  children: [/*#__PURE__*/_jsxDEV(ListItemIcon, {\n                    children: isCameraReady ? /*#__PURE__*/_jsxDEV(Check, {\n                      color: \"success\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 327,\n                      columnNumber: 27\n                    }, this) : /*#__PURE__*/_jsxDEV(CircularProgress, {\n                      size: 20\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 329,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 325,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n                    primary: \"Ki\\u1EC3m tra camera\",\n                    secondary: isCameraReady ? \"Camera đã sẵn sàng\" : \"Đang kết nối với camera...\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 332,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 324,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 300,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          mt: 2,\n          textAlign: \"right\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outlined\",\n          onClick: () => setShowHelpDialog(true),\n          sx: {\n            mr: 1\n          },\n          children: \"Xem h\\u01B0\\u1EDBng d\\u1EABn chi ti\\u1EBFt\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          onClick: handleNext,\n          disabled: !isCameraReady,\n          children: \"Ti\\u1EBFp t\\u1EE5c\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 9\n    }, this)\n  }, {\n    label: \"Chụp ảnh khuôn mặt\",\n    description: \"Chụp 5 ảnh khuôn mặt để đăng ký\",\n    content: /*#__PURE__*/_jsxDEV(Box, {\n      children: [/*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"info\",\n        sx: {\n          mb: 2\n        },\n        children: \"Vui l\\xF2ng ch\\u1EE5p 5 \\u1EA3nh khu\\xF4n m\\u1EB7t \\u1EDF c\\xE1c g\\xF3c \\u0111\\u1ED9 kh\\xE1c nhau (nh\\xECn th\\u1EB3ng, nghi\\xEAng tr\\xE1i, nghi\\xEAng ph\\u1EA3i, h\\u01A1i ng\\u01B0\\u1EDBc l\\xEAn, h\\u01A1i c\\xFAi xu\\u1ED1ng).\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 2,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          md: 8,\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              position: \"relative\",\n              width: \"100%\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(Suspense, {\n              fallback: /*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  display: \"flex\",\n                  justifyContent: \"center\",\n                  alignItems: \"center\",\n                  height: 300\n                },\n                children: [/*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 387,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  sx: {\n                    ml: 2\n                  },\n                  children: \"\\u0110ang t\\u1EA3i camera...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 388,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 379,\n                columnNumber: 21\n              }, this),\n              children: /*#__PURE__*/_jsxDEV(Webcam, {\n                audio: false,\n                ref: webcamRef,\n                screenshotFormat: \"image/jpeg\",\n                videoConstraints: {\n                  width: 640,\n                  height: 480,\n                  facingMode: \"user\"\n                },\n                style: {\n                  width: \"100%\",\n                  borderRadius: \"8px\",\n                  border: \"1px solid #ddd\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 392,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 377,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n              ref: canvasRef,\n              style: {\n                position: \"absolute\",\n                top: 0,\n                left: 0,\n                zIndex: 1\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 408,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              mt: 2,\n              textAlign: \"center\"\n            },\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"contained\",\n              color: \"primary\",\n              startIcon: /*#__PURE__*/_jsxDEV(CameraAlt, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 422,\n                columnNumber: 30\n              }, this),\n              onClick: captureImage,\n              disabled: !isCameraReady || isProcessing || capturedImages.length >= 5 || !modelsLoaded,\n              children: isProcessing ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(CircularProgress, {\n                  size: 24,\n                  sx: {\n                    mr: 1\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 433,\n                  columnNumber: 23\n                }, this), \"\\u0110ang x\\u1EED l\\xFD...\"]\n              }, void 0, true) : !modelsLoaded ? \"Đang tải mô hình...\" : \"Chụp ảnh\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 419,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          md: 4,\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            children: /*#__PURE__*/_jsxDEV(CardContent, {\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h6\",\n                gutterBottom: true,\n                children: [\"\\u1EA2nh \\u0111\\xE3 ch\\u1EE5p (\", capturedImages.length, \"/5)\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 447,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Divider, {\n                sx: {\n                  my: 1\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 450,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  display: \"flex\",\n                  flexDirection: \"column\",\n                  gap: 1,\n                  maxHeight: 320,\n                  overflow: \"auto\"\n                },\n                children: capturedImages.length > 0 ? capturedImages.map((img, index) => /*#__PURE__*/_jsxDEV(Box, {\n                  sx: {\n                    border: \"1px solid #ddd\",\n                    borderRadius: \"4px\",\n                    overflow: \"hidden\"\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: img.img,\n                    alt: `Ảnh ${index + 1}`,\n                    style: {\n                      width: \"100%\"\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 470,\n                    columnNumber: 27\n                  }, this)\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 462,\n                  columnNumber: 25\n                }, this)) : /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body2\",\n                  sx: {\n                    textAlign: \"center\",\n                    py: 2\n                  },\n                  children: \"Ch\\u01B0a c\\xF3 \\u1EA3nh n\\xE0o\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 478,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 451,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 446,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 445,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 444,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          mt: 2,\n          display: \"flex\",\n          justifyContent: \"space-between\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleBack,\n          children: \"Quay l\\u1EA1i\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 491,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          onClick: handleNext,\n          disabled: capturedImages.length < 5,\n          children: \"Ti\\u1EBFp t\\u1EE5c\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 492,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 490,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 9\n    }, this)\n  }, {\n    label: \"Xác nhận và hoàn tất\",\n    description: \"Xác nhận thông tin và hoàn tất đăng ký\",\n    content: /*#__PURE__*/_jsxDEV(Box, {\n      children: [/*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"info\",\n        sx: {\n          mb: 2\n        },\n        children: \"Vui l\\xF2ng xem l\\u1EA1i th\\xF4ng tin v\\xE0 \\u1EA3nh \\u0111\\xE3 ch\\u1EE5p tr\\u01B0\\u1EDBc khi ho\\xE0n t\\u1EA5t \\u0111\\u0103ng k\\xFD.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 508,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 2,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          md: 6,\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            children: /*#__PURE__*/_jsxDEV(CardContent, {\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h6\",\n                gutterBottom: true,\n                children: \"Th\\xF4ng tin \\u0111\\u0103ng k\\xFD\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 516,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Divider, {\n                sx: {\n                  my: 1\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 519,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(List, {\n                children: [/*#__PURE__*/_jsxDEV(ListItem, {\n                  children: [/*#__PURE__*/_jsxDEV(ListItemIcon, {\n                    children: /*#__PURE__*/_jsxDEV(Person, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 523,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 522,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n                    primary: \"H\\u1ECD v\\xE0 t\\xEAn\",\n                    secondary: (user === null || user === void 0 ? void 0 : user.full_name) || \"N/A\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 525,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 521,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(ListItem, {\n                  children: [/*#__PURE__*/_jsxDEV(ListItemIcon, {\n                    children: /*#__PURE__*/_jsxDEV(Face, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 532,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 531,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n                    primary: \"S\\u1ED1 \\u1EA3nh \\u0111\\xE3 ch\\u1EE5p\",\n                    secondary: `${capturedImages.length} ảnh`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 534,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 530,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 520,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 515,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 514,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 513,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          md: 6,\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            children: /*#__PURE__*/_jsxDEV(CardContent, {\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h6\",\n                gutterBottom: true,\n                children: \"Xem tr\\u01B0\\u1EDBc \\u1EA3nh\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 546,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Divider, {\n                sx: {\n                  my: 1\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 549,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  display: \"grid\",\n                  gridTemplateColumns: \"repeat(auto-fill, minmax(120px, 1fr))\",\n                  gap: 1\n                },\n                children: capturedImages.map((img, index) => /*#__PURE__*/_jsxDEV(Box, {\n                  sx: {\n                    border: \"1px solid #ddd\",\n                    borderRadius: \"4px\",\n                    overflow: \"hidden\"\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: img.img,\n                    alt: `Ảnh ${index + 1}`,\n                    style: {\n                      width: \"100%\"\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 567,\n                    columnNumber: 25\n                  }, this)\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 559,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 550,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 545,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 544,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 543,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 512,\n        columnNumber: 11\n      }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"error\",\n        sx: {\n          mt: 2\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 580,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          mt: 2,\n          display: \"flex\",\n          justifyContent: \"space-between\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleBack,\n          children: \"Quay l\\u1EA1i\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 585,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          onClick: registerFace,\n          disabled: isProcessing || capturedImages.length < 5,\n          startIcon: isProcessing ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 592,\n            columnNumber: 32\n          }, this) : /*#__PURE__*/_jsxDEV(SaveAlt, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 592,\n            columnNumber: 65\n          }, this),\n          children: isProcessing ? \"Đang xử lý...\" : \"Hoàn tất đăng ký\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 586,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 584,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 507,\n      columnNumber: 9\n    }, this)\n  }, {\n    label: \"Hoàn thành\",\n    description: \"Đăng ký khuôn mặt thành công\",\n    content: /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        textAlign: \"center\",\n        py: 3\n      },\n      children: success ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n          color: \"success\",\n          sx: {\n            fontSize: 64,\n            mb: 2\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 608,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          gutterBottom: true,\n          children: \"\\u0110\\u0103ng k\\xFD khu\\xF4n m\\u1EB7t th\\xE0nh c\\xF4ng!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 609,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body1\",\n          paragraph: true,\n          children: \"T\\u1EEB gi\\u1EDD b\\u1EA1n c\\xF3 th\\u1EC3 s\\u1EED d\\u1EE5ng t\\xEDnh n\\u0103ng \\u0111i\\u1EC3m danh b\\u1EB1ng khu\\xF4n m\\u1EB7t.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 612,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          onClick: navigateToClasses,\n          sx: {\n            mt: 2\n          },\n          children: \"Quay l\\u1EA1i danh s\\xE1ch l\\u1EDBp\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 615,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Error, {\n          color: \"error\",\n          sx: {\n            fontSize: 64,\n            mb: 2\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 626,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          gutterBottom: true,\n          children: \"\\u0110\\xE3 x\\u1EA3y ra l\\u1ED7i!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 627,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body1\",\n          paragraph: true,\n          children: error || \"Không thể đăng ký khuôn mặt. Vui lòng thử lại.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 630,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          onClick: handleReset,\n          sx: {\n            mt: 2\n          },\n          children: \"Th\\u1EED l\\u1EA1i\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 633,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 605,\n      columnNumber: 9\n    }, this)\n  }];\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      padding: 3\n    },\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        mb: 3\n      },\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        variant: \"outlined\",\n        startIcon: /*#__PURE__*/_jsxDEV(ArrowBack, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 653,\n          columnNumber: 22\n        }, this),\n        onClick: () => navigate(\"/student/classes\"),\n        sx: {\n          mb: 2\n        },\n        children: \"Quay l\\u1EA1i\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 651,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h4\",\n        gutterBottom: true,\n        children: \"\\u0110\\u0103ng k\\xFD khu\\xF4n m\\u1EB7t\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 659,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"subtitle1\",\n        color: \"text.secondary\",\n        children: \"\\u0110\\u0103ng k\\xFD khu\\xF4n m\\u1EB7t c\\u1EE7a b\\u1EA1n \\u0111\\u1EC3 s\\u1EED d\\u1EE5ng t\\xEDnh n\\u0103ng \\u0111i\\u1EC3m danh t\\u1EF1 \\u0111\\u1ED9ng\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 662,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 650,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Paper, {\n      sx: {\n        p: {\n          xs: 2,\n          md: 3\n        },\n        maxWidth: 1200,\n        mx: \"auto\",\n        overflow: \"hidden\"\n      },\n      children: isLoading && activeStep === 0 ? /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          py: 8\n        },\n        children: [/*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 684,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          sx: {\n            ml: 2\n          },\n          children: \"\\u0110ang t\\u1EA3i...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 685,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 676,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(Stepper, {\n        activeStep: activeStep,\n        orientation: \"vertical\",\n        children: steps.map((step, index) => /*#__PURE__*/_jsxDEV(Step, {\n          children: [/*#__PURE__*/_jsxDEV(StepLabel, {\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"subtitle1\",\n              children: step.label\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 694,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 693,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(StepContent, {\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              color: \"text.secondary\",\n              sx: {\n                mb: 2\n              },\n              children: step.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 697,\n              columnNumber: 19\n            }, this), step.content]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 696,\n            columnNumber: 17\n          }, this)]\n        }, step.label, true, {\n          fileName: _jsxFileName,\n          lineNumber: 692,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 690,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 667,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: showHelpDialog,\n      onClose: () => setShowHelpDialog(false),\n      maxWidth: \"md\",\n      fullWidth: true,\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        children: \"H\\u01B0\\u1EDBng d\\u1EABn \\u0111\\u0103ng k\\xFD khu\\xF4n m\\u1EB7t chi ti\\u1EBFt\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 719,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          gutterBottom: true,\n          children: \"C\\xE1c b\\u01B0\\u1EDBc \\u0111\\u0103ng k\\xFD khu\\xF4n m\\u1EB7t:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 721,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(List, {\n          children: [/*#__PURE__*/_jsxDEV(ListItem, {\n            children: [/*#__PURE__*/_jsxDEV(ListItemIcon, {\n              children: /*#__PURE__*/_jsxDEV(Check, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 727,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 726,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n              primary: \"B\\u01B0\\u1EDBc 1: Chu\\u1EA9n b\\u1ECB\",\n              secondary: \"\\u0110\\u1EA3m b\\u1EA3o b\\u1EA1n \\u0111ang \\u1EDF n\\u01A1i c\\xF3 \\xE1nh s\\xE1ng t\\u1ED1t v\\xE0 camera ho\\u1EA1t \\u0111\\u1ED9ng b\\xECnh th\\u01B0\\u1EDDng.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 729,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 725,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ListItem, {\n            children: [/*#__PURE__*/_jsxDEV(ListItemIcon, {\n              children: /*#__PURE__*/_jsxDEV(Camera, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 736,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 735,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n              primary: \"B\\u01B0\\u1EDBc 2: Ch\\u1EE5p \\u1EA3nh khu\\xF4n m\\u1EB7t\",\n              secondary: \"Ch\\u1EE5p 5 \\u1EA3nh khu\\xF4n m\\u1EB7t \\u1EDF c\\xE1c g\\xF3c \\u0111\\u1ED9 kh\\xE1c nhau.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 738,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 734,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ListItem, {\n            children: [/*#__PURE__*/_jsxDEV(ListItemIcon, {\n              children: /*#__PURE__*/_jsxDEV(ViewArray, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 745,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 744,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n              primary: \"B\\u01B0\\u1EDBc 3: X\\xE1c nh\\u1EADn th\\xF4ng tin\",\n              secondary: \"Xem l\\u1EA1i th\\xF4ng tin v\\xE0 \\u1EA3nh \\u0111\\xE3 ch\\u1EE5p.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 747,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 743,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ListItem, {\n            children: [/*#__PURE__*/_jsxDEV(ListItemIcon, {\n              children: /*#__PURE__*/_jsxDEV(SaveAlt, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 754,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 753,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n              primary: \"B\\u01B0\\u1EDBc 4: Ho\\xE0n t\\u1EA5t \\u0111\\u0103ng k\\xFD\",\n              secondary: \"Ho\\xE0n t\\u1EA5t qu\\xE1 tr\\xECnh \\u0111\\u0103ng k\\xFD khu\\xF4n m\\u1EB7t.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 756,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 752,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 724,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          gutterBottom: true,\n          sx: {\n            mt: 2\n          },\n          children: \"L\\u01B0u \\xFD khi ch\\u1EE5p \\u1EA3nh:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 763,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(List, {\n          children: [/*#__PURE__*/_jsxDEV(ListItem, {\n            children: [/*#__PURE__*/_jsxDEV(ListItemIcon, {\n              children: /*#__PURE__*/_jsxDEV(Info, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 769,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 768,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n              primary: \"\\xC1nh s\\xE1ng\",\n              secondary: \"\\u0110\\u1EA3m b\\u1EA3o khu\\xF4n m\\u1EB7t \\u0111\\u01B0\\u1EE3c chi\\u1EBFu s\\xE1ng t\\u1ED1t, tr\\xE1nh ng\\u01B0\\u1EE3c s\\xE1ng.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 771,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 767,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ListItem, {\n            children: [/*#__PURE__*/_jsxDEV(ListItemIcon, {\n              children: /*#__PURE__*/_jsxDEV(Info, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 778,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 777,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n              primary: \"G\\xF3c \\u0111\\u1ED9\",\n              secondary: \"Ch\\u1EE5p \\u1EDF c\\xE1c g\\xF3c \\u0111\\u1ED9 kh\\xE1c nhau: nh\\xECn th\\u1EB3ng, nghi\\xEAng tr\\xE1i, nghi\\xEAng ph\\u1EA3i, h\\u01A1i ng\\u01B0\\u1EDBc l\\xEAn, h\\u01A1i c\\xFAi xu\\u1ED1ng.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 780,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 776,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ListItem, {\n            children: [/*#__PURE__*/_jsxDEV(ListItemIcon, {\n              children: /*#__PURE__*/_jsxDEV(Info, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 787,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 786,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n              primary: \"Ph\\u1EE5 ki\\u1EC7n\",\n              secondary: \"Kh\\xF4ng \\u0111eo k\\xEDnh, m\\u0169, kh\\u1EA9u trang ho\\u1EB7c b\\u1EA5t k\\u1EF3 v\\u1EADt che khu\\xF4n m\\u1EB7t n\\xE0o.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 789,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 785,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ListItem, {\n            children: [/*#__PURE__*/_jsxDEV(ListItemIcon, {\n              children: /*#__PURE__*/_jsxDEV(Info, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 796,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 795,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n              primary: \"Kho\\u1EA3ng c\\xE1ch\",\n              secondary: \"Gi\\u1EEF khu\\xF4n m\\u1EB7t \\u1EDF kho\\u1EA3ng c\\xE1ch v\\u1EEBa ph\\u1EA3i, chi\\u1EBFm kho\\u1EA3ng 70% khung h\\xECnh.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 798,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 794,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 766,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 720,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => setShowHelpDialog(false),\n          children: \"\\u0110\\xF3ng\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 806,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 805,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 713,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 649,\n    columnNumber: 5\n  }, this);\n};\n_s(FaceRegistrationPage, \"l/l253rf3/gxLguDu2gVH2MM6cI=\", false, function () {\n  return [useNavigate, useDispatch, useSnackbar, useSelector];\n});\n_c3 = FaceRegistrationPage;\nexport default FaceRegistrationPage;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"Webcam$lazy\");\n$RefreshReg$(_c2, \"Webcam\");\n$RefreshReg$(_c3, \"FaceRegistrationPage\");","map":{"version":3,"names":["React","useState","useEffect","useRef","lazy","Suspense","useNavigate","useSelector","useDispatch","useSnackbar","axios","Webcam","_c","_c2","loadModels","detectFace","getCurrentUser","Box","Typography","Paper","Button","Stepper","Step","StepLabel","StepContent","CircularProgress","Alert","Card","CardContent","Grid","Divider","List","ListItem","ListItemIcon","ListItemText","Dialog","DialogTitle","DialogContent","DialogActions","Camera","Check","Face","Info","ViewArray","SaveAlt","Error","CheckCircle","ArrowBack","Help","CameraAlt","Person","jsxDEV","_jsxDEV","Fragment","_Fragment","API_URL","process","env","REACT_APP_API_URL","FaceRegistrationPage","_s","_webcamRef$current2","_webcamRef$current2$v","navigate","dispatch","enqueueSnackbar","user","token","state","auth","webcamRef","canvasRef","isLoading","setIsLoading","activeStep","setActiveStep","modelsLoaded","setModelsLoaded","isCameraReady","setIsCameraReady","capturedImages","setCapturedImages","detectedFace","setDetectedFace","isProcessing","setIsProcessing","success","setSuccess","error","setError","showHelpDialog","setShowHelpDialog","face_registered","variant","initModels","console","_webcamRef$current","_webcamRef$current$vi","current","video","readyState","handleNext","prevActiveStep","handleBack","captureImage","imageSrc","getScreenshot","detections","prev","img","descriptor","Array","from","length","registerFace","faceData","descriptors","map","images","response","post","headers","Authorization","data","_error$response","_error$response$data","message","handleReset","navigateToClasses","steps","label","description","content","children","severity","sx","mb","fileName","_jsxFileName","lineNumber","columnNumber","container","spacing","item","xs","md","gutterBottom","my","dense","fontSize","primary","color","size","secondary","mt","textAlign","onClick","mr","disabled","position","width","fallback","display","justifyContent","alignItems","height","ml","audio","ref","screenshotFormat","videoConstraints","facingMode","style","borderRadius","border","top","left","zIndex","startIcon","flexDirection","gap","maxHeight","overflow","index","src","alt","py","full_name","gridTemplateColumns","paragraph","padding","p","maxWidth","mx","orientation","step","open","onClose","fullWidth","_c3","$RefreshReg$"],"sources":["C:/Users/kasiz/Documents/Studying/FaceReg/frontend/src/pages/FaceRegistrationPage.js"],"sourcesContent":["import React, { useState, useEffect, useRef, lazy, Suspense } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { useSnackbar } from \"notistack\";\r\nimport axios from \"axios\";\r\n// Lazy load Webcam để giảm kích thước ban đầu\r\nconst Webcam = lazy(() => import(\"react-webcam\"));\r\n// Lazy load face-api.js và các utility\r\nimport { loadModels, detectFace } from \"../utils/faceUtils\";\r\nimport { getCurrentUser } from \"../redux/slices/authSlice\";\r\nimport {\r\n  Box,\r\n  Typography,\r\n  Paper,\r\n  Button,\r\n  Stepper,\r\n  Step,\r\n  StepLabel,\r\n  StepContent,\r\n  CircularProgress,\r\n  Alert,\r\n  Card,\r\n  CardContent,\r\n  Grid,\r\n  Divider,\r\n  List,\r\n  ListItem,\r\n  ListItemIcon,\r\n  ListItemText,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n} from \"@mui/material\";\r\nimport {\r\n  Camera,\r\n  Check,\r\n  Face,\r\n  Info,\r\n  ViewArray,\r\n  SaveAlt,\r\n  Error,\r\n  CheckCircle,\r\n  ArrowBack,\r\n  Help,\r\n  CameraAlt,\r\n  Person,\r\n} from \"@mui/icons-material\";\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL || \"http://localhost:5000/api\";\r\n\r\nconst FaceRegistrationPage = () => {\r\n  const navigate = useNavigate();\r\n  const dispatch = useDispatch();\r\n  const { enqueueSnackbar } = useSnackbar();\r\n  const { user, token } = useSelector((state) => state.auth);\r\n\r\n  // Refs\r\n  const webcamRef = useRef(null);\r\n  const canvasRef = useRef(null);\r\n\r\n  // State\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [activeStep, setActiveStep] = useState(0);\r\n  const [modelsLoaded, setModelsLoaded] = useState(false);\r\n  const [isCameraReady, setIsCameraReady] = useState(false);\r\n  const [capturedImages, setCapturedImages] = useState([]);\r\n  const [detectedFace, setDetectedFace] = useState(null);\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [success, setSuccess] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n  const [showHelpDialog, setShowHelpDialog] = useState(false);\r\n\r\n  // Kiểm tra xem user đã đăng ký khuôn mặt chưa\r\n  useEffect(() => {\r\n    if (user?.face_registered) {\r\n      enqueueSnackbar(\"Bạn đã đăng ký khuôn mặt trước đó\", {\r\n        variant: \"info\",\r\n      });\r\n    }\r\n  }, [user, enqueueSnackbar]);\r\n\r\n  // Load các model nhận diện khuôn mặt khi cần thiết (chỉ khi đến bước chụp ảnh)\r\n  useEffect(() => {\r\n    const initModels = async () => {\r\n      if (activeStep === 1 && !modelsLoaded) {\r\n        try {\r\n          setIsLoading(true);\r\n          await loadModels();\r\n          setModelsLoaded(true);\r\n          enqueueSnackbar(\"Đã tải mô hình nhận diện khuôn mặt\", {\r\n            variant: \"success\",\r\n          });\r\n        } catch (error) {\r\n          console.error(\"Lỗi khi tải mô hình:\", error);\r\n          setError(\r\n            \"Không thể tải mô hình nhận diện khuôn mặt. Vui lòng tải lại trang.\"\r\n          );\r\n          enqueueSnackbar(\"Lỗi khi tải mô hình nhận diện\", {\r\n            variant: \"error\",\r\n          });\r\n        } finally {\r\n          setIsLoading(false);\r\n        }\r\n      }\r\n    };\r\n\r\n    initModels();\r\n  }, [activeStep, modelsLoaded, enqueueSnackbar]);\r\n\r\n  // Kiểm tra camera đã sẵn sàng chưa\r\n  useEffect(() => {\r\n    if (webcamRef.current?.video?.readyState === 4) {\r\n      setIsCameraReady(true);\r\n    }\r\n  }, [webcamRef.current?.video?.readyState]);\r\n\r\n  // Xử lý chuyển bước\r\n  const handleNext = () => {\r\n    setActiveStep((prevActiveStep) => prevActiveStep + 1);\r\n  };\r\n\r\n  const handleBack = () => {\r\n    setActiveStep((prevActiveStep) => prevActiveStep - 1);\r\n  };\r\n\r\n  // Chụp và phát hiện khuôn mặt\r\n  const captureImage = async () => {\r\n    if (!webcamRef.current || !isCameraReady) {\r\n      enqueueSnackbar(\"Camera chưa sẵn sàng, vui lòng thử lại\", {\r\n        variant: \"warning\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setIsProcessing(true);\r\n      // Chụp ảnh\r\n      const imageSrc = webcamRef.current.getScreenshot();\r\n      if (!imageSrc) {\r\n        enqueueSnackbar(\"Không thể chụp ảnh, vui lòng thử lại\", {\r\n          variant: \"error\",\r\n        });\r\n        setIsProcessing(false);\r\n        return;\r\n      }\r\n\r\n      // Phát hiện khuôn mặt\r\n      const detections = await detectFace(imageSrc);\r\n\r\n      if (!detections) {\r\n        enqueueSnackbar(\r\n          \"Không phát hiện được khuôn mặt, vui lòng thử lại và đảm bảo khuôn mặt của bạn nằm trong khung hình\",\r\n          { variant: \"warning\" }\r\n        );\r\n        setIsProcessing(false);\r\n        return;\r\n      }\r\n\r\n      // Lưu ảnh và thông tin khuôn mặt\r\n      setDetectedFace(detections);\r\n      setCapturedImages((prev) => [\r\n        ...prev,\r\n        { img: imageSrc, descriptor: Array.from(detections.descriptor) },\r\n      ]);\r\n\r\n      enqueueSnackbar(`Đã chụp ảnh ${capturedImages.length + 1}/5`, {\r\n        variant: \"success\",\r\n      });\r\n\r\n      // Nếu đã đủ 5 ảnh thì chuyển bước tiếp theo\r\n      if (capturedImages.length + 1 >= 5) {\r\n        handleNext();\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Lỗi khi chụp ảnh:\", error);\r\n      enqueueSnackbar(\"Đã xảy ra lỗi khi chụp ảnh\", { variant: \"error\" });\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  // Đăng ký khuôn mặt lên server\r\n  const registerFace = async () => {\r\n    try {\r\n      setIsProcessing(true);\r\n\r\n      // Chuẩn bị dữ liệu để gửi lên server\r\n      const faceData = {\r\n        descriptors: capturedImages.map((img) => img.descriptor),\r\n        images: capturedImages.map((img) => img.img),\r\n      };\r\n\r\n      // Gửi request đăng ký khuôn mặt\r\n      const response = await axios.post(\r\n        `${API_URL}/face-recognition/register`,\r\n        faceData,\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        }\r\n      );\r\n\r\n      if (response.data.success) {\r\n        enqueueSnackbar(\"Đăng ký khuôn mặt thành công\", {\r\n          variant: \"success\",\r\n        });\r\n        setSuccess(true);\r\n        handleNext();\r\n\r\n        // Cập nhật thông tin user\r\n        dispatch(getCurrentUser());\r\n      } else {\r\n        setError(\"Không thể đăng ký khuôn mặt. Vui lòng thử lại.\");\r\n        enqueueSnackbar(\"Đăng ký khuôn mặt thất bại\", { variant: \"error\" });\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Lỗi khi đăng ký khuôn mặt:\", error);\r\n      setError(\r\n        error.response?.data?.message ||\r\n          \"Không thể đăng ký khuôn mặt. Vui lòng thử lại.\"\r\n      );\r\n      enqueueSnackbar(\"Đăng ký khuôn mặt thất bại\", { variant: \"error\" });\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  // Reset lại quá trình\r\n  const handleReset = () => {\r\n    setCapturedImages([]);\r\n    setDetectedFace(null);\r\n    setActiveStep(0);\r\n    setError(\"\");\r\n    setSuccess(false);\r\n  };\r\n\r\n  // Quay lại trang danh sách lớp\r\n  const navigateToClasses = () => {\r\n    navigate(\"/student/classes\");\r\n  };\r\n\r\n  // Các bước đăng ký khuôn mặt\r\n  const steps = [\r\n    {\r\n      label: \"Chuẩn bị\",\r\n      description: \"Chuẩn bị camera và kiểm tra kết nối\",\r\n      content: (\r\n        <Box>\r\n          <Alert severity=\"info\" sx={{ mb: 2 }}>\r\n            Vui lòng đảm bảo bạn đang ở trong môi trường có ánh sáng tốt và\r\n            camera hoạt động bình thường.\r\n          </Alert>\r\n          <Grid container spacing={2}>\r\n            <Grid item xs={12} md={6}>\r\n              <Card>\r\n                <CardContent>\r\n                  <Typography variant=\"h6\" gutterBottom>\r\n                    Hướng dẫn\r\n                  </Typography>\r\n                  <Divider sx={{ my: 1 }} />\r\n                  <List dense>\r\n                    <ListItem>\r\n                      <ListItemIcon>\r\n                        <Info fontSize=\"small\" />\r\n                      </ListItemIcon>\r\n                      <ListItemText primary=\"Đứng ở nơi có ánh sáng tốt, nhìn thẳng vào camera\" />\r\n                    </ListItem>\r\n                    <ListItem>\r\n                      <ListItemIcon>\r\n                        <Info fontSize=\"small\" />\r\n                      </ListItemIcon>\r\n                      <ListItemText primary=\"Không đeo kính, mũ hoặc khẩu trang khi đăng ký\" />\r\n                    </ListItem>\r\n                    <ListItem>\r\n                      <ListItemIcon>\r\n                        <Info fontSize=\"small\" />\r\n                      </ListItemIcon>\r\n                      <ListItemText primary=\"Giữ khuôn mặt chiếm khoảng 70% khung hình\" />\r\n                    </ListItem>\r\n                    <ListItem>\r\n                      <ListItemIcon>\r\n                        <Info fontSize=\"small\" />\r\n                      </ListItemIcon>\r\n                      <ListItemText primary=\"Bạn sẽ cần chụp 5 ảnh ở các góc độ khác nhau\" />\r\n                    </ListItem>\r\n                  </List>\r\n                </CardContent>\r\n              </Card>\r\n            </Grid>\r\n            <Grid item xs={12} md={6}>\r\n              <Card>\r\n                <CardContent>\r\n                  <Typography variant=\"h6\" gutterBottom>\r\n                    Trạng thái\r\n                  </Typography>\r\n                  <Divider sx={{ my: 1 }} />\r\n                  <List>\r\n                    <ListItem>\r\n                      <ListItemIcon>\r\n                        {activeStep >= 1 ? (\r\n                          modelsLoaded ? (\r\n                            <Check color=\"success\" />\r\n                          ) : (\r\n                            <CircularProgress size={20} />\r\n                          )\r\n                        ) : (\r\n                          <Info color=\"disabled\" />\r\n                        )}\r\n                      </ListItemIcon>\r\n                      <ListItemText\r\n                        primary=\"Tải mô hình nhận diện\"\r\n                        secondary={\r\n                          activeStep >= 1\r\n                            ? modelsLoaded\r\n                              ? \"Đã tải xong\"\r\n                              : \"Đang tải, vui lòng đợi...\"\r\n                            : \"Sẽ tải khi bắt đầu chụp ảnh\"\r\n                        }\r\n                      />\r\n                    </ListItem>\r\n                    <ListItem>\r\n                      <ListItemIcon>\r\n                        {isCameraReady ? (\r\n                          <Check color=\"success\" />\r\n                        ) : (\r\n                          <CircularProgress size={20} />\r\n                        )}\r\n                      </ListItemIcon>\r\n                      <ListItemText\r\n                        primary=\"Kiểm tra camera\"\r\n                        secondary={\r\n                          isCameraReady\r\n                            ? \"Camera đã sẵn sàng\"\r\n                            : \"Đang kết nối với camera...\"\r\n                        }\r\n                      />\r\n                    </ListItem>\r\n                  </List>\r\n                </CardContent>\r\n              </Card>\r\n            </Grid>\r\n          </Grid>\r\n          <Box sx={{ mt: 2, textAlign: \"right\" }}>\r\n            <Button\r\n              variant=\"outlined\"\r\n              onClick={() => setShowHelpDialog(true)}\r\n              sx={{ mr: 1 }}\r\n            >\r\n              Xem hướng dẫn chi tiết\r\n            </Button>\r\n            <Button\r\n              variant=\"contained\"\r\n              onClick={handleNext}\r\n              disabled={!isCameraReady}\r\n            >\r\n              Tiếp tục\r\n            </Button>\r\n          </Box>\r\n        </Box>\r\n      ),\r\n    },\r\n    {\r\n      label: \"Chụp ảnh khuôn mặt\",\r\n      description: \"Chụp 5 ảnh khuôn mặt để đăng ký\",\r\n      content: (\r\n        <Box>\r\n          <Alert severity=\"info\" sx={{ mb: 2 }}>\r\n            Vui lòng chụp 5 ảnh khuôn mặt ở các góc độ khác nhau (nhìn thẳng,\r\n            nghiêng trái, nghiêng phải, hơi ngước lên, hơi cúi xuống).\r\n          </Alert>\r\n          <Grid container spacing={2}>\r\n            <Grid item xs={12} md={8}>\r\n              <Box sx={{ position: \"relative\", width: \"100%\" }}>\r\n                <Suspense\r\n                  fallback={\r\n                    <Box\r\n                      sx={{\r\n                        display: \"flex\",\r\n                        justifyContent: \"center\",\r\n                        alignItems: \"center\",\r\n                        height: 300,\r\n                      }}\r\n                    >\r\n                      <CircularProgress />\r\n                      <Typography sx={{ ml: 2 }}>Đang tải camera...</Typography>\r\n                    </Box>\r\n                  }\r\n                >\r\n                  <Webcam\r\n                    audio={false}\r\n                    ref={webcamRef}\r\n                    screenshotFormat=\"image/jpeg\"\r\n                    videoConstraints={{\r\n                      width: 640,\r\n                      height: 480,\r\n                      facingMode: \"user\",\r\n                    }}\r\n                    style={{\r\n                      width: \"100%\",\r\n                      borderRadius: \"8px\",\r\n                      border: \"1px solid #ddd\",\r\n                    }}\r\n                  />\r\n                </Suspense>\r\n                <canvas\r\n                  ref={canvasRef}\r\n                  style={{\r\n                    position: \"absolute\",\r\n                    top: 0,\r\n                    left: 0,\r\n                    zIndex: 1,\r\n                  }}\r\n                />\r\n              </Box>\r\n              <Box sx={{ mt: 2, textAlign: \"center\" }}>\r\n                <Button\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  startIcon={<CameraAlt />}\r\n                  onClick={captureImage}\r\n                  disabled={\r\n                    !isCameraReady ||\r\n                    isProcessing ||\r\n                    capturedImages.length >= 5 ||\r\n                    !modelsLoaded\r\n                  }\r\n                >\r\n                  {isProcessing ? (\r\n                    <>\r\n                      <CircularProgress size={24} sx={{ mr: 1 }} />\r\n                      Đang xử lý...\r\n                    </>\r\n                  ) : !modelsLoaded ? (\r\n                    \"Đang tải mô hình...\"\r\n                  ) : (\r\n                    \"Chụp ảnh\"\r\n                  )}\r\n                </Button>\r\n              </Box>\r\n            </Grid>\r\n            <Grid item xs={12} md={4}>\r\n              <Card>\r\n                <CardContent>\r\n                  <Typography variant=\"h6\" gutterBottom>\r\n                    Ảnh đã chụp ({capturedImages.length}/5)\r\n                  </Typography>\r\n                  <Divider sx={{ my: 1 }} />\r\n                  <Box\r\n                    sx={{\r\n                      display: \"flex\",\r\n                      flexDirection: \"column\",\r\n                      gap: 1,\r\n                      maxHeight: 320,\r\n                      overflow: \"auto\",\r\n                    }}\r\n                  >\r\n                    {capturedImages.length > 0 ? (\r\n                      capturedImages.map((img, index) => (\r\n                        <Box\r\n                          key={index}\r\n                          sx={{\r\n                            border: \"1px solid #ddd\",\r\n                            borderRadius: \"4px\",\r\n                            overflow: \"hidden\",\r\n                          }}\r\n                        >\r\n                          <img\r\n                            src={img.img}\r\n                            alt={`Ảnh ${index + 1}`}\r\n                            style={{ width: \"100%\" }}\r\n                          />\r\n                        </Box>\r\n                      ))\r\n                    ) : (\r\n                      <Typography\r\n                        variant=\"body2\"\r\n                        sx={{ textAlign: \"center\", py: 2 }}\r\n                      >\r\n                        Chưa có ảnh nào\r\n                      </Typography>\r\n                    )}\r\n                  </Box>\r\n                </CardContent>\r\n              </Card>\r\n            </Grid>\r\n          </Grid>\r\n          <Box sx={{ mt: 2, display: \"flex\", justifyContent: \"space-between\" }}>\r\n            <Button onClick={handleBack}>Quay lại</Button>\r\n            <Button\r\n              variant=\"contained\"\r\n              onClick={handleNext}\r\n              disabled={capturedImages.length < 5}\r\n            >\r\n              Tiếp tục\r\n            </Button>\r\n          </Box>\r\n        </Box>\r\n      ),\r\n    },\r\n    {\r\n      label: \"Xác nhận và hoàn tất\",\r\n      description: \"Xác nhận thông tin và hoàn tất đăng ký\",\r\n      content: (\r\n        <Box>\r\n          <Alert severity=\"info\" sx={{ mb: 2 }}>\r\n            Vui lòng xem lại thông tin và ảnh đã chụp trước khi hoàn tất đăng\r\n            ký.\r\n          </Alert>\r\n          <Grid container spacing={2}>\r\n            <Grid item xs={12} md={6}>\r\n              <Card>\r\n                <CardContent>\r\n                  <Typography variant=\"h6\" gutterBottom>\r\n                    Thông tin đăng ký\r\n                  </Typography>\r\n                  <Divider sx={{ my: 1 }} />\r\n                  <List>\r\n                    <ListItem>\r\n                      <ListItemIcon>\r\n                        <Person />\r\n                      </ListItemIcon>\r\n                      <ListItemText\r\n                        primary=\"Họ và tên\"\r\n                        secondary={user?.full_name || \"N/A\"}\r\n                      />\r\n                    </ListItem>\r\n                    <ListItem>\r\n                      <ListItemIcon>\r\n                        <Face />\r\n                      </ListItemIcon>\r\n                      <ListItemText\r\n                        primary=\"Số ảnh đã chụp\"\r\n                        secondary={`${capturedImages.length} ảnh`}\r\n                      />\r\n                    </ListItem>\r\n                  </List>\r\n                </CardContent>\r\n              </Card>\r\n            </Grid>\r\n            <Grid item xs={12} md={6}>\r\n              <Card>\r\n                <CardContent>\r\n                  <Typography variant=\"h6\" gutterBottom>\r\n                    Xem trước ảnh\r\n                  </Typography>\r\n                  <Divider sx={{ my: 1 }} />\r\n                  <Box\r\n                    sx={{\r\n                      display: \"grid\",\r\n                      gridTemplateColumns:\r\n                        \"repeat(auto-fill, minmax(120px, 1fr))\",\r\n                      gap: 1,\r\n                    }}\r\n                  >\r\n                    {capturedImages.map((img, index) => (\r\n                      <Box\r\n                        key={index}\r\n                        sx={{\r\n                          border: \"1px solid #ddd\",\r\n                          borderRadius: \"4px\",\r\n                          overflow: \"hidden\",\r\n                        }}\r\n                      >\r\n                        <img\r\n                          src={img.img}\r\n                          alt={`Ảnh ${index + 1}`}\r\n                          style={{ width: \"100%\" }}\r\n                        />\r\n                      </Box>\r\n                    ))}\r\n                  </Box>\r\n                </CardContent>\r\n              </Card>\r\n            </Grid>\r\n          </Grid>\r\n          {error && (\r\n            <Alert severity=\"error\" sx={{ mt: 2 }}>\r\n              {error}\r\n            </Alert>\r\n          )}\r\n          <Box sx={{ mt: 2, display: \"flex\", justifyContent: \"space-between\" }}>\r\n            <Button onClick={handleBack}>Quay lại</Button>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={registerFace}\r\n              disabled={isProcessing || capturedImages.length < 5}\r\n              startIcon={\r\n                isProcessing ? <CircularProgress size={20} /> : <SaveAlt />\r\n              }\r\n            >\r\n              {isProcessing ? \"Đang xử lý...\" : \"Hoàn tất đăng ký\"}\r\n            </Button>\r\n          </Box>\r\n        </Box>\r\n      ),\r\n    },\r\n    {\r\n      label: \"Hoàn thành\",\r\n      description: \"Đăng ký khuôn mặt thành công\",\r\n      content: (\r\n        <Box sx={{ textAlign: \"center\", py: 3 }}>\r\n          {success ? (\r\n            <>\r\n              <CheckCircle color=\"success\" sx={{ fontSize: 64, mb: 2 }} />\r\n              <Typography variant=\"h5\" gutterBottom>\r\n                Đăng ký khuôn mặt thành công!\r\n              </Typography>\r\n              <Typography variant=\"body1\" paragraph>\r\n                Từ giờ bạn có thể sử dụng tính năng điểm danh bằng khuôn mặt.\r\n              </Typography>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={navigateToClasses}\r\n                sx={{ mt: 2 }}\r\n              >\r\n                Quay lại danh sách lớp\r\n              </Button>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <Error color=\"error\" sx={{ fontSize: 64, mb: 2 }} />\r\n              <Typography variant=\"h5\" gutterBottom>\r\n                Đã xảy ra lỗi!\r\n              </Typography>\r\n              <Typography variant=\"body1\" paragraph>\r\n                {error || \"Không thể đăng ký khuôn mặt. Vui lòng thử lại.\"}\r\n              </Typography>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={handleReset}\r\n                sx={{ mt: 2 }}\r\n              >\r\n                Thử lại\r\n              </Button>\r\n            </>\r\n          )}\r\n        </Box>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <Box sx={{ padding: 3 }}>\r\n      <Box sx={{ mb: 3 }}>\r\n        <Button\r\n          variant=\"outlined\"\r\n          startIcon={<ArrowBack />}\r\n          onClick={() => navigate(\"/student/classes\")}\r\n          sx={{ mb: 2 }}\r\n        >\r\n          Quay lại\r\n        </Button>\r\n        <Typography variant=\"h4\" gutterBottom>\r\n          Đăng ký khuôn mặt\r\n        </Typography>\r\n        <Typography variant=\"subtitle1\" color=\"text.secondary\">\r\n          Đăng ký khuôn mặt của bạn để sử dụng tính năng điểm danh tự động\r\n        </Typography>\r\n      </Box>\r\n\r\n      <Paper\r\n        sx={{\r\n          p: { xs: 2, md: 3 },\r\n          maxWidth: 1200,\r\n          mx: \"auto\",\r\n          overflow: \"hidden\",\r\n        }}\r\n      >\r\n        {isLoading && activeStep === 0 ? (\r\n          <Box\r\n            sx={{\r\n              display: \"flex\",\r\n              justifyContent: \"center\",\r\n              alignItems: \"center\",\r\n              py: 8,\r\n            }}\r\n          >\r\n            <CircularProgress />\r\n            <Typography variant=\"h6\" sx={{ ml: 2 }}>\r\n              Đang tải...\r\n            </Typography>\r\n          </Box>\r\n        ) : (\r\n          <Stepper activeStep={activeStep} orientation=\"vertical\">\r\n            {steps.map((step, index) => (\r\n              <Step key={step.label}>\r\n                <StepLabel>\r\n                  <Typography variant=\"subtitle1\">{step.label}</Typography>\r\n                </StepLabel>\r\n                <StepContent>\r\n                  <Typography\r\n                    variant=\"body2\"\r\n                    color=\"text.secondary\"\r\n                    sx={{ mb: 2 }}\r\n                  >\r\n                    {step.description}\r\n                  </Typography>\r\n                  {step.content}\r\n                </StepContent>\r\n              </Step>\r\n            ))}\r\n          </Stepper>\r\n        )}\r\n      </Paper>\r\n\r\n      {/* Dialog hướng dẫn chi tiết */}\r\n      <Dialog\r\n        open={showHelpDialog}\r\n        onClose={() => setShowHelpDialog(false)}\r\n        maxWidth=\"md\"\r\n        fullWidth\r\n      >\r\n        <DialogTitle>Hướng dẫn đăng ký khuôn mặt chi tiết</DialogTitle>\r\n        <DialogContent>\r\n          <Typography variant=\"h6\" gutterBottom>\r\n            Các bước đăng ký khuôn mặt:\r\n          </Typography>\r\n          <List>\r\n            <ListItem>\r\n              <ListItemIcon>\r\n                <Check />\r\n              </ListItemIcon>\r\n              <ListItemText\r\n                primary=\"Bước 1: Chuẩn bị\"\r\n                secondary=\"Đảm bảo bạn đang ở nơi có ánh sáng tốt và camera hoạt động bình thường.\"\r\n              />\r\n            </ListItem>\r\n            <ListItem>\r\n              <ListItemIcon>\r\n                <Camera />\r\n              </ListItemIcon>\r\n              <ListItemText\r\n                primary=\"Bước 2: Chụp ảnh khuôn mặt\"\r\n                secondary=\"Chụp 5 ảnh khuôn mặt ở các góc độ khác nhau.\"\r\n              />\r\n            </ListItem>\r\n            <ListItem>\r\n              <ListItemIcon>\r\n                <ViewArray />\r\n              </ListItemIcon>\r\n              <ListItemText\r\n                primary=\"Bước 3: Xác nhận thông tin\"\r\n                secondary=\"Xem lại thông tin và ảnh đã chụp.\"\r\n              />\r\n            </ListItem>\r\n            <ListItem>\r\n              <ListItemIcon>\r\n                <SaveAlt />\r\n              </ListItemIcon>\r\n              <ListItemText\r\n                primary=\"Bước 4: Hoàn tất đăng ký\"\r\n                secondary=\"Hoàn tất quá trình đăng ký khuôn mặt.\"\r\n              />\r\n            </ListItem>\r\n          </List>\r\n\r\n          <Typography variant=\"h6\" gutterBottom sx={{ mt: 2 }}>\r\n            Lưu ý khi chụp ảnh:\r\n          </Typography>\r\n          <List>\r\n            <ListItem>\r\n              <ListItemIcon>\r\n                <Info />\r\n              </ListItemIcon>\r\n              <ListItemText\r\n                primary=\"Ánh sáng\"\r\n                secondary=\"Đảm bảo khuôn mặt được chiếu sáng tốt, tránh ngược sáng.\"\r\n              />\r\n            </ListItem>\r\n            <ListItem>\r\n              <ListItemIcon>\r\n                <Info />\r\n              </ListItemIcon>\r\n              <ListItemText\r\n                primary=\"Góc độ\"\r\n                secondary=\"Chụp ở các góc độ khác nhau: nhìn thẳng, nghiêng trái, nghiêng phải, hơi ngước lên, hơi cúi xuống.\"\r\n              />\r\n            </ListItem>\r\n            <ListItem>\r\n              <ListItemIcon>\r\n                <Info />\r\n              </ListItemIcon>\r\n              <ListItemText\r\n                primary=\"Phụ kiện\"\r\n                secondary=\"Không đeo kính, mũ, khẩu trang hoặc bất kỳ vật che khuôn mặt nào.\"\r\n              />\r\n            </ListItem>\r\n            <ListItem>\r\n              <ListItemIcon>\r\n                <Info />\r\n              </ListItemIcon>\r\n              <ListItemText\r\n                primary=\"Khoảng cách\"\r\n                secondary=\"Giữ khuôn mặt ở khoảng cách vừa phải, chiếm khoảng 70% khung hình.\"\r\n              />\r\n            </ListItem>\r\n          </List>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => setShowHelpDialog(false)}>Đóng</Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default FaceRegistrationPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}