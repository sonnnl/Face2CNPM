{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{useNavigate,useLocation}from\"react-router-dom\";import{Container,Box,Typography,Paper,Alert,Button,CircularProgress,Chip,Divider}from\"@mui/material\";import{HourglassEmpty,CheckCircle,ErrorOutline,School,Work,ExitToApp}from\"@mui/icons-material\";import{selectUser,selectIsAuthenticated,logout}from\"../redux/slices/authSlice\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const PendingApprovalPage=()=>{const user=useSelector(selectUser);const isAuthenticated=useSelector(selectIsAuthenticated);const navigate=useNavigate();const location=useLocation();const dispatch=useDispatch();const[loading,setLoading]=useState(true);const[status,setStatus]=useState(null);const[email,setEmail]=useState(\"\");const[role,setRole]=useState(\"\");useEffect(()=>{// Kiểm tra xem có thông tin từ URL không (trường hợp chưa đăng nhập)\nconst params=new URLSearchParams(location.search);const emailParam=params.get(\"email\");const statusParam=params.get(\"status\");const roleParam=params.get(\"role\");if(emailParam){setEmail(emailParam);}if(statusParam){setStatus(statusParam);}else if(user){// Nếu không có tham số nhưng có thông tin user từ store\nsetStatus(user.status);setEmail(user.email);}else if(!isAuthenticated&&!emailParam){// Nếu không có thông tin gì cả, chuyển về trang đăng nhập\nnavigate(\"/login\",{replace:true});return;}// Lấy vai trò\nif(roleParam){setRole(roleParam);}else if(user){setRole(user.role);}setLoading(false);},[user,location,isAuthenticated,navigate]);// Nếu người dùng đã được phê duyệt và đã đăng nhập, chuyển đến dashboard\nuseEffect(()=>{if(user&&user.status===\"approved\"&&isAuthenticated){navigate(\"/dashboard\");}},[user,isAuthenticated,navigate]);// Hiển thị vai trò\nconst getRoleText=()=>{if(role===\"student\")return\"Sinh viên\";if(role===\"teacher\")return\"Giảng viên\";return\"Người dùng\";};// Hiển thị icon vai trò\nconst getRoleIcon=()=>{if(role===\"student\")return/*#__PURE__*/_jsx(School,{fontSize:\"small\"});if(role===\"teacher\")return/*#__PURE__*/_jsx(Work,{fontSize:\"small\"});return null;};// Xử lý đăng xuất\nconst handleLogout=()=>{dispatch(logout());localStorage.clear();// Chuyển hướng về trang đăng nhập\nnavigate(\"/login\",{replace:true});};if(loading){return/*#__PURE__*/_jsx(Container,{component:\"main\",maxWidth:\"md\",children:/*#__PURE__*/_jsxs(Box,{sx:{marginTop:8,display:\"flex\",flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\",minHeight:\"300px\"},children:[/*#__PURE__*/_jsx(CircularProgress,{size:60,sx:{mb:3}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"\\u0110ang t\\u1EA3i th\\xF4ng tin...\"})]})});}return/*#__PURE__*/_jsx(Container,{component:\"main\",maxWidth:\"md\",children:/*#__PURE__*/_jsx(Box,{sx:{marginTop:8,marginBottom:8,display:\"flex\",flexDirection:\"column\",alignItems:\"center\"},children:/*#__PURE__*/_jsxs(Paper,{elevation:3,sx:{padding:4,width:\"100%\",borderRadius:3,textAlign:\"center\"},children:[status===\"rejected\"?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ErrorOutline,{sx:{fontSize:60,color:\"error.main\",mb:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",gutterBottom:true,children:\"T\\xE0i kho\\u1EA3n kh\\xF4ng \\u0111\\u01B0\\u1EE3c ph\\xEA duy\\u1EC7t\"}),role&&/*#__PURE__*/_jsx(Chip,{icon:getRoleIcon(),label:getRoleText(),color:\"primary\",sx:{mb:2}}),/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mb:3},children:\"T\\xE0i kho\\u1EA3n c\\u1EE7a b\\u1EA1n \\u0111\\xE3 b\\u1ECB t\\u1EEB ch\\u1ED1i\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",sx:{mt:2,mb:3},children:\"R\\u1EA5t ti\\u1EBFc, t\\xE0i kho\\u1EA3n c\\u1EE7a b\\u1EA1n \\u0111\\xE3 b\\u1ECB t\\u1EEB ch\\u1ED1i. Vui l\\xF2ng li\\xEAn h\\u1EC7 v\\u1EDBi qu\\u1EA3n tr\\u1ECB vi\\xEAn \\u0111\\u1EC3 bi\\u1EBFt th\\xEAm chi ti\\u1EBFt.\"}),email&&/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",gutterBottom:true,children:[\"Email: \",email]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(HourglassEmpty,{sx:{fontSize:60,color:\"primary.main\",mb:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",gutterBottom:true,children:\"T\\xE0i kho\\u1EA3n \\u0111ang ch\\u1EDD ph\\xEA duy\\u1EC7t\"}),role&&/*#__PURE__*/_jsx(Chip,{icon:getRoleIcon(),label:getRoleText(),color:\"primary\",sx:{mb:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",sx:{mt:2,mb:3},children:role===\"student\"?\"Tài khoản của bạn đang đợi phê duyệt từ giáo viên cố vấn.\":\"Tài khoản của bạn đang đợi phê duyệt từ quản trị viên.\"}),email&&/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",gutterBottom:true,children:[\"Email: \",email]}),/*#__PURE__*/_jsx(Alert,{severity:\"info\",sx:{mb:3,textAlign:\"left\"},children:/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"L\\u01B0u \\xFD:\"}),\" Qu\\xE1 tr\\xECnh ph\\xEA duy\\u1EC7t c\\xF3 th\\u1EC3 m\\u1EA5t m\\u1ED9t ch\\xFAt th\\u1EDDi gian. B\\u1EA1n s\\u1EBD nh\\u1EADn \\u0111\\u01B0\\u1EE3c email th\\xF4ng b\\xE1o khi t\\xE0i kho\\u1EA3n \\u0111\\u01B0\\u1EE3c ph\\xEA duy\\u1EC7t.\"]})})]}),/*#__PURE__*/_jsxs(Box,{sx:{mt:3},children:[/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",startIcon:/*#__PURE__*/_jsx(ExitToApp,{}),onClick:handleLogout,size:\"large\",children:\"\\u0110\\u0103ng xu\\u1EA5t\"}),status===\"rejected\"&&/*#__PURE__*/_jsx(Button,{variant:\"outlined\",onClick:()=>navigate(\"/contact\"),sx:{ml:2},children:\"Li\\xEAn h\\u1EC7 h\\u1ED7 tr\\u1EE3\"}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",display:\"block\",sx:{mt:1},children:\"\\u0110\\u0103ng xu\\u1EA5t \\u0111\\u1EC3 \\u0111\\u0103ng nh\\u1EADp l\\u1EA1i v\\u1EDBi t\\xE0i kho\\u1EA3n kh\\xE1c\"})]})]})})});};export default PendingApprovalPage;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}