{"ast":null,"code":"import React,{useState,useEffect,useCallback}from\"react\";import{useParams,useNavigate}from\"react-router-dom\";import{useSelector}from\"react-redux\";import{useSnackbar}from\"notistack\";import axios from\"axios\";import{Box,Typography,Card,CardContent,Grid,Paper,Button,Tabs,Tab,CircularProgress,Table,TableBody,TableCell,TableContainer,TableHead,TableRow,Chip,IconButton,Dialog,DialogTitle,DialogContent,DialogActions,TextField,FormControl,InputLabel,Select,MenuItem,List,ListItem,ListItemText,ListItemSecondaryAction,Divider,Alert,Tooltip,Checkbox,FormHelperText}from\"@mui/material\";import{PersonAdd,Delete,Add,Edit,PlayArrow,Stop,CheckCircle,Warning,Info,CalendarToday,AccessTime,Room,Download,School}from\"@mui/icons-material\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const API_URL=process.env.REACT_APP_API_URL||\"http://localhost:5000/api\";function a11yProps(index){return{id:`class-tab-${index}`,\"aria-controls\":`class-tabpanel-${index}`};}function TabPanel(props){const{children,value,index,...other}=props;return/*#__PURE__*/_jsx(\"div\",{role:\"tabpanel\",hidden:value!==index,id:`class-tabpanel-${index}`,\"aria-labelledby\":`class-tab-${index}`,...other,children:value===index&&/*#__PURE__*/_jsx(Box,{sx:{p:3},children:children})});}const TeacherClassDetailPage=()=>{var _classInfo$subject_id,_classInfo$subject_id2,_classInfo$semester_i;const{classId}=useParams();const id=classId;// Đảm bảo sử dụng đúng tên param\nconst navigate=useNavigate();const{enqueueSnackbar}=useSnackbar();const{token}=useSelector(state=>state.auth);// State cho dữ liệu\nconst[classInfo,setClassInfo]=useState(null);const[students,setStudents]=useState([]);const[attendanceSessions,setAttendanceSessions]=useState([]);const[attendanceStats,setAttendanceStats]=useState({total:0,pending:0,completed:0});const[isLoading,setIsLoading]=useState(true);// State cho UI\nconst[tabValue,setTabValue]=useState(0);const[openSessionDialog,setOpenSessionDialog]=useState(false);const[sessionFormData,setSessionFormData]=useState({title:\"\",date:new Date().toISOString().split(\"T\")[0],start_time:\"07:00\",end_time:\"08:40\",room:\"\",start_period:1,end_period:2,notes:\"\"});// State cho thêm sinh viên\nconst[openAddStudentDialog,setOpenAddStudentDialog]=useState(false);const[availableStudents,setAvailableStudents]=useState([]);const[selectedStudents,setSelectedStudents]=useState([]);const[searchStudent,setSearchStudent]=useState(\"\");const[mainClasses,setMainClasses]=useState([]);const[selectedMainClass,setSelectedMainClass]=useState(\"\");const[isLoadingStudents,setIsLoadingStudents]=useState(false);// Thêm state để lưu danh sách phòng học\nconst[rooms,setRooms]=useState([]);// Thêm hàm fetch danh sách phòng học\nconst fetchRooms=async()=>{try{const response=await axios.get(`${API_URL}/facilities/rooms`,{headers:{Authorization:`Bearer ${token}`}});if(response.data.success&&Array.isArray(response.data.data)){// Fetch thêm thông tin tòa nhà cho mỗi phòng\nconst roomsWithBuildings=await Promise.all(response.data.data.map(async room=>{if(room.building_id){try{const buildingResponse=await axios.get(`${API_URL}/facilities/buildings/${room.building_id}`,{headers:{Authorization:`Bearer ${token}`}});if(buildingResponse.data.success&&buildingResponse.data.data){const building=buildingResponse.data.data;// Lấy thông tin cơ sở\nif(building.campus_id){try{const campusResponse=await axios.get(`${API_URL}/facilities/campus/${building.campus_id}`,{headers:{Authorization:`Bearer ${token}`}});if(campusResponse.data.success&&campusResponse.data.data){const campus=campusResponse.data.data;return{...room,building:{...building,campus:campus}};}}catch(error){console.error(\"Lỗi khi lấy thông tin cơ sở:\",error);}}return{...room,building:building};}}catch(error){console.error(\"Lỗi khi lấy thông tin tòa nhà:\",error);}}return room;}));setRooms(roomsWithBuildings);}else{setRooms([]);}}catch(error){console.error(\"Lỗi khi tải danh sách phòng học:\",error);enqueueSnackbar(\"Không thể tải danh sách phòng học\",{variant:\"error\"});setRooms([]);}};// Load dữ liệu ban đầu\nconst fetchClassData=useCallback(async()=>{try{var _sessionsResponse$dat,_sessionsResponse$dat2;setIsLoading(true);// Kiểm tra id có tồn tại không\nif(!id){enqueueSnackbar(\"ID lớp học không hợp lệ\",{variant:\"error\"});navigate(\"/teacher/classes\");return;}// Lấy thông tin lớp học\nconst classResponse=await axios.get(`${API_URL}/classes/teaching/${id}`,{headers:{Authorization:`Bearer ${token}`,Accept:\"application/json\"}});// Log dữ liệu để xem cấu trúc\nconsole.log(\"Dữ liệu lớp học nhận về:\",classResponse.data);// Kiểm tra nếu không có dữ liệu trả về\nif(!classResponse.data.success||!classResponse.data.data){enqueueSnackbar(\"Không tìm thấy thông tin lớp học\",{variant:\"error\"});navigate(\"/teacher/classes\");return;}setClassInfo(classResponse.data.data);// Vì API getClassStudents không trả về đầy đủ thông tin, chúng ta sẽ lấy chi tiết từng sinh viên\nif(classResponse.data.data.students&&classResponse.data.data.students.length>0){try{// Lấy danh sách sinh viên cơ bản\nconst studentsResponse=await axios.get(`${API_URL}/classes/teaching/${id}/students`,{headers:{Authorization:`Bearer ${token}`,Accept:\"application/json\"}});console.log(\"Dữ liệu sinh viên cơ bản:\",studentsResponse.data);// Lưu danh sách sinh viên cơ bản trước\nlet studentsWithBasicInfo=[];if(studentsResponse.data.success&&studentsResponse.data.data){studentsWithBasicInfo=studentsResponse.data.data;}else{studentsWithBasicInfo=classResponse.data.data.students||[];}// Lấy chi tiết cho từng sinh viên (bao gồm faceFeatures)\nconst detailedStudents=await Promise.all(studentsWithBasicInfo.map(async student=>{try{// Gọi API để lấy thông tin chi tiết của sinh viên\nconst studentDetailResponse=await axios.get(`${API_URL}/users/${student._id}`,{headers:{Authorization:`Bearer ${token}`,Accept:\"application/json\"}});console.log(`Thông tin chi tiết của sinh viên ${student.full_name}:`,studentDetailResponse.data);if(studentDetailResponse.data.success&&studentDetailResponse.data.data){// Kết hợp dữ liệu từ API chi tiết sinh viên với dữ liệu cơ bản\nconst detailedInfo=studentDetailResponse.data.data;// Kiểm tra dữ liệu khuôn mặt\nconst hasFaceData=!!(detailedInfo.faceFeatures&&detailedInfo.faceFeatures.descriptors&&detailedInfo.faceFeatures.descriptors.length>0);console.log(`Sinh viên ${detailedInfo.full_name} có dữ liệu khuôn mặt: ${hasFaceData}`);return{...student,...detailedInfo,has_face_data:hasFaceData};}else{// Nếu không lấy được chi tiết, sử dụng thông tin cơ bản\nreturn{...student,has_face_data:false};}}catch(error){console.error(`Lỗi khi lấy thông tin chi tiết của sinh viên ${student._id}:`,error);return{...student,has_face_data:false};}}));setStudents(detailedStudents);}catch(error){console.error(\"Lỗi khi lấy danh sách sinh viên:\",error);// Sử dụng danh sách cơ bản nếu có lỗi\nsetStudents(classResponse.data.data.students||[]);}}else{setStudents([]);}// Lấy danh sách phiên điểm danh\nconst sessionsResponse=await axios.get(`${API_URL}/attendance/teaching-class/${id}/sessions`,{headers:{Authorization:`Bearer ${token}`}});setAttendanceSessions(sessionsResponse.data.data||[]);// Tính toán thống kê điểm danh\nconst stats={total:((_sessionsResponse$dat=sessionsResponse.data.data)===null||_sessionsResponse$dat===void 0?void 0:_sessionsResponse$dat.length)||0,pending:0,completed:0};(_sessionsResponse$dat2=sessionsResponse.data.data)===null||_sessionsResponse$dat2===void 0?void 0:_sessionsResponse$dat2.forEach(session=>{if(session.status===\"completed\"){stats.completed++;}else{stats.pending++;}});setAttendanceStats(stats);}catch(error){console.error(\"Lỗi khi tải dữ liệu lớp học:\",error);// Xử lý các loại lỗi từ API\nif(error.response){// Nếu máy chủ phản hồi với mã lỗi\nif(error.response.status===404){enqueueSnackbar(\"Không tìm thấy lớp học với ID đã cho\",{variant:\"error\"});}else if(error.response.status===400){enqueueSnackbar(\"ID lớp học không hợp lệ\",{variant:\"error\"});}else{var _error$response$data;enqueueSnackbar(((_error$response$data=error.response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||\"Lỗi khi tải dữ liệu lớp học\",{variant:\"error\"});}}else{enqueueSnackbar(\"Không thể kết nối đến máy chủ\",{variant:\"error\"});}setIsLoading(false);}finally{setIsLoading(false);}},[id,token,enqueueSnackbar,navigate]);useEffect(()=>{fetchClassData();},[fetchClassData]);// Thay đổi tab\nconst handleChangeTab=(event,newValue)=>{setTabValue(newValue);};// Mở dialog tạo phiên điểm danh\nconst handleOpenSessionDialog=()=>{// Tải danh sách phòng học\nfetchRooms();setSessionFormData({title:`Buổi học ${attendanceSessions.length+1}`,date:new Date().toISOString().split(\"T\")[0],start_time:\"07:00\",end_time:\"08:40\",room:\"\",start_period:1,end_period:2,notes:\"\"});setOpenSessionDialog(true);};// Đóng dialog tạo phiên điểm danh\nconst handleCloseSessionDialog=()=>{setOpenSessionDialog(false);};// Cập nhật form dữ liệu phiên điểm danh\nconst handleSessionFormChange=e=>{const{name,value}=e.target;setSessionFormData(prev=>({...prev,[name]:value}));};// Tạo phiên điểm danh mới\nconst handleCreateSession=async()=>{try{const{title,date,start_time,end_time,room,start_period,end_period,notes}=sessionFormData;// Kiểm tra dữ liệu\nif(!date||!start_time||!end_time){enqueueSnackbar(\"Vui lòng điền đầy đủ thông tin\",{variant:\"error\"});return;}// Tạo đối tượng để gửi lên API\nconst sessionData={title,date,start_time,end_time,teaching_class_id:id,start_period:parseInt(start_period,10)||1,end_period:parseInt(end_period,10)||2,notes};// Thêm room nếu có\nif(room){sessionData.room=room;}const response=await axios.post(`${API_URL}/attendance/sessions`,sessionData,{headers:{Authorization:`Bearer ${token}`}});enqueueSnackbar(\"Tạo phiên điểm danh thành công\",{variant:\"success\"});setOpenSessionDialog(false);// Cập nhật danh sách phiên\nsetAttendanceSessions(prev=>[...prev,response.data.data]);setAttendanceStats(prev=>({...prev,total:prev.total+1,pending:prev.pending+1}));}catch(error){var _error$response,_error$response$data2;console.error(\"Lỗi khi tạo phiên điểm danh:\",error);enqueueSnackbar(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data2=_error$response.data)===null||_error$response$data2===void 0?void 0:_error$response$data2.message)||\"Lỗi khi tạo phiên điểm danh\",{variant:\"error\"});}};// Cập nhật phiên điểm danh\nconst handleUpdateSession=async()=>{try{const{_id,title,date,start_time,end_time,room,start_period,end_period,notes}=sessionFormData;// Kiểm tra dữ liệu\nif(!date||!start_time||!end_time){enqueueSnackbar(\"Vui lòng điền đầy đủ thông tin\",{variant:\"error\"});return;}// Tạo đối tượng để gửi lên API\nconst sessionData={title,date,start_time,end_time,start_period:parseInt(start_period,10)||1,end_period:parseInt(end_period,10)||2,notes};// Thêm room nếu có\nif(room){sessionData.room=room;}// Gọi API cập nhật\nconst response=await axios.put(`${API_URL}/attendance/sessions/${_id}`,sessionData,{headers:{Authorization:`Bearer ${token}`}});enqueueSnackbar(\"Cập nhật phiên điểm danh thành công\",{variant:\"success\"});setOpenSessionDialog(false);// Cập nhật danh sách phiên\nsetAttendanceSessions(prev=>prev.map(session=>session._id===_id?response.data.data:session));}catch(error){var _error$response2,_error$response2$data;console.error(\"Lỗi khi cập nhật phiên điểm danh:\",error);enqueueSnackbar(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||\"Lỗi khi cập nhật phiên điểm danh\",{variant:\"error\"});}};// Bắt đầu phiên điểm danh\nconst handleStartSession=async sessionId=>{try{// Kiểm tra tính hợp lệ của session\nif(!sessionId){enqueueSnackbar(\"ID phiên điểm danh không hợp lệ\",{variant:\"error\"});return;}// Kiểm tra trạng thái phiên điểm danh\nconst session=attendanceSessions.find(s=>s._id===sessionId);if(!session){enqueueSnackbar(\"Không tìm thấy thông tin phiên điểm danh\",{variant:\"error\"});return;}// Nếu phiên chưa bắt đầu hoặc đang ở trạng thái pending, cập nhật trạng thái thành active\nif(session.status===\"pending\"){try{await axios.put(`${API_URL}/attendance/sessions/${sessionId}/status`,{status:\"active\"},{headers:{Authorization:`Bearer ${token}`}});// Cập nhật lại trạng thái trong state\nsetAttendanceSessions(prev=>prev.map(s=>s._id===sessionId?{...s,status:\"active\"}:s));}catch(error){console.error(\"Lỗi khi cập nhật trạng thái phiên:\",error);// Vẫn tiếp tục điều hướng dù có lỗi\n}}enqueueSnackbar(`Đang chuyển đến trang điểm danh`,{variant:\"info\"});navigate(`/teacher/attendance/${id}/${sessionId}`);}catch(error){console.error(\"Lỗi khi bắt đầu phiên điểm danh:\",error);enqueueSnackbar(\"Có lỗi xảy ra khi bắt đầu phiên điểm danh\",{variant:\"error\"});}};// Mở dialog thêm sinh viên\nconst handleOpenAddStudentDialog=async()=>{try{var _mainClassResponse$da;setIsLoadingStudents(true);// Lấy danh sách lớp chính\nconst mainClassResponse=await axios.get(`${API_URL}/classes/main?all=true`,{headers:{Authorization:`Bearer ${token}`,Accept:\"application/json\"}});console.log(\"Danh sách lớp chính:\",mainClassResponse.data);if(!((_mainClassResponse$da=mainClassResponse.data)!==null&&_mainClassResponse$da!==void 0&&_mainClassResponse$da.data)){enqueueSnackbar(\"Không thể tải danh sách lớp chính\",{variant:\"error\"});return;}setMainClasses(mainClassResponse.data.data||[]);setAvailableStudents([]);setSelectedStudents([]);setSelectedMainClass(\"\");setOpenAddStudentDialog(true);}catch(error){console.error(\"Lỗi khi tải danh sách lớp chính:\",error);enqueueSnackbar(\"Không thể tải danh sách lớp chính. Vui lòng thử lại sau.\",{variant:\"error\"});}finally{setIsLoadingStudents(false);}};// Lấy danh sách sinh viên từ lớp chính\nconst handleMainClassChange=async e=>{const mainClassId=e.target.value;setSelectedMainClass(mainClassId);if(!mainClassId){setAvailableStudents([]);return;}try{var _studentsResponse$dat;setIsLoadingStudents(true);const studentsResponse=await axios.get(`${API_URL}/classes/main/${mainClassId}/approved-students`,{headers:{Authorization:`Bearer ${token}`,Accept:\"application/json\"}});console.log(\"Danh sách sinh viên lớp chính:\",studentsResponse.data);if(!((_studentsResponse$dat=studentsResponse.data)!==null&&_studentsResponse$dat!==void 0&&_studentsResponse$dat.data)){enqueueSnackbar(\"Không thể tải danh sách sinh viên từ lớp chính\",{variant:\"error\"});return;}// Lọc sinh viên chưa có trong lớp\nconst currentStudentIds=students.map(s=>s._id);const filteredStudents=studentsResponse.data.data.students.filter(s=>!currentStudentIds.includes(s._id));setAvailableStudents(filteredStudents);}catch(error){console.error(\"Lỗi khi tải danh sách sinh viên từ lớp chính:\",error);enqueueSnackbar(\"Không thể tải danh sách sinh viên từ lớp chính\",{variant:\"error\"});setAvailableStudents([]);}finally{setIsLoadingStudents(false);}};// Đóng dialog thêm sinh viên\nconst handleCloseAddStudentDialog=()=>{setOpenAddStudentDialog(false);};// Xử lý chọn sinh viên để thêm\nconst handleSelectStudent=studentId=>{if(selectedStudents.includes(studentId)){setSelectedStudents(selectedStudents.filter(id=>id!==studentId));}else{setSelectedStudents([...selectedStudents,studentId]);}};// Thêm sinh viên vào lớp\nconst handleAddStudents=async()=>{try{if(selectedStudents.length===0){enqueueSnackbar(\"Vui lòng chọn ít nhất một sinh viên\",{variant:\"warning\"});return;}// Gọi API thêm sinh viên\nawait axios.post(`${API_URL}/classes/teaching/${id}/students/batch`,{student_ids:selectedStudents},{headers:{Authorization:`Bearer ${token}`}});enqueueSnackbar(`Đã thêm ${selectedStudents.length} sinh viên vào lớp`,{variant:\"success\"});setOpenAddStudentDialog(false);// Cập nhật lại danh sách sinh viên\nfetchClassData();}catch(error){console.error(\"Lỗi khi thêm sinh viên:\",error);if(error.response){var _error$response$data3;enqueueSnackbar(`Lỗi: ${error.response.status} - ${((_error$response$data3=error.response.data)===null||_error$response$data3===void 0?void 0:_error$response$data3.message)||\"Không thể thêm sinh viên\"}`,{variant:\"error\"});}else{enqueueSnackbar(\"Lỗi kết nối khi thêm sinh viên vào lớp\",{variant:\"error\"});}}};// Xóa sinh viên khỏi lớp\nconst handleRemoveStudent=async studentId=>{if(!window.confirm(\"Bạn có chắc chắn muốn xóa sinh viên này khỏi lớp không?\")){return;}try{await axios.delete(`${API_URL}/classes/teaching/${id}/students/${studentId}`,{headers:{Authorization:`Bearer ${token}`}});enqueueSnackbar(\"Đã xóa sinh viên khỏi lớp\",{variant:\"success\"});// Cập nhật lại danh sách sinh viên\nsetStudents(students.filter(s=>s._id!==studentId));}catch(error){console.error(\"Lỗi khi xóa sinh viên:\",error);enqueueSnackbar(\"Lỗi khi xóa sinh viên khỏi lớp\",{variant:\"error\"});}};// Xuất danh sách sinh viên\nconst handleExportStudentList=()=>{try{const studentsData=students.map((student,index)=>{var _student$school_info;// Kiểm tra có face data từ cả hai nguồn có thể\nconst hasFaceData=student.has_face_data||!!(student.faceFeatures&&student.faceFeatures.descriptors&&student.faceFeatures.descriptors.length>0);return{STT:index+1,\"Mã SV\":((_student$school_info=student.school_info)===null||_student$school_info===void 0?void 0:_student$school_info.student_code)||\"N/A\",\"Họ và tên\":student.full_name||student.name,Email:student.email,\"Đăng ký khuôn mặt\":hasFaceData?\"Đã đăng ký\":\"Chưa đăng ký\"};});const header=[\"STT\",\"Mã SV\",\"Họ và tên\",\"Email\",\"Đăng ký khuôn mặt\"];const csvContent=\"data:text/csv;charset=utf-8,\"+[header.join(\",\"),...studentsData.map(row=>[row.STT,row[\"Mã SV\"],row[\"Họ và tên\"],row.Email,row[\"Đăng ký khuôn mặt\"]].join(\",\"))].join(\"\\n\");const encodedUri=encodeURI(csvContent);const link=document.createElement(\"a\");link.setAttribute(\"href\",encodedUri);link.setAttribute(\"download\",`danh_sach_sinh_vien_${classInfo===null||classInfo===void 0?void 0:classInfo.class_name}.csv`);document.body.appendChild(link);link.click();document.body.removeChild(link);enqueueSnackbar(\"Xuất danh sách sinh viên thành công\",{variant:\"success\"});}catch(error){console.error(\"Lỗi khi xuất danh sách:\",error);enqueueSnackbar(\"Lỗi khi xuất danh sách sinh viên\",{variant:\"error\"});}};// Lọc sinh viên theo từ khóa tìm kiếm\nconst filteredAvailableStudents=availableStudents.filter(student=>{var _student$school_info2,_student$school_info3;return student.full_name.toLowerCase().includes(searchStudent.toLowerCase())||((_student$school_info2=student.school_info)===null||_student$school_info2===void 0?void 0:(_student$school_info3=_student$school_info2.student_code)===null||_student$school_info3===void 0?void 0:_student$school_info3.toLowerCase().includes(searchStudent.toLowerCase()))||student.email.toLowerCase().includes(searchStudent.toLowerCase());});// Hàm để lấy thông tin đầy đủ của phòng học\nconst getRoomFullInfo=roomId=>{var _room$building,_room$building2,_room$building2$campu;const room=rooms.find(r=>r._id===roomId);if(!room)return roomId;// Hiển thị ID nếu không tìm thấy phòng\nconst roomName=room.room_number||\"Không xác định\";const buildingName=((_room$building=room.building)===null||_room$building===void 0?void 0:_room$building.name)||\"Không xác định\";const campusName=((_room$building2=room.building)===null||_room$building2===void 0?void 0:(_room$building2$campu=_room$building2.campus)===null||_room$building2$campu===void 0?void 0:_room$building2$campu.name)||\"Không xác định\";return`${roomName} - ${buildingName} - ${campusName}`;};if(isLoading){return/*#__PURE__*/_jsx(Box,{sx:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",height:\"80vh\"},children:/*#__PURE__*/_jsx(CircularProgress,{})});}if(!classInfo){return/*#__PURE__*/_jsx(Box,{sx:{py:3},children:/*#__PURE__*/_jsxs(Card,{sx:{textAlign:\"center\",p:4},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",color:\"error\",gutterBottom:true,children:\"Kh\\xF4ng t\\xECm th\\u1EA5y l\\u1EDBp h\\u1ECDc\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",sx:{mb:3},children:\"L\\u1EDBp h\\u1ECDc b\\u1EA1n \\u0111ang t\\xECm ki\\u1EBFm kh\\xF4ng t\\u1ED3n t\\u1EA1i ho\\u1EB7c \\u0111\\xE3 b\\u1ECB x\\xF3a.\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:()=>navigate(\"/teacher/classes\"),children:\"Quay l\\u1EA1i danh s\\xE1ch l\\u1EDBp\"})]})});}return/*#__PURE__*/_jsxs(Box,{sx:{padding:3},children:[/*#__PURE__*/_jsxs(Box,{sx:{mb:3},children:[/*#__PURE__*/_jsx(Button,{variant:\"outlined\",onClick:()=>navigate(\"/teacher/classes\"),sx:{mb:2},children:\"Quay l\\u1EA1i danh s\\xE1ch l\\u1EDBp\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,children:classInfo.class_name}),/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle1\",color:\"text.secondary\",gutterBottom:true,children:[(_classInfo$subject_id=classInfo.subject_id)===null||_classInfo$subject_id===void 0?void 0:_classInfo$subject_id.name,\" (\",(_classInfo$subject_id2=classInfo.subject_id)===null||_classInfo$subject_id2===void 0?void 0:_classInfo$subject_id2.code,\")\"]})]}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,sx:{mb:3},children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Th\\xF4ng tin l\\u1EDBp h\\u1ECDc\"}),/*#__PURE__*/_jsxs(Box,{sx:{mt:2},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",sx:{mb:1,display:\"flex\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(CalendarToday,{sx:{mr:1,fontSize:\"small\"}}),\"H\\u1ECDc k\\u1EF3: \",((_classInfo$semester_i=classInfo.semester_id)===null||_classInfo$semester_i===void 0?void 0:_classInfo$semester_i.name)||\"N/A\"]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",sx:{mb:1,display:\"flex\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(CalendarToday,{sx:{mr:1,fontSize:\"small\"}}),\"Ng\\xE0y b\\u1EAFt \\u0111\\u1EA7u:\",\" \",classInfo.course_start_date?new Date(classInfo.course_start_date).toLocaleDateString(\"vi-VN\"):\"N/A\"]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",sx:{mb:1,display:\"flex\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(CalendarToday,{sx:{mr:1,fontSize:\"small\"}}),\"Ng\\xE0y k\\u1EBFt th\\xFAc:\",\" \",classInfo.course_end_date?new Date(classInfo.course_end_date).toLocaleDateString(\"vi-VN\"):\"N/A\"]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",sx:{mb:1,display:\"flex\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(Info,{sx:{mr:1,fontSize:\"small\"}}),\"S\\u1ED1 bu\\u1ED5i h\\u1ECDc: \",classInfo.total_sessions||15]})]})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"\\u0110i\\u1EC3m danh\"}),/*#__PURE__*/_jsxs(Box,{sx:{mt:2},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",sx:{mb:1},children:[\"T\\u1ED5ng s\\u1ED1 bu\\u1ED5i: \",attendanceStats.total]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",sx:{mb:1},children:[\"\\u0110\\xE3 ho\\xE0n th\\xE0nh: \",attendanceStats.completed]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",sx:{mb:1},children:[\"Ch\\u01B0a ho\\xE0n th\\xE0nh: \",attendanceStats.pending]})]})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Sinh vi\\xEAn\"}),/*#__PURE__*/_jsx(Box,{sx:{mt:2},children:/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",sx:{mb:1},children:[\"T\\u1ED5ng s\\u1ED1 sinh vi\\xEAn: \",students.length]})}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",size:\"small\",startIcon:/*#__PURE__*/_jsx(Download,{}),onClick:handleExportStudentList,sx:{mt:2},children:\"Xu\\u1EA5t danh s\\xE1ch\"})]})})})]}),/*#__PURE__*/_jsxs(Box,{sx:{width:\"100%\"},children:[/*#__PURE__*/_jsx(Box,{sx:{borderBottom:1,borderColor:\"divider\"},children:/*#__PURE__*/_jsxs(Tabs,{value:tabValue,onChange:handleChangeTab,\"aria-label\":\"l\\u1EDBp h\\u1ECDc tabs\",children:[/*#__PURE__*/_jsx(Tab,{label:\"Sinh vi\\xEAn\",...a11yProps(0)}),/*#__PURE__*/_jsx(Tab,{label:\"Phi\\xEAn \\u0111i\\u1EC3m danh\",...a11yProps(1)})]})}),/*#__PURE__*/_jsxs(TabPanel,{value:tabValue,index:0,children:[/*#__PURE__*/_jsx(Box,{sx:{display:\"flex\",justifyContent:\"flex-end\",mb:2},children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",startIcon:/*#__PURE__*/_jsx(PersonAdd,{}),onClick:handleOpenAddStudentDialog,children:\"Th\\xEAm sinh vi\\xEAn\"})}),/*#__PURE__*/_jsx(TableContainer,{component:Paper,children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"STT\"}),/*#__PURE__*/_jsx(TableCell,{children:\"M\\xE3 sinh vi\\xEAn\"}),/*#__PURE__*/_jsx(TableCell,{children:\"H\\u1ECD v\\xE0 t\\xEAn\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Email\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Tr\\u1EA1ng th\\xE1i\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Thao t\\xE1c\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:students.length>0?students.map((student,index)=>{var _student$school_info4;// Kiểm tra và log mỗi sinh viên để debug\nconsole.log(`Hiển thị sinh viên ${index+1}:`,student);// Kiểm tra có face data từ cả hai nguồn có thể\nconst hasFaceData=student.has_face_data||!!(student.faceFeatures&&student.faceFeatures.descriptors&&student.faceFeatures.descriptors.length>0);return/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:index+1}),/*#__PURE__*/_jsx(TableCell,{children:((_student$school_info4=student.school_info)===null||_student$school_info4===void 0?void 0:_student$school_info4.student_code)||\"N/A\"}),/*#__PURE__*/_jsx(TableCell,{children:student.full_name||student.name}),/*#__PURE__*/_jsx(TableCell,{children:student.email}),/*#__PURE__*/_jsx(TableCell,{children:hasFaceData?/*#__PURE__*/_jsx(Chip,{label:\"\\u0110\\xE3 \\u0111\\u0103ng k\\xFD khu\\xF4n m\\u1EB7t\",color:\"success\",size:\"small\"}):/*#__PURE__*/_jsx(Chip,{label:\"Ch\\u01B0a \\u0111\\u0103ng k\\xFD khu\\xF4n m\\u1EB7t\",color:\"warning\",size:\"small\"})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Tooltip,{title:\"X\\xF3a kh\\u1ECFi l\\u1EDBp\",children:/*#__PURE__*/_jsx(IconButton,{size:\"small\",color:\"error\",onClick:()=>handleRemoveStudent(student._id),children:/*#__PURE__*/_jsx(Delete,{})})})})]},student._id);}):/*#__PURE__*/_jsx(TableRow,{children:/*#__PURE__*/_jsx(TableCell,{colSpan:6,align:\"center\",children:\"Ch\\u01B0a c\\xF3 sinh vi\\xEAn n\\xE0o trong l\\u1EDBp\"})})})]})})]}),/*#__PURE__*/_jsxs(TabPanel,{value:tabValue,index:1,children:[/*#__PURE__*/_jsx(Box,{sx:{display:\"flex\",justifyContent:\"flex-end\",mb:2},children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",startIcon:/*#__PURE__*/_jsx(Add,{}),onClick:handleOpenSessionDialog,children:\"T\\u1EA1o phi\\xEAn \\u0111i\\u1EC3m danh\"})}),/*#__PURE__*/_jsx(TableContainer,{component:Paper,children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"STT\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Ng\\xE0y\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Ti\\u1EBFt/Th\\u1EDDi gian\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Ph\\xF2ng\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Ghi ch\\xFA\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Tr\\u1EA1ng th\\xE1i\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Thao t\\xE1c\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:attendanceSessions.length>0?attendanceSessions.map((session,index)=>{var _session$room$buildin,_session$room$buildin2,_session$room$buildin3;return/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:index+1}),/*#__PURE__*/_jsx(TableCell,{children:new Date(session.date).toLocaleString(\"vi-VN\",{weekday:\"long\",year:\"numeric\",month:\"numeric\",day:\"numeric\"})}),/*#__PURE__*/_jsx(TableCell,{children:session.start_period&&session.end_period?/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[\"Ti\\u1EBFt \",session.start_period,\"-\",session.end_period]}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"text.secondary\",children:session.start_time&&session.end_time?`${new Date(session.start_time).toLocaleTimeString(\"vi-VN\",{hour:\"2-digit\",minute:\"2-digit\"})} - ${new Date(session.end_time).toLocaleTimeString(\"vi-VN\",{hour:\"2-digit\",minute:\"2-digit\"})}`:\"\"})]}):session.start_time&&session.end_time?`${new Date(session.start_time).toLocaleTimeString(\"vi-VN\",{hour:\"2-digit\",minute:\"2-digit\"})} - ${new Date(session.end_time).toLocaleTimeString(\"vi-VN\",{hour:\"2-digit\",minute:\"2-digit\"})}`:\"N/A\"}),/*#__PURE__*/_jsx(TableCell,{children:session.room?typeof session.room===\"object\"?/*#__PURE__*/_jsx(Tooltip,{title:\"Th\\xF4ng tin \\u0111\\u1EA7y \\u0111\\u1EE7 ph\\xF2ng h\\u1ECDc\",children:/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[session.room.room_number||\"Không xác định\",\" -\",\" \",((_session$room$buildin=session.room.building)===null||_session$room$buildin===void 0?void 0:_session$room$buildin.name)||\"Không xác định\",(_session$room$buildin2=session.room.building)!==null&&_session$room$buildin2!==void 0&&(_session$room$buildin3=_session$room$buildin2.campus)!==null&&_session$room$buildin3!==void 0&&_session$room$buildin3.name?` - ${session.room.building.campus.name}`:\"\"]})}):/*#__PURE__*/_jsx(Tooltip,{title:\"Th\\xF4ng tin \\u0111\\u1EA7y \\u0111\\u1EE7 ph\\xF2ng h\\u1ECDc\",children:/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:getRoomFullInfo(session.room)})}):/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:\"Kh\\xF4ng c\\xF3 ph\\xF2ng\"})}),/*#__PURE__*/_jsx(TableCell,{children:session.notes?/*#__PURE__*/_jsx(Tooltip,{title:session.notes,children:/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{maxWidth:\"150px\",whiteSpace:\"nowrap\",overflow:\"hidden\",textOverflow:\"ellipsis\"},children:session.notes})}):/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:\"-\"})}),/*#__PURE__*/_jsx(TableCell,{children:session.status===\"completed\"?/*#__PURE__*/_jsx(Chip,{label:\"Ho\\xE0n th\\xE0nh\",color:\"success\",size:\"small\"}):session.status===\"in_progress\"?/*#__PURE__*/_jsx(Chip,{label:\"\\u0110ang di\\u1EC5n ra\",color:\"primary\",size:\"small\"}):/*#__PURE__*/_jsx(Chip,{label:\"Ch\\u01B0a b\\u1EAFt \\u0111\\u1EA7u\",color:\"default\",size:\"small\"})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",gap:1},children:[/*#__PURE__*/_jsx(Button,{variant:\"contained\",size:\"small\",color:\"primary\",onClick:()=>handleStartSession(session._id),startIcon:session.status===\"completed\"?/*#__PURE__*/_jsx(CheckCircle,{}):/*#__PURE__*/_jsx(PlayArrow,{}),children:session.status===\"completed\"?\"Xem\":\"Bắt đầu\"}),/*#__PURE__*/_jsx(Tooltip,{title:\"Ch\\u1EC9nh s\\u1EEDa th\\xF4ng tin\",children:/*#__PURE__*/_jsx(IconButton,{size:\"small\",color:\"default\",onClick:()=>{setSessionFormData({...session,date:session.date.split(\"T\")[0]});// Tải danh sách phòng học\nfetchRooms();setOpenSessionDialog(true);},children:/*#__PURE__*/_jsx(Edit,{})})})]})})]},session._id);}):/*#__PURE__*/_jsx(TableRow,{children:/*#__PURE__*/_jsx(TableCell,{colSpan:8,align:\"center\",children:\"Ch\\u01B0a c\\xF3 phi\\xEAn \\u0111i\\u1EC3m danh n\\xE0o\"})})})]})})]})]}),/*#__PURE__*/_jsxs(Dialog,{open:openSessionDialog,onClose:handleCloseSessionDialog,maxWidth:\"md\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:sessionFormData._id?\"Chỉnh sửa phiên điểm danh\":\"Tạo phiên điểm danh mới\"}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsxs(Box,{sx:{mt:2},children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"N\\u1ED9i dung bu\\u1ED5i h\\u1ECDc\",name:\"title\",placeholder:\"V\\xED d\\u1EE5: Ki\\u1EC3m tra gi\\u1EEFa k\\u1EF3, H\\u1ECDc b\\xE0i m\\u1EDBi...\",value:sessionFormData.title,onChange:handleSessionFormChange,sx:{mb:2}}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Ng\\xE0y\",name:\"date\",type:\"date\",value:sessionFormData.date,onChange:handleSessionFormChange,sx:{mb:2}}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,sx:{mb:2},children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:6,md:3,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Ti\\u1EBFt b\\u1EAFt \\u0111\\u1EA7u\",name:\"start_period\",type:\"number\",value:sessionFormData.start_period,onChange:handleSessionFormChange,InputProps:{inputProps:{min:1,max:15}}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,md:3,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Ti\\u1EBFt k\\u1EBFt th\\xFAc\",name:\"end_period\",type:\"number\",value:sessionFormData.end_period,onChange:handleSessionFormChange,InputProps:{inputProps:{min:sessionFormData.start_period||1,max:15}}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,md:3,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Th\\u1EDDi gian b\\u1EAFt \\u0111\\u1EA7u\",name:\"start_time\",type:\"time\",value:sessionFormData.start_time,onChange:handleSessionFormChange,InputLabelProps:{shrink:true}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:6,md:3,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Th\\u1EDDi gian k\\u1EBFt th\\xFAc\",name:\"end_time\",type:\"time\",value:sessionFormData.end_time,onChange:handleSessionFormChange,InputLabelProps:{shrink:true}})})]}),/*#__PURE__*/_jsx(Grid,{container:true,spacing:2,sx:{mb:2},children:/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Ph\\xF2ng h\\u1ECDc\"}),/*#__PURE__*/_jsxs(Select,{name:\"room\",value:sessionFormData.room||\"\",onChange:handleSessionFormChange,label:\"Ph\\xF2ng h\\u1ECDc\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"\",children:\"-- Ch\\u1ECDn ph\\xF2ng h\\u1ECDc --\"}),rooms&&rooms.map(room=>{var _room$building3,_room$building4,_room$building4$campu;return/*#__PURE__*/_jsxs(MenuItem,{value:room._id,children:[room.room_number||\"Không xác định\",\" -\",\" \",((_room$building3=room.building)===null||_room$building3===void 0?void 0:_room$building3.name)||\"Không xác định\",\" -\",\" \",((_room$building4=room.building)===null||_room$building4===void 0?void 0:(_room$building4$campu=_room$building4.campus)===null||_room$building4$campu===void 0?void 0:_room$building4$campu.name)||\"Không xác định\"]},room._id);})]}),/*#__PURE__*/_jsx(FormHelperText,{children:\"Ch\\u1ECDn ph\\xF2ng h\\u1ECDc v\\u1EDBi th\\xF4ng tin \\u0111\\u1EA7y \\u0111\\u1EE7\"})]})})}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Ghi ch\\xFA\",name:\"notes\",multiline:true,rows:3,placeholder:\"N\\u1ED9i dung bu\\u1ED5i h\\u1ECDc, y\\xEAu c\\u1EA7u \\u0111\\u1EB7c bi\\u1EC7t, v.v...\",value:sessionFormData.notes,onChange:handleSessionFormChange,sx:{mb:2}})]})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleCloseSessionDialog,children:\"H\\u1EE7y\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:sessionFormData._id?handleUpdateSession:handleCreateSession,children:sessionFormData._id?\"Lưu thay đổi\":\"Tạo\"})]})]}),/*#__PURE__*/_jsxs(Dialog,{open:openAddStudentDialog,onClose:handleCloseAddStudentDialog,maxWidth:\"md\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Th\\xEAm sinh vi\\xEAn v\\xE0o l\\u1EDBp\"}),/*#__PURE__*/_jsxs(DialogContent,{children:[/*#__PURE__*/_jsxs(Box,{sx:{mb:3,mt:1},children:[/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,sx:{mb:2},children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Ch\\u1ECDn l\\u1EDBp ch\\xEDnh\"}),/*#__PURE__*/_jsxs(Select,{value:selectedMainClass,onChange:handleMainClassChange,label:\"Ch\\u1ECDn l\\u1EDBp ch\\xEDnh\",disabled:isLoadingStudents,children:[/*#__PURE__*/_jsx(MenuItem,{value:\"\",children:\"-- Ch\\u1ECDn l\\u1EDBp ch\\xEDnh --\"}),mainClasses.map(mainClass=>/*#__PURE__*/_jsxs(MenuItem,{value:mainClass._id,children:[mainClass.name,\" (\",mainClass.class_code,\")\"]},mainClass._id))]})]}),selectedMainClass&&/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"T\\xECm ki\\u1EBFm sinh vi\\xEAn\",value:searchStudent,onChange:e=>setSearchStudent(e.target.value),disabled:isLoadingStudents})]}),isLoadingStudents?/*#__PURE__*/_jsx(Box,{sx:{display:\"flex\",justifyContent:\"center\",my:3},children:/*#__PURE__*/_jsx(CircularProgress,{})}):/*#__PURE__*/_jsx(Box,{sx:{maxHeight:400,overflow:\"auto\",mb:2},children:!selectedMainClass?/*#__PURE__*/_jsx(Alert,{severity:\"info\",children:\"Vui l\\xF2ng ch\\u1ECDn l\\u1EDBp ch\\xEDnh \\u0111\\u1EC3 xem danh s\\xE1ch sinh vi\\xEAn\"}):availableStudents.length===0?/*#__PURE__*/_jsx(Alert,{severity:\"warning\",children:\"Kh\\xF4ng t\\xECm th\\u1EA5y sinh vi\\xEAn c\\xF3 th\\u1EC3 th\\xEAm v\\xE0o l\\u1EDBp\"}):/*#__PURE__*/_jsx(List,{children:availableStudents.filter(student=>{var _student$full_name,_student$school_info5,_student$school_info6,_student$email;return((_student$full_name=student.full_name)===null||_student$full_name===void 0?void 0:_student$full_name.toLowerCase().includes(searchStudent.toLowerCase()))||((_student$school_info5=student.school_info)===null||_student$school_info5===void 0?void 0:(_student$school_info6=_student$school_info5.student_code)===null||_student$school_info6===void 0?void 0:_student$school_info6.toLowerCase().includes(searchStudent.toLowerCase()))||((_student$email=student.email)===null||_student$email===void 0?void 0:_student$email.toLowerCase().includes(searchStudent.toLowerCase()));}).map(student=>{var _student$school_info7;return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemText,{primary:student.full_name||student.name,secondary:/*#__PURE__*/_jsxs(_Fragment,{children:[((_student$school_info7=student.school_info)===null||_student$school_info7===void 0?void 0:_student$school_info7.student_code)||\"Chưa có mã SV\",\" \",\"- \",student.email]})}),/*#__PURE__*/_jsx(ListItemSecondaryAction,{children:/*#__PURE__*/_jsx(Checkbox,{edge:\"end\",checked:selectedStudents.includes(student._id),onChange:()=>handleSelectStudent(student._id)})})]}),/*#__PURE__*/_jsx(Divider,{})]},student._id);})})}),/*#__PURE__*/_jsx(Box,{sx:{textAlign:\"right\"},children:/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[\"\\u0110\\xE3 ch\\u1ECDn: \",selectedStudents.length,\" sinh vi\\xEAn\"]})})]}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleCloseAddStudentDialog,children:\"H\\u1EE7y\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:handleAddStudents,disabled:selectedStudents.length===0||isLoadingStudents,children:\"Th\\xEAm v\\xE0o l\\u1EDBp\"})]})]})]});};export default TeacherClassDetailPage;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}