{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import{useSelector}from\"react-redux\";import{useSnackbar}from\"notistack\";import axios from\"axios\";import{Box,Typography,Paper,Tabs,Tab,Button,TextField,CircularProgress,Table,TableBody,TableCell,TableContainer,TableHead,TableRow,TablePagination,Chip,IconButton,Dialog,DialogTitle,DialogContent,DialogActions,Grid,Card,CardContent,Alert,Divider,Avatar,List,ListItem,ListItemAvatar,ListItemText,ListItemSecondaryAction,Tooltip,Badge,Skeleton,MenuItem,Select,FormControl,InputLabel,OutlinedInput,AlertTitle,InputAdornment}from\"@mui/material\";import{Check,Close,PersonAdd,PersonRemove,School,Info,Warning,AccessTime,Error,CheckCircle,HourglassEmpty,SwapHoriz,Class,Refresh,Search as SearchIcon,Clear as ClearIcon,Add,Cancel,Face,Person,LockPerson,SentimentDissatisfied as NoFace}from\"@mui/icons-material\";import InfoIcon from\"@mui/icons-material/Info\";import RefreshIcon from\"@mui/icons-material/Refresh\";import CheckIcon from\"@mui/icons-material/Check\";import NoDataSvg from\"../../components/NoDataSvg\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const API_URL=process.env.REACT_APP_API_URL||\"http://localhost:5000/api\";function TabPanel(props){const{children,value,index,...other}=props;return/*#__PURE__*/_jsx(\"div\",{role:\"tabpanel\",hidden:value!==index,id:`tabpanel-${index}`,\"aria-labelledby\":`tab-${index}`,...other,children:value===index&&/*#__PURE__*/_jsx(Box,{sx:{p:3},children:children})});}const TeacherMainClassPage=()=>{const navigate=useNavigate();const{enqueueSnackbar}=useSnackbar();const{user,token}=useSelector(state=>state.auth);// State cho dữ liệu\nconst[mainClass,setMainClass]=useState(null);const[mainClasses,setMainClasses]=useState([]);const[pendingStudents,setPendingStudents]=useState([]);const[approvedStudents,setApprovedStudents]=useState([]);const[isLoading,setIsLoading]=useState(true);const[isLoadingPending,setIsLoadingPending]=useState(false);const[isLoadingApproved,setIsLoadingApproved]=useState(false);const[error,setError]=useState(null);const[tabValue,setTabValue]=useState(0);const[rejectDialog,setRejectDialog]=useState({open:false,studentId:null,reason:\"\"});// States cho modal chi tiết sinh viên\nconst[selectedStudent,setSelectedStudent]=useState(null);const[openStudentDetail,setOpenStudentDetail]=useState(false);// States cho modal thêm lớp chính\nconst[openAddClassDialog,setOpenAddClassDialog]=useState(false);const[newClass,setNewClass]=useState({name:\"\",code:\"\",department_id:\"\",advisor_id:(user===null||user===void 0?void 0:user._id)||\"\",students:[]});const[departments,setDepartments]=useState([]);const[isSubmitting,setIsSubmitting]=useState(false);// Phân trang\nconst[page,setPage]=useState(0);const[rowsPerPage,setRowsPerPage]=useState(10);// Thêm state cho tìm kiếm sinh viên\nconst[pendingSearchTerm,setPendingSearchTerm]=useState(\"\");const[approvedSearchTerm,setApprovedSearchTerm]=useState(\"\");// Thêm state cho tổng số sinh viên đã duyệt\nconst[totalApproved,setTotalApproved]=useState(0);useEffect(()=>{fetchMainClasses();fetchDepartments();},[token]);// Lấy danh sách các lớp chính mà giảng viên được phân công làm cố vấn\nconst fetchMainClasses=async()=>{try{setIsLoading(true);setError(null);// Lấy danh sách lớp được phân công cố vấn\nconst response=await axios.get(`${API_URL}/classes/main?advisor_id=${user._id}&all=true`,{headers:{Authorization:`Bearer ${token}`}});if(response.data.data&&response.data.data.length>0){const classes=response.data.data;setMainClasses(classes);// Lấy lớp đầu tiên làm mặc định\nconst classData=classes[0];setMainClass(classData);// Lấy danh sách sinh viên chờ duyệt và đã duyệt\nawait fetchPendingStudents(classData._id);await fetchApprovedStudents(classData._id);}else{enqueueSnackbar(\"Bạn chưa được phân công làm cố vấn cho lớp nào\",{variant:\"info\"});}}catch(error){console.error(\"Lỗi khi tải dữ liệu lớp chính:\",error);setError(\"Không thể tải thông tin lớp chính. Vui lòng thử lại sau.\");enqueueSnackbar(\"Lỗi khi tải dữ liệu lớp chính\",{variant:\"error\"});}finally{setIsLoading(false);}};// Lấy sinh viên đang chờ duyệt\nconst fetchPendingStudents=async mainClassId=>{setIsLoadingPending(true);try{const response=await axios.get(`${API_URL}/classes/main/${mainClassId}/pending-students`,{headers:{Authorization:`Bearer ${token}`}});setPendingStudents(response.data.data||[]);}catch(error){const errorMessage=error.response?error.response.status===403?\"Bạn không có quyền xem danh sách sinh viên chờ duyệt\":error.response.status===404?\"Không tìm thấy lớp học\":\"Lỗi khi tải danh sách sinh viên chờ duyệt\":\"Lỗi kết nối đến máy chủ\";enqueueSnackbar(/*#__PURE__*/_jsxs(\"div\",{children:[errorMessage,!error.response&&/*#__PURE__*/_jsx(Button,{size:\"small\",onClick:()=>fetchPendingStudents(mainClassId),sx:{mt:1,display:\"block\"},variant:\"outlined\",children:\"Th\\u1EED l\\u1EA1i\"})]}));console.error(\"Error fetching pending students:\",error);}finally{setIsLoadingPending(false);}};// Lấy sinh viên đã được duyệt\nconst fetchApprovedStudents=async classId=>{try{var _response$data$data,_response$data$data2;setIsLoadingApproved(true);const response=await axios.get(`${API_URL}/classes/main/${classId}/approved-students`,{headers:{Authorization:`Bearer ${token}`},params:{search:approvedSearchTerm,page:page+1,limit:rowsPerPage,sort:\"full_name\"}});setApprovedStudents(((_response$data$data=response.data.data)===null||_response$data$data===void 0?void 0:_response$data$data.students)||[]);setTotalApproved(((_response$data$data2=response.data.data)===null||_response$data$data2===void 0?void 0:_response$data$data2.total)||0);}catch(error){console.error(\"Lỗi khi tải danh sách sinh viên đã duyệt:\",error);let errorMessage=\"Lỗi khi tải danh sách sinh viên đã duyệt\";if(error.response&&error.response.data&&error.response.data.message){errorMessage=error.response.data.message;}enqueueSnackbar(errorMessage,{variant:\"error\"});}finally{setIsLoadingApproved(false);}};// Lấy danh sách khoa\nconst fetchDepartments=async()=>{try{const response=await axios.get(`${API_URL}/departments`,{headers:{Authorization:`Bearer ${token}`}});setDepartments(response.data.data||[]);}catch(error){console.error(\"Lỗi khi tải danh sách khoa:\",error);enqueueSnackbar(\"Không thể tải danh sách khoa\",{variant:\"error\"});}};// Xử lý thay đổi tab\nconst handleTabChange=(event,newValue)=>{setTabValue(newValue);};// Xử lý thay đổi trang\nconst handleChangePage=(event,newPage)=>{setPage(newPage);};// Xử lý thay đổi số dòng mỗi trang\nconst handleChangeRowsPerPage=event=>{setRowsPerPage(parseInt(event.target.value,10));setPage(0);};// Phê duyệt sinh viên\nconst handleApproveStudent=async studentId=>{try{await axios.put(`${API_URL}/classes/main/${mainClass._id}/approve-student/${studentId}`,{},{headers:{Authorization:`Bearer ${token}`}});enqueueSnackbar(\"Phê duyệt sinh viên thành công\",{variant:\"success\"});// Cập nhật lại danh sách\nawait fetchPendingStudents(mainClass._id);await fetchApprovedStudents(mainClass._id);}catch(error){var _error$response,_error$response$data;console.error(\"Lỗi khi phê duyệt sinh viên:\",error);enqueueSnackbar(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||\"Lỗi khi phê duyệt sinh viên\",{variant:\"error\"});}};// Mở dialog từ chối sinh viên\nconst openRejectDialog=studentId=>{setRejectDialog({open:true,studentId,reason:\"\"});};// Đóng dialog từ chối sinh viên\nconst closeRejectDialog=()=>{setRejectDialog({open:false,studentId:null,reason:\"\"});};// Từ chối sinh viên\nconst handleRejectStudent=async()=>{try{await axios.put(`${API_URL}/classes/main/${mainClass._id}/reject-student/${rejectDialog.studentId}`,{reason:rejectDialog.reason},{headers:{Authorization:`Bearer ${token}`}});enqueueSnackbar(\"Đã từ chối sinh viên\",{variant:\"success\"});closeRejectDialog();// Cập nhật lại danh sách\nawait fetchPendingStudents(mainClass._id);}catch(error){var _error$response2,_error$response2$data;console.error(\"Lỗi khi từ chối sinh viên:\",error);enqueueSnackbar(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||\"Lỗi khi từ chối sinh viên\",{variant:\"error\"});}};// Xử lý khi thay đổi lớp\nconst handleChangeClass=event=>{const selectedClassId=event.target.value;const selectedClass=mainClasses.find(cls=>cls._id===selectedClassId);if(selectedClass){setMainClass(selectedClass);setPendingStudents([]);setApprovedStudents([]);setPage(0);fetchPendingStudents(selectedClassId);fetchApprovedStudents(selectedClassId);}};// Render thông tin lớp\nconst renderClassInfo=()=>{var _mainClass$students,_mainClass$advisor_id;if(!mainClass)return null;return/*#__PURE__*/_jsx(Card,{sx:{mb:3,boxShadow:3},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\",mb:2},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",sx:{color:\"primary.main\",fontWeight:\"bold\",display:\"flex\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(Class,{sx:{mr:1}}),\"Th\\xF4ng tin l\\u1EDBp \",mainClass.name]}),mainClasses.length>1&&/*#__PURE__*/_jsx(Chip,{icon:/*#__PURE__*/_jsx(SwapHoriz,{}),label:`${mainClasses.length} lớp phụ trách`,color:\"info\",variant:\"outlined\"})]}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:6,children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",sx:{color:\"primary.main\",fontWeight:\"bold\"},children:\"Chi ti\\u1EBFt l\\u1EDBp ch\\xEDnh\"}),/*#__PURE__*/_jsxs(Box,{sx:{pl:2,borderLeft:\"4px solid\",borderColor:\"primary.main\"},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",sx:{mb:1},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"T\\xEAn l\\u1EDBp:\"}),\" \",mainClass.name]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",sx:{mb:1},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"M\\xE3 l\\u1EDBp:\"}),\" \",mainClass.class_code]}),mainClass.department_id&&/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",sx:{mb:1},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Khoa:\"}),\" \",mainClass.department_id.name]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",sx:{mb:1},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"T\\u1ED5ng s\\u1ED1 sinh vi\\xEAn:\"}),\" \",/*#__PURE__*/_jsx(Chip,{label:((_mainClass$students=mainClass.students)===null||_mainClass$students===void 0?void 0:_mainClass$students.length)||0,color:\"primary\",size:\"small\",sx:{fontWeight:\"bold\"}})]})]})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:6,children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",sx:{color:\"primary.main\",fontWeight:\"bold\"},children:\"Gi\\xE1o vi\\xEAn c\\u1ED1 v\\u1EA5n\"}),/*#__PURE__*/_jsx(Box,{sx:{pl:2,borderLeft:\"4px solid\",borderColor:\"primary.main\"},children:mainClass.advisor_id?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",alignItems:\"center\",mb:1},children:[/*#__PURE__*/_jsx(Avatar,{sx:{mr:2,bgcolor:\"primary.main\"},children:((_mainClass$advisor_id=mainClass.advisor_id.full_name)===null||_mainClass$advisor_id===void 0?void 0:_mainClass$advisor_id.charAt(0))||\"A\"}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"H\\u1ECD t\\xEAn:\"}),\" \",mainClass.advisor_id.full_name]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",mainClass.advisor_id.email]})]})]}),/*#__PURE__*/_jsx(Chip,{icon:/*#__PURE__*/_jsx(CheckCircle,{}),label:\"Gi\\xE1o vi\\xEAn c\\u1ED1 v\\u1EA5n hi\\u1EC7n t\\u1EA1i\",color:\"success\",variant:\"outlined\",size:\"small\"})]}):/*#__PURE__*/_jsxs(Typography,{color:\"text.secondary\",children:[/*#__PURE__*/_jsx(Warning,{sx:{verticalAlign:\"middle\",mr:1,color:\"warning.main\"}}),\"Ch\\u01B0a c\\xF3 gi\\xE1o vi\\xEAn c\\u1ED1 v\\u1EA5n\"]})})]})]})]})});};// Xem chi tiết sinh viên\nconst handleViewStudent=studentId=>{navigate(`/profile/${studentId}`);};// Render khi đang tải dữ liệu\nconst renderLoadingState=()=>/*#__PURE__*/_jsxs(Box,{sx:{p:3},children:[/*#__PURE__*/_jsx(Skeleton,{variant:\"rectangular\",width:\"100%\",height:100,sx:{mb:2}}),/*#__PURE__*/_jsx(Skeleton,{variant:\"rectangular\",width:\"100%\",height:400})]});// Làm mới toàn bộ dữ liệu\nconst refreshAllData=async()=>{if(mainClass){setIsLoadingPending(true);setIsLoadingApproved(true);await fetchPendingStudents(mainClass._id);await fetchApprovedStudents(mainClass._id);setIsLoadingPending(false);setIsLoadingApproved(false);}};// Render khi có lỗi\nconst renderErrorState=()=>/*#__PURE__*/_jsxs(Box,{sx:{p:3},children:[/*#__PURE__*/_jsxs(Alert,{severity:\"error\",sx:{mb:2},action:/*#__PURE__*/_jsx(Button,{color:\"inherit\",size:\"small\",onClick:fetchMainClasses,children:\"Th\\u1EED l\\u1EA1i\"}),children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",sx:{fontWeight:\"bold\"},children:\"L\\u1ED7i khi t\\u1EA3i d\\u1EEF li\\u1EC7u\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:error})]}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:()=>navigate(\"/teacher/dashboard\"),startIcon:/*#__PURE__*/_jsx(School,{}),children:\"Quay l\\u1EA1i trang ch\\u1EE7\"})]});// Hàm lọc sinh viên theo từ khóa tìm kiếm\nconst filteredPendingStudents=pendingStudents.filter(student=>{var _student$full_name,_student$email,_student$school_info,_student$school_info$;return((_student$full_name=student.full_name)===null||_student$full_name===void 0?void 0:_student$full_name.toLowerCase().includes(pendingSearchTerm.toLowerCase()))||((_student$email=student.email)===null||_student$email===void 0?void 0:_student$email.toLowerCase().includes(pendingSearchTerm.toLowerCase()))||((_student$school_info=student.school_info)===null||_student$school_info===void 0?void 0:(_student$school_info$=_student$school_info.student_id)===null||_student$school_info$===void 0?void 0:_student$school_info$.toLowerCase().includes(pendingSearchTerm.toLowerCase()));});const filteredApprovedStudents=approvedStudents.filter(student=>{var _student$full_name2,_student$email2,_student$school_info2,_student$school_info3;return((_student$full_name2=student.full_name)===null||_student$full_name2===void 0?void 0:_student$full_name2.toLowerCase().includes(approvedSearchTerm.toLowerCase()))||((_student$email2=student.email)===null||_student$email2===void 0?void 0:_student$email2.toLowerCase().includes(approvedSearchTerm.toLowerCase()))||((_student$school_info2=student.school_info)===null||_student$school_info2===void 0?void 0:(_student$school_info3=_student$school_info2.student_id)===null||_student$school_info3===void 0?void 0:_student$school_info3.toLowerCase().includes(approvedSearchTerm.toLowerCase()));});// Mở dialog thêm lớp chính\nconst handleOpenAddClassDialog=()=>{setOpenAddClassDialog(true);};// Đóng dialog thêm lớp chính\nconst handleCloseAddClassDialog=()=>{setOpenAddClassDialog(false);setNewClass({name:\"\",code:\"\",department_id:\"\",advisor_id:(user===null||user===void 0?void 0:user._id)||\"\",students:[]});};// Xử lý thay đổi thông tin lớp mới\nconst handleNewClassChange=e=>{const{name,value}=e.target;setNewClass(prev=>({...prev,[name]:value}));};// Xử lý tạo lớp chính mới\nconst handleCreateMainClass=async()=>{try{setIsSubmitting(true);// Kiểm tra các trường bắt buộc\nif(!newClass.name||!newClass.code||!newClass.department_id){enqueueSnackbar(\"Vui lòng điền đầy đủ thông tin\",{variant:\"warning\"});setIsSubmitting(false);return;}const response=await axios.post(`${API_URL}/classes/main`,{name:newClass.name,code:newClass.code,department_id:newClass.department_id,advisor_id:newClass.advisor_id,students:newClass.students},{headers:{Authorization:`Bearer ${token}`}});enqueueSnackbar(\"Tạo lớp chính thành công\",{variant:\"success\"});handleCloseAddClassDialog();fetchMainClasses();// Tải lại danh sách lớp\n}catch(error){var _error$response3,_error$response3$data;console.error(\"Lỗi khi tạo lớp chính:\",error);enqueueSnackbar(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.message)||\"Lỗi khi tạo lớp chính\",{variant:\"error\"});}finally{setIsSubmitting(false);}};// Dialog xem chi tiết sinh viên\nconst renderStudentDetailDialog=()=>{var _selectedStudent$full,_selectedStudent$scho,_selectedStudent$scho2,_selectedStudent$scho3,_selectedStudent$scho4,_selectedStudent$scho5,_selectedStudent$scho6,_selectedStudent$scho7,_selectedStudent$cont,_selectedStudent$scho8,_selectedStudent$scho9,_selectedStudent$scho10,_selectedStudent$scho11,_selectedStudent$scho12;return/*#__PURE__*/_jsxs(Dialog,{open:openStudentDetail,onClose:()=>setOpenStudentDetail(false),fullWidth:true,maxWidth:\"md\",children:[/*#__PURE__*/_jsx(DialogTitle,{children:/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\"},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Th\\xF4ng tin sinh vi\\xEAn\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",size:\"small\",onClick:()=>setOpenStudentDetail(false),startIcon:/*#__PURE__*/_jsx(Close,{}),children:\"\\u0110\\xF3ng\"})]})}),/*#__PURE__*/_jsx(DialogContent,{dividers:true,children:selectedStudent&&/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsxs(Box,{sx:{textAlign:\"center\",mb:2},children:[/*#__PURE__*/_jsx(Avatar,{src:selectedStudent.avatar_url,alt:selectedStudent.full_name,sx:{width:120,height:120,mx:\"auto\",mb:2,border:\"3px solid\",borderColor:\"primary.main\"},children:((_selectedStudent$full=selectedStudent.full_name)===null||_selectedStudent$full===void 0?void 0:_selectedStudent$full.charAt(0))||\"S\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",sx:{fontWeight:\"bold\"},children:selectedStudent.full_name}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:selectedStudent.email}),((_selectedStudent$scho=selectedStudent.school_info)===null||_selectedStudent$scho===void 0?void 0:_selectedStudent$scho.student_id)&&/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle1\",sx:{mt:1,fontWeight:\"medium\"},children:[\"MSSV: \",selectedStudent.school_info.student_id]}),!((_selectedStudent$scho2=selectedStudent.school_info)!==null&&_selectedStudent$scho2!==void 0&&_selectedStudent$scho2.student_id)&&((_selectedStudent$scho3=selectedStudent.school_info)===null||_selectedStudent$scho3===void 0?void 0:_selectedStudent$scho3.student_code)&&/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle1\",sx:{mt:1,fontWeight:\"medium\"},children:[\"M\\xE3 SV (c\\u0169): \",selectedStudent.school_info.student_code]}),/*#__PURE__*/_jsx(Box,{sx:{mt:2,display:\"flex\",flexDirection:\"column\",gap:1},children:/*#__PURE__*/_jsx(Chip,{label:selectedStudent.status===\"pending\"?\"Chờ duyệt\":\"Đã duyệt\",color:selectedStudent.status===\"pending\"?\"warning\":\"success\",sx:{mb:1}})}),/*#__PURE__*/_jsx(Box,{sx:{mt:2},children:/*#__PURE__*/_jsx(Chip,{icon:selectedStudent.has_face_data?/*#__PURE__*/_jsx(CheckCircle,{}):/*#__PURE__*/_jsx(Cancel,{}),label:selectedStudent.has_face_data?\"Đã đăng ký khuôn mặt\":\"Chưa đăng ký khuôn mặt\",color:selectedStudent.has_face_data?\"success\":\"error\",variant:\"outlined\",sx:{mb:1}})})]})}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:8,children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",gutterBottom:true,sx:{display:\"flex\",alignItems:\"center\",fontWeight:\"bold\",color:\"primary.main\"},children:[/*#__PURE__*/_jsx(School,{sx:{mr:1}}),\"Th\\xF4ng tin h\\u1ECDc t\\u1EADp\"]}),/*#__PURE__*/_jsx(Divider,{sx:{mb:2}}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[((_selectedStudent$scho4=selectedStudent.school_info)===null||_selectedStudent$scho4===void 0?void 0:_selectedStudent$scho4.department)&&/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,sm:6,children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",color:\"textSecondary\",children:\"Khoa\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",fontWeight:\"medium\",children:selectedStudent.school_info.department})]}),((_selectedStudent$scho5=selectedStudent.school_info)===null||_selectedStudent$scho5===void 0?void 0:_selectedStudent$scho5.major)&&/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,sm:6,children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",color:\"textSecondary\",children:\"Ng\\xE0nh h\\u1ECDc\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",fontWeight:\"medium\",children:selectedStudent.school_info.major})]}),((_selectedStudent$scho6=selectedStudent.school_info)===null||_selectedStudent$scho6===void 0?void 0:_selectedStudent$scho6.class)&&/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,sm:6,children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",color:\"textSecondary\",children:\"L\\u1EDBp\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",fontWeight:\"medium\",children:selectedStudent.school_info.class})]}),((_selectedStudent$scho7=selectedStudent.school_info)===null||_selectedStudent$scho7===void 0?void 0:_selectedStudent$scho7.year)&&/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,sm:6,children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",color:\"textSecondary\",children:\"Kh\\xF3a\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",fontWeight:\"medium\",children:selectedStudent.school_info.year})]}),((_selectedStudent$cont=selectedStudent.contact)===null||_selectedStudent$cont===void 0?void 0:_selectedStudent$cont.phone)&&/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,sm:6,children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",color:\"textSecondary\",children:\"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",fontWeight:\"medium\",children:selectedStudent.contact.phone})]}),!((_selectedStudent$scho8=selectedStudent.school_info)!==null&&_selectedStudent$scho8!==void 0&&_selectedStudent$scho8.student_id)&&!((_selectedStudent$scho9=selectedStudent.school_info)!==null&&_selectedStudent$scho9!==void 0&&_selectedStudent$scho9.student_code)&&/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,sm:6,children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",color:\"textSecondary\",children:\"MSSV\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"error.main\",fontStyle:\"italic\",children:\"Ch\\u01B0a c\\u1EADp nh\\u1EADt\"})]}),!((_selectedStudent$scho10=selectedStudent.school_info)!==null&&_selectedStudent$scho10!==void 0&&_selectedStudent$scho10.department)&&/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,sm:6,children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",color:\"textSecondary\",children:\"Khoa\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"error.main\",fontStyle:\"italic\",children:\"Ch\\u01B0a c\\u1EADp nh\\u1EADt\"})]}),!((_selectedStudent$scho11=selectedStudent.school_info)!==null&&_selectedStudent$scho11!==void 0&&_selectedStudent$scho11.major)&&/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,sm:6,children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",color:\"textSecondary\",children:\"Ng\\xE0nh h\\u1ECDc\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"error.main\",fontStyle:\"italic\",children:\"Ch\\u01B0a c\\u1EADp nh\\u1EADt\"})]}),!((_selectedStudent$scho12=selectedStudent.school_info)!==null&&_selectedStudent$scho12!==void 0&&_selectedStudent$scho12.class)&&/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,sm:6,children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",color:\"textSecondary\",children:\"L\\u1EDBp\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"error.main\",fontStyle:\"italic\",children:\"Ch\\u01B0a c\\u1EADp nh\\u1EADt\"})]})]}),selectedStudent.has_face_data&&selectedStudent.faceFeatures&&/*#__PURE__*/_jsxs(Box,{sx:{mt:3},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",gutterBottom:true,sx:{display:\"flex\",alignItems:\"center\",fontWeight:\"bold\",color:\"primary.main\"},children:[/*#__PURE__*/_jsx(Face,{sx:{mr:1}}),\"H\\xECnh \\u1EA3nh khu\\xF4n m\\u1EB7t \\u0111\\xE3 \\u0111\\u0103ng k\\xFD\"]}),/*#__PURE__*/_jsx(Divider,{sx:{mb:2}}),/*#__PURE__*/_jsx(Box,{sx:{display:\"flex\",flexWrap:\"wrap\",gap:1},children:selectedStudent.faceImages&&selectedStudent.faceImages.length>0?selectedStudent.faceImages.map((img,index)=>/*#__PURE__*/_jsx(Box,{component:\"img\",src:img,alt:`Khuôn mặt ${index+1}`,sx:{width:100,height:100,objectFit:\"cover\",borderRadius:1,border:\"1px solid #ddd\"}},index)):/*#__PURE__*/_jsx(Alert,{severity:\"info\",sx:{width:\"100%\"},children:/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"Sinh vi\\xEAn \\u0111\\xE3 \\u0111\\u0103ng k\\xFD d\\u1EEF li\\u1EC7u khu\\xF4n m\\u1EB7t nh\\u01B0ng kh\\xF4ng c\\xF3 h\\xECnh \\u1EA3nh m\\u1EABu hi\\u1EC3n th\\u1ECB. H\\u1EC7 th\\u1ED1ng v\\u1EABn c\\xF3 th\\u1EC3 nh\\u1EADn di\\u1EC7n khu\\xF4n m\\u1EB7t n\\xE0y cho vi\\u1EC7c \\u0111i\\u1EC3m danh.\"})})})]}),selectedStudent.status===\"pending\"&&/*#__PURE__*/_jsxs(Box,{sx:{mt:3,display:\"flex\",justifyContent:\"flex-end\",gap:2},children:[/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",startIcon:/*#__PURE__*/_jsx(CheckCircle,{}),onClick:()=>{handleApproveStudent(selectedStudent._id);setOpenStudentDetail(false);},children:\"Ph\\xEA duy\\u1EC7t\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",color:\"error\",startIcon:/*#__PURE__*/_jsx(Cancel,{}),onClick:()=>{openRejectDialog(selectedStudent._id);setOpenStudentDetail(false);},children:\"T\\u1EEB ch\\u1ED1i\"})]})]})]})})]});};if(isLoading){return renderLoadingState();}if(error&&!mainClass){return renderErrorState();}if(!mainClass){return/*#__PURE__*/_jsxs(Box,{sx:{p:3},children:[/*#__PURE__*/_jsx(Alert,{severity:\"info\",icon:/*#__PURE__*/_jsx(Info,{}),sx:{mb:2,display:\"flex\",alignItems:\"center\"},children:/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",sx:{fontWeight:\"bold\"},children:\"B\\u1EA1n ch\\u01B0a \\u0111\\u01B0\\u1EE3c ph\\xE2n c\\xF4ng l\\xE0m c\\u1ED1 v\\u1EA5n cho l\\u1EDBp n\\xE0o\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"Vui l\\xF2ng li\\xEAn h\\u1EC7 v\\u1EDBi qu\\u1EA3n tr\\u1ECB vi\\xEAn \\u0111\\u1EC3 \\u0111\\u01B0\\u1EE3c ph\\xE2n c\\xF4ng l\\u1EDBp c\\u1ED1 v\\u1EA5n\"})]})}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:()=>navigate(\"/teacher/dashboard\"),startIcon:/*#__PURE__*/_jsx(School,{}),children:\"Quay l\\u1EA1i trang ch\\u1EE7\"})]});}return/*#__PURE__*/_jsxs(Box,{sx:{padding:3},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",mb:3},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h4\",gutterBottom:false,sx:{fontWeight:\"bold\",color:\"primary.main\",display:\"flex\",alignItems:\"center\",m:0},children:[/*#__PURE__*/_jsx(School,{sx:{mr:1,fontSize:32}}),\"Qu\\u1EA3n l\\xFD l\\u1EDBp ch\\xEDnh\"]}),/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",gap:2},children:[/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",startIcon:/*#__PURE__*/_jsx(Add,{}),onClick:handleOpenAddClassDialog,children:\"Th\\xEAm l\\u1EDBp ch\\xEDnh\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",color:\"primary\",size:\"small\",onClick:refreshAllData,startIcon:/*#__PURE__*/_jsx(HourglassEmpty,{}),disabled:isLoadingPending||isLoadingApproved,children:isLoadingPending||isLoadingApproved?\"Đang làm mới...\":\"Làm mới dữ liệu\"})]})]}),mainClasses.length>1&&/*#__PURE__*/_jsx(Card,{sx:{mb:3,p:2,boxShadow:3},children:/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(Class,{sx:{mr:2,color:\"primary.main\",fontSize:28}}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,children:[/*#__PURE__*/_jsx(InputLabel,{id:\"class-select-label\",children:\"Ch\\u1ECDn l\\u1EDBp \\u0111\\u1EC3 qu\\u1EA3n l\\xFD\"}),/*#__PURE__*/_jsx(Select,{labelId:\"class-select-label\",id:\"class-select\",value:mainClass?mainClass._id:\"\",onChange:handleChangeClass,input:/*#__PURE__*/_jsx(OutlinedInput,{label:\"Ch\\u1ECDn l\\u1EDBp \\u0111\\u1EC3 qu\\u1EA3n l\\xFD\"}),renderValue:selectedId=>{var _selectedClass$studen;const selectedClass=mainClasses.find(cls=>cls._id===selectedId);return/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(School,{sx:{mr:1,color:\"primary.main\"}}),/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",sx:{fontWeight:\"bold\"},children:[selectedClass===null||selectedClass===void 0?void 0:selectedClass.name,\" (\",selectedClass===null||selectedClass===void 0?void 0:selectedClass.class_code,\")\"]}),/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",alignItems:\"center\",ml:2},children:[/*#__PURE__*/_jsx(Chip,{size:\"small\",color:\"primary\",label:`${(selectedClass===null||selectedClass===void 0?void 0:(_selectedClass$studen=selectedClass.students)===null||_selectedClass$studen===void 0?void 0:_selectedClass$studen.length)||0} sinh viên`}),pendingStudents.length>0&&/*#__PURE__*/_jsx(Chip,{size:\"small\",color:\"error\",icon:/*#__PURE__*/_jsx(HourglassEmpty,{}),label:`${pendingStudents.length} chờ duyệt`,sx:{ml:1}})]})]});},children:mainClasses.map(cls=>{var _cls$students;return/*#__PURE__*/_jsx(MenuItem,{value:cls._id,children:/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",alignItems:\"center\",width:\"100%\",justifyContent:\"space-between\"},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(School,{sx:{mr:1,color:cls._id===(mainClass===null||mainClass===void 0?void 0:mainClass._id)?\"primary.main\":\"text.secondary\"}}),/*#__PURE__*/_jsx(Typography,{color:cls._id===(mainClass===null||mainClass===void 0?void 0:mainClass._id)?\"primary.main\":\"text.primary\",sx:{fontWeight:cls._id===(mainClass===null||mainClass===void 0?void 0:mainClass._id)?\"bold\":\"normal\"},children:cls.name}),/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",sx:{ml:1,color:\"text.secondary\"},children:[\"(\",cls.class_code,\")\"]})]}),/*#__PURE__*/_jsx(Chip,{size:\"small\",color:cls._id===(mainClass===null||mainClass===void 0?void 0:mainClass._id)?\"primary\":\"default\",variant:cls._id===(mainClass===null||mainClass===void 0?void 0:mainClass._id)?\"filled\":\"outlined\",label:`${((_cls$students=cls.students)===null||_cls$students===void 0?void 0:_cls$students.length)||0} sinh viên`})]})},cls._id);})})]})]})}),renderClassInfo(),/*#__PURE__*/_jsxs(Paper,{sx:{width:\"100%\",mb:2,overflow:\"hidden\",boxShadow:3},children:[/*#__PURE__*/_jsxs(Tabs,{value:tabValue,onChange:handleTabChange,indicatorColor:\"primary\",textColor:\"primary\",variant:\"fullWidth\",sx:{borderBottom:1,borderColor:\"divider\",\"& .MuiTab-root\":{fontWeight:\"bold\"}},children:[/*#__PURE__*/_jsx(Tab,{label:/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(Badge,{badgeContent:pendingStudents.length,color:\"error\",max:99,sx:{\"& .MuiBadge-badge\":{fontWeight:\"bold\"}},children:/*#__PURE__*/_jsx(HourglassEmpty,{sx:{mr:1}})}),/*#__PURE__*/_jsx(Box,{sx:{ml:pendingStudents.length>0?1:0},children:\"Sinh vi\\xEAn ch\\u1EDD duy\\u1EC7t\"})]})}),/*#__PURE__*/_jsx(Tab,{label:/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(Badge,{badgeContent:approvedStudents.length,color:\"success\",max:99,sx:{\"& .MuiBadge-badge\":{fontWeight:\"bold\"}},children:/*#__PURE__*/_jsx(School,{sx:{mr:1}})}),/*#__PURE__*/_jsx(Box,{sx:{ml:approvedStudents.length>0?1:0},children:\"Sinh vi\\xEAn c\\u1EE7a l\\u1EDBp\"})]})})]}),/*#__PURE__*/_jsxs(TabPanel,{value:tabValue,index:0,children:[/*#__PURE__*/_jsxs(Box,{sx:{mb:2,display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",component:\"div\",sx:{mb:1},children:\"Danh s\\xE1ch sinh vi\\xEAn ch\\u1EDD duy\\u1EC7t\"}),/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",gap:2},children:[/*#__PURE__*/_jsx(TextField,{size:\"small\",label:\"T\\xECm ki\\u1EBFm sinh vi\\xEAn\",variant:\"outlined\",value:pendingSearchTerm,onChange:e=>setPendingSearchTerm(e.target.value),InputProps:{endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",children:/*#__PURE__*/_jsx(SearchIcon,{})})}}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",startIcon:/*#__PURE__*/_jsx(RefreshIcon,{}),onClick:()=>{fetchPendingStudents(mainClass._id);},disabled:isLoadingPending,children:\"L\\xE0m m\\u1EDBi\"})]})]}),isLoadingPending?/*#__PURE__*/_jsx(Box,{sx:{display:\"flex\",justifyContent:\"center\",my:4},children:/*#__PURE__*/_jsx(CircularProgress,{})}):filteredPendingStudents.length>0?/*#__PURE__*/_jsx(TableContainer,{component:Paper,children:/*#__PURE__*/_jsxs(Table,{sx:{minWidth:650},\"aria-label\":\"simple table\",children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"H\\u1ECD v\\xE0 t\\xEAn\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Email\"}),/*#__PURE__*/_jsx(TableCell,{children:\"MSSV\"}),/*#__PURE__*/_jsx(TableCell,{children:\"L\\u1EDBp\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"H\\xE0nh \\u0111\\u1ED9ng\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:filteredPendingStudents.map(student=>{var _student$full_name3,_student$school_info4,_student$school_info5,_student$school_info6;return/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{component:\"th\",scope:\"row\",children:/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(Avatar,{src:student.avatar_url,alt:student.full_name,sx:{width:36,height:36,mr:1.5},children:((_student$full_name3=student.full_name)===null||_student$full_name3===void 0?void 0:_student$full_name3.charAt(0))||\"S\"}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"body1\",sx:{fontWeight:\"medium\"},children:student.full_name}),student.has_face_data&&/*#__PURE__*/_jsx(Chip,{icon:/*#__PURE__*/_jsx(Face,{}),label:\"\\u0110\\xE3 \\u0111\\u0103ng k\\xFD khu\\xF4n m\\u1EB7t\",size:\"small\",color:\"success\",variant:\"outlined\",sx:{mt:0.5,height:24}})]})]})}),/*#__PURE__*/_jsx(TableCell,{children:student.email}),/*#__PURE__*/_jsx(TableCell,{children:((_student$school_info4=student.school_info)===null||_student$school_info4===void 0?void 0:_student$school_info4.student_id)||((_student$school_info5=student.school_info)===null||_student$school_info5===void 0?void 0:_student$school_info5.student_code)||/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",fontStyle:\"italic\",children:\"Ch\\u01B0a c\\u1EADp nh\\u1EADt\"})}),/*#__PURE__*/_jsx(TableCell,{children:((_student$school_info6=student.school_info)===null||_student$school_info6===void 0?void 0:_student$school_info6.class)||/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",fontStyle:\"italic\",children:\"Ch\\u01B0a c\\u1EADp nh\\u1EADt\"})}),/*#__PURE__*/_jsxs(TableCell,{align:\"center\",children:[/*#__PURE__*/_jsx(Tooltip,{title:\"Xem chi ti\\u1EBFt\",children:/*#__PURE__*/_jsx(IconButton,{onClick:()=>{setSelectedStudent(student);setOpenStudentDetail(true);},children:/*#__PURE__*/_jsx(InfoIcon,{})})}),/*#__PURE__*/_jsx(Tooltip,{title:\"Duy\\u1EC7t sinh vi\\xEAn\",children:/*#__PURE__*/_jsx(IconButton,{color:\"primary\",onClick:()=>handleApproveStudent(student._id),children:/*#__PURE__*/_jsx(CheckIcon,{})})}),/*#__PURE__*/_jsx(Tooltip,{title:\"T\\u1EEB ch\\u1ED1i\",children:/*#__PURE__*/_jsx(IconButton,{color:\"error\",onClick:()=>openRejectDialog(student._id),children:/*#__PURE__*/_jsx(ClearIcon,{})})})]})]},student._id);})})]})}):/*#__PURE__*/_jsxs(Paper,{sx:{p:4,textAlign:\"center\"},children:[/*#__PURE__*/_jsx(NoDataSvg,{width:\"200px\",height:\"200px\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",color:\"textSecondary\",sx:{mt:2},children:\"Kh\\xF4ng c\\xF3 sinh vi\\xEAn n\\xE0o ch\\u1EDD duy\\u1EC7t\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:\"Khi c\\xF3 sinh vi\\xEAn \\u0111\\u0103ng k\\xFD v\\xE0o l\\u1EDBp, h\\u1ECD s\\u1EBD xu\\u1EA5t hi\\u1EC7n \\u1EDF \\u0111\\xE2y\"})]})]}),/*#__PURE__*/_jsxs(TabPanel,{value:tabValue,index:1,children:[/*#__PURE__*/_jsxs(Box,{sx:{mb:2,display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",flexWrap:\"wrap\",gap:1},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",component:\"div\",children:\"Danh s\\xE1ch sinh vi\\xEAn \\u0111\\xE3 duy\\u1EC7t\"}),/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",gap:2},children:[/*#__PURE__*/_jsx(TextField,{size:\"small\",label:\"T\\xECm ki\\u1EBFm sinh vi\\xEAn\",variant:\"outlined\",value:approvedSearchTerm,onChange:e=>{setApprovedSearchTerm(e.target.value);setPage(0);},InputProps:{endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",children:/*#__PURE__*/_jsx(SearchIcon,{})})}}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",startIcon:/*#__PURE__*/_jsx(RefreshIcon,{}),onClick:()=>{setApprovedSearchTerm(\"\");setPage(0);fetchApprovedStudents(mainClass._id);},disabled:isLoadingApproved,children:\"L\\xE0m m\\u1EDBi\"})]})]}),isLoadingApproved?/*#__PURE__*/_jsx(Box,{sx:{display:\"flex\",justifyContent:\"center\",my:4},children:/*#__PURE__*/_jsx(CircularProgress,{})}):filteredApprovedStudents.length>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(TableContainer,{component:Paper,sx:{boxShadow:2},children:/*#__PURE__*/_jsxs(Table,{sx:{minWidth:650},\"aria-label\":\"simple table\",children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{sx:{bgcolor:\"primary.lighter\"},children:[/*#__PURE__*/_jsx(TableCell,{children:\"H\\u1ECD v\\xE0 t\\xEAn\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Email\"}),/*#__PURE__*/_jsx(TableCell,{children:\"MSSV\"}),/*#__PURE__*/_jsx(TableCell,{children:\"L\\u1EDBp\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Khu\\xF4n m\\u1EB7t\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"H\\xE0nh \\u0111\\u1ED9ng\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:filteredApprovedStudents.map(student=>{var _student$full_name4,_student$school_info7,_student$school_info8,_student$school_info9;return/*#__PURE__*/_jsxs(TableRow,{hover:true,children:[/*#__PURE__*/_jsx(TableCell,{component:\"th\",scope:\"row\",children:/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(Avatar,{src:student.avatar_url,alt:student.full_name,sx:{width:36,height:36,mr:1.5},children:((_student$full_name4=student.full_name)===null||_student$full_name4===void 0?void 0:_student$full_name4.charAt(0))||\"S\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",sx:{fontWeight:\"medium\"},children:student.full_name})]})}),/*#__PURE__*/_jsx(TableCell,{children:student.email}),/*#__PURE__*/_jsx(TableCell,{children:((_student$school_info7=student.school_info)===null||_student$school_info7===void 0?void 0:_student$school_info7.student_id)||((_student$school_info8=student.school_info)===null||_student$school_info8===void 0?void 0:_student$school_info8.student_code)||/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",fontStyle:\"italic\",children:\"Ch\\u01B0a c\\u1EADp nh\\u1EADt\"})}),/*#__PURE__*/_jsx(TableCell,{children:((_student$school_info9=student.school_info)===null||_student$school_info9===void 0?void 0:_student$school_info9.class)||/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",fontStyle:\"italic\",children:\"Ch\\u01B0a c\\u1EADp nh\\u1EADt\"})}),/*#__PURE__*/_jsx(TableCell,{children:student.has_face_data?/*#__PURE__*/_jsx(Chip,{icon:/*#__PURE__*/_jsx(Face,{}),label:\"\\u0110\\xE3 \\u0111\\u0103ng k\\xFD\",size:\"small\",color:\"success\",variant:\"outlined\"}):/*#__PURE__*/_jsx(Chip,{icon:/*#__PURE__*/_jsx(NoFace,{}),label:\"Ch\\u01B0a \\u0111\\u0103ng k\\xFD\",size:\"small\",color:\"warning\",variant:\"outlined\"})}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:/*#__PURE__*/_jsx(Tooltip,{title:\"Xem chi ti\\u1EBFt\",children:/*#__PURE__*/_jsx(IconButton,{onClick:()=>{setSelectedStudent(student);setOpenStudentDetail(true);},children:/*#__PURE__*/_jsx(InfoIcon,{})})})})]},student._id);})})]})}),/*#__PURE__*/_jsx(TablePagination,{rowsPerPageOptions:[5,10,25,50],component:\"div\",count:totalApproved,rowsPerPage:rowsPerPage,page:page,onPageChange:handleChangePage,onRowsPerPageChange:handleChangeRowsPerPage,labelRowsPerPage:\"S\\u1ED1 h\\xE0ng m\\u1ED7i trang:\",labelDisplayedRows:_ref=>{let{from,to,count}=_ref;return`${from}-${to} của ${count}`;}})]}):/*#__PURE__*/_jsxs(Paper,{sx:{p:4,textAlign:\"center\"},children:[/*#__PURE__*/_jsx(NoDataSvg,{width:\"200px\",height:\"200px\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",color:\"textSecondary\",sx:{mt:2},children:\"Ch\\u01B0a c\\xF3 sinh vi\\xEAn n\\xE0o \\u0111\\u01B0\\u1EE3c duy\\u1EC7t\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:\"Khi b\\u1EA1n duy\\u1EC7t sinh vi\\xEAn, h\\u1ECD s\\u1EBD xu\\u1EA5t hi\\u1EC7n \\u1EDF \\u0111\\xE2y\"})]})]})]}),/*#__PURE__*/_jsxs(Dialog,{open:rejectDialog.open,onClose:closeRejectDialog,maxWidth:\"sm\",fullWidth:true,PaperProps:{sx:{borderRadius:2}},children:[/*#__PURE__*/_jsxs(DialogTitle,{sx:{bgcolor:\"error.light\",color:\"white\",fontWeight:\"bold\"},children:[/*#__PURE__*/_jsx(Close,{sx:{verticalAlign:\"middle\",mr:1}}),\"T\\u1EEB ch\\u1ED1i sinh vi\\xEAn\"]}),/*#__PURE__*/_jsxs(DialogContent,{sx:{py:2},children:[/*#__PURE__*/_jsx(Alert,{severity:\"warning\",sx:{mt:2,mb:2},children:/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"Sinh vi\\xEAn s\\u1EBD nh\\u1EADn \\u0111\\u01B0\\u1EE3c th\\xF4ng b\\xE1o v\\u1EC1 vi\\u1EC7c b\\u1ECB t\\u1EEB ch\\u1ED1i v\\xE0 l\\xFD do. Tr\\u1EA1ng th\\xE1i t\\xE0i kho\\u1EA3n c\\u1EE7a sinh vi\\xEAn s\\u1EBD chuy\\u1EC3n sang \\\"T\\u1EEB ch\\u1ED1i\\\".\"})}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,multiline:true,rows:3,label:\"L\\xFD do t\\u1EEB ch\\u1ED1i\",placeholder:\"Nh\\u1EADp l\\xFD do t\\u1EEB ch\\u1ED1i \\u0111\\u1EC3 th\\xF4ng b\\xE1o cho sinh vi\\xEAn\",value:rejectDialog.reason,onChange:e=>setRejectDialog({...rejectDialog,reason:e.target.value}),variant:\"outlined\",required:true,error:rejectDialog.reason.trim()===\"\",helperText:rejectDialog.reason.trim()===\"\"?\"Vui lòng nhập lý do từ chối\":\"\",sx:{mt:1}})]}),/*#__PURE__*/_jsxs(DialogActions,{sx:{px:3,pb:2},children:[/*#__PURE__*/_jsx(Button,{onClick:closeRejectDialog,variant:\"outlined\",startIcon:/*#__PURE__*/_jsx(Close,{}),children:\"H\\u1EE7y\"}),/*#__PURE__*/_jsx(Button,{onClick:handleRejectStudent,color:\"error\",variant:\"contained\",startIcon:/*#__PURE__*/_jsx(Close,{}),disabled:rejectDialog.reason.trim()===\"\",children:\"T\\u1EEB ch\\u1ED1i sinh vi\\xEAn\"})]})]}),/*#__PURE__*/_jsxs(Dialog,{open:openAddClassDialog,onClose:handleCloseAddClassDialog,maxWidth:\"sm\",fullWidth:true,children:[/*#__PURE__*/_jsxs(DialogTitle,{sx:{bgcolor:\"primary.main\",color:\"white\",fontWeight:\"bold\"},children:[/*#__PURE__*/_jsx(Add,{sx:{verticalAlign:\"middle\",mr:1}}),\"Th\\xEAm l\\u1EDBp ch\\xEDnh m\\u1EDBi\"]}),/*#__PURE__*/_jsx(DialogContent,{sx:{pt:3},children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"T\\xEAn l\\u1EDBp\",name:\"name\",value:newClass.name,onChange:handleNewClassChange,required:true,variant:\"outlined\",placeholder:\"Nh\\u1EADp t\\xEAn l\\u1EDBp (VD: C\\xF4ng ngh\\u1EC7 th\\xF4ng tin K19)\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"M\\xE3 l\\u1EDBp\",name:\"code\",value:newClass.code,onChange:handleNewClassChange,required:true,variant:\"outlined\",placeholder:\"Nh\\u1EADp m\\xE3 l\\u1EDBp (VD: CNTT-K19)\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,variant:\"outlined\",required:true,children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Khoa\"}),/*#__PURE__*/_jsx(Select,{name:\"department_id\",value:newClass.department_id,onChange:handleNewClassChange,label:\"Khoa\",children:departments.map(department=>/*#__PURE__*/_jsx(MenuItem,{value:department._id,children:department.name},department._id))})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,variant:\"outlined\",children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Gi\\xE1o vi\\xEAn c\\u1ED1 v\\u1EA5n\"}),/*#__PURE__*/_jsx(Select,{name:\"advisor_id\",value:newClass.advisor_id,onChange:handleNewClassChange,label:\"Gi\\xE1o vi\\xEAn c\\u1ED1 v\\u1EA5n\",disabled:true,children:/*#__PURE__*/_jsxs(MenuItem,{value:user===null||user===void 0?void 0:user._id,children:[(user===null||user===void 0?void 0:user.full_name)||\"Bạn\",\" (Gi\\xE1o vi\\xEAn hi\\u1EC7n t\\u1EA1i)\"]})}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"textSecondary\",sx:{mt:1},children:\"M\\u1EB7c \\u0111\\u1ECBnh l\\xE0 gi\\xE1o vi\\xEAn hi\\u1EC7n t\\u1EA1i. Ch\\u1EC9 admin m\\u1EDBi c\\xF3 th\\u1EC3 thay \\u0111\\u1ED5i gi\\xE1o vi\\xEAn c\\u1ED1 v\\u1EA5n.\"})]})})]})}),/*#__PURE__*/_jsxs(DialogActions,{sx:{px:3,pb:2},children:[/*#__PURE__*/_jsx(Button,{onClick:handleCloseAddClassDialog,disabled:isSubmitting,children:\"H\\u1EE7y\"}),/*#__PURE__*/_jsx(Button,{onClick:handleCreateMainClass,variant:\"contained\",color:\"primary\",disabled:isSubmitting,startIcon:isSubmitting?/*#__PURE__*/_jsx(CircularProgress,{size:20}):/*#__PURE__*/_jsx(Add,{}),children:isSubmitting?\"Đang tạo...\":\"Tạo lớp\"})]})]}),renderStudentDetailDialog()]});};export default TeacherMainClassPage;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}