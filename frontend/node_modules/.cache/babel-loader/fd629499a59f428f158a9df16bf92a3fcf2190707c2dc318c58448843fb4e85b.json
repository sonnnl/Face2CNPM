{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kasiz\\\\Documents\\\\Studying\\\\FaceReg\\\\frontend\\\\src\\\\pages\\\\FaceRegistrationPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, lazy, Suspense } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useSnackbar } from \"notistack\";\nimport axios from \"axios\";\nimport { Box, Typography, Paper, Button, Stepper, Step, StepLabel, StepContent, CircularProgress, Alert, Card, CardContent, Grid, Divider, List, ListItem, ListItemIcon, ListItemText, Dialog, DialogTitle, DialogContent, DialogActions } from \"@mui/material\";\nimport { Camera, Check, Face, Info, ViewArray, SaveAlt, Error, CheckCircle, ArrowBack, Help, CameraAlt, Person, Redo } from \"@mui/icons-material\";\nimport { getCurrentUser } from \"../redux/slices/authSlice\";\nimport { loadModels, detectFace } from \"../utils/faceUtils\";\n\n// Lazy load Webcam để giảm kích thước ban đầu\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Webcam = /*#__PURE__*/lazy(_c = () => import(\"react-webcam\"));\n_c2 = Webcam;\nconst API_URL = process.env.REACT_APP_API_URL || \"http://localhost:5000/api\";\nconst FaceRegistrationPage = () => {\n  _s();\n  var _webcamRef$current2, _webcamRef$current2$v;\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const {\n    enqueueSnackbar\n  } = useSnackbar();\n  const {\n    user,\n    token\n  } = useSelector(state => state.auth);\n\n  // Refs\n  const webcamRef = useRef(null);\n  const canvasRef = useRef(null);\n\n  // State\n  const [isLoading, setIsLoading] = useState(false);\n  const [activeStep, setActiveStep] = useState(0);\n  const [modelsLoaded, setModelsLoaded] = useState(false);\n  const [isCameraReady, setIsCameraReady] = useState(false);\n  const [capturedImages, setCapturedImages] = useState([]);\n  const [detectedFace, setDetectedFace] = useState(null);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [success, setSuccess] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [showHelpDialog, setShowHelpDialog] = useState(false);\n  const [showRegistrationForm, setShowRegistrationForm] = useState(false);\n\n  // Kiểm tra xem user đã đăng ký khuôn mặt chưa và quyết định hiển thị form\n  useEffect(() => {\n    if (user) {\n      if (user.face_registered) {\n        setShowRegistrationForm(false);\n        // Không cần enqueueSnackbar ở đây nữa, sẽ hiển thị Alert cố định\n      } else {\n        setShowRegistrationForm(true);\n      }\n    }\n  }, [user]); // Chỉ phụ thuộc vào user\n\n  // Load các model nhận diện khuôn mặt khi cần thiết (chỉ khi đến bước chụp ảnh)\n  useEffect(() => {\n    const initModels = async () => {\n      if (activeStep === 1 && !modelsLoaded) {\n        try {\n          setIsLoading(true);\n          await loadModels();\n          setModelsLoaded(true);\n          enqueueSnackbar(\"Đã tải mô hình nhận diện khuôn mặt\", {\n            variant: \"success\"\n          });\n        } catch (error) {\n          console.error(\"Lỗi khi tải mô hình:\", error);\n          setError(\"Không thể tải mô hình nhận diện khuôn mặt. Vui lòng tải lại trang.\");\n          enqueueSnackbar(\"Lỗi khi tải mô hình nhận diện\", {\n            variant: \"error\"\n          });\n        } finally {\n          setIsLoading(false);\n        }\n      }\n    };\n    initModels();\n  }, [activeStep, modelsLoaded, enqueueSnackbar]);\n\n  // Kiểm tra camera đã sẵn sàng chưa\n  useEffect(() => {\n    var _webcamRef$current, _webcamRef$current$vi;\n    if (((_webcamRef$current = webcamRef.current) === null || _webcamRef$current === void 0 ? void 0 : (_webcamRef$current$vi = _webcamRef$current.video) === null || _webcamRef$current$vi === void 0 ? void 0 : _webcamRef$current$vi.readyState) === 4) {\n      setIsCameraReady(true);\n    }\n  }, [(_webcamRef$current2 = webcamRef.current) === null || _webcamRef$current2 === void 0 ? void 0 : (_webcamRef$current2$v = _webcamRef$current2.video) === null || _webcamRef$current2$v === void 0 ? void 0 : _webcamRef$current2$v.readyState]);\n\n  // Xử lý chuyển bước\n  const handleNext = () => {\n    setActiveStep(prevActiveStep => prevActiveStep + 1);\n  };\n  const handleBack = () => {\n    setActiveStep(prevActiveStep => prevActiveStep - 1);\n  };\n\n  // Chụp và phát hiện khuôn mặt\n  const captureImage = async () => {\n    if (!webcamRef.current || !isCameraReady) {\n      enqueueSnackbar(\"Camera chưa sẵn sàng, vui lòng thử lại\", {\n        variant: \"warning\"\n      });\n      return;\n    }\n    try {\n      setIsProcessing(true);\n      // Chụp ảnh\n      const imageSrc = webcamRef.current.getScreenshot();\n      if (!imageSrc) {\n        enqueueSnackbar(\"Không thể chụp ảnh, vui lòng thử lại\", {\n          variant: \"error\"\n        });\n        setIsProcessing(false);\n        return;\n      }\n\n      // Phát hiện khuôn mặt\n      const detections = await detectFace(imageSrc);\n      if (!detections) {\n        enqueueSnackbar(\"Không phát hiện được khuôn mặt, vui lòng thử lại và đảm bảo khuôn mặt của bạn nằm trong khung hình\", {\n          variant: \"warning\"\n        });\n        setIsProcessing(false);\n        return;\n      }\n\n      // Lưu ảnh và thông tin khuôn mặt\n      const newImages = [...capturedImages, {\n        img: imageSrc,\n        descriptor: Array.from(detections.descriptor)\n      }];\n      setDetectedFace(detections);\n      setCapturedImages(newImages);\n      enqueueSnackbar(`Đã chụp ảnh ${newImages.length}/5`, {\n        variant: \"success\"\n      });\n\n      // Nếu đã đủ 5 ảnh thì chuyển bước tiếp theo\n      if (newImages.length >= 5) {\n        handleNext();\n      }\n    } catch (error) {\n      console.error(\"Lỗi khi chụp ảnh:\", error);\n      enqueueSnackbar(\"Đã xảy ra lỗi khi chụp ảnh\", {\n        variant: \"error\"\n      });\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  // Đăng ký khuôn mặt lên server\n  const registerFace = async () => {\n    try {\n      setIsProcessing(true);\n\n      // Chuẩn bị dữ liệu để gửi lên server\n      const faceData = {\n        descriptors: capturedImages.map(img => img.descriptor),\n        images: capturedImages.map(img => img.img)\n      };\n\n      // Gửi request đăng ký khuôn mặt\n      const response = await axios.post(`${API_URL}/face-recognition/register`, faceData, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          \"Content-Type\": \"application/json\"\n        }\n      });\n      if (response.data.success) {\n        enqueueSnackbar(\"Đăng ký khuôn mặt thành công\", {\n          variant: \"success\"\n        });\n        setSuccess(true);\n        handleNext();\n\n        // Cập nhật thông tin user\n        dispatch(getCurrentUser());\n      } else {\n        setError(\"Không thể đăng ký khuôn mặt. Vui lòng thử lại.\");\n        enqueueSnackbar(\"Đăng ký khuôn mặt thất bại\", {\n          variant: \"error\"\n        });\n      }\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error(\"Lỗi khi đăng ký khuôn mặt:\", error);\n      setError(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || \"Không thể đăng ký khuôn mặt. Vui lòng thử lại.\");\n      enqueueSnackbar(\"Đăng ký khuôn mặt thất bại\", {\n        variant: \"error\"\n      });\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  // Reset lại quá trình\n  const handleReset = () => {\n    setCapturedImages([]);\n    setDetectedFace(null);\n    setActiveStep(0);\n    setError(\"\");\n    setSuccess(false);\n    // TODO: Cân nhắc gọi API để xóa dữ liệu cũ trên server nếu cần\n  };\n\n  // Bắt đầu quá trình đăng ký lại\n  const handleReregister = () => {\n    handleReset(); // Reset trạng thái\n    setShowRegistrationForm(true); // Hiển thị form đăng ký\n  };\n\n  // Quay lại trang danh sách lớp\n  const navigateToClasses = () => {\n    navigate(\"/student/classes\");\n  };\n\n  // Các bước đăng ký khuôn mặt\n  const steps = [{\n    label: \"Chuẩn bị\",\n    description: \"Chuẩn bị camera và kiểm tra kết nối\",\n    content: /*#__PURE__*/_jsxDEV(Box, {\n      children: [/*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"info\",\n        sx: {\n          mb: 2\n        },\n        children: \"Vui l\\xF2ng \\u0111\\u1EA3m b\\u1EA3o b\\u1EA1n \\u0111ang \\u1EDF trong m\\xF4i tr\\u01B0\\u1EDDng c\\xF3 \\xE1nh s\\xE1ng t\\u1ED1t v\\xE0 camera ho\\u1EA1t \\u0111\\u1ED9ng b\\xECnh th\\u01B0\\u1EDDng.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 2,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          md: 6,\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            children: /*#__PURE__*/_jsxDEV(CardContent, {\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h6\",\n                gutterBottom: true,\n                children: \"H\\u01B0\\u1EDBng d\\u1EABn\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 273,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Divider, {\n                sx: {\n                  my: 1\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 276,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(List, {\n                dense: true,\n                children: [/*#__PURE__*/_jsxDEV(ListItem, {\n                  children: [/*#__PURE__*/_jsxDEV(ListItemIcon, {\n                    children: /*#__PURE__*/_jsxDEV(Info, {\n                      fontSize: \"small\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 280,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 279,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n                    primary: \"\\u0110\\u1EE9ng \\u1EDF n\\u01A1i c\\xF3 \\xE1nh s\\xE1ng t\\u1ED1t, nh\\xECn th\\u1EB3ng v\\xE0o camera\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 282,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 278,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(ListItem, {\n                  children: [/*#__PURE__*/_jsxDEV(ListItemIcon, {\n                    children: /*#__PURE__*/_jsxDEV(Info, {\n                      fontSize: \"small\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 286,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 285,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n                    primary: \"Kh\\xF4ng \\u0111eo k\\xEDnh, m\\u0169 ho\\u1EB7c kh\\u1EA9u trang khi \\u0111\\u0103ng k\\xFD\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 288,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 284,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(ListItem, {\n                  children: [/*#__PURE__*/_jsxDEV(ListItemIcon, {\n                    children: /*#__PURE__*/_jsxDEV(Info, {\n                      fontSize: \"small\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 292,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 291,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n                    primary: \"Gi\\u1EEF khu\\xF4n m\\u1EB7t chi\\u1EBFm kho\\u1EA3ng 70% khung h\\xECnh\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 294,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 290,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(ListItem, {\n                  children: [/*#__PURE__*/_jsxDEV(ListItemIcon, {\n                    children: /*#__PURE__*/_jsxDEV(Info, {\n                      fontSize: \"small\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 298,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 297,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n                    primary: \"B\\u1EA1n s\\u1EBD c\\u1EA7n ch\\u1EE5p 5 \\u1EA3nh \\u1EDF c\\xE1c g\\xF3c \\u0111\\u1ED9 kh\\xE1c nhau\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 300,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 296,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 277,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"outlined\",\n                onClick: () => setShowHelpDialog(true),\n                startIcon: /*#__PURE__*/_jsxDEV(Help, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 306,\n                  columnNumber: 32\n                }, this),\n                sx: {\n                  mt: 1\n                },\n                children: \"Xem h\\u01B0\\u1EDBng d\\u1EABn chi ti\\u1EBFt\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 303,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          md: 6,\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            children: /*#__PURE__*/_jsxDEV(CardContent, {\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h6\",\n                gutterBottom: true,\n                children: \"Tr\\u1EA1ng th\\xE1i\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 317,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Divider, {\n                sx: {\n                  my: 1\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 320,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(List, {\n                children: [/*#__PURE__*/_jsxDEV(ListItem, {\n                  children: [/*#__PURE__*/_jsxDEV(ListItemIcon, {\n                    children: activeStep >= 1 ? modelsLoaded ? /*#__PURE__*/_jsxDEV(Check, {\n                      color: \"success\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 326,\n                      columnNumber: 29\n                    }, this) : /*#__PURE__*/_jsxDEV(CircularProgress, {\n                      size: 20\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 328,\n                      columnNumber: 29\n                    }, this) : /*#__PURE__*/_jsxDEV(Info, {\n                      color: \"disabled\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 331,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 323,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n                    primary: \"T\\u1EA3i m\\xF4 h\\xECnh nh\\u1EADn di\\u1EC7n\",\n                    secondary: activeStep >= 1 ? modelsLoaded ? \"Đã tải xong\" : \"Đang tải, vui lòng đợi...\" : \"Sẽ tải khi bắt đầu chụp ảnh\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 334,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 322,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(ListItem, {\n                  children: [/*#__PURE__*/_jsxDEV(ListItemIcon, {\n                    children: isCameraReady ? /*#__PURE__*/_jsxDEV(Check, {\n                      color: \"success\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 348,\n                      columnNumber: 27\n                    }, this) : /*#__PURE__*/_jsxDEV(CircularProgress, {\n                      size: 20\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 350,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 346,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n                    primary: \"Ki\\u1EC3m tra camera\",\n                    secondary: isCameraReady ? \"Camera đã sẵn sàng\" : \"Đang kết nối với camera...\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 353,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 345,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 321,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          mt: 2,\n          textAlign: \"right\"\n        },\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          onClick: handleNext,\n          disabled: !isCameraReady,\n          children: \"Ti\\u1EBFp t\\u1EE5c\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 9\n    }, this)\n  }, {\n    label: \"Chụp ảnh khuôn mặt\",\n    description: \"Chụp 5 ảnh khuôn mặt để đăng ký\",\n    content: /*#__PURE__*/_jsxDEV(Box, {\n      children: [/*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"info\",\n        sx: {\n          mb: 2\n        },\n        children: \"Vui l\\xF2ng ch\\u1EE5p 5 \\u1EA3nh khu\\xF4n m\\u1EB7t \\u1EDF c\\xE1c g\\xF3c \\u0111\\u1ED9 kh\\xE1c nhau (nh\\xECn th\\u1EB3ng, nghi\\xEAng tr\\xE1i, nghi\\xEAng ph\\u1EA3i, h\\u01A1i ng\\u01B0\\u1EDBc l\\xEAn, h\\u01A1i c\\xFAi xu\\u1ED1ng).\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 2,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          md: 8,\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              position: \"relative\",\n              width: \"100%\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(Suspense, {\n              fallback: /*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  display: \"flex\",\n                  justifyContent: \"center\",\n                  alignItems: \"center\",\n                  height: 300\n                },\n                children: [/*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 401,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  sx: {\n                    ml: 2\n                  },\n                  children: \"\\u0110ang t\\u1EA3i camera...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 402,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 393,\n                columnNumber: 21\n              }, this),\n              children: /*#__PURE__*/_jsxDEV(Webcam, {\n                audio: false,\n                ref: webcamRef,\n                screenshotFormat: \"image/jpeg\",\n                videoConstraints: {\n                  width: 640,\n                  height: 480,\n                  facingMode: \"user\"\n                },\n                style: {\n                  width: \"100%\",\n                  borderRadius: \"8px\",\n                  border: \"1px solid #ddd\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 406,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n              ref: canvasRef,\n              style: {\n                position: \"absolute\",\n                top: 0,\n                left: 0,\n                zIndex: 1\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 422,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              mt: 2,\n              textAlign: \"center\"\n            },\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"contained\",\n              color: \"primary\",\n              startIcon: /*#__PURE__*/_jsxDEV(CameraAlt, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 436,\n                columnNumber: 30\n              }, this),\n              onClick: captureImage,\n              disabled: !isCameraReady || isProcessing || capturedImages.length >= 5 || !modelsLoaded,\n              children: isProcessing ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(CircularProgress, {\n                  size: 24,\n                  sx: {\n                    mr: 1\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 447,\n                  columnNumber: 23\n                }, this), \"\\u0110ang x\\u1EED l\\xFD...\"]\n              }, void 0, true) : !modelsLoaded ? \"Đang tải mô hình...\" : \"Chụp ảnh\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 433,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 432,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 389,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          md: 4,\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            children: /*#__PURE__*/_jsxDEV(CardContent, {\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h6\",\n                gutterBottom: true,\n                children: [\"\\u1EA2nh \\u0111\\xE3 ch\\u1EE5p (\", capturedImages.length, \"/5)\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 461,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Divider, {\n                sx: {\n                  my: 1\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 464,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  display: \"flex\",\n                  flexDirection: \"column\",\n                  gap: 1,\n                  maxHeight: 320,\n                  overflow: \"auto\",\n                  p: 1\n                },\n                children: capturedImages.length > 0 ? capturedImages.map((img, index) => /*#__PURE__*/_jsxDEV(Box, {\n                  sx: {\n                    border: \"1px solid #ddd\",\n                    borderRadius: \"4px\",\n                    overflow: \"hidden\",\n                    position: \"relative\"\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: img.img,\n                    alt: `Ảnh ${index + 1}`,\n                    style: {\n                      display: \"block\",\n                      width: \"100%\"\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 486,\n                    columnNumber: 27\n                  }, this)\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 477,\n                  columnNumber: 25\n                }, this)) : /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body2\",\n                  color: \"text.secondary\",\n                  sx: {\n                    textAlign: \"center\",\n                    py: 4\n                  },\n                  children: \"Ch\\u01B0a c\\xF3 \\u1EA3nh n\\xE0o \\u0111\\u01B0\\u1EE3c ch\\u1EE5p.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 494,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 465,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 460,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 459,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 458,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          mt: 2,\n          display: \"flex\",\n          justifyContent: \"space-between\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleBack,\n          children: \"Quay l\\u1EA1i\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 508,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          onClick: handleNext,\n          disabled: capturedImages.length < 5,\n          children: \"Ti\\u1EBFp t\\u1EE5c\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 509,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 507,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 9\n    }, this)\n  }, {\n    label: \"Xác nhận và hoàn tất\",\n    description: \"Xác nhận thông tin và hoàn tất đăng ký\",\n    content: /*#__PURE__*/_jsxDEV(Box, {\n      children: [/*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"info\",\n        sx: {\n          mb: 2\n        },\n        children: \"Vui l\\xF2ng xem l\\u1EA1i th\\xF4ng tin v\\xE0 \\u1EA3nh \\u0111\\xE3 ch\\u1EE5p tr\\u01B0\\u1EDBc khi ho\\xE0n t\\u1EA5t \\u0111\\u0103ng k\\xFD.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 525,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 2,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          md: 6,\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            children: /*#__PURE__*/_jsxDEV(CardContent, {\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h6\",\n                gutterBottom: true,\n                children: \"Th\\xF4ng tin \\u0111\\u0103ng k\\xFD\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 533,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Divider, {\n                sx: {\n                  my: 1\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 536,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(List, {\n                children: [/*#__PURE__*/_jsxDEV(ListItem, {\n                  children: [/*#__PURE__*/_jsxDEV(ListItemIcon, {\n                    children: /*#__PURE__*/_jsxDEV(Person, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 540,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 539,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n                    primary: \"H\\u1ECD v\\xE0 t\\xEAn\",\n                    secondary: (user === null || user === void 0 ? void 0 : user.full_name) || \"N/A\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 542,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 538,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(ListItem, {\n                  children: [/*#__PURE__*/_jsxDEV(ListItemIcon, {\n                    children: /*#__PURE__*/_jsxDEV(Face, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 549,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 548,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n                    primary: \"S\\u1ED1 \\u1EA3nh \\u0111\\xE3 ch\\u1EE5p\",\n                    secondary: `${capturedImages.length} ảnh`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 551,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 547,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 537,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 532,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 531,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 530,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          md: 6,\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            children: /*#__PURE__*/_jsxDEV(CardContent, {\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h6\",\n                gutterBottom: true,\n                children: \"Xem tr\\u01B0\\u1EDBc \\u1EA3nh\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 563,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Divider, {\n                sx: {\n                  my: 1\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 566,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  display: \"grid\",\n                  gridTemplateColumns: \"repeat(auto-fill, minmax(100px, 1fr))\",\n                  gap: 1,\n                  maxHeight: 250,\n                  overflow: \"auto\",\n                  p: 1\n                },\n                children: capturedImages.map((img, index) => /*#__PURE__*/_jsxDEV(Box, {\n                  sx: {\n                    border: \"1px solid #ddd\",\n                    borderRadius: \"4px\",\n                    overflow: \"hidden\"\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: img.img,\n                    alt: `Ảnh ${index + 1}`,\n                    style: {\n                      width: \"100%\"\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 587,\n                    columnNumber: 25\n                  }, this)\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 579,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 567,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 562,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 561,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 560,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 529,\n        columnNumber: 11\n      }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"error\",\n        sx: {\n          mt: 2\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 600,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          mt: 2,\n          display: \"flex\",\n          justifyContent: \"space-between\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleBack,\n          children: \"Quay l\\u1EA1i\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 605,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          onClick: registerFace,\n          disabled: isProcessing || capturedImages.length < 5,\n          startIcon: isProcessing ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 612,\n            columnNumber: 32\n          }, this) : /*#__PURE__*/_jsxDEV(SaveAlt, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 612,\n            columnNumber: 65\n          }, this),\n          children: isProcessing ? \"Đang xử lý...\" : \"Hoàn tất đăng ký\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 606,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 604,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 524,\n      columnNumber: 9\n    }, this)\n  }, {\n    label: \"Hoàn thành\",\n    description: \"Đăng ký khuôn mặt thành công\",\n    content: /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        textAlign: \"center\",\n        py: 3\n      },\n      children: success ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n          color: \"success\",\n          sx: {\n            fontSize: 64,\n            mb: 2\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 628,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          gutterBottom: true,\n          children: \"\\u0110\\u0103ng k\\xFD khu\\xF4n m\\u1EB7t th\\xE0nh c\\xF4ng!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 629,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body1\",\n          paragraph: true,\n          children: \"T\\u1EEB gi\\u1EDD b\\u1EA1n c\\xF3 th\\u1EC3 s\\u1EED d\\u1EE5ng t\\xEDnh n\\u0103ng \\u0111i\\u1EC3m danh b\\u1EB1ng khu\\xF4n m\\u1EB7t.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 632,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          onClick: handleReregister,\n          sx: {\n            mt: 2,\n            mr: 1\n          },\n          children: \"\\u0110\\u0103ng k\\xFD l\\u1EA1i\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 635,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outlined\",\n          color: \"secondary\",\n          onClick: navigateToClasses,\n          sx: {\n            mt: 2\n          },\n          children: \"Quay l\\u1EA1i danh s\\xE1ch l\\u1EDBp\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 643,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Error, {\n          color: \"error\",\n          sx: {\n            fontSize: 64,\n            mb: 2\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 654,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          gutterBottom: true,\n          children: \"\\u0110\\xE3 x\\u1EA3y ra l\\u1ED7i!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 655,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body1\",\n          paragraph: true,\n          children: error || \"Không thể đăng ký khuôn mặt. Vui lòng thử lại.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 658,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          onClick: handleReset,\n          sx: {\n            mt: 2\n          },\n          children: \"Th\\u1EED l\\u1EA1i\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 661,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 625,\n      columnNumber: 9\n    }, this)\n  }];\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      padding: 3\n    },\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        mb: 3\n      },\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        variant: \"outlined\",\n        startIcon: /*#__PURE__*/_jsxDEV(ArrowBack, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 681,\n          columnNumber: 22\n        }, this),\n        onClick: () => navigate(\"/student/classes\"),\n        sx: {\n          mb: 2\n        },\n        children: \"Quay l\\u1EA1i\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 679,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h4\",\n        gutterBottom: true,\n        children: \"\\u0110\\u0103ng k\\xFD khu\\xF4n m\\u1EB7t\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 687,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"subtitle1\",\n        color: \"text.secondary\",\n        children: \"\\u0110\\u0103ng k\\xFD khu\\xF4n m\\u1EB7t c\\u1EE7a b\\u1EA1n \\u0111\\u1EC3 s\\u1EED d\\u1EE5ng t\\xEDnh n\\u0103ng \\u0111i\\u1EC3m danh t\\u1EF1 \\u0111\\u1ED9ng\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 690,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 678,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Paper, {\n      sx: {\n        p: {\n          xs: 2,\n          md: 3\n        },\n        maxWidth: 1200,\n        mx: \"auto\",\n        overflow: \"hidden\"\n      },\n      children: isLoading && activeStep === 0 ? /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          py: 8\n        },\n        children: [/*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 712,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          sx: {\n            ml: 2\n          },\n          children: \"\\u0110ang t\\u1EA3i...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 713,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 704,\n        columnNumber: 11\n      }, this) : showRegistrationForm ? /*#__PURE__*/_jsxDEV(Stepper, {\n        activeStep: activeStep,\n        orientation: \"vertical\",\n        children: steps.map((step, index) => /*#__PURE__*/_jsxDEV(Step, {\n          children: [/*#__PURE__*/_jsxDEV(StepLabel, {\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              variant: activeStep === index ? \"subtitle1\" : \"body1\",\n              fontWeight: activeStep === index ? \"bold\" : \"normal\",\n              children: step.label\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 722,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 721,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(StepContent, {\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              color: \"text.secondary\",\n              sx: {\n                mb: 2\n              },\n              children: step.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 730,\n              columnNumber: 19\n            }, this), step.content]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 729,\n            columnNumber: 17\n          }, this)]\n        }, step.label, true, {\n          fileName: _jsxFileName,\n          lineNumber: 720,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 718,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          textAlign: \"center\",\n          py: 4\n        },\n        children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n          color: \"success\",\n          sx: {\n            fontSize: 64,\n            mb: 2\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 744,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          gutterBottom: true,\n          children: \"B\\u1EA1n \\u0111\\xE3 \\u0111\\u0103ng k\\xFD khu\\xF4n m\\u1EB7t\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 745,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body1\",\n          color: \"text.secondary\",\n          paragraph: true,\n          children: \"B\\u1EA1n c\\xF3 th\\u1EC3 s\\u1EED d\\u1EE5ng t\\xEDnh n\\u0103ng \\u0111i\\u1EC3m danh b\\u1EB1ng khu\\xF4n m\\u1EB7t.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 748,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          onClick: handleReregister,\n          startIcon: /*#__PURE__*/_jsxDEV(Redo, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 754,\n            columnNumber: 26\n          }, this),\n          sx: {\n            mt: 2,\n            mr: 1\n          },\n          children: \"\\u0110\\u0103ng k\\xFD l\\u1EA1i\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 751,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outlined\",\n          color: \"secondary\",\n          onClick: navigateToClasses,\n          sx: {\n            mt: 2\n          },\n          children: \"Quay l\\u1EA1i danh s\\xE1ch l\\u1EDBp\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 759,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 743,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 695,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: showHelpDialog,\n      onClose: () => setShowHelpDialog(false),\n      maxWidth: \"md\",\n      fullWidth: true,\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        children: \"H\\u01B0\\u1EDBng d\\u1EABn \\u0111\\u0103ng k\\xFD khu\\xF4n m\\u1EB7t chi ti\\u1EBFt\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 778,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          gutterBottom: true,\n          children: \"C\\xE1c b\\u01B0\\u1EDBc \\u0111\\u0103ng k\\xFD khu\\xF4n m\\u1EB7t:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 780,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(List, {\n          children: [/*#__PURE__*/_jsxDEV(ListItem, {\n            children: [/*#__PURE__*/_jsxDEV(ListItemIcon, {\n              children: /*#__PURE__*/_jsxDEV(Check, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 786,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 785,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n              primary: \"B\\u01B0\\u1EDBc 1: Chu\\u1EA9n b\\u1ECB\",\n              secondary: \"\\u0110\\u1EA3m b\\u1EA3o b\\u1EA1n \\u0111ang \\u1EDF n\\u01A1i c\\xF3 \\xE1nh s\\xE1ng t\\u1ED1t v\\xE0 camera ho\\u1EA1t \\u0111\\u1ED9ng b\\xECnh th\\u01B0\\u1EDDng.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 788,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 784,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ListItem, {\n            children: [/*#__PURE__*/_jsxDEV(ListItemIcon, {\n              children: /*#__PURE__*/_jsxDEV(Camera, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 795,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 794,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n              primary: \"B\\u01B0\\u1EDBc 2: Ch\\u1EE5p \\u1EA3nh khu\\xF4n m\\u1EB7t\",\n              secondary: \"Ch\\u1EE5p 5 \\u1EA3nh khu\\xF4n m\\u1EB7t \\u1EDF c\\xE1c g\\xF3c \\u0111\\u1ED9 kh\\xE1c nhau.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 797,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 793,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ListItem, {\n            children: [/*#__PURE__*/_jsxDEV(ListItemIcon, {\n              children: /*#__PURE__*/_jsxDEV(ViewArray, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 804,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 803,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n              primary: \"B\\u01B0\\u1EDBc 3: X\\xE1c nh\\u1EADn th\\xF4ng tin\",\n              secondary: \"Xem l\\u1EA1i th\\xF4ng tin v\\xE0 \\u1EA3nh \\u0111\\xE3 ch\\u1EE5p.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 806,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 802,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ListItem, {\n            children: [/*#__PURE__*/_jsxDEV(ListItemIcon, {\n              children: /*#__PURE__*/_jsxDEV(SaveAlt, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 813,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 812,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n              primary: \"B\\u01B0\\u1EDBc 4: Ho\\xE0n t\\u1EA5t \\u0111\\u0103ng k\\xFD\",\n              secondary: \"Ho\\xE0n t\\u1EA5t qu\\xE1 tr\\xECnh \\u0111\\u0103ng k\\xFD khu\\xF4n m\\u1EB7t.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 815,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 811,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 783,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          gutterBottom: true,\n          sx: {\n            mt: 2\n          },\n          children: \"L\\u01B0u \\xFD khi ch\\u1EE5p \\u1EA3nh:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 822,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(List, {\n          children: [/*#__PURE__*/_jsxDEV(ListItem, {\n            children: [/*#__PURE__*/_jsxDEV(ListItemIcon, {\n              children: /*#__PURE__*/_jsxDEV(Info, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 828,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 827,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n              primary: \"\\xC1nh s\\xE1ng\",\n              secondary: \"\\u0110\\u1EA3m b\\u1EA3o khu\\xF4n m\\u1EB7t \\u0111\\u01B0\\u1EE3c chi\\u1EBFu s\\xE1ng t\\u1ED1t, tr\\xE1nh ng\\u01B0\\u1EE3c s\\xE1ng.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 830,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 826,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ListItem, {\n            children: [/*#__PURE__*/_jsxDEV(ListItemIcon, {\n              children: /*#__PURE__*/_jsxDEV(Info, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 837,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 836,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n              primary: \"G\\xF3c \\u0111\\u1ED9\",\n              secondary: \"Ch\\u1EE5p \\u1EDF c\\xE1c g\\xF3c \\u0111\\u1ED9 kh\\xE1c nhau: nh\\xECn th\\u1EB3ng, nghi\\xEAng tr\\xE1i, nghi\\xEAng ph\\u1EA3i, h\\u01A1i ng\\u01B0\\u1EDBc l\\xEAn, h\\u01A1i c\\xFAi xu\\u1ED1ng.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 839,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 835,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ListItem, {\n            children: [/*#__PURE__*/_jsxDEV(ListItemIcon, {\n              children: /*#__PURE__*/_jsxDEV(Info, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 846,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 845,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n              primary: \"Ph\\u1EE5 ki\\u1EC7n\",\n              secondary: \"Kh\\xF4ng \\u0111eo k\\xEDnh, m\\u0169, kh\\u1EA9u trang ho\\u1EB7c b\\u1EA5t k\\u1EF3 v\\u1EADt che khu\\xF4n m\\u1EB7t n\\xE0o.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 848,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 844,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ListItem, {\n            children: [/*#__PURE__*/_jsxDEV(ListItemIcon, {\n              children: /*#__PURE__*/_jsxDEV(Info, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 855,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 854,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n              primary: \"Kho\\u1EA3ng c\\xE1ch\",\n              secondary: \"Gi\\u1EEF khu\\xF4n m\\u1EB7t \\u1EDF kho\\u1EA3ng c\\xE1ch v\\u1EEBa ph\\u1EA3i, chi\\u1EBFm kho\\u1EA3ng 70% khung h\\xECnh.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 857,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 853,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 825,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 779,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => setShowHelpDialog(false),\n          children: \"\\u0110\\xF3ng\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 865,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 864,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 772,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 677,\n    columnNumber: 5\n  }, this);\n};\n_s(FaceRegistrationPage, \"TOQBK3mSF9nPZiB9W+YE1LepcAc=\", false, function () {\n  return [useNavigate, useDispatch, useSnackbar, useSelector];\n});\n_c3 = FaceRegistrationPage;\nexport default FaceRegistrationPage;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"Webcam$lazy\");\n$RefreshReg$(_c2, \"Webcam\");\n$RefreshReg$(_c3, \"FaceRegistrationPage\");","map":{"version":3,"names":["React","useState","useEffect","useRef","lazy","Suspense","useNavigate","useSelector","useDispatch","useSnackbar","axios","Box","Typography","Paper","Button","Stepper","Step","StepLabel","StepContent","CircularProgress","Alert","Card","CardContent","Grid","Divider","List","ListItem","ListItemIcon","ListItemText","Dialog","DialogTitle","DialogContent","DialogActions","Camera","Check","Face","Info","ViewArray","SaveAlt","Error","CheckCircle","ArrowBack","Help","CameraAlt","Person","Redo","getCurrentUser","loadModels","detectFace","jsxDEV","_jsxDEV","Fragment","_Fragment","Webcam","_c","_c2","API_URL","process","env","REACT_APP_API_URL","FaceRegistrationPage","_s","_webcamRef$current2","_webcamRef$current2$v","navigate","dispatch","enqueueSnackbar","user","token","state","auth","webcamRef","canvasRef","isLoading","setIsLoading","activeStep","setActiveStep","modelsLoaded","setModelsLoaded","isCameraReady","setIsCameraReady","capturedImages","setCapturedImages","detectedFace","setDetectedFace","isProcessing","setIsProcessing","success","setSuccess","error","setError","showHelpDialog","setShowHelpDialog","showRegistrationForm","setShowRegistrationForm","face_registered","initModels","variant","console","_webcamRef$current","_webcamRef$current$vi","current","video","readyState","handleNext","prevActiveStep","handleBack","captureImage","imageSrc","getScreenshot","detections","newImages","img","descriptor","Array","from","length","registerFace","faceData","descriptors","map","images","response","post","headers","Authorization","data","_error$response","_error$response$data","message","handleReset","handleReregister","navigateToClasses","steps","label","description","content","children","severity","sx","mb","fileName","_jsxFileName","lineNumber","columnNumber","container","spacing","item","xs","md","gutterBottom","my","dense","fontSize","primary","onClick","startIcon","mt","color","size","secondary","textAlign","disabled","position","width","fallback","display","justifyContent","alignItems","height","ml","audio","ref","screenshotFormat","videoConstraints","facingMode","style","borderRadius","border","top","left","zIndex","mr","flexDirection","gap","maxHeight","overflow","p","index","src","alt","py","full_name","gridTemplateColumns","paragraph","padding","maxWidth","mx","orientation","step","fontWeight","open","onClose","fullWidth","_c3","$RefreshReg$"],"sources":["C:/Users/kasiz/Documents/Studying/FaceReg/frontend/src/pages/FaceRegistrationPage.js"],"sourcesContent":["import React, { useState, useEffect, useRef, lazy, Suspense } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useSnackbar } from \"notistack\";\nimport axios from \"axios\";\nimport {\n  Box,\n  Typography,\n  Paper,\n  Button,\n  Stepper,\n  Step,\n  StepLabel,\n  StepContent,\n  CircularProgress,\n  Alert,\n  Card,\n  CardContent,\n  Grid,\n  Divider,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n} from \"@mui/material\";\nimport {\n  Camera,\n  Check,\n  Face,\n  Info,\n  ViewArray,\n  SaveAlt,\n  Error,\n  CheckCircle,\n  ArrowBack,\n  Help,\n  CameraAlt,\n  Person,\n  Redo,\n} from \"@mui/icons-material\";\nimport { getCurrentUser } from \"../redux/slices/authSlice\";\nimport { loadModels, detectFace } from \"../utils/faceUtils\";\n\n// Lazy load Webcam để giảm kích thước ban đầu\nconst Webcam = lazy(() => import(\"react-webcam\"));\n\nconst API_URL = process.env.REACT_APP_API_URL || \"http://localhost:5000/api\";\n\nconst FaceRegistrationPage = () => {\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const { enqueueSnackbar } = useSnackbar();\n  const { user, token } = useSelector((state) => state.auth);\n\n  // Refs\n  const webcamRef = useRef(null);\n  const canvasRef = useRef(null);\n\n  // State\n  const [isLoading, setIsLoading] = useState(false);\n  const [activeStep, setActiveStep] = useState(0);\n  const [modelsLoaded, setModelsLoaded] = useState(false);\n  const [isCameraReady, setIsCameraReady] = useState(false);\n  const [capturedImages, setCapturedImages] = useState([]);\n  const [detectedFace, setDetectedFace] = useState(null);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [success, setSuccess] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [showHelpDialog, setShowHelpDialog] = useState(false);\n  const [showRegistrationForm, setShowRegistrationForm] = useState(false);\n\n  // Kiểm tra xem user đã đăng ký khuôn mặt chưa và quyết định hiển thị form\n  useEffect(() => {\n    if (user) {\n      if (user.face_registered) {\n        setShowRegistrationForm(false);\n        // Không cần enqueueSnackbar ở đây nữa, sẽ hiển thị Alert cố định\n      } else {\n        setShowRegistrationForm(true);\n      }\n    }\n  }, [user]); // Chỉ phụ thuộc vào user\n\n  // Load các model nhận diện khuôn mặt khi cần thiết (chỉ khi đến bước chụp ảnh)\n  useEffect(() => {\n    const initModels = async () => {\n      if (activeStep === 1 && !modelsLoaded) {\n        try {\n          setIsLoading(true);\n          await loadModels();\n          setModelsLoaded(true);\n          enqueueSnackbar(\"Đã tải mô hình nhận diện khuôn mặt\", {\n            variant: \"success\",\n          });\n        } catch (error) {\n          console.error(\"Lỗi khi tải mô hình:\", error);\n          setError(\n            \"Không thể tải mô hình nhận diện khuôn mặt. Vui lòng tải lại trang.\"\n          );\n          enqueueSnackbar(\"Lỗi khi tải mô hình nhận diện\", {\n            variant: \"error\",\n          });\n        } finally {\n          setIsLoading(false);\n        }\n      }\n    };\n\n    initModels();\n  }, [activeStep, modelsLoaded, enqueueSnackbar]);\n\n  // Kiểm tra camera đã sẵn sàng chưa\n  useEffect(() => {\n    if (webcamRef.current?.video?.readyState === 4) {\n      setIsCameraReady(true);\n    }\n  }, [webcamRef.current?.video?.readyState]);\n\n  // Xử lý chuyển bước\n  const handleNext = () => {\n    setActiveStep((prevActiveStep) => prevActiveStep + 1);\n  };\n\n  const handleBack = () => {\n    setActiveStep((prevActiveStep) => prevActiveStep - 1);\n  };\n\n  // Chụp và phát hiện khuôn mặt\n  const captureImage = async () => {\n    if (!webcamRef.current || !isCameraReady) {\n      enqueueSnackbar(\"Camera chưa sẵn sàng, vui lòng thử lại\", {\n        variant: \"warning\",\n      });\n      return;\n    }\n\n    try {\n      setIsProcessing(true);\n      // Chụp ảnh\n      const imageSrc = webcamRef.current.getScreenshot();\n      if (!imageSrc) {\n        enqueueSnackbar(\"Không thể chụp ảnh, vui lòng thử lại\", {\n          variant: \"error\",\n        });\n        setIsProcessing(false);\n        return;\n      }\n\n      // Phát hiện khuôn mặt\n      const detections = await detectFace(imageSrc);\n\n      if (!detections) {\n        enqueueSnackbar(\n          \"Không phát hiện được khuôn mặt, vui lòng thử lại và đảm bảo khuôn mặt của bạn nằm trong khung hình\",\n          { variant: \"warning\" }\n        );\n        setIsProcessing(false);\n        return;\n      }\n\n      // Lưu ảnh và thông tin khuôn mặt\n      const newImages = [\n        ...capturedImages,\n        { img: imageSrc, descriptor: Array.from(detections.descriptor) },\n      ];\n      setDetectedFace(detections);\n      setCapturedImages(newImages);\n\n      enqueueSnackbar(`Đã chụp ảnh ${newImages.length}/5`, {\n        variant: \"success\",\n      });\n\n      // Nếu đã đủ 5 ảnh thì chuyển bước tiếp theo\n      if (newImages.length >= 5) {\n        handleNext();\n      }\n    } catch (error) {\n      console.error(\"Lỗi khi chụp ảnh:\", error);\n      enqueueSnackbar(\"Đã xảy ra lỗi khi chụp ảnh\", { variant: \"error\" });\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  // Đăng ký khuôn mặt lên server\n  const registerFace = async () => {\n    try {\n      setIsProcessing(true);\n\n      // Chuẩn bị dữ liệu để gửi lên server\n      const faceData = {\n        descriptors: capturedImages.map((img) => img.descriptor),\n        images: capturedImages.map((img) => img.img),\n      };\n\n      // Gửi request đăng ký khuôn mặt\n      const response = await axios.post(\n        `${API_URL}/face-recognition/register`,\n        faceData,\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n            \"Content-Type\": \"application/json\",\n          },\n        }\n      );\n\n      if (response.data.success) {\n        enqueueSnackbar(\"Đăng ký khuôn mặt thành công\", {\n          variant: \"success\",\n        });\n        setSuccess(true);\n        handleNext();\n\n        // Cập nhật thông tin user\n        dispatch(getCurrentUser());\n      } else {\n        setError(\"Không thể đăng ký khuôn mặt. Vui lòng thử lại.\");\n        enqueueSnackbar(\"Đăng ký khuôn mặt thất bại\", { variant: \"error\" });\n      }\n    } catch (error) {\n      console.error(\"Lỗi khi đăng ký khuôn mặt:\", error);\n      setError(\n        error.response?.data?.message ||\n          \"Không thể đăng ký khuôn mặt. Vui lòng thử lại.\"\n      );\n      enqueueSnackbar(\"Đăng ký khuôn mặt thất bại\", { variant: \"error\" });\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  // Reset lại quá trình\n  const handleReset = () => {\n    setCapturedImages([]);\n    setDetectedFace(null);\n    setActiveStep(0);\n    setError(\"\");\n    setSuccess(false);\n    // TODO: Cân nhắc gọi API để xóa dữ liệu cũ trên server nếu cần\n  };\n\n  // Bắt đầu quá trình đăng ký lại\n  const handleReregister = () => {\n    handleReset(); // Reset trạng thái\n    setShowRegistrationForm(true); // Hiển thị form đăng ký\n  };\n\n  // Quay lại trang danh sách lớp\n  const navigateToClasses = () => {\n    navigate(\"/student/classes\");\n  };\n\n  // Các bước đăng ký khuôn mặt\n  const steps = [\n    {\n      label: \"Chuẩn bị\",\n      description: \"Chuẩn bị camera và kiểm tra kết nối\",\n      content: (\n        <Box>\n          <Alert severity=\"info\" sx={{ mb: 2 }}>\n            Vui lòng đảm bảo bạn đang ở trong môi trường có ánh sáng tốt và\n            camera hoạt động bình thường.\n          </Alert>\n          <Grid container spacing={2}>\n            <Grid item xs={12} md={6}>\n              <Card>\n                <CardContent>\n                  <Typography variant=\"h6\" gutterBottom>\n                    Hướng dẫn\n                  </Typography>\n                  <Divider sx={{ my: 1 }} />\n                  <List dense>\n                    <ListItem>\n                      <ListItemIcon>\n                        <Info fontSize=\"small\" />\n                      </ListItemIcon>\n                      <ListItemText primary=\"Đứng ở nơi có ánh sáng tốt, nhìn thẳng vào camera\" />\n                    </ListItem>\n                    <ListItem>\n                      <ListItemIcon>\n                        <Info fontSize=\"small\" />\n                      </ListItemIcon>\n                      <ListItemText primary=\"Không đeo kính, mũ hoặc khẩu trang khi đăng ký\" />\n                    </ListItem>\n                    <ListItem>\n                      <ListItemIcon>\n                        <Info fontSize=\"small\" />\n                      </ListItemIcon>\n                      <ListItemText primary=\"Giữ khuôn mặt chiếm khoảng 70% khung hình\" />\n                    </ListItem>\n                    <ListItem>\n                      <ListItemIcon>\n                        <Info fontSize=\"small\" />\n                      </ListItemIcon>\n                      <ListItemText primary=\"Bạn sẽ cần chụp 5 ảnh ở các góc độ khác nhau\" />\n                    </ListItem>\n                  </List>\n                  <Button\n                    variant=\"outlined\"\n                    onClick={() => setShowHelpDialog(true)}\n                    startIcon={<Help />}\n                    sx={{ mt: 1 }}\n                  >\n                    Xem hướng dẫn chi tiết\n                  </Button>\n                </CardContent>\n              </Card>\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <Card>\n                <CardContent>\n                  <Typography variant=\"h6\" gutterBottom>\n                    Trạng thái\n                  </Typography>\n                  <Divider sx={{ my: 1 }} />\n                  <List>\n                    <ListItem>\n                      <ListItemIcon>\n                        {activeStep >= 1 ? (\n                          modelsLoaded ? (\n                            <Check color=\"success\" />\n                          ) : (\n                            <CircularProgress size={20} />\n                          )\n                        ) : (\n                          <Info color=\"disabled\" />\n                        )}\n                      </ListItemIcon>\n                      <ListItemText\n                        primary=\"Tải mô hình nhận diện\"\n                        secondary={\n                          activeStep >= 1\n                            ? modelsLoaded\n                              ? \"Đã tải xong\"\n                              : \"Đang tải, vui lòng đợi...\"\n                            : \"Sẽ tải khi bắt đầu chụp ảnh\"\n                        }\n                      />\n                    </ListItem>\n                    <ListItem>\n                      <ListItemIcon>\n                        {isCameraReady ? (\n                          <Check color=\"success\" />\n                        ) : (\n                          <CircularProgress size={20} />\n                        )}\n                      </ListItemIcon>\n                      <ListItemText\n                        primary=\"Kiểm tra camera\"\n                        secondary={\n                          isCameraReady\n                            ? \"Camera đã sẵn sàng\"\n                            : \"Đang kết nối với camera...\"\n                        }\n                      />\n                    </ListItem>\n                  </List>\n                </CardContent>\n              </Card>\n            </Grid>\n          </Grid>\n          <Box sx={{ mt: 2, textAlign: \"right\" }}>\n            <Button\n              variant=\"contained\"\n              onClick={handleNext}\n              disabled={!isCameraReady}\n            >\n              Tiếp tục\n            </Button>\n          </Box>\n        </Box>\n      ),\n    },\n    {\n      label: \"Chụp ảnh khuôn mặt\",\n      description: \"Chụp 5 ảnh khuôn mặt để đăng ký\",\n      content: (\n        <Box>\n          <Alert severity=\"info\" sx={{ mb: 2 }}>\n            Vui lòng chụp 5 ảnh khuôn mặt ở các góc độ khác nhau (nhìn thẳng,\n            nghiêng trái, nghiêng phải, hơi ngước lên, hơi cúi xuống).\n          </Alert>\n          <Grid container spacing={2}>\n            <Grid item xs={12} md={8}>\n              <Box sx={{ position: \"relative\", width: \"100%\" }}>\n                <Suspense\n                  fallback={\n                    <Box\n                      sx={{\n                        display: \"flex\",\n                        justifyContent: \"center\",\n                        alignItems: \"center\",\n                        height: 300,\n                      }}\n                    >\n                      <CircularProgress />\n                      <Typography sx={{ ml: 2 }}>Đang tải camera...</Typography>\n                    </Box>\n                  }\n                >\n                  <Webcam\n                    audio={false}\n                    ref={webcamRef}\n                    screenshotFormat=\"image/jpeg\"\n                    videoConstraints={{\n                      width: 640,\n                      height: 480,\n                      facingMode: \"user\",\n                    }}\n                    style={{\n                      width: \"100%\",\n                      borderRadius: \"8px\",\n                      border: \"1px solid #ddd\",\n                    }}\n                  />\n                </Suspense>\n                <canvas\n                  ref={canvasRef}\n                  style={{\n                    position: \"absolute\",\n                    top: 0,\n                    left: 0,\n                    zIndex: 1,\n                  }}\n                />\n              </Box>\n              <Box sx={{ mt: 2, textAlign: \"center\" }}>\n                <Button\n                  variant=\"contained\"\n                  color=\"primary\"\n                  startIcon={<CameraAlt />}\n                  onClick={captureImage}\n                  disabled={\n                    !isCameraReady ||\n                    isProcessing ||\n                    capturedImages.length >= 5 ||\n                    !modelsLoaded\n                  }\n                >\n                  {isProcessing ? (\n                    <>\n                      <CircularProgress size={24} sx={{ mr: 1 }} />\n                      Đang xử lý...\n                    </>\n                  ) : !modelsLoaded ? (\n                    \"Đang tải mô hình...\"\n                  ) : (\n                    \"Chụp ảnh\"\n                  )}\n                </Button>\n              </Box>\n            </Grid>\n            <Grid item xs={12} md={4}>\n              <Card>\n                <CardContent>\n                  <Typography variant=\"h6\" gutterBottom>\n                    Ảnh đã chụp ({capturedImages.length}/5)\n                  </Typography>\n                  <Divider sx={{ my: 1 }} />\n                  <Box\n                    sx={{\n                      display: \"flex\",\n                      flexDirection: \"column\",\n                      gap: 1,\n                      maxHeight: 320,\n                      overflow: \"auto\",\n                      p: 1,\n                    }}\n                  >\n                    {capturedImages.length > 0 ? (\n                      capturedImages.map((img, index) => (\n                        <Box\n                          key={index}\n                          sx={{\n                            border: \"1px solid #ddd\",\n                            borderRadius: \"4px\",\n                            overflow: \"hidden\",\n                            position: \"relative\",\n                          }}\n                        >\n                          <img\n                            src={img.img}\n                            alt={`Ảnh ${index + 1}`}\n                            style={{ display: \"block\", width: \"100%\" }}\n                          />\n                        </Box>\n                      ))\n                    ) : (\n                      <Typography\n                        variant=\"body2\"\n                        color=\"text.secondary\"\n                        sx={{ textAlign: \"center\", py: 4 }}\n                      >\n                        Chưa có ảnh nào được chụp.\n                      </Typography>\n                    )}\n                  </Box>\n                </CardContent>\n              </Card>\n            </Grid>\n          </Grid>\n          <Box sx={{ mt: 2, display: \"flex\", justifyContent: \"space-between\" }}>\n            <Button onClick={handleBack}>Quay lại</Button>\n            <Button\n              variant=\"contained\"\n              onClick={handleNext}\n              disabled={capturedImages.length < 5}\n            >\n              Tiếp tục\n            </Button>\n          </Box>\n        </Box>\n      ),\n    },\n    {\n      label: \"Xác nhận và hoàn tất\",\n      description: \"Xác nhận thông tin và hoàn tất đăng ký\",\n      content: (\n        <Box>\n          <Alert severity=\"info\" sx={{ mb: 2 }}>\n            Vui lòng xem lại thông tin và ảnh đã chụp trước khi hoàn tất đăng\n            ký.\n          </Alert>\n          <Grid container spacing={2}>\n            <Grid item xs={12} md={6}>\n              <Card>\n                <CardContent>\n                  <Typography variant=\"h6\" gutterBottom>\n                    Thông tin đăng ký\n                  </Typography>\n                  <Divider sx={{ my: 1 }} />\n                  <List>\n                    <ListItem>\n                      <ListItemIcon>\n                        <Person />\n                      </ListItemIcon>\n                      <ListItemText\n                        primary=\"Họ và tên\"\n                        secondary={user?.full_name || \"N/A\"}\n                      />\n                    </ListItem>\n                    <ListItem>\n                      <ListItemIcon>\n                        <Face />\n                      </ListItemIcon>\n                      <ListItemText\n                        primary=\"Số ảnh đã chụp\"\n                        secondary={`${capturedImages.length} ảnh`}\n                      />\n                    </ListItem>\n                  </List>\n                </CardContent>\n              </Card>\n            </Grid>\n            <Grid item xs={12} md={6}>\n              <Card>\n                <CardContent>\n                  <Typography variant=\"h6\" gutterBottom>\n                    Xem trước ảnh\n                  </Typography>\n                  <Divider sx={{ my: 1 }} />\n                  <Box\n                    sx={{\n                      display: \"grid\",\n                      gridTemplateColumns:\n                        \"repeat(auto-fill, minmax(100px, 1fr))\",\n                      gap: 1,\n                      maxHeight: 250,\n                      overflow: \"auto\",\n                      p: 1,\n                    }}\n                  >\n                    {capturedImages.map((img, index) => (\n                      <Box\n                        key={index}\n                        sx={{\n                          border: \"1px solid #ddd\",\n                          borderRadius: \"4px\",\n                          overflow: \"hidden\",\n                        }}\n                      >\n                        <img\n                          src={img.img}\n                          alt={`Ảnh ${index + 1}`}\n                          style={{ width: \"100%\" }}\n                        />\n                      </Box>\n                    ))}\n                  </Box>\n                </CardContent>\n              </Card>\n            </Grid>\n          </Grid>\n          {error && (\n            <Alert severity=\"error\" sx={{ mt: 2 }}>\n              {error}\n            </Alert>\n          )}\n          <Box sx={{ mt: 2, display: \"flex\", justifyContent: \"space-between\" }}>\n            <Button onClick={handleBack}>Quay lại</Button>\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={registerFace}\n              disabled={isProcessing || capturedImages.length < 5}\n              startIcon={\n                isProcessing ? <CircularProgress size={20} /> : <SaveAlt />\n              }\n            >\n              {isProcessing ? \"Đang xử lý...\" : \"Hoàn tất đăng ký\"}\n            </Button>\n          </Box>\n        </Box>\n      ),\n    },\n    {\n      label: \"Hoàn thành\",\n      description: \"Đăng ký khuôn mặt thành công\",\n      content: (\n        <Box sx={{ textAlign: \"center\", py: 3 }}>\n          {success ? (\n            <>\n              <CheckCircle color=\"success\" sx={{ fontSize: 64, mb: 2 }} />\n              <Typography variant=\"h5\" gutterBottom>\n                Đăng ký khuôn mặt thành công!\n              </Typography>\n              <Typography variant=\"body1\" paragraph>\n                Từ giờ bạn có thể sử dụng tính năng điểm danh bằng khuôn mặt.\n              </Typography>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={handleReregister}\n                sx={{ mt: 2, mr: 1 }}\n              >\n                Đăng ký lại\n              </Button>\n              <Button\n                variant=\"outlined\"\n                color=\"secondary\"\n                onClick={navigateToClasses}\n                sx={{ mt: 2 }}\n              >\n                Quay lại danh sách lớp\n              </Button>\n            </>\n          ) : (\n            <>\n              <Error color=\"error\" sx={{ fontSize: 64, mb: 2 }} />\n              <Typography variant=\"h5\" gutterBottom>\n                Đã xảy ra lỗi!\n              </Typography>\n              <Typography variant=\"body1\" paragraph>\n                {error || \"Không thể đăng ký khuôn mặt. Vui lòng thử lại.\"}\n              </Typography>\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={handleReset}\n                sx={{ mt: 2 }}\n              >\n                Thử lại\n              </Button>\n            </>\n          )}\n        </Box>\n      ),\n    },\n  ];\n\n  return (\n    <Box sx={{ padding: 3 }}>\n      <Box sx={{ mb: 3 }}>\n        <Button\n          variant=\"outlined\"\n          startIcon={<ArrowBack />}\n          onClick={() => navigate(\"/student/classes\")}\n          sx={{ mb: 2 }}\n        >\n          Quay lại\n        </Button>\n        <Typography variant=\"h4\" gutterBottom>\n          Đăng ký khuôn mặt\n        </Typography>\n        <Typography variant=\"subtitle1\" color=\"text.secondary\">\n          Đăng ký khuôn mặt của bạn để sử dụng tính năng điểm danh tự động\n        </Typography>\n      </Box>\n\n      <Paper\n        sx={{\n          p: { xs: 2, md: 3 },\n          maxWidth: 1200,\n          mx: \"auto\",\n          overflow: \"hidden\",\n        }}\n      >\n        {isLoading && activeStep === 0 ? (\n          <Box\n            sx={{\n              display: \"flex\",\n              justifyContent: \"center\",\n              alignItems: \"center\",\n              py: 8,\n            }}\n          >\n            <CircularProgress />\n            <Typography variant=\"h6\" sx={{ ml: 2 }}>\n              Đang tải...\n            </Typography>\n          </Box>\n        ) : showRegistrationForm ? (\n          <Stepper activeStep={activeStep} orientation=\"vertical\">\n            {steps.map((step, index) => (\n              <Step key={step.label}>\n                <StepLabel>\n                  <Typography\n                    variant={activeStep === index ? \"subtitle1\" : \"body1\"}\n                    fontWeight={activeStep === index ? \"bold\" : \"normal\"}\n                  >\n                    {step.label}\n                  </Typography>\n                </StepLabel>\n                <StepContent>\n                  <Typography\n                    variant=\"body2\"\n                    color=\"text.secondary\"\n                    sx={{ mb: 2 }}\n                  >\n                    {step.description}\n                  </Typography>\n                  {step.content}\n                </StepContent>\n              </Step>\n            ))}\n          </Stepper>\n        ) : (\n          <Box sx={{ textAlign: \"center\", py: 4 }}>\n            <CheckCircle color=\"success\" sx={{ fontSize: 64, mb: 2 }} />\n            <Typography variant=\"h5\" gutterBottom>\n              Bạn đã đăng ký khuôn mặt\n            </Typography>\n            <Typography variant=\"body1\" color=\"text.secondary\" paragraph>\n              Bạn có thể sử dụng tính năng điểm danh bằng khuôn mặt.\n            </Typography>\n            <Button\n              variant=\"contained\"\n              onClick={handleReregister}\n              startIcon={<Redo />}\n              sx={{ mt: 2, mr: 1 }}\n            >\n              Đăng ký lại\n            </Button>\n            <Button\n              variant=\"outlined\"\n              color=\"secondary\"\n              onClick={navigateToClasses}\n              sx={{ mt: 2 }}\n            >\n              Quay lại danh sách lớp\n            </Button>\n          </Box>\n        )}\n      </Paper>\n\n      {/* Dialog hướng dẫn chi tiết */}\n      <Dialog\n        open={showHelpDialog}\n        onClose={() => setShowHelpDialog(false)}\n        maxWidth=\"md\"\n        fullWidth\n      >\n        <DialogTitle>Hướng dẫn đăng ký khuôn mặt chi tiết</DialogTitle>\n        <DialogContent>\n          <Typography variant=\"h6\" gutterBottom>\n            Các bước đăng ký khuôn mặt:\n          </Typography>\n          <List>\n            <ListItem>\n              <ListItemIcon>\n                <Check />\n              </ListItemIcon>\n              <ListItemText\n                primary=\"Bước 1: Chuẩn bị\"\n                secondary=\"Đảm bảo bạn đang ở nơi có ánh sáng tốt và camera hoạt động bình thường.\"\n              />\n            </ListItem>\n            <ListItem>\n              <ListItemIcon>\n                <Camera />\n              </ListItemIcon>\n              <ListItemText\n                primary=\"Bước 2: Chụp ảnh khuôn mặt\"\n                secondary=\"Chụp 5 ảnh khuôn mặt ở các góc độ khác nhau.\"\n              />\n            </ListItem>\n            <ListItem>\n              <ListItemIcon>\n                <ViewArray />\n              </ListItemIcon>\n              <ListItemText\n                primary=\"Bước 3: Xác nhận thông tin\"\n                secondary=\"Xem lại thông tin và ảnh đã chụp.\"\n              />\n            </ListItem>\n            <ListItem>\n              <ListItemIcon>\n                <SaveAlt />\n              </ListItemIcon>\n              <ListItemText\n                primary=\"Bước 4: Hoàn tất đăng ký\"\n                secondary=\"Hoàn tất quá trình đăng ký khuôn mặt.\"\n              />\n            </ListItem>\n          </List>\n\n          <Typography variant=\"h6\" gutterBottom sx={{ mt: 2 }}>\n            Lưu ý khi chụp ảnh:\n          </Typography>\n          <List>\n            <ListItem>\n              <ListItemIcon>\n                <Info />\n              </ListItemIcon>\n              <ListItemText\n                primary=\"Ánh sáng\"\n                secondary=\"Đảm bảo khuôn mặt được chiếu sáng tốt, tránh ngược sáng.\"\n              />\n            </ListItem>\n            <ListItem>\n              <ListItemIcon>\n                <Info />\n              </ListItemIcon>\n              <ListItemText\n                primary=\"Góc độ\"\n                secondary=\"Chụp ở các góc độ khác nhau: nhìn thẳng, nghiêng trái, nghiêng phải, hơi ngước lên, hơi cúi xuống.\"\n              />\n            </ListItem>\n            <ListItem>\n              <ListItemIcon>\n                <Info />\n              </ListItemIcon>\n              <ListItemText\n                primary=\"Phụ kiện\"\n                secondary=\"Không đeo kính, mũ, khẩu trang hoặc bất kỳ vật che khuôn mặt nào.\"\n              />\n            </ListItem>\n            <ListItem>\n              <ListItemIcon>\n                <Info />\n              </ListItemIcon>\n              <ListItemText\n                primary=\"Khoảng cách\"\n                secondary=\"Giữ khuôn mặt ở khoảng cách vừa phải, chiếm khoảng 70% khung hình.\"\n              />\n            </ListItem>\n          </List>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setShowHelpDialog(false)}>Đóng</Button>\n        </DialogActions>\n      </Dialog>\n    </Box>\n  );\n};\n\nexport default FaceRegistrationPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}